import { enableQuestMobile } from "./functions/questmobile";
import { info, initApp } from "./share/app";
import { setCustomCommon } from "./share/data";
import { check } from "./share/wx";
import { uaFunc } from "./utils/ua";
import deprecated from "./utils/deprecated";
import { isWin } from "./utils/env";
import init from "./init";
/** 初始化入口，需指定appName及version */
export function start(_a) {
    var appName = _a.a, customCommon = _a.c, bussinessId = _a.b, version = _a.v, enableXmLog = _a.xl, thirdpartyId = _a.tid, appKey = _a.ak;
    if (info.bId || !isWin)
        return;
    if (bussinessId) {
        info.bId = bussinessId;
    }
    else {
        throw new Error("config option: bussinessId is missing");
    }
    if (customCommon) {
        setCustomCommon(customCommon);
    }
    if (uaFunc.isWeixin() && !check(appKey, thirdpartyId)) {
        return false;
    }
    if (uaFunc.isIting()) {
        initApp();
    }
    if (appName || version) {
        deprecated("config options: appName and version", "bId(bussinessId)");
    }
    init(enableXmLog);
    enableQuestMobile();
    return true;
}
