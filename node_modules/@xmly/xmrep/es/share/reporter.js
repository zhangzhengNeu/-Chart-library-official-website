var isBeaconAvailable = Boolean(typeof window !== "undefined" && navigator && navigator.sendBeacon);
export var send = function (opts) {
    var url = opts.url, data = opts.data, _a = opts.isOctetData, isOctetData = _a === void 0 ? false : _a, _b = opts.useBeacon, useBeacon = _b === void 0 ? false : _b;
    var beaconStatus;
    if (useBeacon && isBeaconAvailable) {
        try {
            beaconStatus = navigator.sendBeacon(url, data);
            return null;
        }
        catch (err) {
            beaconStatus = false;
        }
    }
    if (!useBeacon || !beaconStatus) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", url, true);
        xhr.setRequestHeader("content-type", isOctetData ? "application/octet-stream" : "application/json");
        xhr.withCredentials = true;
        xhr.send(data);
        return xhr;
    }
    return null;
};
