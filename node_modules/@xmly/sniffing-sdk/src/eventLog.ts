import { DEBUGGER } from './types'

const notSupport = typeof window === 'undefined' || typeof console === 'undefined'

export default (
  prefix = 'Sniffing: ',
  isDebugger: DEBUGGER = false //全局注入打印日志的级别（多少）TODO: 暂时未用到
) => (text: any, level: 'info' | 'warn' | 'error' = 'info') => {
  if (notSupport || !isDebugger) {
    return
  }
  const infoLog = console.log
  const warnLog = console.warn
  const errorLog = console.error
  const info = typeof text === 'string' ? `${prefix}${text}` : text
  if (level === 'error') {
    errorLog(info)
    return
  }
  if (level === 'warn') {
    warnLog(info)
    return
  }
  if (level === 'info') {
    infoLog(info)
  }
}
