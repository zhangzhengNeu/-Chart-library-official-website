/* @xmly/rocket-chart-wordcloud version : 1.0.1-beta4 */
import e from"echarts";var t={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1};var r={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1};var a=Object.prototype.toString;var n=Array.prototype;var i=n.forEach;var o=n.filter;var u=n.slice;var s=n.map;var l=n.reduce;var f={};function v(e,t){if(e==="createCanvas"){y=null}f[e]=t}function c(e){if(e==null||typeof e!=="object"){return e}var n=e;var i=a.call(e);if(i==="[object Array]"){if(!V(e)){n=[];for(var o=0,u=e.length;o<u;o++){n[o]=c(e[o])}}}else if(r[i]){if(!V(e)){var s=e.constructor;if(e.constructor.from){n=s.from(e)}else{n=new s(e.length);for(var o=0,u=e.length;o<u;o++){n[o]=c(e[o])}}}}else if(!t[i]&&!V(e)&&!L(e)){n={};for(var l in e){if(e.hasOwnProperty(l)){n[l]=c(e[l])}}}return n}function d(e,t,r){if(!k(t)||!k(e)){return r?c(t):e}for(var a in t){if(t.hasOwnProperty(a)){var n=e[a];var i=t[a];if(k(i)&&k(n)&&!_(i)&&!_(n)&&!L(i)&&!L(n)&&!F(i)&&!F(n)&&!V(i)&&!V(n)){d(n,i,r)}else if(r||!(a in e)){e[a]=c(t[a])}}}return e}function h(e,t){var r=e[0];for(var a=1,n=e.length;a<n;a++){r=d(r,e[a],t)}return r}function m(e,t){for(var r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}return e}function g(e,t,r){for(var a in t){if(t.hasOwnProperty(a)&&(r?t[a]!=null:e[a]==null)){e[a]=t[a]}}return e}var p=function(){return f.createCanvas()};f.createCanvas=function(){return document.createElement("canvas")};var y;function x(){if(!y){y=p().getContext("2d")}return y}function w(e,t){if(e){if(e.indexOf){return e.indexOf(t)}for(var r=0,a=e.length;r<a;r++){if(e[r]===t){return r}}}return-1}function M(e,t){var r=e.prototype;function a(){}a.prototype=t.prototype;e.prototype=new a;for(var n in r){if(r.hasOwnProperty(n)){e.prototype[n]=r[n]}}e.prototype.constructor=e;e.superClass=t}function b(e,t,r){e="prototype"in e?e.prototype:e;t="prototype"in t?t.prototype:t;g(e,t,r)}function C(e){if(!e){return}if(typeof e==="string"){return false}return typeof e.length==="number"}function I(e,t,r){if(!(e&&t)){return}if(e.forEach&&e.forEach===i){e.forEach(t,r)}else if(e.length===+e.length){for(var a=0,n=e.length;a<n;a++){t.call(r,e[a],a,e)}}else{for(var o in e){if(e.hasOwnProperty(o)){t.call(r,e[o],o,e)}}}}function S(e,t,r){if(!(e&&t)){return}if(e.map&&e.map===s){return e.map(t,r)}else{var a=[];for(var n=0,i=e.length;n<i;n++){a.push(t.call(r,e[n],n,e))}return a}}function T(e,t,r,a){if(!(e&&t)){return}if(e.reduce&&e.reduce===l){return e.reduce(t,r,a)}else{for(var n=0,i=e.length;n<i;n++){r=t.call(a,r,e[n],n,e)}return r}}function O(e,t,r){if(!(e&&t)){return}if(e.filter&&e.filter===o){return e.filter(t,r)}else{var a=[];for(var n=0,i=e.length;n<i;n++){if(t.call(r,e[n],n,e)){a.push(e[n])}}return a}}function A(e,t,r){if(!(e&&t)){return}for(var a=0,n=e.length;a<n;a++){if(t.call(r,e[a],a,e)){return e[a]}}}function E(e,t){var r=u.call(arguments,2);return function(){return e.apply(t,r.concat(u.call(arguments)))}}function N(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}}function _(e){return a.call(e)==="[object Array]"}function R(e){return typeof e==="function"}function D(e){return a.call(e)==="[object String]"}function k(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function F(e){return!!t[a.call(e)]}function P(e){return!!r[a.call(e)]}function L(e){return typeof e==="object"&&typeof e.nodeType==="number"&&typeof e.ownerDocument==="object"}function W(e){return e!==e}function B(e){for(var t=0,r=arguments.length;t<r;t++){if(arguments[t]!=null){return arguments[t]}}}function z(e,t){return e!=null?e:t}function H(e,t,r){return e!=null?e:t!=null?t:r}function j(){return Function.call.apply(u,arguments)}function U(e){if(typeof e==="number"){return[e,e,e,e]}var t=e.length;if(t===2){return[e[0],e[1],e[0],e[1]]}else if(t===3){return[e[0],e[1],e[2],e[1]]}return e}function Y(e,t){if(!e){throw new Error(t)}}function q(e){if(e==null){return null}else if(typeof e.trim==="function"){return e.trim()}else{return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}var X="__ec_primitive__";function $(e){e[X]=true}function V(e){return e[X]}function G(e){var t=_(e);this.data={};var r=this;e instanceof G?e.each(a):e&&I(e,a);function a(e,a){t?r.set(e,a):r.set(a,e)}}G.prototype={constructor:G,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){t!==void 0&&(e=E(e,t));for(var r in this.data){this.data.hasOwnProperty(r)&&e(this.data[r],r)}},removeKey:function(e){delete this.data[e]}};function K(e){return new G(e)}function Z(e,t){var r=new e.constructor(e.length+t.length);for(var a=0;a<e.length;a++){r[a]=e[a]}var n=e.length;for(a=0;a<t.length;a++){r[a+n]=t[a]}return r}function J(){}var Q=v;var ee=c;var te=d;var re=h;var ae=m;var ne=g;var ie=p;var oe=x;var ue=w;var se=M;var le=b;var fe=C;var ve=I;var ce=S;var de=T;var he=O;var me=A;var ge=E;var pe=N;var ye=_;var xe=R;var we=D;var Me=k;var be=F;var Ce=P;var Ie=L;var Se=W;var Te=B;var Oe=z;var Ae=H;var Ee=j;var Ne=U;var _e=Y;var Re=q;var De=$;var ke=V;var Fe=K;var Pe=Z;var Le=J;var We={$override:Q,clone:ee,merge:te,mergeAll:re,extend:ae,defaults:ne,createCanvas:ie,getContext:oe,indexOf:ue,inherits:se,mixin:le,isArrayLike:fe,each:ve,map:ce,reduce:de,filter:he,find:me,bind:ge,curry:pe,isArray:ye,isFunction:xe,isString:we,isObject:Me,isBuiltInObject:be,isTypedArray:Ce,isDom:Ie,eqNaN:Se,retrieve:Te,retrieve2:Oe,retrieve3:Ae,slice:Ee,normalizeCssArray:Ne,assert:_e,trim:Re,setAsPrimitive:De,isPrimitive:ke,createHashMap:Fe,concatArray:Pe,noop:Le};var Be=typeof Float32Array==="undefined"?Array:Float32Array;function ze(e,t){var r=new Be(2);if(e==null){e=0}if(t==null){t=0}r[0]=e;r[1]=t;return r}function He(e,t){e[0]=t[0];e[1]=t[1];return e}function je(e){var t=new Be(2);t[0]=e[0];t[1]=e[1];return t}function Ue(e,t,r){e[0]=t;e[1]=r;return e}function Ye(e,t,r){e[0]=t[0]+r[0];e[1]=t[1]+r[1];return e}function qe(e,t,r,a){e[0]=t[0]+r[0]*a;e[1]=t[1]+r[1]*a;return e}function Xe(e,t,r){e[0]=t[0]-r[0];e[1]=t[1]-r[1];return e}function $e(e){return Math.sqrt(Ge(e))}var Ve=$e;function Ge(e){return e[0]*e[0]+e[1]*e[1]}var Ke=Ge;function Ze(e,t,r){e[0]=t[0]*r[0];e[1]=t[1]*r[1];return e}function Je(e,t,r){e[0]=t[0]/r[0];e[1]=t[1]/r[1];return e}function Qe(e,t){return e[0]*t[0]+e[1]*t[1]}function et(e,t,r){e[0]=t[0]*r;e[1]=t[1]*r;return e}function tt(e,t){var r=$e(t);if(r===0){e[0]=0;e[1]=0}else{e[0]=t[0]/r;e[1]=t[1]/r}return e}function rt(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var at=rt;function nt(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var it=nt;function ot(e,t){e[0]=-t[0];e[1]=-t[1];return e}function ut(e,t,r,a){e[0]=t[0]+a*(r[0]-t[0]);e[1]=t[1]+a*(r[1]-t[1]);return e}function st(e,t,r){var a=t[0];var n=t[1];e[0]=r[0]*a+r[2]*n+r[4];e[1]=r[1]*a+r[3]*n+r[5];return e}function lt(e,t,r){e[0]=Math.min(t[0],r[0]);e[1]=Math.min(t[1],r[1]);return e}function ft(e,t,r){e[0]=Math.max(t[0],r[0]);e[1]=Math.max(t[1],r[1]);return e}var vt=ze;var ct=He;var dt=je;var ht=Ue;var mt=Ye;var gt=qe;var pt=Xe;var yt=$e;var xt=Ve;var wt=Ge;var Mt=Ke;var bt=Ze;var Ct=Je;var It=Qe;var St=et;var Tt=tt;var Ot=rt;var At=at;var Et=nt;var Nt=it;var _t=ot;var Rt=ut;var Dt=st;var kt=lt;var Ft=ft;var Pt={create:vt,copy:ct,clone:dt,set:ht,add:mt,scaleAndAdd:gt,sub:pt,len:yt,length:xt,lenSquare:wt,lengthSquare:Mt,mul:bt,div:Ct,dot:It,scale:St,normalize:Tt,distance:Ot,dist:At,distanceSquare:Et,distSquare:Nt,negate:_t,lerp:Rt,applyTransform:Dt,min:kt,max:Ft};var Lt=typeof Float32Array==="undefined"?Array:Float32Array;function Wt(){var e=new Lt(6);Bt(e);return e}function Bt(e){e[0]=1;e[1]=0;e[2]=0;e[3]=1;e[4]=0;e[5]=0;return e}function zt(e,t){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];return e}function Ht(e,t,r){var a=t[0]*r[0]+t[2]*r[1];var n=t[1]*r[0]+t[3]*r[1];var i=t[0]*r[2]+t[2]*r[3];var o=t[1]*r[2]+t[3]*r[3];var u=t[0]*r[4]+t[2]*r[5]+t[4];var s=t[1]*r[4]+t[3]*r[5]+t[5];e[0]=a;e[1]=n;e[2]=i;e[3]=o;e[4]=u;e[5]=s;return e}function jt(e,t,r){e[0]=t[0];e[1]=t[1];e[2]=t[2];e[3]=t[3];e[4]=t[4]+r[0];e[5]=t[5]+r[1];return e}function Ut(e,t,r){var a=t[0];var n=t[2];var i=t[4];var o=t[1];var u=t[3];var s=t[5];var l=Math.sin(r);var f=Math.cos(r);e[0]=a*f+o*l;e[1]=-a*l+o*f;e[2]=n*f+u*l;e[3]=-n*l+f*u;e[4]=f*i+l*s;e[5]=f*s-l*i;return e}function Yt(e,t,r){var a=r[0];var n=r[1];e[0]=t[0]*a;e[1]=t[1]*n;e[2]=t[2]*a;e[3]=t[3]*n;e[4]=t[4]*a;e[5]=t[5]*n;return e}function qt(e,t){var r=t[0];var a=t[2];var n=t[4];var i=t[1];var o=t[3];var u=t[5];var s=r*o-i*a;if(!s){return null}s=1/s;e[0]=o*s;e[1]=-i*s;e[2]=-a*s;e[3]=r*s;e[4]=(a*u-o*n)*s;e[5]=(i*n-r*u)*s;return e}function Xt(e){var t=Wt();zt(t,e);return t}var $t=Wt;var Vt=Bt;var Gt=zt;var Kt=Ht;var Zt=jt;var Jt=Ut;var Qt=Yt;var er=qt;var tr=Xt;var rr={create:$t,identity:Vt,copy:Gt,mul:Kt,translate:Zt,rotate:Jt,scale:Qt,invert:er,clone:tr};var ar=Pt.applyTransform;var nr=Math.min;var ir=Math.max;function or(e,t,r,a){if(r<0){e=e+r;r=-r}if(a<0){t=t+a;a=-a}this.x=e;this.y=t;this.width=r;this.height=a}or.prototype={constructor:or,union:function(e){var t=nr(e.x,this.x);var r=nr(e.y,this.y);this.width=ir(e.x+e.width,this.x+this.width)-t;this.height=ir(e.y+e.height,this.y+this.height)-r;this.x=t;this.y=r},applyTransform:function(){var e=[];var t=[];var r=[];var a=[];return function(n){if(!n){return}e[0]=r[0]=this.x;e[1]=a[1]=this.y;t[0]=a[0]=this.x+this.width;t[1]=r[1]=this.y+this.height;ar(e,e,n);ar(t,t,n);ar(r,r,n);ar(a,a,n);this.x=nr(e[0],t[0],r[0],a[0]);this.y=nr(e[1],t[1],r[1],a[1]);var i=ir(e[0],t[0],r[0],a[0]);var o=ir(e[1],t[1],r[1],a[1]);this.width=i-this.x;this.height=o-this.y}}(),calculateTransform:function(e){var t=this;var r=e.width/t.width;var a=e.height/t.height;var n=rr.create();rr.translate(n,n,[-t.x,-t.y]);rr.scale(n,n,[r,a]);rr.translate(n,n,[e.x,e.y]);return n},intersect:function(e){if(!e){return false}if(!(e instanceof or)){e=or.create(e)}var t=this;var r=t.x;var a=t.x+t.width;var n=t.y;var i=t.y+t.height;var o=e.x;var u=e.x+e.width;var s=e.y;var l=e.y+e.height;return!(a<o||u<r||i<s||l<n)},contain:function(e,t){var r=this;return e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height},clone:function(){return new or(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x;this.y=e.y;this.width=e.width;this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};or.create=function(e){return new or(e.x,e.y,e.width,e.height)};var ur=or;var sr=ur;var lr=1e-4;function fr(e){return e.replace(/^\s+|\s+$/g,"")}function vr(e,t,r,a){var n=t[1]-t[0];var i=r[1]-r[0];if(n===0){return i===0?r[0]:(r[0]+r[1])/2}if(a){if(n>0){if(e<=t[0]){return r[0]}else if(e>=t[1]){return r[1]}}else{if(e>=t[0]){return r[0]}else if(e<=t[1]){return r[1]}}}else{if(e===t[0]){return r[0]}if(e===t[1]){return r[1]}}return(e-t[0])/n*i+r[0]}function cr(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}if(typeof e==="string"){if(fr(e).match(/%$/)){return parseFloat(e)/100*t}return parseFloat(e)}return e==null?NaN:+e}function dr(e,t,r){if(t==null){t=10}t=Math.min(Math.max(0,t),20);e=(+e).toFixed(t);return r?e:+e}function hr(e){e.sort((function(e,t){return e-t}));return e}function mr(e){e=+e;if(isNaN(e)){return 0}var t=1;var r=0;while(Math.round(e*t)/t!==e){t*=10;r++}return r}function gr(e){var t=e.toString();var r=t.indexOf("e");if(r>0){var a=+t.slice(r+1);return a<0?-a:0}else{var n=t.indexOf(".");return n<0?0:t.length-1-n}}function pr(e,t){var r=Math.log;var a=Math.LN10;var n=Math.floor(r(e[1]-e[0])/a);var i=Math.round(r(Math.abs(t[1]-t[0]))/a);var o=Math.min(Math.max(-n+i,0),20);return!isFinite(o)?20:o}function yr(e,t,r){if(!e[t]){return 0}var a=We.reduce(e,(function(e,t){return e+(isNaN(t)?0:t)}),0);if(a===0){return 0}var n=Math.pow(10,r);var i=We.map(e,(function(e){return(isNaN(e)?0:e)/a*n*100}));var o=n*100;var u=We.map(i,(function(e){return Math.floor(e)}));var s=We.reduce(u,(function(e,t){return e+t}),0);var l=We.map(i,(function(e,t){return e-u[t]}));while(s<o){var f=Number.NEGATIVE_INFINITY;var v=null;for(var c=0,d=l.length;c<d;++c){if(l[c]>f){f=l[c];v=c}}++u[v];l[v]=0;++s}return u[t]/n}var xr=9007199254740991;function wr(e){var t=Math.PI*2;return(e%t+t)%t}function Mr(e){return e>-lr&&e<lr}var br=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Cr(e){if(e instanceof Date){return e}else if(typeof e==="string"){var t=br.exec(e);if(!t){return new Date(NaN)}if(!t[8]){return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}else{var r=+t[4]||0;if(t[8].toUpperCase()!=="Z"){r-=t[8].slice(0,3)}return new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,+t[7]||0))}}else if(e==null){return new Date(NaN)}return new Date(Math.round(e))}function Ir(e){return Math.pow(10,Sr(e))}function Sr(e){if(e===0){return 0}var t=Math.floor(Math.log(e)/Math.LN10);if(e/Math.pow(10,t)>=10){t++}return t}function Tr(e,t){var r=Sr(e);var a=Math.pow(10,r);var n=e/a;var i;if(t){if(n<1.5){i=1}else if(n<2.5){i=2}else if(n<4){i=3}else if(n<7){i=5}else{i=10}}else{if(n<1){i=1}else if(n<2){i=2}else if(n<3){i=3}else if(n<5){i=5}else{i=10}}e=i*a;return r>=-20?+e.toFixed(r<0?-r:0):e}function Or(e,t){var r=(e.length-1)*t+1;var a=Math.floor(r);var n=+e[a-1];var i=r-a;return i?n+i*(e[a]-n):n}function Ar(e){e.sort((function(e,t){return u(e,t,0)?-1:1}));var t=-Infinity;var r=1;for(var a=0;a<e.length;){var n=e[a].interval;var i=e[a].close;for(var o=0;o<2;o++){if(n[o]<=t){n[o]=t;i[o]=!o?1-r:1}t=n[o];r=i[o]}if(n[0]===n[1]&&i[0]*i[1]!==1){e.splice(a,1)}else{a++}}return e;function u(e,t,r){return e.interval[r]<t.interval[r]||e.interval[r]===t.interval[r]&&(e.close[r]-t.close[r]===(!r?1:-1)||!r&&u(e,t,1))}}function Er(e){return e-parseFloat(e)>=0}var Nr=vr;var _r=cr;var Rr=dr;var Dr=hr;var kr=mr;var Fr=gr;var Pr=pr;var Lr=yr;var Wr=xr;var Br=wr;var zr=Mr;var Hr=Cr;var jr=Ir;var Ur=Sr;var Yr=Tr;var qr=Or;var Xr=Ar;var $r=Er;var Vr={linearMap:Nr,parsePercent:_r,round:Rr,asc:Dr,getPrecision:kr,getPrecisionSafe:Fr,getPixelPrecision:Pr,getPercentWithPrecision:Lr,MAX_SAFE_INTEGER:Wr,remRadian:Br,isRadianAroundZero:zr,parseDate:Hr,quantity:jr,quantityExponent:Ur,nice:Yr,quantile:qr,reformIntervals:Xr,isNumeric:$r};var Gr=function(){this.head=null;this.tail=null;this._len=0};var Kr=Gr.prototype;Kr.insert=function(e){var t=new Zr(e);this.insertEntry(t);return t};Kr.insertEntry=function(e){if(!this.head){this.head=this.tail=e}else{this.tail.next=e;e.prev=this.tail;e.next=null;this.tail=e}this._len++};Kr.remove=function(e){var t=e.prev;var r=e.next;if(t){t.next=r}else{this.head=r}if(r){r.prev=t}else{this.tail=t}e.next=e.prev=null;this._len--};Kr.len=function(){return this._len};Kr.clear=function(){this.head=this.tail=null;this._len=0};var Zr=function(e){this.value=e;this.next;this.prev};var Jr=function(e){this._list=new Gr;this._map={};this._maxSize=e||10;this._lastRemovedEntry=null};var Qr=Jr.prototype;Qr.put=function(e,t){var r=this._list;var a=this._map;var n=null;if(a[e]==null){var i=r.len();var o=this._lastRemovedEntry;if(i>=this._maxSize&&i>0){var u=r.head;r.remove(u);delete a[u.key];n=u.value;this._lastRemovedEntry=u}if(o){o.value=t}else{o=new Zr(t)}o.key=e;r.insertEntry(o);a[e]=o}return n};Qr.get=function(e){var t=this._map[e];var r=this._list;if(t!=null){if(t!==r.tail){r.remove(t);r.insertEntry(t)}return t.value}};Qr.clear=function(){this._list.clear();this._map={}};var ea=Jr;var ta=ea;var ra=new ta(50);function aa(e){if(typeof e==="string"){var t=ra.get(e);return t&&t.image}else{return e}}function na(e,t,r,a,n){if(!e){return t}else if(typeof e==="string"){if(t&&t.__zrImageSrc===e||!r){return t}var i=ra.get(e);var o={hostEl:r,cb:a,cbPayload:n};if(i){t=i.image;!oa(t)&&i.pending.push(o)}else{t=new Image;t.onload=t.onerror=ia;ra.put(e,t.__cachedImgObj={image:t,pending:[o]});t.src=t.__zrImageSrc=e}return t}else{return e}}function ia(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t];var a=r.cb;a&&a(this,r.cbPayload);r.hostEl.dirty()}e.pending.length=0}function oa(e){return e&&e.width&&e.height}var ua=aa;var sa=na;var la=oa;var fa={findExistImage:ua,createOrUpdateImage:sa,isImageReady:la};var va=We.getContext;var ca=We.extend;var da=We.retrieve2;var ha=We.retrieve3;var ma=We.trim;var ga={};var pa=0;var ya=5e3;var xa=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var wa="12px sans-serif";var Ma={};function ba(e,t){Ma[e]=t}function Ca(e,t){t=t||wa;var r=e+":"+t;if(ga[r]){return ga[r]}var a=(e+"").split("\n");var n=0;for(var i=0,o=a.length;i<o;i++){n=Math.max(Pa(a[i],t).width,n)}if(pa>ya){pa=0;ga={}}pa++;ga[r]=n;return n}function Ia(e,t,r,a,n,i,o,u){return o?Ta(e,t,r,a,n,i,o,u):Sa(e,t,r,a,n,i,u)}function Sa(e,t,r,a,n,i,o){var u=La(e,t,n,i,o);var s=Ca(e,t);if(n){s+=n[1]+n[3]}var l=u.outerHeight;var f=Oa(0,s,r);var v=Aa(0,l,a);var c=new sr(f,v,s,l);c.lineHeight=u.lineHeight;return c}function Ta(e,t,r,a,n,i,o,u){var s=Wa(e,{rich:o,truncate:u,font:t,textAlign:r,textPadding:n,textLineHeight:i});var l=s.outerWidth;var f=s.outerHeight;var v=Oa(0,l,r);var c=Aa(0,f,a);return new sr(v,c,l,f)}function Oa(e,t,r){if(r==="right"){e-=t}else if(r==="center"){e-=t/2}return e}function Aa(e,t,r){if(r==="middle"){e-=t/2}else if(r==="bottom"){e-=t}return e}function Ea(e,t,r){var a=t.textPosition;var n=t.textDistance;var i=r.x;var o=r.y;n=n||0;var u=r.height;var s=r.width;var l=u/2;var f="left";var v="top";switch(a){case"left":i-=n;o+=l;f="right";v="middle";break;case"right":i+=n+s;o+=l;v="middle";break;case"top":i+=s/2;o-=n;f="center";v="bottom";break;case"bottom":i+=s/2;o+=u+n;f="center";break;case"inside":i+=s/2;o+=l;f="center";v="middle";break;case"insideLeft":i+=n;o+=l;v="middle";break;case"insideRight":i+=s-n;o+=l;f="right";v="middle";break;case"insideTop":i+=s/2;o+=n;f="center";break;case"insideBottom":i+=s/2;o+=u-n;f="center";v="bottom";break;case"insideTopLeft":i+=n;o+=n;break;case"insideTopRight":i+=s-n;o+=n;f="right";break;case"insideBottomLeft":i+=n;o+=u-n;v="bottom";break;case"insideBottomRight":i+=s-n;o+=u-n;f="right";v="bottom";break}e=e||{};e.x=i;e.y=o;e.textAlign=f;e.textVerticalAlign=v;return e}function Na(e,t,r){var a={textPosition:e,textDistance:r};return Ea({},a,t)}function _a(e,t,r,a,n){if(!t){return""}var i=(e+"").split("\n");n=Ra(t,r,a,n);for(var o=0,u=i.length;o<u;o++){i[o]=Da(i[o],n)}return i.join("\n")}function Ra(e,t,r,a){a=ca({},a);a.font=t;var r=da(r,"...");a.maxIterations=da(a.maxIterations,2);var n=a.minChar=da(a.minChar,0);a.cnCharWidth=Ca("国",t);var i=a.ascCharWidth=Ca("a",t);a.placeholder=da(a.placeholder,"");var o=e=Math.max(0,e-1);for(var u=0;u<n&&o>=i;u++){o-=i}var s=Ca(r,t);if(s>o){r="";s=0}o=e-s;a.ellipsis=r;a.ellipsisWidth=s;a.contentWidth=o;a.containerWidth=e;return a}function Da(e,t){var r=t.containerWidth;var a=t.font;var n=t.contentWidth;if(!r){return""}var i=Ca(e,a);if(i<=r){return e}for(var o=0;;o++){if(i<=n||o>=t.maxIterations){e+=t.ellipsis;break}var u=o===0?ka(e,n,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(e.length*n/i):0;e=e.substr(0,u);i=Ca(e,a)}if(e===""){e=t.placeholder}return e}function ka(e,t,r,a){var n=0;var i=0;for(var o=e.length;i<o&&n<t;i++){var u=e.charCodeAt(i);n+=0<=u&&u<=127?r:a}return i}function Fa(e){return Ca("国",e)}function Pa(e,t){return Ma.measureText(e,t)}Ma.measureText=function(e,t){var r=va();r.font=t||wa;return r.measureText(e)};function La(e,t,r,a,n){e!=null&&(e+="");var i=da(a,Fa(t));var o=e?e.split("\n"):[];var u=o.length*i;var s=u;var l=true;if(r){s+=r[0]+r[2]}if(e&&n){l=false;var f=n.outerHeight;var v=n.outerWidth;if(f!=null&&s>f){e="";o=[]}else if(v!=null){var c=Ra(v-(r?r[1]+r[3]:0),t,n.ellipsis,{minChar:n.minChar,placeholder:n.placeholder});for(var d=0,h=o.length;d<h;d++){o[d]=Da(o[d],c)}}}return{lines:o,height:u,outerHeight:s,lineHeight:i,canCacheByTextString:l}}function Wa(e,t){var r={lines:[],width:0,height:0};e!=null&&(e+="");if(!e){return r}var a=xa.lastIndex=0;var n;while((n=xa.exec(e))!=null){var i=n.index;if(i>a){Ba(r,e.substring(a,i))}Ba(r,n[2],n[1]);a=xa.lastIndex}if(a<e.length){Ba(r,e.substring(a,e.length))}var o=r.lines;var u=0;var s=0;var l=[];var f=t.textPadding;var v=t.truncate;var c=v&&v.outerWidth;var d=v&&v.outerHeight;if(f){c!=null&&(c-=f[1]+f[3]);d!=null&&(d-=f[0]+f[2])}for(var h=0;h<o.length;h++){var m=o[h];var g=0;var p=0;for(var y=0;y<m.tokens.length;y++){var x=m.tokens[y];var w=x.styleName&&t.rich[x.styleName]||{};var M=x.textPadding=w.textPadding;var b=x.font=w.font||t.font;var C=x.textHeight=da(w.textHeight,Fa(b));M&&(C+=M[0]+M[2]);x.height=C;x.lineHeight=ha(w.textLineHeight,t.textLineHeight,C);x.textAlign=w&&w.textAlign||t.textAlign;x.textVerticalAlign=w&&w.textVerticalAlign||"middle";if(d!=null&&u+x.lineHeight>d){return{lines:[],width:0,height:0}}x.textWidth=Ca(x.text,b);var I=w.textWidth;var S=I==null||I==="auto";if(typeof I==="string"&&I.charAt(I.length-1)==="%"){x.percentWidth=I;l.push(x);I=0}else{if(S){I=x.textWidth;var T=w.textBackgroundColor;var O=T&&T.image;if(O){O=fa.findExistImage(O);if(fa.isImageReady(O)){I=Math.max(I,O.width*C/O.height)}}}var A=M?M[1]+M[3]:0;I+=A;var E=c!=null?c-p:null;if(E!=null&&E<I){if(!S||E<A){x.text="";x.textWidth=I=0}else{x.text=_a(x.text,E-A,b,v.ellipsis,{minChar:v.minChar});x.textWidth=Ca(x.text,b);I=x.textWidth+A}}}p+=x.width=I;w&&(g=Math.max(g,x.lineHeight))}m.width=p;m.lineHeight=g;u+=g;s=Math.max(s,p)}r.outerWidth=r.width=da(t.textWidth,s);r.outerHeight=r.height=da(t.textHeight,u);if(f){r.outerWidth+=f[1]+f[3];r.outerHeight+=f[0]+f[2]}for(var h=0;h<l.length;h++){var x=l[h];var N=x.percentWidth;x.width=parseInt(N,10)/100*s}return r}function Ba(e,t,r){var a=t==="";var n=t.split("\n");var i=e.lines;for(var o=0;o<n.length;o++){var u=n[o];var s={styleName:r,text:u,isLineHolder:!u&&!a};if(!o){var l=(i[i.length-1]||(i[0]={tokens:[]})).tokens;var f=l.length;f===1&&l[0].isLineHolder?l[0]=s:(u||!f||a)&&l.push(s)}else{i.push({tokens:[s]})}}}function za(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&ma(t)||e.textFont||e.font}var Ha=wa;var ja=ba;var Ua=Ca;var Ya=Ia;var qa=Oa;var Xa=Aa;var $a=Ea;var Va=Na;var Ga=_a;var Ka=Fa;var Za=Pa;var Ja=La;var Qa=Wa;var en=za;var tn={DEFAULT_FONT:Ha,$override:ja,getWidth:Ua,getBoundingRect:Ya,adjustTextX:qa,adjustTextY:Xa,calculateTextPosition:$a,adjustTextPositionOnRect:Va,truncateText:Ga,getLineHeight:Ka,measureText:Za,parsePlainText:Ja,parseRichText:Qa,makeFont:en};function rn(e){if(isNaN(e)){return"-"}e=(e+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function an(e,t){e=(e||"").toLowerCase().replace(/-(.)/g,(function(e,t){return t.toUpperCase()}));if(t&&e){e=e.charAt(0).toUpperCase()+e.slice(1)}return e}var nn=We.normalizeCssArray;var on=/([&<>"'])/g;var un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function sn(e){return e==null?"":(e+"").replace(on,(function(e,t){return un[t]}))}var ln=["a","b","c","d","e","f","g"];var fn=function(e,t){return"{"+e+(t==null?"":t)+"}"};function vn(e,t,r){if(!We.isArray(t)){t=[t]}var a=t.length;if(!a){return""}var n=t[0].$vars||[];for(var i=0;i<n.length;i++){var o=ln[i];e=e.replace(fn(o),fn(o,0))}for(var u=0;u<a;u++){for(var s=0;s<n.length;s++){var l=t[u][n[s]];e=e.replace(fn(ln[s],u),r?sn(l):l)}}return e}function cn(e,t,r){We.each(t,(function(t,a){e=e.replace("{"+a+"}",r?sn(t):t)}));return e}function dn(e,t){e=We.isString(e)?{color:e,extraCssText:t}:e||{};var r=e.color;var a=e.type;var t=e.extraCssText;var n=e.renderMode||"html";var i=e.markerId||"X";if(!r){return""}if(n==="html"){return a==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;'+"border-radius:4px;width:4px;height:4px;background-color:"+sn(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;'+"border-radius:10px;width:10px;height:10px;background-color:"+sn(r)+";"+(t||"")+'"></span>'}else{return{renderMode:n,content:"{marker"+i+"|}  ",style:{color:r}}}}function hn(e,t){e+="";return"0000".substr(0,t-e.length)+e}function mn(e,t,r){if(e==="week"||e==="month"||e==="quarter"||e==="half-year"||e==="year"){e="MM-dd\nyyyy"}var a=Vr.parseDate(t);var n=r?"UTC":"";var i=a["get"+n+"FullYear"]();var o=a["get"+n+"Month"]()+1;var u=a["get"+n+"Date"]();var s=a["get"+n+"Hours"]();var l=a["get"+n+"Minutes"]();var f=a["get"+n+"Seconds"]();var v=a["get"+n+"Milliseconds"]();e=e.replace("MM",hn(o,2)).replace("M",o).replace("yyyy",i).replace("yy",i%100).replace("dd",hn(u,2)).replace("d",u).replace("hh",hn(s,2)).replace("h",s).replace("mm",hn(l,2)).replace("m",l).replace("ss",hn(f,2)).replace("s",f).replace("SSS",hn(v,3));return e}function gn(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}var pn=tn.truncateText;function yn(e){return tn.getBoundingRect(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)}function xn(e,t,r,a,n,i,o,u){return tn.getBoundingRect(e,t,r,a,n,u,i,o)}var wn=rn;var Mn=an;var bn=nn;var Cn=sn;var In=vn;var Sn=cn;var Tn=dn;var On=mn;var An=gn;var En=pn;var Nn=yn;var _n=xn;var Rn={addCommas:wn,toCamelCase:Mn,normalizeCssArray:bn,encodeHTML:Cn,formatTpl:In,formatTplSimple:Sn,getTooltipMarker:Tn,formatTime:On,capitalFirst:An,truncateText:En,getTextBoundingRect:Nn,getTextRect:_n};var Dn=Vr.parsePercent;var kn=We.each;var Fn=["left","right","top","bottom","width","height"];var Pn=[["width","left","right"],["height","top","bottom"]];function Ln(e,t,r,a,n){var i=0;var o=0;if(a==null){a=Infinity}if(n==null){n=Infinity}var u=0;t.eachChild((function(s,l){var f=s.position;var v=s.getBoundingRect();var c=t.childAt(l+1);var d=c&&c.getBoundingRect();var h;var m;if(e==="horizontal"){var g=v.width+(d?-d.x+v.x:0);h=i+g;if(h>a||s.newline){i=0;h=g;o+=u+r;u=v.height}else{u=Math.max(u,v.height)}}else{var p=v.height+(d?-d.y+v.y:0);m=o+p;if(m>n||s.newline){i+=u+r;o=0;m=p;u=v.width}else{u=Math.max(u,v.width)}}if(s.newline){return}f[0]=i;f[1]=o;e==="horizontal"?i=h+r:o=m+r}))}var Wn=Ln;var Bn=We.curry(Ln,"vertical");var zn=We.curry(Ln,"horizontal");function Hn(e,t,r){var a=t.width;var n=t.height;var i=Dn(e.x,a);var o=Dn(e.y,n);var u=Dn(e.x2,a);var s=Dn(e.y2,n);(isNaN(i)||isNaN(parseFloat(e.x)))&&(i=0);(isNaN(u)||isNaN(parseFloat(e.x2)))&&(u=a);(isNaN(o)||isNaN(parseFloat(e.y)))&&(o=0);(isNaN(s)||isNaN(parseFloat(e.y2)))&&(s=n);r=Rn.normalizeCssArray(r||0);return{width:Math.max(u-i-r[1]-r[3],0),height:Math.max(s-o-r[0]-r[2],0)}}function jn(e,t,r){r=Rn.normalizeCssArray(r||0);var a=t.width;var n=t.height;var i=Dn(e.left,a);var o=Dn(e.top,n);var u=Dn(e.right,a);var s=Dn(e.bottom,n);var l=Dn(e.width,a);var f=Dn(e.height,n);var v=r[2]+r[0];var c=r[1]+r[3];var d=e.aspect;if(isNaN(l)){l=a-u-c-i}if(isNaN(f)){f=n-s-v-o}if(d!=null){if(isNaN(l)&&isNaN(f)){if(d>a/n){l=a*.8}else{f=n*.8}}if(isNaN(l)){l=d*f}if(isNaN(f)){f=l/d}}if(isNaN(i)){i=a-u-l-c}if(isNaN(o)){o=n-s-f-v}switch(e.left||e.right){case"center":i=a/2-l/2-r[3];break;case"right":i=a-l-c;break}switch(e.top||e.bottom){case"middle":case"center":o=n/2-f/2-r[0];break;case"bottom":o=n-f-v;break}i=i||0;o=o||0;if(isNaN(l)){l=a-c-i-(u||0)}if(isNaN(f)){f=n-v-o-(s||0)}var h=new sr(i+r[3],o+r[0],l,f);h.margin=r;return h}function Un(e,t,r,a,n){var i=!n||!n.hv||n.hv[0];var o=!n||!n.hv||n.hv[1];var u=n&&n.boundingMode||"all";if(!i&&!o){return}var s;if(u==="raw"){s=e.type==="group"?new sr(0,0,+t.width||0,+t.height||0):e.getBoundingRect()}else{s=e.getBoundingRect();if(e.needLocalTransform()){var l=e.getLocalTransform();s=s.clone();s.applyTransform(l)}}t=jn(We.defaults({width:s.width,height:s.height},t),r,a);var f=e.position;var v=i?t.x-s.x:0;var c=o?t.y-s.y:0;e.attr("position",u==="raw"?[v,c]:[f[0]+v,f[1]+c])}function Yn(e,t){return e[Pn[t][0]]!=null||e[Pn[t][1]]!=null&&e[Pn[t][2]]!=null}function qn(e,t,r){!We.isObject(r)&&(r={});var a=r.ignoreSize;!We.isArray(a)&&(a=[a,a]);var n=o(Pn[0],0);var i=o(Pn[1],1);l(Pn[0],e,n);l(Pn[1],e,i);function o(r,n){var i={};var o=0;var l={};var f=0;var v=2;kn(r,(function(t){l[t]=e[t]}));kn(r,(function(e){u(t,e)&&(i[e]=l[e]=t[e]);s(i,e)&&o++;s(l,e)&&f++}));if(a[n]){if(s(t,r[1])){l[r[2]]=null}else if(s(t,r[2])){l[r[1]]=null}return l}if(f===v||!o){return l}else if(o>=v){return i}else{for(var c=0;c<r.length;c++){var d=r[c];if(!u(i,d)&&u(e,d)){i[d]=e[d];break}}return i}}function u(e,t){return e.hasOwnProperty(t)}function s(e,t){return e[t]!=null&&e[t]!=="auto"}function l(e,t,r){kn(e,(function(e){t[e]=r[e]}))}}function Xn(e){return $n({},e)}function $n(e,t){t&&e&&kn(Fn,(function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}));return e}var Vn=Fn;var Gn=Pn;var Kn=Wn;var Zn=Bn;var Jn=zn;var Qn=Hn;var ei=jn;var ti=Un;var ri=Yn;var ai=qn;var ni=Xn;var ii=$n;var oi={LOCATION_PARAMS:Vn,HV_NAMES:Gn,box:Kn,vbox:Zn,hbox:Jn,getAvailableSize:Qn,getLayoutRect:ei,positionElement:ti,sizeCalculable:ri,mergeLayoutParam:ai,getLayoutParams:ni,copyLayoutParams:ii};var ui={};if(typeof wx==="object"&&typeof wx.getSystemInfoSync==="function"){ui={browser:{},os:{},node:false,wxa:true,canvasSupported:true,svgSupported:false,touchEventsSupported:true,domSupported:false}}else if(typeof document==="undefined"&&typeof self!=="undefined"){ui={browser:{},os:{},node:false,worker:true,canvasSupported:true,domSupported:false}}else if(typeof navigator==="undefined"){ui={browser:{},os:{},node:true,worker:false,canvasSupported:true,svgSupported:true,domSupported:false}}else{ui=li(navigator.userAgent)}var si=ui;function li(e){var t={};var r={};var a=e.match(/Firefox\/([\d.]+)/);var n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/);var i=e.match(/Edge\/([\d.]+)/);var o=/micromessenger/i.test(e);if(a){r.firefox=true;r.version=a[1]}if(n){r.ie=true;r.version=n[1]}if(i){r.edge=true;r.version=i[1]}if(o){r.weChat=true}return{browser:r,os:t,node:false,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:typeof SVGRect!=="undefined",touchEventsSupported:"ontouchstart"in window&&!r.ie&&!r.edge,pointerEventsSupported:"onpointerdown"in window&&(r.edge||r.ie&&r.version>=11),domSupported:typeof document!=="undefined"}}var fi=si;var vi=We.each;var ci=We.isObject;var di=We.isArray;var hi="series\0";function mi(e){return e instanceof Array?e:e==null?[]:[e]}function gi(e,t,r){if(e){e[t]=e[t]||{};e.emphasis=e.emphasis||{};e.emphasis[t]=e.emphasis[t]||{};for(var a=0,n=r.length;a<n;a++){var i=r[a];if(!e.emphasis[t].hasOwnProperty(i)&&e[t].hasOwnProperty(i)){e.emphasis[t][i]=e[t][i]}}}}var pi=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function yi(e){return ci(e)&&!di(e)&&!(e instanceof Date)?e.value:e}function xi(e){return ci(e)&&!(e instanceof Array)}function wi(e,t){t=(t||[]).slice();var r=We.map(e||[],(function(e,t){return{exist:e}}));vi(t,(function(e,a){if(!ci(e)){return}for(var n=0;n<r.length;n++){if(!r[n].option&&e.id!=null&&r[n].exist.id===e.id+""){r[n].option=e;t[a]=null;return}}for(var n=0;n<r.length;n++){var i=r[n].exist;if(!r[n].option&&(i.id==null||e.id==null)&&e.name!=null&&!Ci(e)&&!Ci(i)&&i.name===e.name+""){r[n].option=e;t[a]=null;return}}}));vi(t,(function(e,t){if(!ci(e)){return}var a=0;for(;a<r.length;a++){var n=r[a].exist;if(!r[a].option&&!Ci(n)&&e.id==null){r[a].option=e;break}}if(a>=r.length){r.push({option:e})}}));return r}function Mi(e){var t=We.createHashMap();vi(e,(function(e,r){var a=e.exist;a&&t.set(a.id,e)}));vi(e,(function(e,r){var a=e.option;We.assert(!a||a.id==null||!t.get(a.id)||t.get(a.id)===e,"id duplicates: "+(a&&a.id));a&&a.id!=null&&t.set(a.id,e);!e.keyInfo&&(e.keyInfo={})}));vi(e,(function(e,r){var a=e.exist;var n=e.option;var i=e.keyInfo;if(!ci(n)){return}i.name=n.name!=null?n.name+"":a?a.name:hi+r;if(a){i.id=a.id}else if(n.id!=null){i.id=n.id+""}else{var o=0;do{i.id="\0"+i.name+"\0"+o++}while(t.get(i.id))}t.set(i.id,e)}))}function bi(e){var t=e.name;return!!(t&&t.indexOf(hi))}function Ci(e){return ci(e)&&e.id&&(e.id+"").indexOf("\0_ec_\0")===0}function Ii(e,t){var r={};var a={};n(e||[],r);n(t||[],a,r);return[i(r),i(a)];function n(e,t,r){for(var a=0,n=e.length;a<n;a++){var i=e[a].seriesId;var o=mi(e[a].dataIndex);var u=r&&r[i];for(var s=0,l=o.length;s<l;s++){var f=o[s];if(u&&u[f]){u[f]=null}else{(t[i]||(t[i]={}))[f]=1}}}}function i(e,t){var r=[];for(var a in e){if(e.hasOwnProperty(a)&&e[a]!=null){if(t){r.push(+a)}else{var n=i(e[a],true);n.length&&r.push({seriesId:a,dataIndex:n})}}}return r}}function Si(e,t){if(t.dataIndexInside!=null){return t.dataIndexInside}else if(t.dataIndex!=null){return We.isArray(t.dataIndex)?We.map(t.dataIndex,(function(t){return e.indexOfRawIndex(t)})):e.indexOfRawIndex(t.dataIndex)}else if(t.name!=null){return We.isArray(t.name)?We.map(t.name,(function(t){return e.indexOfName(t)})):e.indexOfName(t.name)}}function Ti(){var e="__\0ec_inner_"+Oi+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var Oi=0;function Ai(e,t,r){if(We.isString(t)){var a={};a[t+"Index"]=0;t=a}var n=r&&r.defaultMainType;if(n&&!Ei(t,n+"Index")&&!Ei(t,n+"Id")&&!Ei(t,n+"Name")){t[n+"Index"]=0}var i={};vi(t,(function(a,n){var a=t[n];if(n==="dataIndex"||n==="dataIndexInside"){i[n]=a;return}var o=n.match(/^(\w+)(Index|Id|Name)$/)||[];var u=o[1];var s=(o[2]||"").toLowerCase();if(!u||!s||a==null||s==="index"&&a==="none"||r&&r.includeMainTypes&&We.indexOf(r.includeMainTypes,u)<0){return}var l={mainType:u};if(s!=="index"||a!=="all"){l[s]=a}var f=e.queryComponents(l);i[u+"Models"]=f;i[u+"Model"]=f[0]}));return i}function Ei(e,t){return e&&e.hasOwnProperty(t)}function Ni(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function _i(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function Ri(e){if(e==="auto"){return fi.domSupported?"html":"richText"}else{return e||"html"}}function Di(e,t){var r=We.createHashMap();var a=[];We.each(e,(function(e){var n=t(e);(r.get(n)||(a.push(n),r.set(n,[]))).push(e)}));return{keys:a,buckets:r}}var ki=mi;var Fi=gi;var Pi=pi;var Li=yi;var Wi=xi;var Bi=wi;var zi=Mi;var Hi=bi;var ji=Ci;var Ui=Ii;var Yi=Si;var qi=Ti;var Xi=Ai;var $i=Ni;var Vi=_i;var Gi=Ri;var Ki=Di;var Zi={normalizeToArray:ki,defaultEmphasis:Fi,TEXT_STYLE_OPTIONS:Pi,getDataItemValue:Li,isDataItemOption:Wi,mappingToExists:Bi,makeIdAndName:zi,isNameSpecified:Hi,isIdInner:ji,compressBatches:Ui,queryDataIndex:Yi,makeInner:qi,parseFinder:Xi,setAttribute:$i,getAttribute:Vi,getTooltipRenderMode:Gi,groupData:Ki};var Ji=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function Qi(e){var t={exports:{}};return e(t,t.exports),t.exports}var eo=".";var to="___EC__COMPONENT__CONTAINER___";function ro(e){var t={main:"",sub:""};if(e){e=e.split(eo);t.main=e[0]||"";t.sub=e[1]||""}return t}function ao(e){We.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function no(e,t){e.$constructor=e;e.extend=function(e){var t=this;var r=function(){if(!e.$constructor){t.apply(this,arguments)}else{e.$constructor.apply(this,arguments)}};We.extend(r.prototype,e);r.extend=this.extend;r.superCall=uo;r.superApply=so;We.inherits(r,this);r.superClass=t;return r}}var io=0;function oo(e){var t=["__\0is_clz",io++,Math.random().toFixed(3)].join("_");e.prototype[t]=true;e.isInstance=function(e){return!!(e&&e[t])}}function uo(e,t){var r=We.slice(arguments,2);return this.superClass.prototype[t].apply(e,r)}function so(e,t,r){return this.superClass.prototype[t].apply(e,r)}function lo(e,t){t=t||{};var r={};e.registerClass=function(e,t){if(t){ao(t);t=ro(t);if(!t.sub){r[t.main]=e}else if(t.sub!==to){var n=a(t);n[t.sub]=e}}return e};e.getClass=function(e,t,a){var n=r[e];if(n&&n[to]){n=t?n[t]:null}if(a&&!n){throw new Error(!t?e+"."+"type should be specified.":"Component "+e+"."+(t||"")+" not exists. Load it first.")}return n};e.getClassesByMainType=function(e){e=ro(e);var t=[];var a=r[e.main];if(a&&a[to]){We.each(a,(function(e,r){r!==to&&t.push(e)}))}else{t.push(a)}return t};e.hasClass=function(e){e=ro(e);return!!r[e.main]};e.getAllClassMainTypes=function(){var e=[];We.each(r,(function(t,r){e.push(r)}));return e};e.hasSubTypes=function(e){e=ro(e);var t=r[e.main];return t&&t[to]};e.parseClassType=ro;function a(e){var t=r[e.main];if(!t||!t[to]){t=r[e.main]={};t[to]=true}return t}if(t.registerWhenExtend){var n=e.extend;if(n){e.extend=function(t){var r=n.call(this,t);return e.registerClass(r,t.type)}}}return e}function fo(e,t){}var vo=ro;var co=no;var ho=oo;var mo=lo;var go=fo;var po={parseClassType:vo,enableClassExtend:co,enableClassCheck:ho,enableClassManagement:mo,setReadOnly:go};var yo="original";var xo="arrayRows";var wo="objectRows";var Mo="keyedColumns";var bo="unknown";var Co="typedArray";var Io="column";var So="row";var To=yo;var Oo=xo;var Ao=wo;var Eo=Mo;var No=bo;var _o=Co;var Ro=Io;var Do=So;var ko={SOURCE_FORMAT_ORIGINAL:To,SOURCE_FORMAT_ARRAY_ROWS:Oo,SOURCE_FORMAT_OBJECT_ROWS:Ao,SOURCE_FORMAT_KEYED_COLUMNS:Eo,SOURCE_FORMAT_UNKNOWN:No,SOURCE_FORMAT_TYPED_ARRAY:_o,SERIES_LAYOUT_BY_COLUMN:Ro,SERIES_LAYOUT_BY_ROW:Do};var Fo=We.createHashMap;var Po=We.isTypedArray;var Lo=po.enableClassCheck;var Wo=ko.SOURCE_FORMAT_ORIGINAL;var Bo=ko.SERIES_LAYOUT_BY_COLUMN;var zo=ko.SOURCE_FORMAT_UNKNOWN;var Ho=ko.SOURCE_FORMAT_TYPED_ARRAY;var jo=ko.SOURCE_FORMAT_KEYED_COLUMNS;function Uo(e){this.fromDataset=e.fromDataset;this.data=e.data||(e.sourceFormat===jo?{}:[]);this.sourceFormat=e.sourceFormat||zo;this.seriesLayoutBy=e.seriesLayoutBy||Bo;this.dimensionsDefine=e.dimensionsDefine;this.encodeDefine=e.encodeDefine&&Fo(e.encodeDefine);this.startIndex=e.startIndex||0;this.dimensionsDetectCount=e.dimensionsDetectCount}Uo.seriesDataToSource=function(e){return new Uo({data:e,sourceFormat:Po(e)?Ho:Wo,fromDataset:false})};Lo(Uo);var Yo=Uo;var qo=Yo;var Xo=Zi.makeInner;var $o=Zi.getDataItemValue;var Vo=We.createHashMap;var Go=We.each;var Ko=We.map;var Zo=We.isArray;var Jo=We.isString;var Qo=We.isObject;var eu=We.isTypedArray;var tu=We.isArrayLike;var ru=We.extend;var au=ko.SOURCE_FORMAT_ORIGINAL;var nu=ko.SOURCE_FORMAT_ARRAY_ROWS;var iu=ko.SOURCE_FORMAT_OBJECT_ROWS;var ou=ko.SOURCE_FORMAT_KEYED_COLUMNS;var uu=ko.SOURCE_FORMAT_UNKNOWN;var su=ko.SOURCE_FORMAT_TYPED_ARRAY;var lu=ko.SERIES_LAYOUT_BY_ROW;var fu={Must:1,Might:2,Not:3};var vu=Xo();function cu(e){var t=e.option.source;var r=uu;if(eu(t)){r=su}else if(Zo(t)){if(t.length===0){r=nu}for(var a=0,n=t.length;a<n;a++){var i=t[a];if(i==null){continue}else if(Zo(i)){r=nu;break}else if(Qo(i)){r=iu;break}}}else if(Qo(t)){for(var o in t){if(t.hasOwnProperty(o)&&tu(t[o])){r=ou;break}}}else if(t!=null){throw new Error("Invalid data")}vu(e).sourceFormat=r}function du(e){return vu(e).source}function hu(e){vu(e).datasetMap=Vo()}function mu(e){var t=e.option;var r=t.data;var a=eu(r)?su:au;var n=false;var i=t.seriesLayoutBy;var o=t.sourceHeader;var u=t.dimensions;var s=bu(e);if(s){var l=s.option;r=l.source;a=vu(s).sourceFormat;n=true;i=i||l.seriesLayoutBy;o==null&&(o=l.sourceHeader);u=u||l.dimensions}var f=gu(r,a,i,o,u);vu(e).source=new qo({data:r,fromDataset:n,seriesLayoutBy:i,sourceFormat:a,dimensionsDefine:f.dimensionsDefine,startIndex:f.startIndex,dimensionsDetectCount:f.dimensionsDetectCount,encodeDefine:t.encode})}function gu(e,t,r,a,n){if(!e){return{dimensionsDefine:pu(n)}}var i;var o;if(t===nu){if(a==="auto"||a==null){yu((function(e){if(e!=null&&e!=="-"){if(Jo(e)){o==null&&(o=1)}else{o=0}}}),r,e,10)}else{o=a?1:0}if(!n&&o===1){n=[];yu((function(e,t){n[t]=e!=null?e:""}),r,e)}i=n?n.length:r===lu?e.length:e[0]?e[0].length:null}else if(t===iu){if(!n){n=xu(e)}}else if(t===ou){if(!n){n=[];Go(e,(function(e,t){n.push(t)}))}}else if(t===au){var u=$o(e[0]);i=Zo(u)&&u.length||1}else;return{startIndex:o,dimensionsDefine:pu(n),dimensionsDetectCount:i}}function pu(e){if(!e){return}var t=Vo();return Ko(e,(function(e,r){e=ru({},Qo(e)?e:{name:e});if(e.name==null){return e}e.name+="";if(e.displayName==null){e.displayName=e.name}var a=t.get(e.name);if(!a){t.set(e.name,{count:1})}else{e.name+="-"+a.count++}return e}))}function yu(e,t,r,a){a==null&&(a=Infinity);if(t===lu){for(var n=0;n<r.length&&n<a;n++){e(r[n]?r[n][0]:null,n)}}else{var i=r[0]||[];for(var n=0;n<i.length&&n<a;n++){e(i[n],n)}}}function xu(e){var t=0;var r;while(t<e.length&&!(r=e[t++])){}if(r){var a=[];Go(r,(function(e,t){a.push(t)}));return a}}function wu(e,t,r){var a={};var n=bu(t);if(!n||!e){return a}var i=[];var o=[];var u=t.ecModel;var s=vu(u).datasetMap;var l=n.uid+"_"+r.seriesLayoutBy;var f;var v;e=e.slice();Go(e,(function(t,r){!Qo(t)&&(e[r]={name:t});if(t.type==="ordinal"&&f==null){f=r;v=h(e[r])}a[t.name]=[]}));var c=s.get(l)||s.set(l,{categoryWayDim:v,valueWayDim:0});Go(e,(function(e,t){var r=e.name;var n=h(e);if(f==null){var u=c.valueWayDim;d(a[r],u,n);d(o,u,n);c.valueWayDim+=n}else if(f===t){d(a[r],0,n);d(i,0,n)}else{var u=c.categoryWayDim;d(a[r],u,n);d(o,u,n);c.categoryWayDim+=n}}));function d(e,t,r){for(var a=0;a<r;a++){e.push(t+a)}}function h(e){var t=e.dimsDef;return t?t.length:1}i.length&&(a.itemName=i);o.length&&(a.seriesName=o);return a}function Mu(e,t,r){var a={};var n=bu(e);if(!n){return a}var i=t.sourceFormat;var o=t.dimensionsDefine;var u;if(i===iu||i===ou){Go(o,(function(e,t){if((Qo(e)?e.name:e)==="name"){u=t}}))}var s=function(){var e={};var a={};var n=[];for(var s=0,l=Math.min(5,r);s<l;s++){var f=Iu(t.data,i,t.seriesLayoutBy,o,t.startIndex,s);n.push(f);var v=f===fu.Not;if(v&&e.v==null&&s!==u){e.v=s}if(e.n==null||e.n===e.v||!v&&n[e.n]===fu.Not){e.n=s}if(c(e)&&n[e.n]!==fu.Not){return e}if(!v){if(f===fu.Might&&a.v==null&&s!==u){a.v=s}if(a.n==null||a.n===a.v){a.n=s}}}function c(e){return e.v!=null&&e.n!=null}return c(e)?e:c(a)?a:null}();if(s){a.value=s.v;var l=u!=null?u:s.n;a.itemName=[l];a.seriesName=[l]}return a}function bu(e){var t=e.option;var r=t.data;if(!r){return e.ecModel.getComponent("dataset",t.datasetIndex||0)}}function Cu(e,t){return Iu(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Iu(e,t,r,a,n,i){var o;var u=5;if(eu(e)){return fu.Not}var s;var l;if(a){var f=a[i];if(Qo(f)){s=f.name;l=f.type}else if(Jo(f)){s=f}}if(l!=null){return l==="ordinal"?fu.Must:fu.Not}if(t===nu){if(r===lu){var v=e[i];for(var c=0;c<(v||[]).length&&c<u;c++){if((o=g(v[n+c]))!=null){return o}}}else{for(var c=0;c<e.length&&c<u;c++){var d=e[n+c];if(d&&(o=g(d[i]))!=null){return o}}}}else if(t===iu){if(!s){return fu.Not}for(var c=0;c<e.length&&c<u;c++){var h=e[c];if(h&&(o=g(h[s]))!=null){return o}}}else if(t===ou){if(!s){return fu.Not}var v=e[s];if(!v||eu(v)){return fu.Not}for(var c=0;c<v.length&&c<u;c++){if((o=g(v[c]))!=null){return o}}}else if(t===au){for(var c=0;c<e.length&&c<u;c++){var h=e[c];var m=$o(h);if(!Zo(m)){return fu.Not}if((o=g(m[i]))!=null){return o}}}function g(e){var t=Jo(e);if(e!=null&&isFinite(e)&&e!==""){return t?fu.Might:fu.Not}else if(t&&e!=="-"){return fu.Must}}return fu.Not}var Su=fu;var Tu=cu;var Ou=du;var Au=hu;var Eu=mu;var Nu=wu;var _u=Mu;var Ru=Cu;var Du={BE_ORDINAL:Su,detectSourceFormat:Tu,getSource:Ou,resetSourceDefaulter:Au,prepareSource:Eu,makeSeriesEncodeForAxisCoordSys:Nu,makeSeriesEncodeForNameBased:_u,guessOrdinal:Ru};var ku=We.each;var Fu=We.createHashMap;var Pu=Fu(["tooltip","label","itemName","itemId","seriesName"]);function Lu(e){var t={};var r=t.encode={};var a=Fu();var n=[];var i=[];var o=t.userOutput={dimensionNames:e.dimensions.slice(),encode:{}};ku(e.dimensions,(function(t){var u=e.getDimensionInfo(t);var s=u.coordDim;if(s){var l=u.coordDimIndex;Wu(r,s)[l]=t;if(!u.isExtraCoord){a.set(s,1);if(zu(u.type)){n[0]=t}Wu(o.encode,s)[l]=u.index}if(u.defaultTooltip){i.push(t)}}Pu.each((function(e,t){var a=Wu(r,t);var n=u.otherDims[t];if(n!=null&&n!==false){a[n]=u.name}}))}));var u=[];var s={};a.each((function(e,t){var a=r[t];s[t]=a[0];u=u.concat(a)}));t.dataDimsOnCoord=u;t.encodeFirstDimNotExtra=s;var l=r.label;if(l&&l.length){n=l.slice()}var f=r.tooltip;if(f&&f.length){i=f.slice()}else if(!i.length){i=n.slice()}r.defaultedLabel=n;r.defaultedTooltip=i;return t}function Wu(e,t){if(!e.hasOwnProperty(t)){e[t]=[]}return e[t]}function Bu(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function zu(e){return!(e==="ordinal"||e==="time")}var Hu=Pu;var ju=Lu;var Uu=Bu;var Yu={OTHER_DIMENSIONS:Hu,summarizeDimensions:ju,getDimensionTypeByAxis:Uu};function qu(e){if(e!=null){We.extend(this,e)}this.otherDims={}}var Xu=qu;var $u=Xu;var Vu=We.createHashMap;var Gu=We.each;var Ku=We.isString;var Zu=We.defaults;var Ju=We.extend;var Qu=We.isObject;var es=We.clone;var ts=Zi.normalizeToArray;var rs=Du.guessOrdinal;var as=Du.BE_ORDINAL;var ns=Yu.OTHER_DIMENSIONS;function is(e,t,r){if(!qo.isInstance(t)){t=qo.seriesDataToSource(t)}r=r||{};e=(e||[]).slice();var a=(r.dimsDef||[]).slice();var n=Vu();var i=Vu();var o=[];var u=os(t,e,a,r.dimCount);for(var s=0;s<u;s++){var l=a[s]=Ju({},Qu(a[s])?a[s]:{name:a[s]});var f=l.name;var v=o[s]=new $u;if(f!=null&&n.get(f)==null){v.name=v.displayName=f;n.set(f,s)}l.type!=null&&(v.type=l.type);l.displayName!=null&&(v.displayName=l.displayName)}var c=r.encodeDef;if(!c&&r.encodeDefaulter){c=r.encodeDefaulter(t,u)}c=Vu(c);c.each((function(e,t){e=ts(e).slice();if(e.length===1&&!Ku(e[0])&&e[0]<0){c.set(t,false);return}var r=c.set(t,[]);Gu(e,(function(e,a){Ku(e)&&(e=n.get(e));if(e!=null&&e<u){r[a]=e;h(o[e],t,a)}}))}));var d=0;Gu(e,(function(e,t){var r;var e;var a;var n;if(Ku(e)){r=e;e={}}else{r=e.name;var i=e.ordinalMeta;e.ordinalMeta=null;e=es(e);e.ordinalMeta=i;a=e.dimsDef;n=e.otherDims;e.name=e.coordDim=e.coordDimIndex=e.dimsDef=e.otherDims=null}var u=c.get(r);if(u===false){return}var u=ts(u);if(!u.length){for(var s=0;s<(a&&a.length||1);s++){while(d<o.length&&o[d].coordDim!=null){d++}d<o.length&&u.push(d++)}}Gu(u,(function(t,i){var u=o[t];h(Zu(u,e),r,i);if(u.name==null&&a){var s=a[i];!Qu(s)&&(s={name:s});u.name=u.displayName=s.name;u.defaultTooltip=s.defaultTooltip}n&&Zu(u.otherDims,n)}))}));function h(e,t,r){if(ns.get(t)!=null){e.otherDims[t]=r}else{e.coordDim=t;e.coordDimIndex=r;i.set(t,true)}}var m=r.generateCoord;var g=r.generateCoordCount;var p=g!=null;g=m?g||1:0;var y=m||"value";for(var x=0;x<u;x++){var v=o[x]=o[x]||new $u;var w=v.coordDim;if(w==null){v.coordDim=us(y,i,p);v.coordDimIndex=0;if(!m||g<=0){v.isExtraCoord=true}g--}v.name==null&&(v.name=us(v.coordDim,n));if(v.type==null&&(rs(t,x,v.name)===as.Must||v.isExtraCoord&&(v.otherDims.itemName!=null||v.otherDims.seriesName!=null))){v.type="ordinal"}}return o}function os(e,t,r,a){var n=Math.max(e.dimensionsDetectCount||1,t.length,r.length,a||0);Gu(t,(function(e){var t=e.dimsDef;t&&(n=Math.max(n,t.length))}));return n}function us(e,t,r){if(r||t.get(e)!=null){var a=0;while(t.get(e+a)!=null){a++}e+=a}t.set(e,true);return e}var ss=is;var ls=ss;e.extendSeriesModel({type:"series.wordCloud",visualColorAccessPath:"textStyle.normal.color",optionUpdated:function e(){var t=this.option;t.gridSize=Math.max(Math.floor(t.gridSize),4)},getInitialData:function t(r,a){var n=ls(["value"],r.data);var i=new e.List(n,this);i.initData(r.data);return i},defaultOption:{maskImage:null,shape:"circle",left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:false,textStyle:{normal:{fontWeight:"normal"}}}});e.extendChartView({type:"wordCloud",render:function t(r,a,n){var i=this.group;i.removeAll();var o=r.getData();var u=r.get("gridSize");r.layoutInstance.ondraw=function(t,r,a,n){var s=o.getItemModel(a);var l=s.getModel("textStyle.normal");var f=s.getModel("textStyle.emphasis");var v=new e.graphic.Text({style:e.graphic.setTextStyle({},l,{x:n.info.fillTextOffsetX,y:n.info.fillTextOffsetY+r*.5,text:t,textBaseline:"middle",textFill:o.getItemVisual(a,"color"),fontSize:r}),scale:[1/n.info.mu,1/n.info.mu],position:[(n.gx+n.info.gw/2)*u,(n.gy+n.info.gh/2)*u],rotation:n.rot});i.add(v);o.setItemGraphicEl(a,v);e.graphic.setHoverStyle(v,e.graphic.setTextStyle({},f,null,{forMerge:true},true))};this._model=r},remove:function e(){this.group.removeAll();this._model.layoutInstance.dispose()},dispose:function e(){this._model.layoutInstance.dispose()}});var fs=Qi((function(e){if(!window.setImmediate){window.setImmediate=function e(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function e(){if(!window.postMessage||!window.addEventListener){return null}var t=[undefined];var r="zero-timeout-message";var a=function e(a){var n=t.length;t.push(a);window.postMessage(r+n.toString(36),"*");return n};window.addEventListener("message",(function e(a){if(typeof a.data!=="string"||a.data.substr(0,r.length)!==r){return}a.stopImmediatePropagation();var n=parseInt(a.data.substr(r.length),36);if(!t[n]){return}t[n]();t[n]=undefined}),true);window.clearImmediate=function e(r){if(!t[r]){return}t[r]=undefined};return a}()||function e(t){window.setTimeout(t,0)}}()}if(!window.clearImmediate){window.clearImmediate=function e(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function e(t){window.clearTimeout(t)}}()}(function(t){var r=function e(){var t=document.createElement("canvas");if(!t||!t.getContext){return false}var r=t.getContext("2d");if(!r.getImageData){return false}if(!r.fillText){return false}if(!Array.prototype.some){return false}if(!Array.prototype.push){return false}return true}();var a=function e(){if(!r){return}var t=document.createElement("canvas").getContext("2d");var a=20;var n,i;while(a){t.font=a.toString(10)+"px sans-serif";if(t.measureText("Ｗ").width===n&&t.measureText("m").width===i){return a+1}n=t.measureText("Ｗ").width;i=t.measureText("m").width;a--}return 0}();var n=function e(t){for(var r,a,n=t.length;n;r=Math.floor(Math.random()*n),a=t[--n],t[n]=t[r],t[r]=a){}return t};var i=function e(t,i){if(!r){return}if(!Array.isArray(t)){t=[t]}t.forEach((function(e,r){if(typeof e==="string"){t[r]=document.getElementById(e);if(!t[r]){throw"The element id specified is not found."}}else if(!e.tagName&&!e.appendChild){throw"You must pass valid HTML elements, or ID of the element."}}));var o={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", '+'"Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:true,backgroundColor:"#fff",gridSize:8,drawOutOfBound:false,origin:null,drawMask:false,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,wait:0,abortThreshold:0,abort:function e(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:true,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(i){for(var u in i){if(u in o){o[u]=i[u]}}}if(typeof o.weightFactor!=="function"){var s=o.weightFactor;o.weightFactor=function e(t){return t*s}}if(typeof o.shape!=="function"){switch(o.shape){case"circle":default:o.shape="circle";break;case"cardioid":o.shape=function e(t){return 1-Math.sin(t)};break;case"diamond":case"square":o.shape=function e(t){var r=t%(2*Math.PI/4);return 1/(Math.cos(r)+Math.sin(r))};break;case"triangle-forward":o.shape=function e(t){var r=t%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"triangle":case"triangle-upright":o.shape=function e(t){var r=(t+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(r)+Math.sqrt(3)*Math.sin(r))};break;case"pentagon":o.shape=function e(t){var r=(t+.955)%(2*Math.PI/5);return 1/(Math.cos(r)+.726543*Math.sin(r))};break;case"star":o.shape=function e(t){var r=(t+.955)%(2*Math.PI/10);if((t+.955)%(2*Math.PI/5)-2*Math.PI/10>=0){return 1/(Math.cos(2*Math.PI/10-r)+3.07768*Math.sin(2*Math.PI/10-r))}else{return 1/(Math.cos(r)+3.07768*Math.sin(r))}};break}}o.gridSize=Math.max(Math.floor(o.gridSize),4);var l=o.gridSize;var f=l-o.maskGapWidth;var v=Math.abs(o.maxRotation-o.minRotation);var c=Math.min(o.maxRotation,o.minRotation);var d=o.rotationStep;var h,m,g,p,y;var x;var w;function M(e,t){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(t-e)+e).toFixed()+"%)"}switch(o.color){case"random-dark":w=function e(){return M(10,50)};break;case"random-light":w=function e(){return M(50,90)};break;default:if(typeof o.color==="function"){w=o.color}break}var b=null;if(typeof o.classes==="function"){b=o.classes}var C=false;var I=[];var S;var T=function e(t){var r=t.currentTarget;var a=r.getBoundingClientRect();var n;var i;if(t.touches){n=t.touches[0].clientX;i=t.touches[0].clientY}else{n=t.clientX;i=t.clientY}var o=n-a.left;var u=i-a.top;var s=Math.floor(o*(r.width/a.width||1)/l);var f=Math.floor(u*(r.height/a.height||1)/l);return I[s][f]};var O=function e(t){var r=T(t);if(S===r){return}S=r;if(!r){o.hover(undefined,undefined,t);return}o.hover(r.item,r.dimension,t)};var A=function e(t){var r=T(t);if(!r){return}o.click(r.item,r.dimension,t);t.preventDefault()};var E=[];var N=function e(t){if(E[t]){return E[t]}var r=t*8;var a=r;var n=[];if(t===0){n.push([p[0],p[1],0])}while(a--){var i=1;if(o.shape!=="circle"){i=o.shape(a/r*2*Math.PI)}n.push([p[0]+t*i*Math.cos(-a/r*2*Math.PI),p[1]+t*i*Math.sin(-a/r*2*Math.PI)*o.ellipticity,a/r*2*Math.PI])}E[t]=n;return n};var _=function e(){return o.abortThreshold>0&&(new Date).getTime()-x>o.abortThreshold};var R=function e(){if(o.rotateRatio===0){return 0}if(Math.random()>o.rotateRatio){return 0}if(v===0){return c}return c+Math.round(Math.random()*v/d)*d};var D=function e(t,r,n){var i=o.weightFactor(r);if(i<=o.minSize){return false}var u=1;if(i<a){u=function e(){var t=2;while(t*i<a){t+=2}return t}()}var s=document.createElement("canvas");var f=s.getContext("2d",{willReadFrequently:true});f.font=o.fontWeight+" "+(i*u).toString(10)+"px "+o.fontFamily;var v=f.measureText(t).width/u;var c=Math.max(i*u,f.measureText("m").width,f.measureText("Ｗ").width)/u;var d=v+c*2;var h=c*3;var m=Math.ceil(d/l);var g=Math.ceil(h/l);d=m*l;h=g*l;var p=-v/2;var y=-c*.4;var x=Math.ceil((d*Math.abs(Math.sin(n))+h*Math.abs(Math.cos(n)))/l);var w=Math.ceil((d*Math.abs(Math.cos(n))+h*Math.abs(Math.sin(n)))/l);var M=w*l;var b=x*l;s.setAttribute("width",M);s.setAttribute("height",b);f.scale(1/u,1/u);f.translate(M*u/2,b*u/2);f.rotate(-n);f.font=o.fontWeight+" "+(i*u).toString(10)+"px "+o.fontFamily;f.fillStyle="#000";f.textBaseline="middle";f.fillText(t,p*u,(y+i*.5)*u);var C=f.getImageData(0,0,M,b).data;if(_()){return false}var I=[];var S=w,T,O,A;var E=[x/2,w/2,x/2,w/2];while(S--){T=x;while(T--){A=l;e:{while(A--){O=l;while(O--){if(C[((T*l+A)*M+(S*l+O))*4+3]){I.push([S,T]);if(S<E[3]){E[3]=S}if(S>E[1]){E[1]=S}if(T<E[0]){E[0]=T}if(T>E[2]){E[2]=T}break e}}}}}}return{mu:u,occupied:I,bounds:E,gw:w,gh:x,fillTextOffsetX:p,fillTextOffsetY:y,fillTextWidth:v,fillTextHeight:c,fontSize:i}};var k=function e(t,r,a,n,i){var u=i.length;while(u--){var s=t+i[u][0];var l=r+i[u][1];if(s>=m||l>=g||s<0||l<0){if(!o.drawOutOfBound){return false}continue}if(!h[s][l]){return false}}return true};var F=function e(r,a,n,i,u,s,f,v,c){var d=n.fontSize;var h;if(w){h=w(i,u,d,s,f)}else{h=o.color}var m;if(b){m=b(i,u,d,s,f)}else{m=o.classes}var g=n.bounds;({x:(r+g[3])*l,y:(a+g[0])*l,w:(g[1]-g[3]+1)*l,h:(g[2]-g[0]+1)*l});t.forEach((function(e){if(e.getContext){var t=e.getContext("2d");var u=n.mu;t.save();t.scale(1/u,1/u);t.font=o.fontWeight+" "+(d*u).toString(10)+"px "+o.fontFamily;t.fillStyle=h;t.translate((r+n.gw/2)*l*u,(a+n.gh/2)*l*u);if(v!==0){t.rotate(-v)}t.textBaseline="middle";t.fillText(i,n.fillTextOffsetX*u,(n.fillTextOffsetY+d*.5)*u);t.restore()}else{var s=document.createElement("span");var f="";f="rotate("+-v/Math.PI*180+"deg) ";if(n.mu!==1){f+="translateX(-"+n.fillTextWidth/4+"px) "+"scale("+1/n.mu+")"}var g={position:"absolute",display:"block",font:o.fontWeight+" "+d*n.mu+"px "+o.fontFamily,left:(r+n.gw/2)*l+n.fillTextOffsetX+"px",top:(a+n.gh/2)*l+n.fillTextOffsetY+"px",width:n.fillTextWidth+"px",height:n.fillTextHeight+"px",lineHeight:d+"px",whiteSpace:"nowrap",transform:f,webkitTransform:f,msTransform:f,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};if(h){g.color=h}s.textContent=i;for(var p in g){s.style[p]=g[p]}if(c){for(var y in c){s.setAttribute(y,c[y])}}if(m){s.className+=m}e.appendChild(s)}}))};var P=function e(r,a,n,i,o){if(r>=m||a>=g||r<0||a<0){return}h[r][a]=false;if(n){var u=t[0].getContext("2d");u.fillRect(r*l,a*l,f,f)}if(C){I[r][a]={item:o,dimension:i}}};var L=function e(r,a,n,i,u,s){var f=u.occupied;var v=o.drawMask;var c;if(v){c=t[0].getContext("2d");c.save();c.fillStyle=o.maskColor}var d;if(C){var h=u.bounds;d={x:(r+h[3])*l,y:(a+h[0])*l,w:(h[1]-h[3]+1)*l,h:(h[2]-h[0]+1)*l}}var p=f.length;while(p--){var y=r+f[p][0];var x=a+f[p][1];if(y>=m||x>=g||y<0||x<0){continue}P(y,x,v,d,s)}if(v){c.restore()}};var W=function e(t){var r,a,i;if(Array.isArray(t)){r=t[0];a=t[1]}else{r=t.word;a=t.weight;i=t.attributes}var u=R();var s=D(r,a,u);if(!s){return false}if(_()){return false}if(!o.drawOutOfBound){var l=s.bounds;if(l[1]-l[3]+1>m||l[2]-l[0]+1>g){return false}}var f=y+1;var v=function e(n){var o=Math.floor(n[0]-s.gw/2);var l=Math.floor(n[1]-s.gh/2);var v=s.gw;var c=s.gh;if(!k(o,l,v,c,s.occupied)){return false}F(o,l,s,r,a,y-f,n[2],u,i);L(o,l,v,c,s,t);return{gx:o,gy:l,rot:u,info:s}};while(f--){var c=N(y-f);if(o.shuffle){c=[].concat(c);n(c)}for(var d=0;d<c.length;d++){var h=v(c[d]);if(h){return h}}}return null};var B=function e(r,a,n){if(a){return!t.some((function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(r,true,a,n||{});return!e.dispatchEvent(t)}),this)}else{t.forEach((function(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(r,true,a,n||{});e.dispatchEvent(t)}),this)}};var z=function e(){var r=t[0];if(r.getContext){m=Math.ceil(r.width/l);g=Math.ceil(r.height/l)}else{var a=r.getBoundingClientRect();m=Math.ceil(a.width/l);g=Math.ceil(a.height/l)}if(!B("wordcloudstart",true)){return}p=o.origin?[o.origin[0]/l,o.origin[1]/l]:[m/2,g/2];y=Math.floor(Math.sqrt(m*m+g*g));h=[];var n,i,u;if(!r.getContext||o.clearCanvas){t.forEach((function(e){if(e.getContext){var t=e.getContext("2d");t.fillStyle=o.backgroundColor;t.clearRect(0,0,m*(l+1),g*(l+1));t.fillRect(0,0,m*(l+1),g*(l+1))}else{e.textContent="";e.style.backgroundColor=o.backgroundColor;e.style.position="relative"}}));n=m;while(n--){h[n]=[];i=g;while(i--){h[n][i]=true}}}else{var s=document.createElement("canvas").getContext("2d");s.fillStyle=o.backgroundColor;s.fillRect(0,0,1,1);var f=s.getImageData(0,0,1,1).data;var v=r.getContext("2d").getImageData(0,0,m*l,g*l).data;n=m;var c,d;while(n--){h[n]=[];i=g;while(i--){d=l;e:while(d--){c=l;while(c--){u=4;while(u--){if(v[((i*l+d)*m*l+(n*l+c))*4+u]!==f[u]){h[n][i]=false;break e}}}}if(h[n][i]!==false){h[n][i]=true}}}v=s=f=undefined}if(o.hover||o.click){C=true;n=m+1;while(n--){I[n]=[]}if(o.hover){r.addEventListener("mousemove",O)}if(o.click){r.addEventListener("click",A);r.addEventListener("touchstart",A);r.addEventListener("touchend",(function(e){e.preventDefault()}));r.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"}r.addEventListener("wordcloudstart",(function e(){r.removeEventListener("wordcloudstart",e);r.removeEventListener("mousemove",O);r.removeEventListener("click",A);S=undefined}))}u=0;var w,M;if(o.wait!==0){w=window.setTimeout;M=window.clearTimeout}else{w=window.setImmediate;M=window.clearImmediate}var b=function e(r,a){t.forEach((function(e){e.addEventListener(r,a)}),this)};var T=function e(r,a){t.forEach((function(e){e.removeEventListener(r,a)}),this)};var E=function e(){T("wordcloudstart",e);M(N)};b("wordcloudstart",E);var N=w((function e(){if(u>=o.list.length){M(N);B("wordcloudstop",false);T("wordcloudstart",E);return}x=(new Date).getTime();var t=W(o.list[u]);var r=!B("wordclouddrawn",true,{item:o.list[u],drawn:t});if(_()||r){M(N);o.abort();B("wordcloudabort",false);B("wordcloudstop",false);T("wordcloudstart",E);return}u++;N=w(e,o.wait)}),o.wait)};z()};i.isSupported=r;i.minFontSize=a;if(e.exports){e.exports=i}else{t.WordCloud=i}})(Ji)}));if(!fs.isSupported){throw new Error("Sorry your browser not support wordCloud")}function vs(e){var t=e.getContext("2d");var r=t.getImageData(0,0,e.width,e.height);var a=t.createImageData(r);var n=0;var i=0;for(var o=0;o<r.data.length;o+=4){var u=r.data[o+3];if(u>128){var s=r.data[o]+r.data[o+1]+r.data[o+2];n+=s;++i}}var l=n/i;for(var o=0;o<r.data.length;o+=4){var s=r.data[o]+r.data[o+1]+r.data[o+2];var u=r.data[o+3];if(u<128||s>l){a.data[o]=0;a.data[o+1]=0;a.data[o+2]=0;a.data[o+3]=0}else{a.data[o]=255;a.data[o+1]=255;a.data[o+2]=255;a.data[o+3]=255}}t.putImageData(a,0,0)}e.registerLayout((function(t,r){t.eachSeriesByType("wordCloud",(function(a){var n=oi.getLayoutRect(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()});var i=a.getData();var o=document.createElement("canvas");o.width=n.width;o.height=n.height;var u=o.getContext("2d");var s=a.get("maskImage");if(s){try{u.drawImage(s,0,0,o.width,o.height);vs(o)}catch(e){console.error("Invalid mask image");console.error(e.toString())}}var l=a.get("sizeRange");var f=a.get("rotationRange");var v=i.getDataExtent("value");var c=Math.PI/180;var d=a.get("gridSize");fs(o,{list:i.mapArray("value",(function(t,r){var a=i.getItemModel(r);return[i.getName(r),a.get("textStyle.normal.textSize",true)||e.number.linearMap(t,v,l),r]})).sort((function(e,t){return t[1]-e[1]})),fontFamily:a.get("textStyle.normal.fontFamily")||a.get("textStyle.emphasis.fontFamily")||t.get("textStyle.fontFamily"),fontWeight:a.get("textStyle.normal.fontWeight")||a.get("textStyle.emphasis.fontWeight")||t.get("textStyle.fontWeight"),gridSize:d,ellipticity:n.height/n.width,minRotation:f[0]*c,maxRotation:f[1]*c,clearCanvas:!s,rotateRatio:1,rotationStep:a.get("rotationStep")*c,drawOutOfBound:a.get("drawOutOfBound"),shuffle:false,shape:a.get("shape")});function h(e){var t=e.detail.item;if(e.detail.drawn&&a.layoutInstance.ondraw){e.detail.drawn.gx+=n.x/d;e.detail.drawn.gy+=n.y/d;a.layoutInstance.ondraw(t[0],t[1],t[2],e.detail.drawn)}}o.addEventListener("wordclouddrawn",h);if(a.layoutInstance){a.layoutInstance.dispose()}a.layoutInstance={ondraw:null,dispose:function e(){o.removeEventListener("wordclouddrawn",h);o.addEventListener("wordclouddrawn",(function(e){e.preventDefault()}))}}}))}));e.registerPreprocessor((function(t){var r=(t||{}).series;!e.util.isArray(r)&&(r=r?[r]:[]);var a=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];e.util.each(r,(function(e){if(e&&e.type==="wordCloud"){var t=e.textStyle||{};n(t.normal);n(t.emphasis)}}));function n(t){t&&e.util.each(a,(function(r){if(t.hasOwnProperty(r)){t["text"+e.format.capitalFirst(r)]=t[r]}}))}}));var cs={defaultChartProps:{option:{xAxis:{show:false},legend:false}},optionHandler:function e(t,r,a){var n=a===void 0?{}:a,i=n.themeConfig;var o=r.sizeRange,u=o===void 0?[8,60]:o;var s=t.dataset.source;var l=s[0],f=s[1];if(!(l!=null&&l.length)||!(f!=null&&f.length)||f.length<2)return t.series=[];var v=l.slice(1).map((function(e,t){return{name:e,value:f[t+1]||0}})).sort((function(e,t){return t.value-e.value}));v.forEach((function(e,t){return e.index=t}));t.series=[{name:f[0],type:"wordCloud",left:"center",top:"center",width:"94%",height:"94%",sizeRange:u,rotationRange:[0,0],rotationStep:360,drawOutOfBound:true,data:v,textStyle:{normal:{color:function e(t){var r=t.data.index;return i==null?void 0:i.color[r%i.color.length]}}}}]}};var ds={types:{"wordcloud-basic":cs},moduleType:"chart"};export default ds;
//# sourceMappingURL=index.js.map
