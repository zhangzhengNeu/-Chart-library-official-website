{"version":3,"file":"index.js","sources":["../node_modules/zrender/lib/core/util.js","../node_modules/zrender/lib/core/vector.js","../node_modules/zrender/lib/core/matrix.js","../node_modules/zrender/lib/core/BoundingRect.js","../node_modules/echarts/lib/util/number.js","../node_modules/zrender/lib/core/LRU.js","../node_modules/zrender/lib/graphic/helper/image.js","../node_modules/zrender/lib/contain/text.js","../node_modules/echarts/lib/util/format.js","../node_modules/echarts/lib/util/layout.js","../node_modules/zrender/lib/core/env.js","../node_modules/echarts/lib/util/model.js","../node_modules/echarts/lib/util/clazz.js","../node_modules/echarts/lib/data/helper/sourceType.js","../node_modules/echarts/lib/data/Source.js","../node_modules/echarts/lib/data/helper/sourceHelper.js","../node_modules/echarts/lib/data/helper/dimensionHelper.js","../node_modules/echarts/lib/data/DataDimensionInfo.js","../node_modules/echarts/lib/data/helper/completeDimensions.js","../src/echartsWordcloud/WordCloudSeries.js","../src/echartsWordcloud/WordCloudView.js","../src/echartsWordcloud/layout.js","../src/echartsWordcloud/index.js","../src/basic.ts","../src/index.ts"],"sourcesContent":["/**\n * @module zrender/core/util\n */\n// 用于处理merge时无法遍历Date等对象的问题\nvar BUILTIN_OBJECT = {\n  '[object Function]': 1,\n  '[object RegExp]': 1,\n  '[object Date]': 1,\n  '[object Error]': 1,\n  '[object CanvasGradient]': 1,\n  '[object CanvasPattern]': 1,\n  // For node-canvas\n  '[object Image]': 1,\n  '[object Canvas]': 1\n};\nvar TYPED_ARRAY = {\n  '[object Int8Array]': 1,\n  '[object Uint8Array]': 1,\n  '[object Uint8ClampedArray]': 1,\n  '[object Int16Array]': 1,\n  '[object Uint16Array]': 1,\n  '[object Int32Array]': 1,\n  '[object Uint32Array]': 1,\n  '[object Float32Array]': 1,\n  '[object Float64Array]': 1\n};\nvar objToString = Object.prototype.toString;\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  // Clear ctx instance for different environment\n  if (name === 'createCanvas') {\n    _ctx = null;\n  }\n\n  methods[name] = fn;\n}\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\n\n\nfunction clone(source) {\n  if (source == null || typeof source !== 'object') {\n    return source;\n  }\n\n  var result = source;\n  var typeStr = objToString.call(source);\n\n  if (typeStr === '[object Array]') {\n    if (!isPrimitive(source)) {\n      result = [];\n\n      for (var i = 0, len = source.length; i < len; i++) {\n        result[i] = clone(source[i]);\n      }\n    }\n  } else if (TYPED_ARRAY[typeStr]) {\n    if (!isPrimitive(source)) {\n      var Ctor = source.constructor;\n\n      if (source.constructor.from) {\n        result = Ctor.from(source);\n      } else {\n        result = new Ctor(source.length);\n\n        for (var i = 0, len = source.length; i < len; i++) {\n          result[i] = clone(source[i]);\n        }\n      }\n    }\n  } else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n    result = {};\n\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        result[key] = clone(source[key]);\n      }\n    }\n  }\n\n  return result;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\n\n\nfunction merge(target, source, overwrite) {\n  // We should escapse that source is string\n  // and enter for ... in ...\n  if (!isObject(source) || !isObject(target)) {\n    return overwrite ? clone(source) : target;\n  }\n\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      var targetProp = target[key];\n      var sourceProp = source[key];\n\n      if (isObject(sourceProp) && isObject(targetProp) && !isArray(sourceProp) && !isArray(targetProp) && !isDom(sourceProp) && !isDom(targetProp) && !isBuiltInObject(sourceProp) && !isBuiltInObject(targetProp) && !isPrimitive(sourceProp) && !isPrimitive(targetProp)) {\n        // 如果需要递归覆盖，就递归调用merge\n        merge(targetProp, sourceProp, overwrite);\n      } else if (overwrite || !(key in target)) {\n        // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n        // NOTE，在 target[key] 不存在的时候也是直接覆盖\n        target[key] = clone(source[key], true);\n      }\n    }\n  }\n\n  return target;\n}\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\n\n\nfunction mergeAll(targetAndSources, overwrite) {\n  var result = targetAndSources[0];\n\n  for (var i = 1, len = targetAndSources.length; i < len; i++) {\n    result = merge(result, targetAndSources[i], overwrite);\n  }\n\n  return result;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\n\n\nfunction extend(target, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\n\n\nfunction defaults(target, source, overlay) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key) && (overlay ? source[key] != null : target[key] == null)) {\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar createCanvas = function () {\n  return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n  return document.createElement('canvas');\n}; // FIXME\n\n\nvar _ctx;\n\nfunction getContext() {\n  if (!_ctx) {\n    // Use util.createCanvas instead of createCanvas\n    // because createCanvas may be overwritten in different environment\n    _ctx = createCanvas().getContext('2d');\n  }\n\n  return _ctx;\n}\n/**\n * 查询数组中元素的index\n * @memberOf module:zrender/core/util\n */\n\n\nfunction indexOf(array, value) {\n  if (array) {\n    if (array.indexOf) {\n      return array.indexOf(value);\n    }\n\n    for (var i = 0, len = array.length; i < len; i++) {\n      if (array[i] === value) {\n        return i;\n      }\n    }\n  }\n\n  return -1;\n}\n/**\n * 构造类继承关系\n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz 源类\n * @param {Function} baseClazz 基类\n */\n\n\nfunction inherits(clazz, baseClazz) {\n  var clazzPrototype = clazz.prototype;\n\n  function F() {}\n\n  F.prototype = baseClazz.prototype;\n  clazz.prototype = new F();\n\n  for (var prop in clazzPrototype) {\n    if (clazzPrototype.hasOwnProperty(prop)) {\n      clazz.prototype[prop] = clazzPrototype[prop];\n    }\n  }\n\n  clazz.prototype.constructor = clazz;\n  clazz.superClass = baseClazz;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\n\n\nfunction mixin(target, source, overlay) {\n  target = 'prototype' in target ? target.prototype : target;\n  source = 'prototype' in source ? source.prototype : source;\n  defaults(target, source, overlay);\n}\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\n\n\nfunction isArrayLike(data) {\n  if (!data) {\n    return;\n  }\n\n  if (typeof data === 'string') {\n    return false;\n  }\n\n  return typeof data.length === 'number';\n}\n/**\n * 数组或对象遍历\n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\n\n\nfunction each(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.forEach && obj.forEach === nativeForEach) {\n    obj.forEach(cb, context);\n  } else if (obj.length === +obj.length) {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      cb.call(context, obj[i], i, obj);\n    }\n  } else {\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        cb.call(context, obj[key], key, obj);\n      }\n    }\n  }\n}\n/**\n * 数组映射\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction map(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.map && obj.map === nativeMap) {\n    return obj.map(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      result.push(cb.call(context, obj[i], i, obj));\n    }\n\n    return result;\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction reduce(obj, cb, memo, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.reduce && obj.reduce === nativeReduce) {\n    return obj.reduce(cb, memo, context);\n  } else {\n    for (var i = 0, len = obj.length; i < len; i++) {\n      memo = cb.call(context, memo, obj[i], i, obj);\n    }\n\n    return memo;\n  }\n}\n/**\n * 数组过滤\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\n\n\nfunction filter(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  if (obj.filter && obj.filter === nativeFilter) {\n    return obj.filter(cb, context);\n  } else {\n    var result = [];\n\n    for (var i = 0, len = obj.length; i < len; i++) {\n      if (cb.call(context, obj[i], i, obj)) {\n        result.push(obj[i]);\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * 数组项查找\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\n\n\nfunction find(obj, cb, context) {\n  if (!(obj && cb)) {\n    return;\n  }\n\n  for (var i = 0, len = obj.length; i < len; i++) {\n    if (cb.call(context, obj[i], i, obj)) {\n      return obj[i];\n    }\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\n\n\nfunction bind(func, context) {\n  var args = nativeSlice.call(arguments, 2);\n  return function () {\n    return func.apply(context, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\n\n\nfunction curry(func) {\n  var args = nativeSlice.call(arguments, 1);\n  return function () {\n    return func.apply(this, args.concat(nativeSlice.call(arguments)));\n  };\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isArray(value) {\n  return objToString.call(value) === '[object Array]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isString(value) {\n  return objToString.call(value) === '[object String]';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return type === 'function' || !!value && type === 'object';\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isBuiltInObject(value) {\n  return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isTypedArray(value) {\n  return !!TYPED_ARRAY[objToString.call(value)];\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction isDom(value) {\n  return typeof value === 'object' && typeof value.nodeType === 'number' && typeof value.ownerDocument === 'object';\n}\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\n\n\nfunction eqNaN(value) {\n  /* eslint-disable-next-line no-self-compare */\n  return value !== value;\n}\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\n\n\nfunction retrieve(values) {\n  for (var i = 0, len = arguments.length; i < len; i++) {\n    if (arguments[i] != null) {\n      return arguments[i];\n    }\n  }\n}\n\nfunction retrieve2(value0, value1) {\n  return value0 != null ? value0 : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n  return value0 != null ? value0 : value1 != null ? value1 : value2;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\n\n\nfunction slice() {\n  return Function.call.apply(nativeSlice, arguments);\n}\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\n\n\nfunction normalizeCssArray(val) {\n  if (typeof val === 'number') {\n    return [val, val, val, val];\n  }\n\n  var len = val.length;\n\n  if (len === 2) {\n    // vertical | horizontal\n    return [val[0], val[1], val[0], val[1]];\n  } else if (len === 3) {\n    // top | horizontal | bottom\n    return [val[0], val[1], val[2], val[1]];\n  }\n\n  return val;\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\n\n\nfunction assert(condition, message) {\n  if (!condition) {\n    throw new Error(message);\n  }\n}\n/**\n * @memberOf module:zrender/core/util\n * @param {string} str string to be trimed\n * @return {string} trimed string\n */\n\n\nfunction trim(str) {\n  if (str == null) {\n    return null;\n  } else if (typeof str.trim === 'function') {\n    return str.trim();\n  } else {\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n  }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\n\nfunction setAsPrimitive(obj) {\n  obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n  return obj[primitiveKey];\n}\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\n\n\nfunction HashMap(obj) {\n  var isArr = isArray(obj); // Key should not be set on this, otherwise\n  // methods get/set/... may be overrided.\n\n  this.data = {};\n  var thisMap = this;\n  obj instanceof HashMap ? obj.each(visit) : obj && each(obj, visit);\n\n  function visit(value, key) {\n    isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n  }\n}\n\nHashMap.prototype = {\n  constructor: HashMap,\n  // Do not provide `has` method to avoid defining what is `has`.\n  // (We usually treat `null` and `undefined` as the same, different\n  // from ES6 Map).\n  get: function (key) {\n    return this.data.hasOwnProperty(key) ? this.data[key] : null;\n  },\n  set: function (key, value) {\n    // Comparing with invocation chaining, `return value` is more commonly\n    // used in this case: `var someVal = map.set('a', genVal());`\n    return this.data[key] = value;\n  },\n  // Although util.each can be performed on this hashMap directly, user\n  // should not use the exposed keys, who are prefixed.\n  each: function (cb, context) {\n    context !== void 0 && (cb = bind(cb, context));\n    /* eslint-disable guard-for-in */\n\n    for (var key in this.data) {\n      this.data.hasOwnProperty(key) && cb(this.data[key], key);\n    }\n    /* eslint-enable guard-for-in */\n\n  },\n  // Do not use this method if performance sensitive.\n  removeKey: function (key) {\n    delete this.data[key];\n  }\n};\n\nfunction createHashMap(obj) {\n  return new HashMap(obj);\n}\n\nfunction concatArray(a, b) {\n  var newArray = new a.constructor(a.length + b.length);\n\n  for (var i = 0; i < a.length; i++) {\n    newArray[i] = a[i];\n  }\n\n  var offset = a.length;\n\n  for (i = 0; i < b.length; i++) {\n    newArray[i + offset] = b[i];\n  }\n\n  return newArray;\n}\n\nfunction noop() {}\n\nexports.$override = $override;\nexports.clone = clone;\nexports.merge = merge;\nexports.mergeAll = mergeAll;\nexports.extend = extend;\nexports.defaults = defaults;\nexports.createCanvas = createCanvas;\nexports.getContext = getContext;\nexports.indexOf = indexOf;\nexports.inherits = inherits;\nexports.mixin = mixin;\nexports.isArrayLike = isArrayLike;\nexports.each = each;\nexports.map = map;\nexports.reduce = reduce;\nexports.filter = filter;\nexports.find = find;\nexports.bind = bind;\nexports.curry = curry;\nexports.isArray = isArray;\nexports.isFunction = isFunction;\nexports.isString = isString;\nexports.isObject = isObject;\nexports.isBuiltInObject = isBuiltInObject;\nexports.isTypedArray = isTypedArray;\nexports.isDom = isDom;\nexports.eqNaN = eqNaN;\nexports.retrieve = retrieve;\nexports.retrieve2 = retrieve2;\nexports.retrieve3 = retrieve3;\nexports.slice = slice;\nexports.normalizeCssArray = normalizeCssArray;\nexports.assert = assert;\nexports.trim = trim;\nexports.setAsPrimitive = setAsPrimitive;\nexports.isPrimitive = isPrimitive;\nexports.createHashMap = createHashMap;\nexports.concatArray = concatArray;\nexports.noop = noop;","/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * 创建一个向量\n * @param {number} [x=0]\n * @param {number} [y=0]\n * @return {Vector2}\n */\n\nfunction create(x, y) {\n  var out = new ArrayCtor(2);\n\n  if (x == null) {\n    x = 0;\n  }\n\n  if (y == null) {\n    y = 0;\n  }\n\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * 复制向量数据\n * @param {Vector2} out\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction copy(out, v) {\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * 克隆一个向量\n * @param {Vector2} v\n * @return {Vector2}\n */\n\n\nfunction clone(v) {\n  var out = new ArrayCtor(2);\n  out[0] = v[0];\n  out[1] = v[1];\n  return out;\n}\n/**\n * 设置向量的两个项\n * @param {Vector2} out\n * @param {number} a\n * @param {number} b\n * @return {Vector2} 结果\n */\n\n\nfunction set(out, a, b) {\n  out[0] = a;\n  out[1] = b;\n  return out;\n}\n/**\n * 向量相加\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction add(out, v1, v2) {\n  out[0] = v1[0] + v2[0];\n  out[1] = v1[1] + v2[1];\n  return out;\n}\n/**\n * 向量缩放后相加\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} a\n */\n\n\nfunction scaleAndAdd(out, v1, v2, a) {\n  out[0] = v1[0] + v2[0] * a;\n  out[1] = v1[1] + v2[1] * a;\n  return out;\n}\n/**\n * 向量相减\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction sub(out, v1, v2) {\n  out[0] = v1[0] - v2[0];\n  out[1] = v1[1] - v2[1];\n  return out;\n}\n/**\n * 向量长度\n * @param {Vector2} v\n * @return {number}\n */\n\n\nfunction len(v) {\n  return Math.sqrt(lenSquare(v));\n}\n\nvar length = len; // jshint ignore:line\n\n/**\n * 向量长度平方\n * @param {Vector2} v\n * @return {number}\n */\n\nfunction lenSquare(v) {\n  return v[0] * v[0] + v[1] * v[1];\n}\n\nvar lengthSquare = lenSquare;\n/**\n * 向量乘法\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\nfunction mul(out, v1, v2) {\n  out[0] = v1[0] * v2[0];\n  out[1] = v1[1] * v2[1];\n  return out;\n}\n/**\n * 向量除法\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n */\n\n\nfunction div(out, v1, v2) {\n  out[0] = v1[0] / v2[0];\n  out[1] = v1[1] / v2[1];\n  return out;\n}\n/**\n * 向量点乘\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction dot(v1, v2) {\n  return v1[0] * v2[0] + v1[1] * v2[1];\n}\n/**\n * 向量缩放\n * @param {Vector2} out\n * @param {Vector2} v\n * @param {number} s\n */\n\n\nfunction scale(out, v, s) {\n  out[0] = v[0] * s;\n  out[1] = v[1] * s;\n  return out;\n}\n/**\n * 向量归一化\n * @param {Vector2} out\n * @param {Vector2} v\n */\n\n\nfunction normalize(out, v) {\n  var d = len(v);\n\n  if (d === 0) {\n    out[0] = 0;\n    out[1] = 0;\n  } else {\n    out[0] = v[0] / d;\n    out[1] = v[1] / d;\n  }\n\n  return out;\n}\n/**\n * 计算向量间距离\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\n\nfunction distance(v1, v2) {\n  return Math.sqrt((v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]));\n}\n\nvar dist = distance;\n/**\n * 向量距离平方\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @return {number}\n */\n\nfunction distanceSquare(v1, v2) {\n  return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n}\n\nvar distSquare = distanceSquare;\n/**\n * 求负向量\n * @param {Vector2} out\n * @param {Vector2} v\n */\n\nfunction negate(out, v) {\n  out[0] = -v[0];\n  out[1] = -v[1];\n  return out;\n}\n/**\n * 插值两个点\n * @param {Vector2} out\n * @param {Vector2} v1\n * @param {Vector2} v2\n * @param {number} t\n */\n\n\nfunction lerp(out, v1, v2, t) {\n  out[0] = v1[0] + t * (v2[0] - v1[0]);\n  out[1] = v1[1] + t * (v2[1] - v1[1]);\n  return out;\n}\n/**\n * 矩阵左乘向量\n * @param {Vector2} out\n * @param {Vector2} v\n * @param {Vector2} m\n */\n\n\nfunction applyTransform(out, v, m) {\n  var x = v[0];\n  var y = v[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * 求两个向量最小值\n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction min(out, v1, v2) {\n  out[0] = Math.min(v1[0], v2[0]);\n  out[1] = Math.min(v1[1], v2[1]);\n  return out;\n}\n/**\n * 求两个向量最大值\n * @param  {Vector2} out\n * @param  {Vector2} v1\n * @param  {Vector2} v2\n */\n\n\nfunction max(out, v1, v2) {\n  out[0] = Math.max(v1[0], v2[0]);\n  out[1] = Math.max(v1[1], v2[1]);\n  return out;\n}\n\nexports.create = create;\nexports.copy = copy;\nexports.clone = clone;\nexports.set = set;\nexports.add = add;\nexports.scaleAndAdd = scaleAndAdd;\nexports.sub = sub;\nexports.len = len;\nexports.length = length;\nexports.lenSquare = lenSquare;\nexports.lengthSquare = lengthSquare;\nexports.mul = mul;\nexports.div = div;\nexports.dot = dot;\nexports.scale = scale;\nexports.normalize = normalize;\nexports.distance = distance;\nexports.dist = dist;\nexports.distanceSquare = distanceSquare;\nexports.distSquare = distSquare;\nexports.negate = negate;\nexports.lerp = lerp;\nexports.applyTransform = applyTransform;\nexports.min = min;\nexports.max = max;","/**\n * 3x2矩阵操作类\n * @exports zrender/tool/matrix\n */\n\n/* global Float32Array */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n/**\n * Create a identity matrix.\n * @return {Float32Array|Array.<number>}\n */\n\nfunction create() {\n  var out = new ArrayCtor(6);\n  identity(out);\n  return out;\n}\n/**\n * 设置矩阵为单位矩阵\n * @param {Float32Array|Array.<number>} out\n */\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * 复制矩阵\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m\n */\n\n\nfunction copy(out, m) {\n  out[0] = m[0];\n  out[1] = m[1];\n  out[2] = m[2];\n  out[3] = m[3];\n  out[4] = m[4];\n  out[5] = m[5];\n  return out;\n}\n/**\n * 矩阵相乘\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} m1\n * @param {Float32Array|Array.<number>} m2\n */\n\n\nfunction mul(out, m1, m2) {\n  // Consider matrix.mul(m, m2, m);\n  // where out is the same as m2.\n  // So use temp variable to escape error.\n  var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n  var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n  var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n  var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n  var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n  var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = out3;\n  out[4] = out4;\n  out[5] = out5;\n  return out;\n}\n/**\n * 平移变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction translate(out, a, v) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4] + v[0];\n  out[5] = a[5] + v[1];\n  return out;\n}\n/**\n * 旋转变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {number} rad\n */\n\n\nfunction rotate(out, a, rad) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var st = Math.sin(rad);\n  var ct = Math.cos(rad);\n  out[0] = aa * ct + ab * st;\n  out[1] = -aa * st + ab * ct;\n  out[2] = ac * ct + ad * st;\n  out[3] = -ac * st + ct * ad;\n  out[4] = ct * atx + st * aty;\n  out[5] = ct * aty - st * atx;\n  return out;\n}\n/**\n * 缩放变换\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n * @param {Float32Array|Array.<number>} v\n */\n\n\nfunction scale(out, a, v) {\n  var vx = v[0];\n  var vy = v[1];\n  out[0] = a[0] * vx;\n  out[1] = a[1] * vy;\n  out[2] = a[2] * vx;\n  out[3] = a[3] * vy;\n  out[4] = a[4] * vx;\n  out[5] = a[5] * vy;\n  return out;\n}\n/**\n * 求逆矩阵\n * @param {Float32Array|Array.<number>} out\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction invert(out, a) {\n  var aa = a[0];\n  var ac = a[2];\n  var atx = a[4];\n  var ab = a[1];\n  var ad = a[3];\n  var aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\n * Clone a new matrix.\n * @param {Float32Array|Array.<number>} a\n */\n\n\nfunction clone(a) {\n  var b = create();\n  copy(b, a);\n  return b;\n}\n\nexports.create = create;\nexports.identity = identity;\nexports.copy = copy;\nexports.mul = mul;\nexports.translate = translate;\nexports.rotate = rotate;\nexports.scale = scale;\nexports.invert = invert;\nexports.clone = clone;","var vec2 = require(\"./vector\");\n\nvar matrix = require(\"./matrix\");\n\n/**\n * @module echarts/core/BoundingRect\n */\nvar v2ApplyTransform = vec2.applyTransform;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @alias module:echarts/core/BoundingRect\n */\n\nfunction BoundingRect(x, y, width, height) {\n  if (width < 0) {\n    x = x + width;\n    width = -width;\n  }\n\n  if (height < 0) {\n    y = y + height;\n    height = -height;\n  }\n  /**\n   * @type {number}\n   */\n\n\n  this.x = x;\n  /**\n   * @type {number}\n   */\n\n  this.y = y;\n  /**\n   * @type {number}\n   */\n\n  this.width = width;\n  /**\n   * @type {number}\n   */\n\n  this.height = height;\n}\n\nBoundingRect.prototype = {\n  constructor: BoundingRect,\n\n  /**\n   * @param {module:echarts/core/BoundingRect} other\n   */\n  union: function (other) {\n    var x = mathMin(other.x, this.x);\n    var y = mathMin(other.y, this.y);\n    this.width = mathMax(other.x + other.width, this.x + this.width) - x;\n    this.height = mathMax(other.y + other.height, this.y + this.height) - y;\n    this.x = x;\n    this.y = y;\n  },\n\n  /**\n   * @param {Array.<number>} m\n   * @methods\n   */\n  applyTransform: function () {\n    var lt = [];\n    var rb = [];\n    var lb = [];\n    var rt = [];\n    return function (m) {\n      // In case usage like this\n      // el.getBoundingRect().applyTransform(el.transform)\n      // And element has no transform\n      if (!m) {\n        return;\n      }\n\n      lt[0] = lb[0] = this.x;\n      lt[1] = rt[1] = this.y;\n      rb[0] = rt[0] = this.x + this.width;\n      rb[1] = lb[1] = this.y + this.height;\n      v2ApplyTransform(lt, lt, m);\n      v2ApplyTransform(rb, rb, m);\n      v2ApplyTransform(lb, lb, m);\n      v2ApplyTransform(rt, rt, m);\n      this.x = mathMin(lt[0], rb[0], lb[0], rt[0]);\n      this.y = mathMin(lt[1], rb[1], lb[1], rt[1]);\n      var maxX = mathMax(lt[0], rb[0], lb[0], rt[0]);\n      var maxY = mathMax(lt[1], rb[1], lb[1], rt[1]);\n      this.width = maxX - this.x;\n      this.height = maxY - this.y;\n    };\n  }(),\n\n  /**\n   * Calculate matrix of transforming from self to target rect\n   * @param  {module:zrender/core/BoundingRect} b\n   * @return {Array.<number>}\n   */\n  calculateTransform: function (b) {\n    var a = this;\n    var sx = b.width / a.width;\n    var sy = b.height / a.height;\n    var m = matrix.create(); // 矩阵右乘\n\n    matrix.translate(m, m, [-a.x, -a.y]);\n    matrix.scale(m, m, [sx, sy]);\n    matrix.translate(m, m, [b.x, b.y]);\n    return m;\n  },\n\n  /**\n   * @param {(module:echarts/core/BoundingRect|Object)} b\n   * @return {boolean}\n   */\n  intersect: function (b) {\n    if (!b) {\n      return false;\n    }\n\n    if (!(b instanceof BoundingRect)) {\n      // Normalize negative width/height.\n      b = BoundingRect.create(b);\n    }\n\n    var a = this;\n    var ax0 = a.x;\n    var ax1 = a.x + a.width;\n    var ay0 = a.y;\n    var ay1 = a.y + a.height;\n    var bx0 = b.x;\n    var bx1 = b.x + b.width;\n    var by0 = b.y;\n    var by1 = b.y + b.height;\n    return !(ax1 < bx0 || bx1 < ax0 || ay1 < by0 || by1 < ay0);\n  },\n  contain: function (x, y) {\n    var rect = this;\n    return x >= rect.x && x <= rect.x + rect.width && y >= rect.y && y <= rect.y + rect.height;\n  },\n\n  /**\n   * @return {module:echarts/core/BoundingRect}\n   */\n  clone: function () {\n    return new BoundingRect(this.x, this.y, this.width, this.height);\n  },\n\n  /**\n   * Copy from another rect\n   */\n  copy: function (other) {\n    this.x = other.x;\n    this.y = other.y;\n    this.width = other.width;\n    this.height = other.height;\n  },\n  plain: function () {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    };\n  }\n};\n/**\n * @param {Object|module:zrender/core/BoundingRect} rect\n * @param {number} rect.x\n * @param {number} rect.y\n * @param {number} rect.width\n * @param {number} rect.height\n * @return {module:zrender/core/BoundingRect}\n */\n\nBoundingRect.create = function (rect) {\n  return new BoundingRect(rect.x, rect.y, rect.width, rect.height);\n};\n\nvar _default = BoundingRect;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* A third-party license is embeded for some of the code in this file:\n* The method \"quantile\" was copied from \"d3.js\".\n* (See more details in the comment of the method below.)\n* The use of the source code of this file is also subject to the terms\n* and consitions of the license of \"d3.js\" (BSD-3Clause, see\n* </licenses/LICENSE-d3>).\n*/\nvar RADIAN_EPSILON = 1e-4;\n\nfunction _trim(str) {\n  return str.replace(/^\\s+|\\s+$/g, '');\n}\n/**\n * Linear mapping a value from domain to range\n * @memberOf module:echarts/util/number\n * @param  {(number|Array.<number>)} val\n * @param  {Array.<number>} domain Domain extent domain[0] can be bigger than domain[1]\n * @param  {Array.<number>} range  Range extent range[0] can be bigger than range[1]\n * @param  {boolean} clamp\n * @return {(number|Array.<number>}\n */\n\n\nfunction linearMap(val, domain, range, clamp) {\n  var subDomain = domain[1] - domain[0];\n  var subRange = range[1] - range[0];\n\n  if (subDomain === 0) {\n    return subRange === 0 ? range[0] : (range[0] + range[1]) / 2;\n  } // Avoid accuracy problem in edge, such as\n  // 146.39 - 62.83 === 83.55999999999999.\n  // See echarts/test/ut/spec/util/number.js#linearMap#accuracyError\n  // It is a little verbose for efficiency considering this method\n  // is a hotspot.\n\n\n  if (clamp) {\n    if (subDomain > 0) {\n      if (val <= domain[0]) {\n        return range[0];\n      } else if (val >= domain[1]) {\n        return range[1];\n      }\n    } else {\n      if (val >= domain[0]) {\n        return range[0];\n      } else if (val <= domain[1]) {\n        return range[1];\n      }\n    }\n  } else {\n    if (val === domain[0]) {\n      return range[0];\n    }\n\n    if (val === domain[1]) {\n      return range[1];\n    }\n  }\n\n  return (val - domain[0]) / subDomain * subRange + range[0];\n}\n/**\n * Convert a percent string to absolute number.\n * Returns NaN if percent is not a valid string or number\n * @memberOf module:echarts/util/number\n * @param {string|number} percent\n * @param {number} all\n * @return {number}\n */\n\n\nfunction parsePercent(percent, all) {\n  switch (percent) {\n    case 'center':\n    case 'middle':\n      percent = '50%';\n      break;\n\n    case 'left':\n    case 'top':\n      percent = '0%';\n      break;\n\n    case 'right':\n    case 'bottom':\n      percent = '100%';\n      break;\n  }\n\n  if (typeof percent === 'string') {\n    if (_trim(percent).match(/%$/)) {\n      return parseFloat(percent) / 100 * all;\n    }\n\n    return parseFloat(percent);\n  }\n\n  return percent == null ? NaN : +percent;\n}\n/**\n * (1) Fix rounding error of float numbers.\n * (2) Support return string to avoid scientific notation like '3.5e-7'.\n *\n * @param {number} x\n * @param {number} [precision]\n * @param {boolean} [returnStr]\n * @return {number|string}\n */\n\n\nfunction round(x, precision, returnStr) {\n  if (precision == null) {\n    precision = 10;\n  } // Avoid range error\n\n\n  precision = Math.min(Math.max(0, precision), 20);\n  x = (+x).toFixed(precision);\n  return returnStr ? x : +x;\n}\n/**\n * asc sort arr.\n * The input arr will be modified.\n *\n * @param {Array} arr\n * @return {Array} The input arr.\n */\n\n\nfunction asc(arr) {\n  arr.sort(function (a, b) {\n    return a - b;\n  });\n  return arr;\n}\n/**\n * Get precision\n * @param {number} val\n */\n\n\nfunction getPrecision(val) {\n  val = +val;\n\n  if (isNaN(val)) {\n    return 0;\n  } // It is much faster than methods converting number to string as follows\n  //      var tmp = val.toString();\n  //      return tmp.length - 1 - tmp.indexOf('.');\n  // especially when precision is low\n\n\n  var e = 1;\n  var count = 0;\n\n  while (Math.round(val * e) / e !== val) {\n    e *= 10;\n    count++;\n  }\n\n  return count;\n}\n/**\n * @param {string|number} val\n * @return {number}\n */\n\n\nfunction getPrecisionSafe(val) {\n  var str = val.toString(); // Consider scientific notation: '3.4e-12' '3.4e+12'\n\n  var eIndex = str.indexOf('e');\n\n  if (eIndex > 0) {\n    var precision = +str.slice(eIndex + 1);\n    return precision < 0 ? -precision : 0;\n  } else {\n    var dotIndex = str.indexOf('.');\n    return dotIndex < 0 ? 0 : str.length - 1 - dotIndex;\n  }\n}\n/**\n * Minimal dicernible data precisioin according to a single pixel.\n *\n * @param {Array.<number>} dataExtent\n * @param {Array.<number>} pixelExtent\n * @return {number} precision\n */\n\n\nfunction getPixelPrecision(dataExtent, pixelExtent) {\n  var log = Math.log;\n  var LN10 = Math.LN10;\n  var dataQuantity = Math.floor(log(dataExtent[1] - dataExtent[0]) / LN10);\n  var sizeQuantity = Math.round(log(Math.abs(pixelExtent[1] - pixelExtent[0])) / LN10); // toFixed() digits argument must be between 0 and 20.\n\n  var precision = Math.min(Math.max(-dataQuantity + sizeQuantity, 0), 20);\n  return !isFinite(precision) ? 20 : precision;\n}\n/**\n * Get a data of given precision, assuring the sum of percentages\n * in valueList is 1.\n * The largest remainer method is used.\n * https://en.wikipedia.org/wiki/Largest_remainder_method\n *\n * @param {Array.<number>} valueList a list of all data\n * @param {number} idx index of the data to be processed in valueList\n * @param {number} precision integer number showing digits of precision\n * @return {number} percent ranging from 0 to 100\n */\n\n\nfunction getPercentWithPrecision(valueList, idx, precision) {\n  if (!valueList[idx]) {\n    return 0;\n  }\n\n  var sum = zrUtil.reduce(valueList, function (acc, val) {\n    return acc + (isNaN(val) ? 0 : val);\n  }, 0);\n\n  if (sum === 0) {\n    return 0;\n  }\n\n  var digits = Math.pow(10, precision);\n  var votesPerQuota = zrUtil.map(valueList, function (val) {\n    return (isNaN(val) ? 0 : val) / sum * digits * 100;\n  });\n  var targetSeats = digits * 100;\n  var seats = zrUtil.map(votesPerQuota, function (votes) {\n    // Assign automatic seats.\n    return Math.floor(votes);\n  });\n  var currentSum = zrUtil.reduce(seats, function (acc, val) {\n    return acc + val;\n  }, 0);\n  var remainder = zrUtil.map(votesPerQuota, function (votes, idx) {\n    return votes - seats[idx];\n  }); // Has remainding votes.\n\n  while (currentSum < targetSeats) {\n    // Find next largest remainder.\n    var max = Number.NEGATIVE_INFINITY;\n    var maxId = null;\n\n    for (var i = 0, len = remainder.length; i < len; ++i) {\n      if (remainder[i] > max) {\n        max = remainder[i];\n        maxId = i;\n      }\n    } // Add a vote to max remainder.\n\n\n    ++seats[maxId];\n    remainder[maxId] = 0;\n    ++currentSum;\n  }\n\n  return seats[idx] / digits;\n} // Number.MAX_SAFE_INTEGER, ie do not support.\n\n\nvar MAX_SAFE_INTEGER = 9007199254740991;\n/**\n * To 0 - 2 * PI, considering negative radian.\n * @param {number} radian\n * @return {number}\n */\n\nfunction remRadian(radian) {\n  var pi2 = Math.PI * 2;\n  return (radian % pi2 + pi2) % pi2;\n}\n/**\n * @param {type} radian\n * @return {boolean}\n */\n\n\nfunction isRadianAroundZero(val) {\n  return val > -RADIAN_EPSILON && val < RADIAN_EPSILON;\n}\n/* eslint-disable */\n\n\nvar TIME_REG = /^(?:(\\d{4})(?:[-\\/](\\d{1,2})(?:[-\\/](\\d{1,2})(?:[T ](\\d{1,2})(?::(\\d\\d)(?::(\\d\\d)(?:[.,](\\d+))?)?)?(Z|[\\+\\-]\\d\\d:?\\d\\d)?)?)?)?)?$/; // jshint ignore:line\n\n/* eslint-enable */\n\n/**\n * @param {string|Date|number} value These values can be accepted:\n *   + An instance of Date, represent a time in its own time zone.\n *   + Or string in a subset of ISO 8601, only including:\n *     + only year, month, date: '2012-03', '2012-03-01', '2012-03-01 05', '2012-03-01 05:06',\n *     + separated with T or space: '2012-03-01T12:22:33.123', '2012-03-01 12:22:33.123',\n *     + time zone: '2012-03-01T12:22:33Z', '2012-03-01T12:22:33+8000', '2012-03-01T12:22:33-05:00',\n *     all of which will be treated as local time if time zone is not specified\n *     (see <https://momentjs.com/>).\n *   + Or other string format, including (all of which will be treated as loacal time):\n *     '2012', '2012-3-1', '2012/3/1', '2012/03/01',\n *     '2009/6/12 2:00', '2009/6/12 2:05:08', '2009/6/12 2:05:08.123'\n *   + a timestamp, which represent a time in UTC.\n * @return {Date} date\n */\n\nfunction parseDate(value) {\n  if (value instanceof Date) {\n    return value;\n  } else if (typeof value === 'string') {\n    // Different browsers parse date in different way, so we parse it manually.\n    // Some other issues:\n    // new Date('1970-01-01') is UTC,\n    // new Date('1970/01/01') and new Date('1970-1-01') is local.\n    // See issue #3623\n    var match = TIME_REG.exec(value);\n\n    if (!match) {\n      // return Invalid Date.\n      return new Date(NaN);\n    } // Use local time when no timezone offset specifed.\n\n\n    if (!match[8]) {\n      // match[n] can only be string or undefined.\n      // But take care of '12' + 1 => '121'.\n      return new Date(+match[1], +(match[2] || 1) - 1, +match[3] || 1, +match[4] || 0, +(match[5] || 0), +match[6] || 0, +match[7] || 0);\n    } // Timezoneoffset of Javascript Date has considered DST (Daylight Saving Time,\n    // https://tc39.github.io/ecma262/#sec-daylight-saving-time-adjustment).\n    // For example, system timezone is set as \"Time Zone: America/Toronto\",\n    // then these code will get different result:\n    // `new Date(1478411999999).getTimezoneOffset();  // get 240`\n    // `new Date(1478412000000).getTimezoneOffset();  // get 300`\n    // So we should not use `new Date`, but use `Date.UTC`.\n    else {\n        var hour = +match[4] || 0;\n\n        if (match[8].toUpperCase() !== 'Z') {\n          hour -= match[8].slice(0, 3);\n        }\n\n        return new Date(Date.UTC(+match[1], +(match[2] || 1) - 1, +match[3] || 1, hour, +(match[5] || 0), +match[6] || 0, +match[7] || 0));\n      }\n  } else if (value == null) {\n    return new Date(NaN);\n  }\n\n  return new Date(Math.round(value));\n}\n/**\n * Quantity of a number. e.g. 0.1, 1, 10, 100\n *\n * @param  {number} val\n * @return {number}\n */\n\n\nfunction quantity(val) {\n  return Math.pow(10, quantityExponent(val));\n}\n/**\n * Exponent of the quantity of a number\n * e.g., 1234 equals to 1.234*10^3, so quantityExponent(1234) is 3\n *\n * @param  {number} val non-negative value\n * @return {number}\n */\n\n\nfunction quantityExponent(val) {\n  if (val === 0) {\n    return 0;\n  }\n\n  var exp = Math.floor(Math.log(val) / Math.LN10);\n  /**\n   * exp is expected to be the rounded-down result of the base-10 log of val.\n   * But due to the precision loss with Math.log(val), we need to restore it\n   * using 10^exp to make sure we can get val back from exp. #11249\n   */\n\n  if (val / Math.pow(10, exp) >= 10) {\n    exp++;\n  }\n\n  return exp;\n}\n/**\n * find a “nice” number approximately equal to x. Round the number if round = true,\n * take ceiling if round = false. The primary observation is that the “nicest”\n * numbers in decimal are 1, 2, and 5, and all power-of-ten multiples of these numbers.\n *\n * See \"Nice Numbers for Graph Labels\" of Graphic Gems.\n *\n * @param  {number} val Non-negative value.\n * @param  {boolean} round\n * @return {number}\n */\n\n\nfunction nice(val, round) {\n  var exponent = quantityExponent(val);\n  var exp10 = Math.pow(10, exponent);\n  var f = val / exp10; // 1 <= f < 10\n\n  var nf;\n\n  if (round) {\n    if (f < 1.5) {\n      nf = 1;\n    } else if (f < 2.5) {\n      nf = 2;\n    } else if (f < 4) {\n      nf = 3;\n    } else if (f < 7) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  } else {\n    if (f < 1) {\n      nf = 1;\n    } else if (f < 2) {\n      nf = 2;\n    } else if (f < 3) {\n      nf = 3;\n    } else if (f < 5) {\n      nf = 5;\n    } else {\n      nf = 10;\n    }\n  }\n\n  val = nf * exp10; // Fix 3 * 0.1 === 0.30000000000000004 issue (see IEEE 754).\n  // 20 is the uppper bound of toFixed.\n\n  return exponent >= -20 ? +val.toFixed(exponent < 0 ? -exponent : 0) : val;\n}\n/**\n * This code was copied from \"d3.js\"\n * <https://github.com/d3/d3/blob/9cc9a875e636a1dcf36cc1e07bdf77e1ad6e2c74/src/arrays/quantile.js>.\n * See the license statement at the head of this file.\n * @param {Array.<number>} ascArr\n */\n\n\nfunction quantile(ascArr, p) {\n  var H = (ascArr.length - 1) * p + 1;\n  var h = Math.floor(H);\n  var v = +ascArr[h - 1];\n  var e = H - h;\n  return e ? v + e * (ascArr[h] - v) : v;\n}\n/**\n * Order intervals asc, and split them when overlap.\n * expect(numberUtil.reformIntervals([\n *     {interval: [18, 62], close: [1, 1]},\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [1, 1]},\n *     {interval: [62, 150], close: [1, 1]},\n *     {interval: [106, 150], close: [1, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ])).toEqual([\n *     {interval: [-Infinity, -70], close: [0, 0]},\n *     {interval: [-70, -26], close: [1, 1]},\n *     {interval: [-26, 18], close: [0, 1]},\n *     {interval: [18, 62], close: [0, 1]},\n *     {interval: [62, 150], close: [0, 1]},\n *     {interval: [150, Infinity], close: [0, 0]}\n * ]);\n * @param {Array.<Object>} list, where `close` mean open or close\n *        of the interval, and Infinity can be used.\n * @return {Array.<Object>} The origin list, which has been reformed.\n */\n\n\nfunction reformIntervals(list) {\n  list.sort(function (a, b) {\n    return littleThan(a, b, 0) ? -1 : 1;\n  });\n  var curr = -Infinity;\n  var currClose = 1;\n\n  for (var i = 0; i < list.length;) {\n    var interval = list[i].interval;\n    var close = list[i].close;\n\n    for (var lg = 0; lg < 2; lg++) {\n      if (interval[lg] <= curr) {\n        interval[lg] = curr;\n        close[lg] = !lg ? 1 - currClose : 1;\n      }\n\n      curr = interval[lg];\n      currClose = close[lg];\n    }\n\n    if (interval[0] === interval[1] && close[0] * close[1] !== 1) {\n      list.splice(i, 1);\n    } else {\n      i++;\n    }\n  }\n\n  return list;\n\n  function littleThan(a, b, lg) {\n    return a.interval[lg] < b.interval[lg] || a.interval[lg] === b.interval[lg] && (a.close[lg] - b.close[lg] === (!lg ? 1 : -1) || !lg && littleThan(a, b, 1));\n  }\n}\n/**\n * parseFloat NaNs numeric-cast false positives (null|true|false|\"\")\n * ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n * subtraction forces infinities to NaN\n *\n * @param {*} v\n * @return {boolean}\n */\n\n\nfunction isNumeric(v) {\n  return v - parseFloat(v) >= 0;\n}\n\nexports.linearMap = linearMap;\nexports.parsePercent = parsePercent;\nexports.round = round;\nexports.asc = asc;\nexports.getPrecision = getPrecision;\nexports.getPrecisionSafe = getPrecisionSafe;\nexports.getPixelPrecision = getPixelPrecision;\nexports.getPercentWithPrecision = getPercentWithPrecision;\nexports.MAX_SAFE_INTEGER = MAX_SAFE_INTEGER;\nexports.remRadian = remRadian;\nexports.isRadianAroundZero = isRadianAroundZero;\nexports.parseDate = parseDate;\nexports.quantity = quantity;\nexports.quantityExponent = quantityExponent;\nexports.nice = nice;\nexports.quantile = quantile;\nexports.reformIntervals = reformIntervals;\nexports.isNumeric = isNumeric;","// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n  this.head = null;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.tail = null;\n  this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\n\nlinkedListProto.insert = function (val) {\n  var entry = new Entry(val);\n  this.insertEntry(entry);\n  return entry;\n};\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.insertEntry = function (entry) {\n  if (!this.head) {\n    this.head = this.tail = entry;\n  } else {\n    this.tail.next = entry;\n    entry.prev = this.tail;\n    entry.next = null;\n    this.tail = entry;\n  }\n\n  this._len++;\n};\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\n\n\nlinkedListProto.remove = function (entry) {\n  var prev = entry.prev;\n  var next = entry.next;\n\n  if (prev) {\n    prev.next = next;\n  } else {\n    // Is head\n    this.head = next;\n  }\n\n  if (next) {\n    next.prev = prev;\n  } else {\n    // Is tail\n    this.tail = prev;\n  }\n\n  entry.next = entry.prev = null;\n  this._len--;\n};\n/**\n * @return {number}\n */\n\n\nlinkedListProto.len = function () {\n  return this._len;\n};\n/**\n * Clear list\n */\n\n\nlinkedListProto.clear = function () {\n  this.head = this.tail = null;\n  this._len = 0;\n};\n/**\n * @constructor\n * @param {} val\n */\n\n\nvar Entry = function (val) {\n  /**\n   * @type {}\n   */\n  this.value = val;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.next;\n  /**\n   * @type {module:zrender/core/LRU~Entry}\n   */\n\n  this.prev;\n};\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\n\n\nvar LRU = function (maxSize) {\n  this._list = new LinkedList();\n  this._map = {};\n  this._maxSize = maxSize || 10;\n  this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\n\nLRUProto.put = function (key, value) {\n  var list = this._list;\n  var map = this._map;\n  var removed = null;\n\n  if (map[key] == null) {\n    var len = list.len(); // Reuse last removed entry\n\n    var entry = this._lastRemovedEntry;\n\n    if (len >= this._maxSize && len > 0) {\n      // Remove the least recently used\n      var leastUsedEntry = list.head;\n      list.remove(leastUsedEntry);\n      delete map[leastUsedEntry.key];\n      removed = leastUsedEntry.value;\n      this._lastRemovedEntry = leastUsedEntry;\n    }\n\n    if (entry) {\n      entry.value = value;\n    } else {\n      entry = new Entry(value);\n    }\n\n    entry.key = key;\n    list.insertEntry(entry);\n    map[key] = entry;\n  }\n\n  return removed;\n};\n/**\n * @param  {string} key\n * @return {}\n */\n\n\nLRUProto.get = function (key) {\n  var entry = this._map[key];\n  var list = this._list;\n\n  if (entry != null) {\n    // Put the latest used entry in the tail\n    if (entry !== list.tail) {\n      list.remove(entry);\n      list.insertEntry(entry);\n    }\n\n    return entry.value;\n  }\n};\n/**\n * Clear the cache\n */\n\n\nLRUProto.clear = function () {\n  this._list.clear();\n\n  this._map = {};\n};\n\nvar _default = LRU;\nmodule.exports = _default;","var LRU = require(\"../../core/LRU\");\n\nvar globalImageCache = new LRU(50);\n/**\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\nfunction findExistImage(newImageOrSrc) {\n  if (typeof newImageOrSrc === 'string') {\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    return cachedImgObj && cachedImgObj.image;\n  } else {\n    return newImageOrSrc;\n  }\n}\n/**\n * Caution: User should cache loaded images, but not just count on LRU.\n * Consider if required images more than LRU size, will dead loop occur?\n *\n * @param {string|HTMLImageElement|HTMLCanvasElement|Canvas} newImageOrSrc\n * @param {HTMLImageElement|HTMLCanvasElement|Canvas} image Existent image.\n * @param {module:zrender/Element} [hostEl] For calling `dirty`.\n * @param {Function} [cb] params: (image, cbPayload)\n * @param {Object} [cbPayload] Payload on cb calling.\n * @return {HTMLImageElement|HTMLCanvasElement|Canvas} image\n */\n\n\nfunction createOrUpdateImage(newImageOrSrc, image, hostEl, cb, cbPayload) {\n  if (!newImageOrSrc) {\n    return image;\n  } else if (typeof newImageOrSrc === 'string') {\n    // Image should not be loaded repeatly.\n    if (image && image.__zrImageSrc === newImageOrSrc || !hostEl) {\n      return image;\n    } // Only when there is no existent image or existent image src\n    // is different, this method is responsible for load.\n\n\n    var cachedImgObj = globalImageCache.get(newImageOrSrc);\n    var pendingWrap = {\n      hostEl: hostEl,\n      cb: cb,\n      cbPayload: cbPayload\n    };\n\n    if (cachedImgObj) {\n      image = cachedImgObj.image;\n      !isImageReady(image) && cachedImgObj.pending.push(pendingWrap);\n    } else {\n      image = new Image();\n      image.onload = image.onerror = imageOnLoad;\n      globalImageCache.put(newImageOrSrc, image.__cachedImgObj = {\n        image: image,\n        pending: [pendingWrap]\n      });\n      image.src = image.__zrImageSrc = newImageOrSrc;\n    }\n\n    return image;\n  } // newImageOrSrc is an HTMLImageElement or HTMLCanvasElement or Canvas\n  else {\n      return newImageOrSrc;\n    }\n}\n\nfunction imageOnLoad() {\n  var cachedImgObj = this.__cachedImgObj;\n  this.onload = this.onerror = this.__cachedImgObj = null;\n\n  for (var i = 0; i < cachedImgObj.pending.length; i++) {\n    var pendingWrap = cachedImgObj.pending[i];\n    var cb = pendingWrap.cb;\n    cb && cb(this, pendingWrap.cbPayload);\n    pendingWrap.hostEl.dirty();\n  }\n\n  cachedImgObj.pending.length = 0;\n}\n\nfunction isImageReady(image) {\n  return image && image.width && image.height;\n}\n\nexports.findExistImage = findExistImage;\nexports.createOrUpdateImage = createOrUpdateImage;\nexports.isImageReady = isImageReady;","var BoundingRect = require(\"../core/BoundingRect\");\n\nvar imageHelper = require(\"../graphic/helper/image\");\n\nvar _util = require(\"../core/util\");\n\nvar getContext = _util.getContext;\nvar extend = _util.extend;\nvar retrieve2 = _util.retrieve2;\nvar retrieve3 = _util.retrieve3;\nvar trim = _util.trim;\nvar textWidthCache = {};\nvar textWidthCacheCounter = 0;\nvar TEXT_CACHE_MAX = 5000;\nvar STYLE_REG = /\\{([a-zA-Z0-9_]+)\\|([^}]*)\\}/g;\nvar DEFAULT_FONT = '12px sans-serif'; // Avoid assign to an exported variable, for transforming to cjs.\n\nvar methods = {};\n\nfunction $override(name, fn) {\n  methods[name] = fn;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {number} width\n */\n\n\nfunction getWidth(text, font) {\n  font = font || DEFAULT_FONT;\n  var key = text + ':' + font;\n\n  if (textWidthCache[key]) {\n    return textWidthCache[key];\n  }\n\n  var textLines = (text + '').split('\\n');\n  var width = 0;\n\n  for (var i = 0, l = textLines.length; i < l; i++) {\n    // textContain.measureText may be overrided in SVG or VML\n    width = Math.max(measureText(textLines[i], font).width, width);\n  }\n\n  if (textWidthCacheCounter > TEXT_CACHE_MAX) {\n    textWidthCacheCounter = 0;\n    textWidthCache = {};\n  }\n\n  textWidthCacheCounter++;\n  textWidthCache[key] = width;\n  return width;\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {string} [textAlign='left']\n * @param {string} [textVerticalAlign='top']\n * @param {Array.<number>} [textPadding]\n * @param {Object} [rich]\n * @param {Object} [truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\n\nfunction getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  return rich ? getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) : getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate);\n}\n\nfunction getPlainTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, truncate) {\n  var contentBlock = parsePlainText(text, font, textPadding, textLineHeight, truncate);\n  var outerWidth = getWidth(text, font);\n\n  if (textPadding) {\n    outerWidth += textPadding[1] + textPadding[3];\n  }\n\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  var rect = new BoundingRect(x, y, outerWidth, outerHeight);\n  rect.lineHeight = contentBlock.lineHeight;\n  return rect;\n}\n\nfunction getRichTextRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate) {\n  var contentBlock = parseRichText(text, {\n    rich: rich,\n    truncate: truncate,\n    font: font,\n    textAlign: textAlign,\n    textPadding: textPadding,\n    textLineHeight: textLineHeight\n  });\n  var outerWidth = contentBlock.outerWidth;\n  var outerHeight = contentBlock.outerHeight;\n  var x = adjustTextX(0, outerWidth, textAlign);\n  var y = adjustTextY(0, outerHeight, textVerticalAlign);\n  return new BoundingRect(x, y, outerWidth, outerHeight);\n}\n/**\n * @public\n * @param {number} x\n * @param {number} width\n * @param {string} [textAlign='left']\n * @return {number} Adjusted x.\n */\n\n\nfunction adjustTextX(x, width, textAlign) {\n  // FIXME Right to left language\n  if (textAlign === 'right') {\n    x -= width;\n  } else if (textAlign === 'center') {\n    x -= width / 2;\n  }\n\n  return x;\n}\n/**\n * @public\n * @param {number} y\n * @param {number} height\n * @param {string} [textVerticalAlign='top']\n * @return {number} Adjusted y.\n */\n\n\nfunction adjustTextY(y, height, textVerticalAlign) {\n  if (textVerticalAlign === 'middle') {\n    y -= height / 2;\n  } else if (textVerticalAlign === 'bottom') {\n    y -= height;\n  }\n\n  return y;\n}\n/**\n * Follow same interface to `Displayable.prototype.calculateTextPosition`.\n * @public\n * @param {Obejct} [out] Prepared out object. If not input, auto created in the method.\n * @param {module:zrender/graphic/Style} style where `textPosition` and `textDistance` are visited.\n * @param {Object} rect {x, y, width, height} Rect of the host elment, according to which the text positioned.\n * @return {Object} The input `out`. Set: {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction calculateTextPosition(out, style, rect) {\n  var textPosition = style.textPosition;\n  var distance = style.textDistance;\n  var x = rect.x;\n  var y = rect.y;\n  distance = distance || 0;\n  var height = rect.height;\n  var width = rect.width;\n  var halfHeight = height / 2;\n  var textAlign = 'left';\n  var textVerticalAlign = 'top';\n\n  switch (textPosition) {\n    case 'left':\n      x -= distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'right':\n      x += distance + width;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'top':\n      x += width / 2;\n      y -= distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'bottom':\n      x += width / 2;\n      y += height + distance;\n      textAlign = 'center';\n      break;\n\n    case 'inside':\n      x += width / 2;\n      y += halfHeight;\n      textAlign = 'center';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideLeft':\n      x += distance;\n      y += halfHeight;\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideRight':\n      x += width - distance;\n      y += halfHeight;\n      textAlign = 'right';\n      textVerticalAlign = 'middle';\n      break;\n\n    case 'insideTop':\n      x += width / 2;\n      y += distance;\n      textAlign = 'center';\n      break;\n\n    case 'insideBottom':\n      x += width / 2;\n      y += height - distance;\n      textAlign = 'center';\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideTopLeft':\n      x += distance;\n      y += distance;\n      break;\n\n    case 'insideTopRight':\n      x += width - distance;\n      y += distance;\n      textAlign = 'right';\n      break;\n\n    case 'insideBottomLeft':\n      x += distance;\n      y += height - distance;\n      textVerticalAlign = 'bottom';\n      break;\n\n    case 'insideBottomRight':\n      x += width - distance;\n      y += height - distance;\n      textAlign = 'right';\n      textVerticalAlign = 'bottom';\n      break;\n  }\n\n  out = out || {};\n  out.x = x;\n  out.y = y;\n  out.textAlign = textAlign;\n  out.textVerticalAlign = textVerticalAlign;\n  return out;\n}\n/**\n * To be removed. But still do not remove in case that some one has imported it.\n * @deprecated\n * @public\n * @param {stirng} textPosition\n * @param {Object} rect {x, y, width, height}\n * @param {number} distance\n * @return {Object} {x, y, textAlign, textVerticalAlign}\n */\n\n\nfunction adjustTextPositionOnRect(textPosition, rect, distance) {\n  var dummyStyle = {\n    textPosition: textPosition,\n    textDistance: distance\n  };\n  return calculateTextPosition({}, dummyStyle, rect);\n}\n/**\n * Show ellipsis if overflow.\n *\n * @public\n * @param  {string} text\n * @param  {string} containerWidth\n * @param  {string} font\n * @param  {number} [ellipsis='...']\n * @param  {Object} [options]\n * @param  {number} [options.maxIterations=3]\n * @param  {number} [options.minChar=0] If truncate result are less\n *                  then minChar, ellipsis will not show, which is\n *                  better for user hint in some cases.\n * @param  {number} [options.placeholder=''] When all truncated, use the placeholder.\n * @return {string}\n */\n\n\nfunction truncateText(text, containerWidth, font, ellipsis, options) {\n  if (!containerWidth) {\n    return '';\n  }\n\n  var textLines = (text + '').split('\\n');\n  options = prepareTruncateOptions(containerWidth, font, ellipsis, options); // FIXME\n  // It is not appropriate that every line has '...' when truncate multiple lines.\n\n  for (var i = 0, len = textLines.length; i < len; i++) {\n    textLines[i] = truncateSingleLine(textLines[i], options);\n  }\n\n  return textLines.join('\\n');\n}\n\nfunction prepareTruncateOptions(containerWidth, font, ellipsis, options) {\n  options = extend({}, options);\n  options.font = font;\n  var ellipsis = retrieve2(ellipsis, '...');\n  options.maxIterations = retrieve2(options.maxIterations, 2);\n  var minChar = options.minChar = retrieve2(options.minChar, 0); // FIXME\n  // Other languages?\n\n  options.cnCharWidth = getWidth('国', font); // FIXME\n  // Consider proportional font?\n\n  var ascCharWidth = options.ascCharWidth = getWidth('a', font);\n  options.placeholder = retrieve2(options.placeholder, ''); // Example 1: minChar: 3, text: 'asdfzxcv', truncate result: 'asdf', but not: 'a...'.\n  // Example 2: minChar: 3, text: '维度', truncate result: '维', but not: '...'.\n\n  var contentWidth = containerWidth = Math.max(0, containerWidth - 1); // Reserve some gap.\n\n  for (var i = 0; i < minChar && contentWidth >= ascCharWidth; i++) {\n    contentWidth -= ascCharWidth;\n  }\n\n  var ellipsisWidth = getWidth(ellipsis, font);\n\n  if (ellipsisWidth > contentWidth) {\n    ellipsis = '';\n    ellipsisWidth = 0;\n  }\n\n  contentWidth = containerWidth - ellipsisWidth;\n  options.ellipsis = ellipsis;\n  options.ellipsisWidth = ellipsisWidth;\n  options.contentWidth = contentWidth;\n  options.containerWidth = containerWidth;\n  return options;\n}\n\nfunction truncateSingleLine(textLine, options) {\n  var containerWidth = options.containerWidth;\n  var font = options.font;\n  var contentWidth = options.contentWidth;\n\n  if (!containerWidth) {\n    return '';\n  }\n\n  var lineWidth = getWidth(textLine, font);\n\n  if (lineWidth <= containerWidth) {\n    return textLine;\n  }\n\n  for (var j = 0;; j++) {\n    if (lineWidth <= contentWidth || j >= options.maxIterations) {\n      textLine += options.ellipsis;\n      break;\n    }\n\n    var subLength = j === 0 ? estimateLength(textLine, contentWidth, options.ascCharWidth, options.cnCharWidth) : lineWidth > 0 ? Math.floor(textLine.length * contentWidth / lineWidth) : 0;\n    textLine = textLine.substr(0, subLength);\n    lineWidth = getWidth(textLine, font);\n  }\n\n  if (textLine === '') {\n    textLine = options.placeholder;\n  }\n\n  return textLine;\n}\n\nfunction estimateLength(text, contentWidth, ascCharWidth, cnCharWidth) {\n  var width = 0;\n  var i = 0;\n\n  for (var len = text.length; i < len && width < contentWidth; i++) {\n    var charCode = text.charCodeAt(i);\n    width += 0 <= charCode && charCode <= 127 ? ascCharWidth : cnCharWidth;\n  }\n\n  return i;\n}\n/**\n * @public\n * @param {string} font\n * @return {number} line height\n */\n\n\nfunction getLineHeight(font) {\n  // FIXME A rough approach.\n  return getWidth('国', font);\n}\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @return {Object} width\n */\n\n\nfunction measureText(text, font) {\n  return methods.measureText(text, font);\n} // Avoid assign to an exported variable, for transforming to cjs.\n\n\nmethods.measureText = function (text, font) {\n  var ctx = getContext();\n  ctx.font = font || DEFAULT_FONT;\n  return ctx.measureText(text);\n};\n/**\n * @public\n * @param {string} text\n * @param {string} font\n * @param {Object} [truncate]\n * @return {Object} block: {lineHeight, lines, height, outerHeight, canCacheByTextString}\n *  Notice: for performance, do not calculate outerWidth util needed.\n *  `canCacheByTextString` means the result `lines` is only determined by the input `text`.\n *  Thus we can simply comparing the `input` text to determin whether the result changed,\n *  without travel the result `lines`.\n */\n\n\nfunction parsePlainText(text, font, padding, textLineHeight, truncate) {\n  text != null && (text += '');\n  var lineHeight = retrieve2(textLineHeight, getLineHeight(font));\n  var lines = text ? text.split('\\n') : [];\n  var height = lines.length * lineHeight;\n  var outerHeight = height;\n  var canCacheByTextString = true;\n\n  if (padding) {\n    outerHeight += padding[0] + padding[2];\n  }\n\n  if (text && truncate) {\n    canCacheByTextString = false;\n    var truncOuterHeight = truncate.outerHeight;\n    var truncOuterWidth = truncate.outerWidth;\n\n    if (truncOuterHeight != null && outerHeight > truncOuterHeight) {\n      text = '';\n      lines = [];\n    } else if (truncOuterWidth != null) {\n      var options = prepareTruncateOptions(truncOuterWidth - (padding ? padding[1] + padding[3] : 0), font, truncate.ellipsis, {\n        minChar: truncate.minChar,\n        placeholder: truncate.placeholder\n      }); // FIXME\n      // It is not appropriate that every line has '...' when truncate multiple lines.\n\n      for (var i = 0, len = lines.length; i < len; i++) {\n        lines[i] = truncateSingleLine(lines[i], options);\n      }\n    }\n  }\n\n  return {\n    lines: lines,\n    height: height,\n    outerHeight: outerHeight,\n    lineHeight: lineHeight,\n    canCacheByTextString: canCacheByTextString\n  };\n}\n/**\n * For example: 'some text {a|some text}other text{b|some text}xxx{c|}xxx'\n * Also consider 'bbbb{a|xxx\\nzzz}xxxx\\naaaa'.\n *\n * @public\n * @param {string} text\n * @param {Object} style\n * @return {Object} block\n * {\n *      width,\n *      height,\n *      lines: [{\n *          lineHeight,\n *          width,\n *          tokens: [[{\n *              styleName,\n *              text,\n *              width,      // include textPadding\n *              height,     // include textPadding\n *              textWidth, // pure text width\n *              textHeight, // pure text height\n *              lineHeihgt,\n *              font,\n *              textAlign,\n *              textVerticalAlign\n *          }], [...], ...]\n *      }, ...]\n * }\n * If styleName is undefined, it is plain text.\n */\n\n\nfunction parseRichText(text, style) {\n  var contentBlock = {\n    lines: [],\n    width: 0,\n    height: 0\n  };\n  text != null && (text += '');\n\n  if (!text) {\n    return contentBlock;\n  }\n\n  var lastIndex = STYLE_REG.lastIndex = 0;\n  var result;\n\n  while ((result = STYLE_REG.exec(text)) != null) {\n    var matchedIndex = result.index;\n\n    if (matchedIndex > lastIndex) {\n      pushTokens(contentBlock, text.substring(lastIndex, matchedIndex));\n    }\n\n    pushTokens(contentBlock, result[2], result[1]);\n    lastIndex = STYLE_REG.lastIndex;\n  }\n\n  if (lastIndex < text.length) {\n    pushTokens(contentBlock, text.substring(lastIndex, text.length));\n  }\n\n  var lines = contentBlock.lines;\n  var contentHeight = 0;\n  var contentWidth = 0; // For `textWidth: 100%`\n\n  var pendingList = [];\n  var stlPadding = style.textPadding;\n  var truncate = style.truncate;\n  var truncateWidth = truncate && truncate.outerWidth;\n  var truncateHeight = truncate && truncate.outerHeight;\n\n  if (stlPadding) {\n    truncateWidth != null && (truncateWidth -= stlPadding[1] + stlPadding[3]);\n    truncateHeight != null && (truncateHeight -= stlPadding[0] + stlPadding[2]);\n  } // Calculate layout info of tokens.\n\n\n  for (var i = 0; i < lines.length; i++) {\n    var line = lines[i];\n    var lineHeight = 0;\n    var lineWidth = 0;\n\n    for (var j = 0; j < line.tokens.length; j++) {\n      var token = line.tokens[j];\n      var tokenStyle = token.styleName && style.rich[token.styleName] || {}; // textPadding should not inherit from style.\n\n      var textPadding = token.textPadding = tokenStyle.textPadding; // textFont has been asigned to font by `normalizeStyle`.\n\n      var font = token.font = tokenStyle.font || style.font; // textHeight can be used when textVerticalAlign is specified in token.\n\n      var tokenHeight = token.textHeight = retrieve2( // textHeight should not be inherited, consider it can be specified\n      // as box height of the block.\n      tokenStyle.textHeight, getLineHeight(font));\n      textPadding && (tokenHeight += textPadding[0] + textPadding[2]);\n      token.height = tokenHeight;\n      token.lineHeight = retrieve3(tokenStyle.textLineHeight, style.textLineHeight, tokenHeight);\n      token.textAlign = tokenStyle && tokenStyle.textAlign || style.textAlign;\n      token.textVerticalAlign = tokenStyle && tokenStyle.textVerticalAlign || 'middle';\n\n      if (truncateHeight != null && contentHeight + token.lineHeight > truncateHeight) {\n        return {\n          lines: [],\n          width: 0,\n          height: 0\n        };\n      }\n\n      token.textWidth = getWidth(token.text, font);\n      var tokenWidth = tokenStyle.textWidth;\n      var tokenWidthNotSpecified = tokenWidth == null || tokenWidth === 'auto'; // Percent width, can be `100%`, can be used in drawing separate\n      // line when box width is needed to be auto.\n\n      if (typeof tokenWidth === 'string' && tokenWidth.charAt(tokenWidth.length - 1) === '%') {\n        token.percentWidth = tokenWidth;\n        pendingList.push(token);\n        tokenWidth = 0; // Do not truncate in this case, because there is no user case\n        // and it is too complicated.\n      } else {\n        if (tokenWidthNotSpecified) {\n          tokenWidth = token.textWidth; // FIXME: If image is not loaded and textWidth is not specified, calling\n          // `getBoundingRect()` will not get correct result.\n\n          var textBackgroundColor = tokenStyle.textBackgroundColor;\n          var bgImg = textBackgroundColor && textBackgroundColor.image; // Use cases:\n          // (1) If image is not loaded, it will be loaded at render phase and call\n          // `dirty()` and `textBackgroundColor.image` will be replaced with the loaded\n          // image, and then the right size will be calculated here at the next tick.\n          // See `graphic/helper/text.js`.\n          // (2) If image loaded, and `textBackgroundColor.image` is image src string,\n          // use `imageHelper.findExistImage` to find cached image.\n          // `imageHelper.findExistImage` will always be called here before\n          // `imageHelper.createOrUpdateImage` in `graphic/helper/text.js#renderRichText`\n          // which ensures that image will not be rendered before correct size calcualted.\n\n          if (bgImg) {\n            bgImg = imageHelper.findExistImage(bgImg);\n\n            if (imageHelper.isImageReady(bgImg)) {\n              tokenWidth = Math.max(tokenWidth, bgImg.width * tokenHeight / bgImg.height);\n            }\n          }\n        }\n\n        var paddingW = textPadding ? textPadding[1] + textPadding[3] : 0;\n        tokenWidth += paddingW;\n        var remianTruncWidth = truncateWidth != null ? truncateWidth - lineWidth : null;\n\n        if (remianTruncWidth != null && remianTruncWidth < tokenWidth) {\n          if (!tokenWidthNotSpecified || remianTruncWidth < paddingW) {\n            token.text = '';\n            token.textWidth = tokenWidth = 0;\n          } else {\n            token.text = truncateText(token.text, remianTruncWidth - paddingW, font, truncate.ellipsis, {\n              minChar: truncate.minChar\n            });\n            token.textWidth = getWidth(token.text, font);\n            tokenWidth = token.textWidth + paddingW;\n          }\n        }\n      }\n\n      lineWidth += token.width = tokenWidth;\n      tokenStyle && (lineHeight = Math.max(lineHeight, token.lineHeight));\n    }\n\n    line.width = lineWidth;\n    line.lineHeight = lineHeight;\n    contentHeight += lineHeight;\n    contentWidth = Math.max(contentWidth, lineWidth);\n  }\n\n  contentBlock.outerWidth = contentBlock.width = retrieve2(style.textWidth, contentWidth);\n  contentBlock.outerHeight = contentBlock.height = retrieve2(style.textHeight, contentHeight);\n\n  if (stlPadding) {\n    contentBlock.outerWidth += stlPadding[1] + stlPadding[3];\n    contentBlock.outerHeight += stlPadding[0] + stlPadding[2];\n  }\n\n  for (var i = 0; i < pendingList.length; i++) {\n    var token = pendingList[i];\n    var percentWidth = token.percentWidth; // Should not base on outerWidth, because token can not be placed out of padding.\n\n    token.width = parseInt(percentWidth, 10) / 100 * contentWidth;\n  }\n\n  return contentBlock;\n}\n\nfunction pushTokens(block, str, styleName) {\n  var isEmptyStr = str === '';\n  var strs = str.split('\\n');\n  var lines = block.lines;\n\n  for (var i = 0; i < strs.length; i++) {\n    var text = strs[i];\n    var token = {\n      styleName: styleName,\n      text: text,\n      isLineHolder: !text && !isEmptyStr\n    }; // The first token should be appended to the last line.\n\n    if (!i) {\n      var tokens = (lines[lines.length - 1] || (lines[0] = {\n        tokens: []\n      })).tokens; // Consider cases:\n      // (1) ''.split('\\n') => ['', '\\n', ''], the '' at the first item\n      // (which is a placeholder) should be replaced by new token.\n      // (2) A image backage, where token likes {a|}.\n      // (3) A redundant '' will affect textAlign in line.\n      // (4) tokens with the same tplName should not be merged, because\n      // they should be displayed in different box (with border and padding).\n\n      var tokensLen = tokens.length;\n      tokensLen === 1 && tokens[0].isLineHolder ? tokens[0] = token : // Consider text is '', only insert when it is the \"lineHolder\" or\n      // \"emptyStr\". Otherwise a redundant '' will affect textAlign in line.\n      (text || !tokensLen || isEmptyStr) && tokens.push(token);\n    } // Other tokens always start a new line.\n    else {\n        // If there is '', insert it as a placeholder.\n        lines.push({\n          tokens: [token]\n        });\n      }\n  }\n}\n\nfunction makeFont(style) {\n  // FIXME in node-canvas fontWeight is before fontStyle\n  // Use `fontSize` `fontFamily` to check whether font properties are defined.\n  var font = (style.fontSize || style.fontFamily) && [style.fontStyle, style.fontWeight, (style.fontSize || 12) + 'px', // If font properties are defined, `fontFamily` should not be ignored.\n  style.fontFamily || 'sans-serif'].join(' ');\n  return font && trim(font) || style.textFont || style.font;\n}\n\nexports.DEFAULT_FONT = DEFAULT_FONT;\nexports.$override = $override;\nexports.getWidth = getWidth;\nexports.getBoundingRect = getBoundingRect;\nexports.adjustTextX = adjustTextX;\nexports.adjustTextY = adjustTextY;\nexports.calculateTextPosition = calculateTextPosition;\nexports.adjustTextPositionOnRect = adjustTextPositionOnRect;\nexports.truncateText = truncateText;\nexports.getLineHeight = getLineHeight;\nexports.measureText = measureText;\nexports.parsePlainText = parsePlainText;\nexports.parseRichText = parseRichText;\nexports.makeFont = makeFont;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar numberUtil = require(\"./number\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Text from 'zrender/src/graphic/Text';\n\n/**\n * 每三位默认加,格式化\n * @param {string|number} x\n * @return {string}\n */\nfunction addCommas(x) {\n  if (isNaN(x)) {\n    return '-';\n  }\n\n  x = (x + '').split('.');\n  return x[0].replace(/(\\d{1,3})(?=(?:\\d{3})+(?!\\d))/g, '$1,') + (x.length > 1 ? '.' + x[1] : '');\n}\n/**\n * @param {string} str\n * @param {boolean} [upperCaseFirst=false]\n * @return {string} str\n */\n\n\nfunction toCamelCase(str, upperCaseFirst) {\n  str = (str || '').toLowerCase().replace(/-(.)/g, function (match, group1) {\n    return group1.toUpperCase();\n  });\n\n  if (upperCaseFirst && str) {\n    str = str.charAt(0).toUpperCase() + str.slice(1);\n  }\n\n  return str;\n}\n\nvar normalizeCssArray = zrUtil.normalizeCssArray;\nvar replaceReg = /([&<>\"'])/g;\nvar replaceMap = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  '\\'': '&#39;'\n};\n\nfunction encodeHTML(source) {\n  return source == null ? '' : (source + '').replace(replaceReg, function (str, c) {\n    return replaceMap[c];\n  });\n}\n\nvar TPL_VAR_ALIAS = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];\n\nvar wrapVar = function (varName, seriesIdx) {\n  return '{' + varName + (seriesIdx == null ? '' : seriesIdx) + '}';\n};\n/**\n * Template formatter\n * @param {string} tpl\n * @param {Array.<Object>|Object} paramsList\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTpl(tpl, paramsList, encode) {\n  if (!zrUtil.isArray(paramsList)) {\n    paramsList = [paramsList];\n  }\n\n  var seriesLen = paramsList.length;\n\n  if (!seriesLen) {\n    return '';\n  }\n\n  var $vars = paramsList[0].$vars || [];\n\n  for (var i = 0; i < $vars.length; i++) {\n    var alias = TPL_VAR_ALIAS[i];\n    tpl = tpl.replace(wrapVar(alias), wrapVar(alias, 0));\n  }\n\n  for (var seriesIdx = 0; seriesIdx < seriesLen; seriesIdx++) {\n    for (var k = 0; k < $vars.length; k++) {\n      var val = paramsList[seriesIdx][$vars[k]];\n      tpl = tpl.replace(wrapVar(TPL_VAR_ALIAS[k], seriesIdx), encode ? encodeHTML(val) : val);\n    }\n  }\n\n  return tpl;\n}\n/**\n * simple Template formatter\n *\n * @param {string} tpl\n * @param {Object} param\n * @param {boolean} [encode=false]\n * @return {string}\n */\n\n\nfunction formatTplSimple(tpl, param, encode) {\n  zrUtil.each(param, function (value, key) {\n    tpl = tpl.replace('{' + key + '}', encode ? encodeHTML(value) : value);\n  });\n  return tpl;\n}\n/**\n * @param {Object|string} [opt] If string, means color.\n * @param {string} [opt.color]\n * @param {string} [opt.extraCssText]\n * @param {string} [opt.type='item'] 'item' or 'subItem'\n * @param {string} [opt.renderMode='html'] render mode of tooltip, 'html' or 'richText'\n * @param {string} [opt.markerId='X'] id name for marker. If only one marker is in a rich text, this can be omitted.\n * @return {string}\n */\n\n\nfunction getTooltipMarker(opt, extraCssText) {\n  opt = zrUtil.isString(opt) ? {\n    color: opt,\n    extraCssText: extraCssText\n  } : opt || {};\n  var color = opt.color;\n  var type = opt.type;\n  var extraCssText = opt.extraCssText;\n  var renderMode = opt.renderMode || 'html';\n  var markerId = opt.markerId || 'X';\n\n  if (!color) {\n    return '';\n  }\n\n  if (renderMode === 'html') {\n    return type === 'subItem' ? '<span style=\"display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;' + 'border-radius:4px;width:4px;height:4px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>' : '<span style=\"display:inline-block;margin-right:5px;' + 'border-radius:10px;width:10px;height:10px;background-color:' + encodeHTML(color) + ';' + (extraCssText || '') + '\"></span>';\n  } else {\n    // Space for rich element marker\n    return {\n      renderMode: renderMode,\n      content: '{marker' + markerId + '|}  ',\n      style: {\n        color: color\n      }\n    };\n  }\n}\n\nfunction pad(str, len) {\n  str += '';\n  return '0000'.substr(0, len - str.length) + str;\n}\n/**\n * ISO Date format\n * @param {string} tpl\n * @param {number} value\n * @param {boolean} [isUTC=false] Default in local time.\n *           see `module:echarts/scale/Time`\n *           and `module:echarts/util/number#parseDate`.\n * @inner\n */\n\n\nfunction formatTime(tpl, value, isUTC) {\n  if (tpl === 'week' || tpl === 'month' || tpl === 'quarter' || tpl === 'half-year' || tpl === 'year') {\n    tpl = 'MM-dd\\nyyyy';\n  }\n\n  var date = numberUtil.parseDate(value);\n  var utc = isUTC ? 'UTC' : '';\n  var y = date['get' + utc + 'FullYear']();\n  var M = date['get' + utc + 'Month']() + 1;\n  var d = date['get' + utc + 'Date']();\n  var h = date['get' + utc + 'Hours']();\n  var m = date['get' + utc + 'Minutes']();\n  var s = date['get' + utc + 'Seconds']();\n  var S = date['get' + utc + 'Milliseconds']();\n  tpl = tpl.replace('MM', pad(M, 2)).replace('M', M).replace('yyyy', y).replace('yy', y % 100).replace('dd', pad(d, 2)).replace('d', d).replace('hh', pad(h, 2)).replace('h', h).replace('mm', pad(m, 2)).replace('m', m).replace('ss', pad(s, 2)).replace('s', s).replace('SSS', pad(S, 3));\n  return tpl;\n}\n/**\n * Capital first\n * @param {string} str\n * @return {string}\n */\n\n\nfunction capitalFirst(str) {\n  return str ? str.charAt(0).toUpperCase() + str.substr(1) : str;\n}\n\nvar truncateText = textContain.truncateText;\n/**\n * @public\n * @param {Object} opt\n * @param {string} opt.text\n * @param {string} opt.font\n * @param {string} [opt.textAlign='left']\n * @param {string} [opt.textVerticalAlign='top']\n * @param {Array.<number>} [opt.textPadding]\n * @param {number} [opt.textLineHeight]\n * @param {Object} [opt.rich]\n * @param {Object} [opt.truncate]\n * @return {Object} {x, y, width, height, lineHeight}\n */\n\nfunction getTextBoundingRect(opt) {\n  return textContain.getBoundingRect(opt.text, opt.font, opt.textAlign, opt.textVerticalAlign, opt.textPadding, opt.textLineHeight, opt.rich, opt.truncate);\n}\n/**\n * @deprecated\n * the `textLineHeight` was added later.\n * For backward compatiblility, put it as the last parameter.\n * But deprecated this interface. Please use `getTextBoundingRect` instead.\n */\n\n\nfunction getTextRect(text, font, textAlign, textVerticalAlign, textPadding, rich, truncate, textLineHeight) {\n  return textContain.getBoundingRect(text, font, textAlign, textVerticalAlign, textPadding, textLineHeight, rich, truncate);\n}\n\nexports.addCommas = addCommas;\nexports.toCamelCase = toCamelCase;\nexports.normalizeCssArray = normalizeCssArray;\nexports.encodeHTML = encodeHTML;\nexports.formatTpl = formatTpl;\nexports.formatTplSimple = formatTplSimple;\nexports.getTooltipMarker = getTooltipMarker;\nexports.formatTime = formatTime;\nexports.capitalFirst = capitalFirst;\nexports.truncateText = truncateText;\nexports.getTextBoundingRect = getTextBoundingRect;\nexports.getTextRect = getTextRect;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar _number = require(\"./number\");\n\nvar parsePercent = _number.parsePercent;\n\nvar formatUtil = require(\"./format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Layout helpers for each component positioning\nvar each = zrUtil.each;\n/**\n * @public\n */\n\nvar LOCATION_PARAMS = ['left', 'right', 'top', 'bottom', 'width', 'height'];\n/**\n * @public\n */\n\nvar HV_NAMES = [['width', 'left', 'right'], ['height', 'top', 'bottom']];\n\nfunction boxLayout(orient, group, gap, maxWidth, maxHeight) {\n  var x = 0;\n  var y = 0;\n\n  if (maxWidth == null) {\n    maxWidth = Infinity;\n  }\n\n  if (maxHeight == null) {\n    maxHeight = Infinity;\n  }\n\n  var currentLineMaxSize = 0;\n  group.eachChild(function (child, idx) {\n    var position = child.position;\n    var rect = child.getBoundingRect();\n    var nextChild = group.childAt(idx + 1);\n    var nextChildRect = nextChild && nextChild.getBoundingRect();\n    var nextX;\n    var nextY;\n\n    if (orient === 'horizontal') {\n      var moveX = rect.width + (nextChildRect ? -nextChildRect.x + rect.x : 0);\n      nextX = x + moveX; // Wrap when width exceeds maxWidth or meet a `newline` group\n      // FIXME compare before adding gap?\n\n      if (nextX > maxWidth || child.newline) {\n        x = 0;\n        nextX = moveX;\n        y += currentLineMaxSize + gap;\n        currentLineMaxSize = rect.height;\n      } else {\n        // FIXME: consider rect.y is not `0`?\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.height);\n      }\n    } else {\n      var moveY = rect.height + (nextChildRect ? -nextChildRect.y + rect.y : 0);\n      nextY = y + moveY; // Wrap when width exceeds maxHeight or meet a `newline` group\n\n      if (nextY > maxHeight || child.newline) {\n        x += currentLineMaxSize + gap;\n        y = 0;\n        nextY = moveY;\n        currentLineMaxSize = rect.width;\n      } else {\n        currentLineMaxSize = Math.max(currentLineMaxSize, rect.width);\n      }\n    }\n\n    if (child.newline) {\n      return;\n    }\n\n    position[0] = x;\n    position[1] = y;\n    orient === 'horizontal' ? x = nextX + gap : y = nextY + gap;\n  });\n}\n/**\n * VBox or HBox layouting\n * @param {string} orient\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\n\nvar box = boxLayout;\n/**\n * VBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar vbox = zrUtil.curry(boxLayout, 'vertical');\n/**\n * HBox layouting\n * @param {module:zrender/container/Group} group\n * @param {number} gap\n * @param {number} [width=Infinity]\n * @param {number} [height=Infinity]\n */\n\nvar hbox = zrUtil.curry(boxLayout, 'horizontal');\n/**\n * If x or x2 is not specified or 'center' 'left' 'right',\n * the width would be as long as possible.\n * If y or y2 is not specified or 'middle' 'top' 'bottom',\n * the height would be as long as possible.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.x]\n * @param {number|string} [positionInfo.y]\n * @param {number|string} [positionInfo.x2]\n * @param {number|string} [positionInfo.y2]\n * @param {Object} containerRect {width, height}\n * @param {string|number} margin\n * @return {Object} {width, height}\n */\n\nfunction getAvailableSize(positionInfo, containerRect, margin) {\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var x = parsePercent(positionInfo.x, containerWidth);\n  var y = parsePercent(positionInfo.y, containerHeight);\n  var x2 = parsePercent(positionInfo.x2, containerWidth);\n  var y2 = parsePercent(positionInfo.y2, containerHeight);\n  (isNaN(x) || isNaN(parseFloat(positionInfo.x))) && (x = 0);\n  (isNaN(x2) || isNaN(parseFloat(positionInfo.x2))) && (x2 = containerWidth);\n  (isNaN(y) || isNaN(parseFloat(positionInfo.y))) && (y = 0);\n  (isNaN(y2) || isNaN(parseFloat(positionInfo.y2))) && (y2 = containerHeight);\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  return {\n    width: Math.max(x2 - x - margin[1] - margin[3], 0),\n    height: Math.max(y2 - y - margin[0] - margin[2], 0)\n  };\n}\n/**\n * Parse position info.\n *\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width]\n * @param {number|string} [positionInfo.height]\n * @param {number|string} [positionInfo.aspect] Aspect is width / height\n * @param {Object} containerRect\n * @param {string|number} [margin]\n *\n * @return {module:zrender/core/BoundingRect}\n */\n\n\nfunction getLayoutRect(positionInfo, containerRect, margin) {\n  margin = formatUtil.normalizeCssArray(margin || 0);\n  var containerWidth = containerRect.width;\n  var containerHeight = containerRect.height;\n  var left = parsePercent(positionInfo.left, containerWidth);\n  var top = parsePercent(positionInfo.top, containerHeight);\n  var right = parsePercent(positionInfo.right, containerWidth);\n  var bottom = parsePercent(positionInfo.bottom, containerHeight);\n  var width = parsePercent(positionInfo.width, containerWidth);\n  var height = parsePercent(positionInfo.height, containerHeight);\n  var verticalMargin = margin[2] + margin[0];\n  var horizontalMargin = margin[1] + margin[3];\n  var aspect = positionInfo.aspect; // If width is not specified, calculate width from left and right\n\n  if (isNaN(width)) {\n    width = containerWidth - right - horizontalMargin - left;\n  }\n\n  if (isNaN(height)) {\n    height = containerHeight - bottom - verticalMargin - top;\n  }\n\n  if (aspect != null) {\n    // If width and height are not given\n    // 1. Graph should not exceeds the container\n    // 2. Aspect must be keeped\n    // 3. Graph should take the space as more as possible\n    // FIXME\n    // Margin is not considered, because there is no case that both\n    // using margin and aspect so far.\n    if (isNaN(width) && isNaN(height)) {\n      if (aspect > containerWidth / containerHeight) {\n        width = containerWidth * 0.8;\n      } else {\n        height = containerHeight * 0.8;\n      }\n    } // Calculate width or height with given aspect\n\n\n    if (isNaN(width)) {\n      width = aspect * height;\n    }\n\n    if (isNaN(height)) {\n      height = width / aspect;\n    }\n  } // If left is not specified, calculate left from right and width\n\n\n  if (isNaN(left)) {\n    left = containerWidth - right - width - horizontalMargin;\n  }\n\n  if (isNaN(top)) {\n    top = containerHeight - bottom - height - verticalMargin;\n  } // Align left and top\n\n\n  switch (positionInfo.left || positionInfo.right) {\n    case 'center':\n      left = containerWidth / 2 - width / 2 - margin[3];\n      break;\n\n    case 'right':\n      left = containerWidth - width - horizontalMargin;\n      break;\n  }\n\n  switch (positionInfo.top || positionInfo.bottom) {\n    case 'middle':\n    case 'center':\n      top = containerHeight / 2 - height / 2 - margin[0];\n      break;\n\n    case 'bottom':\n      top = containerHeight - height - verticalMargin;\n      break;\n  } // If something is wrong and left, top, width, height are calculated as NaN\n\n\n  left = left || 0;\n  top = top || 0;\n\n  if (isNaN(width)) {\n    // Width may be NaN if only one value is given except width\n    width = containerWidth - horizontalMargin - left - (right || 0);\n  }\n\n  if (isNaN(height)) {\n    // Height may be NaN if only one value is given except height\n    height = containerHeight - verticalMargin - top - (bottom || 0);\n  }\n\n  var rect = new BoundingRect(left + margin[3], top + margin[0], width, height);\n  rect.margin = margin;\n  return rect;\n}\n/**\n * Position a zr element in viewport\n *  Group position is specified by either\n *  {left, top}, {right, bottom}\n *  If all properties exists, right and bottom will be igonred.\n *\n * Logic:\n *     1. Scale (against origin point in parent coord)\n *     2. Rotate (against origin point in parent coord)\n *     3. Traslate (with el.position by this method)\n * So this method only fixes the last step 'Traslate', which does not affect\n * scaling and rotating.\n *\n * If be called repeatly with the same input el, the same result will be gotten.\n *\n * @param {module:zrender/Element} el Should have `getBoundingRect` method.\n * @param {Object} positionInfo\n * @param {number|string} [positionInfo.left]\n * @param {number|string} [positionInfo.top]\n * @param {number|string} [positionInfo.right]\n * @param {number|string} [positionInfo.bottom]\n * @param {number|string} [positionInfo.width] Only for opt.boundingModel: 'raw'\n * @param {number|string} [positionInfo.height] Only for opt.boundingModel: 'raw'\n * @param {Object} containerRect\n * @param {string|number} margin\n * @param {Object} [opt]\n * @param {Array.<number>} [opt.hv=[1,1]] Only horizontal or only vertical.\n * @param {Array.<number>} [opt.boundingMode='all']\n *        Specify how to calculate boundingRect when locating.\n *        'all': Position the boundingRect that is transformed and uioned\n *               both itself and its descendants.\n *               This mode simplies confine the elements in the bounding\n *               of their container (e.g., using 'right: 0').\n *        'raw': Position the boundingRect that is not transformed and only itself.\n *               This mode is useful when you want a element can overflow its\n *               container. (Consider a rotated circle needs to be located in a corner.)\n *               In this mode positionInfo.width/height can only be number.\n */\n\n\nfunction positionElement(el, positionInfo, containerRect, margin, opt) {\n  var h = !opt || !opt.hv || opt.hv[0];\n  var v = !opt || !opt.hv || opt.hv[1];\n  var boundingMode = opt && opt.boundingMode || 'all';\n\n  if (!h && !v) {\n    return;\n  }\n\n  var rect;\n\n  if (boundingMode === 'raw') {\n    rect = el.type === 'group' ? new BoundingRect(0, 0, +positionInfo.width || 0, +positionInfo.height || 0) : el.getBoundingRect();\n  } else {\n    rect = el.getBoundingRect();\n\n    if (el.needLocalTransform()) {\n      var transform = el.getLocalTransform(); // Notice: raw rect may be inner object of el,\n      // which should not be modified.\n\n      rect = rect.clone();\n      rect.applyTransform(transform);\n    }\n  } // The real width and height can not be specified but calculated by the given el.\n\n\n  positionInfo = getLayoutRect(zrUtil.defaults({\n    width: rect.width,\n    height: rect.height\n  }, positionInfo), containerRect, margin); // Because 'tranlate' is the last step in transform\n  // (see zrender/core/Transformable#getLocalTransform),\n  // we can just only modify el.position to get final result.\n\n  var elPos = el.position;\n  var dx = h ? positionInfo.x - rect.x : 0;\n  var dy = v ? positionInfo.y - rect.y : 0;\n  el.attr('position', boundingMode === 'raw' ? [dx, dy] : [elPos[0] + dx, elPos[1] + dy]);\n}\n/**\n * @param {Object} option Contains some of the properties in HV_NAMES.\n * @param {number} hvIdx 0: horizontal; 1: vertical.\n */\n\n\nfunction sizeCalculable(option, hvIdx) {\n  return option[HV_NAMES[hvIdx][0]] != null || option[HV_NAMES[hvIdx][1]] != null && option[HV_NAMES[hvIdx][2]] != null;\n}\n/**\n * Consider Case:\n * When defulat option has {left: 0, width: 100}, and we set {right: 0}\n * through setOption or media query, using normal zrUtil.merge will cause\n * {right: 0} does not take effect.\n *\n * @example\n * ComponentModel.extend({\n *     init: function () {\n *         ...\n *         var inputPositionParams = layout.getLayoutParams(option);\n *         this.mergeOption(inputPositionParams);\n *     },\n *     mergeOption: function (newOption) {\n *         newOption && zrUtil.merge(thisOption, newOption, true);\n *         layout.mergeLayoutParam(thisOption, newOption);\n *     }\n * });\n *\n * @param {Object} targetOption\n * @param {Object} newOption\n * @param {Object|string} [opt]\n * @param {boolean|Array.<boolean>} [opt.ignoreSize=false] Used for the components\n *  that width (or height) should not be calculated by left and right (or top and bottom).\n */\n\n\nfunction mergeLayoutParam(targetOption, newOption, opt) {\n  !zrUtil.isObject(opt) && (opt = {});\n  var ignoreSize = opt.ignoreSize;\n  !zrUtil.isArray(ignoreSize) && (ignoreSize = [ignoreSize, ignoreSize]);\n  var hResult = merge(HV_NAMES[0], 0);\n  var vResult = merge(HV_NAMES[1], 1);\n  copy(HV_NAMES[0], targetOption, hResult);\n  copy(HV_NAMES[1], targetOption, vResult);\n\n  function merge(names, hvIdx) {\n    var newParams = {};\n    var newValueCount = 0;\n    var merged = {};\n    var mergedValueCount = 0;\n    var enoughParamNumber = 2;\n    each(names, function (name) {\n      merged[name] = targetOption[name];\n    });\n    each(names, function (name) {\n      // Consider case: newOption.width is null, which is\n      // set by user for removing width setting.\n      hasProp(newOption, name) && (newParams[name] = merged[name] = newOption[name]);\n      hasValue(newParams, name) && newValueCount++;\n      hasValue(merged, name) && mergedValueCount++;\n    });\n\n    if (ignoreSize[hvIdx]) {\n      // Only one of left/right is premitted to exist.\n      if (hasValue(newOption, names[1])) {\n        merged[names[2]] = null;\n      } else if (hasValue(newOption, names[2])) {\n        merged[names[1]] = null;\n      }\n\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // or targetOption: {right: ...} and newOption: {width: ...},\n    // There is no conflict when merged only has params count\n    // little than enoughParamNumber.\n\n\n    if (mergedValueCount === enoughParamNumber || !newValueCount) {\n      return merged;\n    } // Case: newOption: {width: ..., right: ...},\n    // Than we can make sure user only want those two, and ignore\n    // all origin params in targetOption.\n    else if (newValueCount >= enoughParamNumber) {\n        return newParams;\n      } else {\n        // Chose another param from targetOption by priority.\n        for (var i = 0; i < names.length; i++) {\n          var name = names[i];\n\n          if (!hasProp(newParams, name) && hasProp(targetOption, name)) {\n            newParams[name] = targetOption[name];\n            break;\n          }\n        }\n\n        return newParams;\n      }\n  }\n\n  function hasProp(obj, name) {\n    return obj.hasOwnProperty(name);\n  }\n\n  function hasValue(obj, name) {\n    return obj[name] != null && obj[name] !== 'auto';\n  }\n\n  function copy(names, target, source) {\n    each(names, function (name) {\n      target[name] = source[name];\n    });\n  }\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction getLayoutParams(source) {\n  return copyLayoutParams({}, source);\n}\n/**\n * Retrieve 'left', 'right', 'top', 'bottom', 'width', 'height' from object.\n * @param {Object} source\n * @return {Object} Result contains those props.\n */\n\n\nfunction copyLayoutParams(target, source) {\n  source && target && each(LOCATION_PARAMS, function (name) {\n    source.hasOwnProperty(name) && (target[name] = source[name]);\n  });\n  return target;\n}\n\nexports.LOCATION_PARAMS = LOCATION_PARAMS;\nexports.HV_NAMES = HV_NAMES;\nexports.box = box;\nexports.vbox = vbox;\nexports.hbox = hbox;\nexports.getAvailableSize = getAvailableSize;\nexports.getLayoutRect = getLayoutRect;\nexports.positionElement = positionElement;\nexports.sizeCalculable = sizeCalculable;\nexports.mergeLayoutParam = mergeLayoutParam;\nexports.getLayoutParams = getLayoutParams;\nexports.copyLayoutParams = copyLayoutParams;","/**\n * echarts设备环境识别\n *\n * @desc echarts基于Canvas，纯Javascript图表库，提供直观，生动，可交互，可个性化定制的数据统计图表。\n * @author firede[firede@firede.us]\n * @desc thanks zepto.\n */\n\n/* global wx */\nvar env = {};\n\nif (typeof wx === 'object' && typeof wx.getSystemInfoSync === 'function') {\n  // In Weixin Application\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    wxa: true,\n    // Weixin Application\n    canvasSupported: true,\n    svgSupported: false,\n    touchEventsSupported: true,\n    domSupported: false\n  };\n} else if (typeof document === 'undefined' && typeof self !== 'undefined') {\n  // In worker\n  env = {\n    browser: {},\n    os: {},\n    node: false,\n    worker: true,\n    canvasSupported: true,\n    domSupported: false\n  };\n} else if (typeof navigator === 'undefined') {\n  // In node\n  env = {\n    browser: {},\n    os: {},\n    node: true,\n    worker: false,\n    // Assume canvas is supported\n    canvasSupported: true,\n    svgSupported: true,\n    domSupported: false\n  };\n} else {\n  env = detect(navigator.userAgent);\n}\n\nvar _default = env; // Zepto.js\n// (c) 2010-2013 Thomas Fuchs\n// Zepto.js may be freely distributed under the MIT license.\n\nfunction detect(ua) {\n  var os = {};\n  var browser = {}; // var webkit = ua.match(/Web[kK]it[\\/]{0,1}([\\d.]+)/);\n  // var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n  // var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n  // var ipod = ua.match(/(iPod)(.*OS\\s([\\d_]+))?/);\n  // var iphone = !ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n  // var webos = ua.match(/(webOS|hpwOS)[\\s\\/]([\\d.]+)/);\n  // var touchpad = webos && ua.match(/TouchPad/);\n  // var kindle = ua.match(/Kindle\\/([\\d.]+)/);\n  // var silk = ua.match(/Silk\\/([\\d._]+)/);\n  // var blackberry = ua.match(/(BlackBerry).*Version\\/([\\d.]+)/);\n  // var bb10 = ua.match(/(BB10).*Version\\/([\\d.]+)/);\n  // var rimtabletos = ua.match(/(RIM\\sTablet\\sOS)\\s([\\d.]+)/);\n  // var playbook = ua.match(/PlayBook/);\n  // var chrome = ua.match(/Chrome\\/([\\d.]+)/) || ua.match(/CriOS\\/([\\d.]+)/);\n\n  var firefox = ua.match(/Firefox\\/([\\d.]+)/); // var safari = webkit && ua.match(/Mobile\\//) && !chrome;\n  // var webview = ua.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/) && !chrome;\n\n  var ie = ua.match(/MSIE\\s([\\d.]+)/) // IE 11 Trident/7.0; rv:11.0\n  || ua.match(/Trident\\/.+?rv:(([\\d.]+))/);\n  var edge = ua.match(/Edge\\/([\\d.]+)/); // IE 12 and 12+\n\n  var weChat = /micromessenger/i.test(ua); // Todo: clean this up with a better OS/browser seperation:\n  // - discern (more) between multiple browsers on android\n  // - decide if kindle fire in silk mode is android or not\n  // - Firefox on Android doesn't specify the Android version\n  // - possibly devide in os, device and browser hashes\n  // if (browser.webkit = !!webkit) browser.version = webkit[1];\n  // if (android) os.android = true, os.version = android[2];\n  // if (iphone && !ipod) os.ios = os.iphone = true, os.version = iphone[2].replace(/_/g, '.');\n  // if (ipad) os.ios = os.ipad = true, os.version = ipad[2].replace(/_/g, '.');\n  // if (ipod) os.ios = os.ipod = true, os.version = ipod[3] ? ipod[3].replace(/_/g, '.') : null;\n  // if (webos) os.webos = true, os.version = webos[2];\n  // if (touchpad) os.touchpad = true;\n  // if (blackberry) os.blackberry = true, os.version = blackberry[2];\n  // if (bb10) os.bb10 = true, os.version = bb10[2];\n  // if (rimtabletos) os.rimtabletos = true, os.version = rimtabletos[2];\n  // if (playbook) browser.playbook = true;\n  // if (kindle) os.kindle = true, os.version = kindle[1];\n  // if (silk) browser.silk = true, browser.version = silk[1];\n  // if (!silk && os.android && ua.match(/Kindle Fire/)) browser.silk = true;\n  // if (chrome) browser.chrome = true, browser.version = chrome[1];\n\n  if (firefox) {\n    browser.firefox = true;\n    browser.version = firefox[1];\n  } // if (safari && (ua.match(/Safari/) || !!os.ios)) browser.safari = true;\n  // if (webview) browser.webview = true;\n\n\n  if (ie) {\n    browser.ie = true;\n    browser.version = ie[1];\n  }\n\n  if (edge) {\n    browser.edge = true;\n    browser.version = edge[1];\n  } // It is difficult to detect WeChat in Win Phone precisely, because ua can\n  // not be set on win phone. So we do not consider Win Phone.\n\n\n  if (weChat) {\n    browser.weChat = true;\n  } // os.tablet = !!(ipad || playbook || (android && !ua.match(/Mobile/)) ||\n  //     (firefox && ua.match(/Tablet/)) || (ie && !ua.match(/Phone/) && ua.match(/Touch/)));\n  // os.phone  = !!(!os.tablet && !os.ipod && (android || iphone || webos ||\n  //     (chrome && ua.match(/Android/)) || (chrome && ua.match(/CriOS\\/([\\d.]+)/)) ||\n  //     (firefox && ua.match(/Mobile/)) || (ie && ua.match(/Touch/))));\n\n\n  return {\n    browser: browser,\n    os: os,\n    node: false,\n    // 原生canvas支持，改极端点了\n    // canvasSupported : !(browser.ie && parseFloat(browser.version) < 9)\n    canvasSupported: !!document.createElement('canvas').getContext,\n    svgSupported: typeof SVGRect !== 'undefined',\n    // works on most browsers\n    // IE10/11 does not support touch event, and MS Edge supports them but not by\n    // default, so we dont check navigator.maxTouchPoints for them here.\n    touchEventsSupported: 'ontouchstart' in window && !browser.ie && !browser.edge,\n    // <http://caniuse.com/#search=pointer%20event>.\n    pointerEventsSupported: // (1) Firefox supports pointer but not by default, only MS browsers are reliable on pointer\n    // events currently. So we dont use that on other browsers unless tested sufficiently.\n    // For example, in iOS 13 Mobile Chromium 78, if the touching behavior starts page\n    // scroll, the `pointermove` event can not be fired any more. That will break some\n    // features like \"pan horizontally to move something and pan vertically to page scroll\".\n    // The horizontal pan probably be interrupted by the casually triggered page scroll.\n    // (2) Although IE 10 supports pointer event, it use old style and is different from the\n    // standard. So we exclude that. (IE 10 is hardly used on touch device)\n    'onpointerdown' in window && (browser.edge || browser.ie && browser.version >= 11),\n    // passiveSupported: detectPassiveSupport()\n    domSupported: typeof document !== 'undefined'\n  };\n} // See https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n// function detectPassiveSupport() {\n//     // Test via a getter in the options object to see if the passive property is accessed\n//     var supportsPassive = false;\n//     try {\n//         var opts = Object.defineProperty({}, 'passive', {\n//             get: function() {\n//                 supportsPassive = true;\n//             }\n//         });\n//         window.addEventListener('testPassive', function() {}, opts);\n//     } catch (e) {\n//     }\n//     return supportsPassive;\n// }\n\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar isObject = zrUtil.isObject;\nvar isArray = zrUtil.isArray;\n/**\n * Make the name displayable. But we should\n * make sure it is not duplicated with user\n * specified name, so use '\\0';\n */\n\nvar DUMMY_COMPONENT_NAME_PREFIX = 'series\\0';\n/**\n * If value is not array, then translate it to array.\n * @param  {*} value\n * @return {Array} [value] or value\n */\n\nfunction normalizeToArray(value) {\n  return value instanceof Array ? value : value == null ? [] : [value];\n}\n/**\n * Sync default option between normal and emphasis like `position` and `show`\n * In case some one will write code like\n *     label: {\n *          show: false,\n *          position: 'outside',\n *          fontSize: 18\n *     },\n *     emphasis: {\n *          label: { show: true }\n *     }\n * @param {Object} opt\n * @param {string} key\n * @param {Array.<string>} subOpts\n */\n\n\nfunction defaultEmphasis(opt, key, subOpts) {\n  // Caution: performance sensitive.\n  if (opt) {\n    opt[key] = opt[key] || {};\n    opt.emphasis = opt.emphasis || {};\n    opt.emphasis[key] = opt.emphasis[key] || {}; // Default emphasis option from normal\n\n    for (var i = 0, len = subOpts.length; i < len; i++) {\n      var subOptName = subOpts[i];\n\n      if (!opt.emphasis[key].hasOwnProperty(subOptName) && opt[key].hasOwnProperty(subOptName)) {\n        opt.emphasis[key][subOptName] = opt[key][subOptName];\n      }\n    }\n  }\n}\n\nvar TEXT_STYLE_OPTIONS = ['fontStyle', 'fontWeight', 'fontSize', 'fontFamily', 'rich', 'tag', 'color', 'textBorderColor', 'textBorderWidth', 'width', 'height', 'lineHeight', 'align', 'verticalAlign', 'baseline', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY', 'textShadowColor', 'textShadowBlur', 'textShadowOffsetX', 'textShadowOffsetY', 'backgroundColor', 'borderColor', 'borderWidth', 'borderRadius', 'padding']; // modelUtil.LABEL_OPTIONS = modelUtil.TEXT_STYLE_OPTIONS.concat([\n//     'position', 'offset', 'rotate', 'origin', 'show', 'distance', 'formatter',\n//     'fontStyle', 'fontWeight', 'fontSize', 'fontFamily',\n//     // FIXME: deprecated, check and remove it.\n//     'textStyle'\n// ]);\n\n/**\n * The method do not ensure performance.\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method retieves value from data.\n * @param {string|number|Date|Array|Object} dataItem\n * @return {number|string|Date|Array.<number|string|Date>}\n */\n\nfunction getDataItemValue(dataItem) {\n  return isObject(dataItem) && !isArray(dataItem) && !(dataItem instanceof Date) ? dataItem.value : dataItem;\n}\n/**\n * data could be [12, 2323, {value: 223}, [1221, 23], {value: [2, 23]}]\n * This helper method determine if dataItem has extra option besides value\n * @param {string|number|Date|Array|Object} dataItem\n */\n\n\nfunction isDataItemOption(dataItem) {\n  return isObject(dataItem) && !(dataItem instanceof Array); // // markLine data can be array\n  // && !(dataItem[0] && isObject(dataItem[0]) && !(dataItem[0] instanceof Array));\n}\n/**\n * Mapping to exists for merge.\n *\n * @public\n * @param {Array.<Object>|Array.<module:echarts/model/Component>} exists\n * @param {Object|Array.<Object>} newCptOptions\n * @return {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          index of which is the same as exists.\n */\n\n\nfunction mappingToExists(exists, newCptOptions) {\n  // Mapping by the order by original option (but not order of\n  // new option) in merge mode. Because we should ensure\n  // some specified index (like xAxisIndex) is consistent with\n  // original option, which is easy to understand, espatially in\n  // media query. And in most case, merge option is used to\n  // update partial option but not be expected to change order.\n  newCptOptions = (newCptOptions || []).slice();\n  var result = zrUtil.map(exists || [], function (obj, index) {\n    return {\n      exist: obj\n    };\n  }); // Mapping by id or name if specified.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    } // id has highest priority.\n\n\n    for (var i = 0; i < result.length; i++) {\n      if (!result[i].option // Consider name: two map to one.\n      && cptOption.id != null && result[i].exist.id === cptOption.id + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n\n    for (var i = 0; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Consider name: two map to one.\n      // Can not match when both ids exist but different.\n      && (exist.id == null || cptOption.id == null) && cptOption.name != null && !isIdInner(cptOption) && !isIdInner(exist) && exist.name === cptOption.name + '') {\n        result[i].option = cptOption;\n        newCptOptions[index] = null;\n        return;\n      }\n    }\n  }); // Otherwise mapping by index.\n\n  each(newCptOptions, function (cptOption, index) {\n    if (!isObject(cptOption)) {\n      return;\n    }\n\n    var i = 0;\n\n    for (; i < result.length; i++) {\n      var exist = result[i].exist;\n\n      if (!result[i].option // Existing model that already has id should be able to\n      // mapped to (because after mapping performed model may\n      // be assigned with a id, whish should not affect next\n      // mapping), except those has inner id.\n      && !isIdInner(exist) // Caution:\n      // Do not overwrite id. But name can be overwritten,\n      // because axis use name as 'show label text'.\n      // 'exist' always has id and name and we dont\n      // need to check it.\n      && cptOption.id == null) {\n        result[i].option = cptOption;\n        break;\n      }\n    }\n\n    if (i >= result.length) {\n      result.push({\n        option: cptOption\n      });\n    }\n  });\n  return result;\n}\n/**\n * Make id and name for mapping result (result of mappingToExists)\n * into `keyInfo` field.\n *\n * @public\n * @param {Array.<Object>} Result, like [{exist: ..., option: ...}, {}],\n *                          which order is the same as exists.\n * @return {Array.<Object>} The input.\n */\n\n\nfunction makeIdAndName(mapResult) {\n  // We use this id to hash component models and view instances\n  // in echarts. id can be specified by user, or auto generated.\n  // The id generation rule ensures new view instance are able\n  // to mapped to old instance when setOption are called in\n  // no-merge mode. So we generate model id by name and plus\n  // type in view id.\n  // name can be duplicated among components, which is convenient\n  // to specify multi components (like series) by one name.\n  // Ensure that each id is distinct.\n  var idMap = zrUtil.createHashMap();\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    existCpt && idMap.set(existCpt.id, item);\n  });\n  each(mapResult, function (item, index) {\n    var opt = item.option;\n    zrUtil.assert(!opt || opt.id == null || !idMap.get(opt.id) || idMap.get(opt.id) === item, 'id duplicates: ' + (opt && opt.id));\n    opt && opt.id != null && idMap.set(opt.id, item);\n    !item.keyInfo && (item.keyInfo = {});\n  }); // Make name and id.\n\n  each(mapResult, function (item, index) {\n    var existCpt = item.exist;\n    var opt = item.option;\n    var keyInfo = item.keyInfo;\n\n    if (!isObject(opt)) {\n      return;\n    } // name can be overwitten. Consider case: axis.name = '20km'.\n    // But id generated by name will not be changed, which affect\n    // only in that case: setOption with 'not merge mode' and view\n    // instance will be recreated, which can be accepted.\n\n\n    keyInfo.name = opt.name != null ? opt.name + '' : existCpt ? existCpt.name // Avoid diffferent series has the same name,\n    // because name may be used like in color pallet.\n    : DUMMY_COMPONENT_NAME_PREFIX + index;\n\n    if (existCpt) {\n      keyInfo.id = existCpt.id;\n    } else if (opt.id != null) {\n      keyInfo.id = opt.id + '';\n    } else {\n      // Consider this situatoin:\n      //  optionA: [{name: 'a'}, {name: 'a'}, {..}]\n      //  optionB [{..}, {name: 'a'}, {name: 'a'}]\n      // Series with the same name between optionA and optionB\n      // should be mapped.\n      var idNum = 0;\n\n      do {\n        keyInfo.id = '\\0' + keyInfo.name + '\\0' + idNum++;\n      } while (idMap.get(keyInfo.id));\n    }\n\n    idMap.set(keyInfo.id, item);\n  });\n}\n\nfunction isNameSpecified(componentModel) {\n  var name = componentModel.name; // Is specified when `indexOf` get -1 or > 0.\n\n  return !!(name && name.indexOf(DUMMY_COMPONENT_NAME_PREFIX));\n}\n/**\n * @public\n * @param {Object} cptOption\n * @return {boolean}\n */\n\n\nfunction isIdInner(cptOption) {\n  return isObject(cptOption) && cptOption.id && (cptOption.id + '').indexOf('\\0_ec_\\0') === 0;\n}\n/**\n * A helper for removing duplicate items between batchA and batchB,\n * and in themselves, and categorize by series.\n *\n * @param {Array.<Object>} batchA Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @param {Array.<Object>} batchB Like: [{seriesId: 2, dataIndex: [32, 4, 5]}, ...]\n * @return {Array.<Array.<Object>, Array.<Object>>} result: [resultBatchA, resultBatchB]\n */\n\n\nfunction compressBatches(batchA, batchB) {\n  var mapA = {};\n  var mapB = {};\n  makeMap(batchA || [], mapA);\n  makeMap(batchB || [], mapB, mapA);\n  return [mapToArray(mapA), mapToArray(mapB)];\n\n  function makeMap(sourceBatch, map, otherMap) {\n    for (var i = 0, len = sourceBatch.length; i < len; i++) {\n      var seriesId = sourceBatch[i].seriesId;\n      var dataIndices = normalizeToArray(sourceBatch[i].dataIndex);\n      var otherDataIndices = otherMap && otherMap[seriesId];\n\n      for (var j = 0, lenj = dataIndices.length; j < lenj; j++) {\n        var dataIndex = dataIndices[j];\n\n        if (otherDataIndices && otherDataIndices[dataIndex]) {\n          otherDataIndices[dataIndex] = null;\n        } else {\n          (map[seriesId] || (map[seriesId] = {}))[dataIndex] = 1;\n        }\n      }\n    }\n  }\n\n  function mapToArray(map, isData) {\n    var result = [];\n\n    for (var i in map) {\n      if (map.hasOwnProperty(i) && map[i] != null) {\n        if (isData) {\n          result.push(+i);\n        } else {\n          var dataIndices = mapToArray(map[i], true);\n          dataIndices.length && result.push({\n            seriesId: i,\n            dataIndex: dataIndices\n          });\n        }\n      }\n    }\n\n    return result;\n  }\n}\n/**\n * @param {module:echarts/data/List} data\n * @param {Object} payload Contains dataIndex (means rawIndex) / dataIndexInside / name\n *                         each of which can be Array or primary type.\n * @return {number|Array.<number>} dataIndex If not found, return undefined/null.\n */\n\n\nfunction queryDataIndex(data, payload) {\n  if (payload.dataIndexInside != null) {\n    return payload.dataIndexInside;\n  } else if (payload.dataIndex != null) {\n    return zrUtil.isArray(payload.dataIndex) ? zrUtil.map(payload.dataIndex, function (value) {\n      return data.indexOfRawIndex(value);\n    }) : data.indexOfRawIndex(payload.dataIndex);\n  } else if (payload.name != null) {\n    return zrUtil.isArray(payload.name) ? zrUtil.map(payload.name, function (value) {\n      return data.indexOfName(value);\n    }) : data.indexOfName(payload.name);\n  }\n}\n/**\n * Enable property storage to any host object.\n * Notice: Serialization is not supported.\n *\n * For example:\n * var inner = zrUitl.makeInner();\n *\n * function some1(hostObj) {\n *      inner(hostObj).someProperty = 1212;\n *      ...\n * }\n * function some2() {\n *      var fields = inner(this);\n *      fields.someProperty1 = 1212;\n *      fields.someProperty2 = 'xx';\n *      ...\n * }\n *\n * @return {Function}\n */\n\n\nfunction makeInner() {\n  // Consider different scope by es module import.\n  var key = '__\\0ec_inner_' + innerUniqueIndex++ + '_' + Math.random().toFixed(5);\n  return function (hostObj) {\n    return hostObj[key] || (hostObj[key] = {});\n  };\n}\n\nvar innerUniqueIndex = 0;\n/**\n * @param {module:echarts/model/Global} ecModel\n * @param {string|Object} finder\n *        If string, e.g., 'geo', means {geoIndex: 0}.\n *        If Object, could contain some of these properties below:\n *        {\n *            seriesIndex, seriesId, seriesName,\n *            geoIndex, geoId, geoName,\n *            bmapIndex, bmapId, bmapName,\n *            xAxisIndex, xAxisId, xAxisName,\n *            yAxisIndex, yAxisId, yAxisName,\n *            gridIndex, gridId, gridName,\n *            ... (can be extended)\n *        }\n *        Each properties can be number|string|Array.<number>|Array.<string>\n *        For example, a finder could be\n *        {\n *            seriesIndex: 3,\n *            geoId: ['aa', 'cc'],\n *            gridName: ['xx', 'rr']\n *        }\n *        xxxIndex can be set as 'all' (means all xxx) or 'none' (means not specify)\n *        If nothing or null/undefined specified, return nothing.\n * @param {Object} [opt]\n * @param {string} [opt.defaultMainType]\n * @param {Array.<string>} [opt.includeMainTypes]\n * @return {Object} result like:\n *        {\n *            seriesModels: [seriesModel1, seriesModel2],\n *            seriesModel: seriesModel1, // The first model\n *            geoModels: [geoModel1, geoModel2],\n *            geoModel: geoModel1, // The first model\n *            ...\n *        }\n */\n\nfunction parseFinder(ecModel, finder, opt) {\n  if (zrUtil.isString(finder)) {\n    var obj = {};\n    obj[finder + 'Index'] = 0;\n    finder = obj;\n  }\n\n  var defaultMainType = opt && opt.defaultMainType;\n\n  if (defaultMainType && !has(finder, defaultMainType + 'Index') && !has(finder, defaultMainType + 'Id') && !has(finder, defaultMainType + 'Name')) {\n    finder[defaultMainType + 'Index'] = 0;\n  }\n\n  var result = {};\n  each(finder, function (value, key) {\n    var value = finder[key]; // Exclude 'dataIndex' and other illgal keys.\n\n    if (key === 'dataIndex' || key === 'dataIndexInside') {\n      result[key] = value;\n      return;\n    }\n\n    var parsedKey = key.match(/^(\\w+)(Index|Id|Name)$/) || [];\n    var mainType = parsedKey[1];\n    var queryType = (parsedKey[2] || '').toLowerCase();\n\n    if (!mainType || !queryType || value == null || queryType === 'index' && value === 'none' || opt && opt.includeMainTypes && zrUtil.indexOf(opt.includeMainTypes, mainType) < 0) {\n      return;\n    }\n\n    var queryParam = {\n      mainType: mainType\n    };\n\n    if (queryType !== 'index' || value !== 'all') {\n      queryParam[queryType] = value;\n    }\n\n    var models = ecModel.queryComponents(queryParam);\n    result[mainType + 'Models'] = models;\n    result[mainType + 'Model'] = models[0];\n  });\n  return result;\n}\n\nfunction has(obj, prop) {\n  return obj && obj.hasOwnProperty(prop);\n}\n\nfunction setAttribute(dom, key, value) {\n  dom.setAttribute ? dom.setAttribute(key, value) : dom[key] = value;\n}\n\nfunction getAttribute(dom, key) {\n  return dom.getAttribute ? dom.getAttribute(key) : dom[key];\n}\n\nfunction getTooltipRenderMode(renderModeOption) {\n  if (renderModeOption === 'auto') {\n    // Using html when `document` exists, use richText otherwise\n    return env.domSupported ? 'html' : 'richText';\n  } else {\n    return renderModeOption || 'html';\n  }\n}\n/**\n * Group a list by key.\n *\n * @param {Array} array\n * @param {Function} getKey\n *        param {*} Array item\n *        return {string} key\n * @return {Object} Result\n *        {Array}: keys,\n *        {module:zrender/core/util/HashMap} buckets: {key -> Array}\n */\n\n\nfunction groupData(array, getKey) {\n  var buckets = zrUtil.createHashMap();\n  var keys = [];\n  zrUtil.each(array, function (item) {\n    var key = getKey(item);\n    (buckets.get(key) || (keys.push(key), buckets.set(key, []))).push(item);\n  });\n  return {\n    keys: keys,\n    buckets: buckets\n  };\n}\n\nexports.normalizeToArray = normalizeToArray;\nexports.defaultEmphasis = defaultEmphasis;\nexports.TEXT_STYLE_OPTIONS = TEXT_STYLE_OPTIONS;\nexports.getDataItemValue = getDataItemValue;\nexports.isDataItemOption = isDataItemOption;\nexports.mappingToExists = mappingToExists;\nexports.makeIdAndName = makeIdAndName;\nexports.isNameSpecified = isNameSpecified;\nexports.isIdInner = isIdInner;\nexports.compressBatches = compressBatches;\nexports.queryDataIndex = queryDataIndex;\nexports.makeInner = makeInner;\nexports.parseFinder = parseFinder;\nexports.setAttribute = setAttribute;\nexports.getAttribute = getAttribute;\nexports.getTooltipRenderMode = getTooltipRenderMode;\nexports.groupData = groupData;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar TYPE_DELIMITER = '.';\nvar IS_CONTAINER = '___EC__COMPONENT__CONTAINER___';\n/**\n * Notice, parseClassType('') should returns {main: '', sub: ''}\n * @public\n */\n\nfunction parseClassType(componentType) {\n  var ret = {\n    main: '',\n    sub: ''\n  };\n\n  if (componentType) {\n    componentType = componentType.split(TYPE_DELIMITER);\n    ret.main = componentType[0] || '';\n    ret.sub = componentType[1] || '';\n  }\n\n  return ret;\n}\n/**\n * @public\n */\n\n\nfunction checkClassType(componentType) {\n  zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType), 'componentType \"' + componentType + '\" illegal');\n}\n/**\n * @public\n */\n\n\nfunction enableClassExtend(RootClass, mandatoryMethods) {\n  RootClass.$constructor = RootClass;\n\n  RootClass.extend = function (proto) {\n    var superClass = this;\n\n    var ExtendedClass = function () {\n      if (!proto.$constructor) {\n        superClass.apply(this, arguments);\n      } else {\n        proto.$constructor.apply(this, arguments);\n      }\n    };\n\n    zrUtil.extend(ExtendedClass.prototype, proto);\n    ExtendedClass.extend = this.extend;\n    ExtendedClass.superCall = superCall;\n    ExtendedClass.superApply = superApply;\n    zrUtil.inherits(ExtendedClass, this);\n    ExtendedClass.superClass = superClass;\n    return ExtendedClass;\n  };\n}\n\nvar classBase = 0;\n/**\n * Can not use instanceof, consider different scope by\n * cross domain or es module import in ec extensions.\n * Mount a method \"isInstance()\" to Clz.\n */\n\nfunction enableClassCheck(Clz) {\n  var classAttr = ['__\\0is_clz', classBase++, Math.random().toFixed(3)].join('_');\n  Clz.prototype[classAttr] = true;\n\n  Clz.isInstance = function (obj) {\n    return !!(obj && obj[classAttr]);\n  };\n} // superCall should have class info, which can not be fetch from 'this'.\n// Consider this case:\n// class A has method f,\n// class B inherits class A, overrides method f, f call superApply('f'),\n// class C inherits class B, do not overrides method f,\n// then when method of class C is called, dead loop occured.\n\n\nfunction superCall(context, methodName) {\n  var args = zrUtil.slice(arguments, 2);\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n\nfunction superApply(context, methodName, args) {\n  return this.superClass.prototype[methodName].apply(context, args);\n}\n/**\n * @param {Object} entity\n * @param {Object} options\n * @param {boolean} [options.registerWhenExtend]\n * @public\n */\n\n\nfunction enableClassManagement(entity, options) {\n  options = options || {};\n  /**\n   * Component model classes\n   * key: componentType,\n   * value:\n   *     componentClass, when componentType is 'xxx'\n   *     or Object.<subKey, componentClass>, when componentType is 'xxx.yy'\n   * @type {Object}\n   */\n\n  var storage = {};\n\n  entity.registerClass = function (Clazz, componentType) {\n    if (componentType) {\n      checkClassType(componentType);\n      componentType = parseClassType(componentType);\n\n      if (!componentType.sub) {\n        storage[componentType.main] = Clazz;\n      } else if (componentType.sub !== IS_CONTAINER) {\n        var container = makeContainer(componentType);\n        container[componentType.sub] = Clazz;\n      }\n    }\n\n    return Clazz;\n  };\n\n  entity.getClass = function (componentMainType, subType, throwWhenNotFound) {\n    var Clazz = storage[componentMainType];\n\n    if (Clazz && Clazz[IS_CONTAINER]) {\n      Clazz = subType ? Clazz[subType] : null;\n    }\n\n    if (throwWhenNotFound && !Clazz) {\n      throw new Error(!subType ? componentMainType + '.' + 'type should be specified.' : 'Component ' + componentMainType + '.' + (subType || '') + ' not exists. Load it first.');\n    }\n\n    return Clazz;\n  };\n\n  entity.getClassesByMainType = function (componentType) {\n    componentType = parseClassType(componentType);\n    var result = [];\n    var obj = storage[componentType.main];\n\n    if (obj && obj[IS_CONTAINER]) {\n      zrUtil.each(obj, function (o, type) {\n        type !== IS_CONTAINER && result.push(o);\n      });\n    } else {\n      result.push(obj);\n    }\n\n    return result;\n  };\n\n  entity.hasClass = function (componentType) {\n    // Just consider componentType.main.\n    componentType = parseClassType(componentType);\n    return !!storage[componentType.main];\n  };\n  /**\n   * @return {Array.<string>} Like ['aa', 'bb'], but can not be ['aa.xx']\n   */\n\n\n  entity.getAllClassMainTypes = function () {\n    var types = [];\n    zrUtil.each(storage, function (obj, type) {\n      types.push(type);\n    });\n    return types;\n  };\n  /**\n   * If a main type is container and has sub types\n   * @param  {string}  mainType\n   * @return {boolean}\n   */\n\n\n  entity.hasSubTypes = function (componentType) {\n    componentType = parseClassType(componentType);\n    var obj = storage[componentType.main];\n    return obj && obj[IS_CONTAINER];\n  };\n\n  entity.parseClassType = parseClassType;\n\n  function makeContainer(componentType) {\n    var container = storage[componentType.main];\n\n    if (!container || !container[IS_CONTAINER]) {\n      container = storage[componentType.main] = {};\n      container[IS_CONTAINER] = true;\n    }\n\n    return container;\n  }\n\n  if (options.registerWhenExtend) {\n    var originalExtend = entity.extend;\n\n    if (originalExtend) {\n      entity.extend = function (proto) {\n        var ExtendedClass = originalExtend.call(this, proto);\n        return entity.registerClass(ExtendedClass, proto.type);\n      };\n    }\n  }\n\n  return entity;\n}\n/**\n * @param {string|Array.<string>} properties\n */\n\n\nfunction setReadOnly(obj, properties) {// FIXME It seems broken in IE8 simulation of IE11\n  // if (!zrUtil.isArray(properties)) {\n  //     properties = properties != null ? [properties] : [];\n  // }\n  // zrUtil.each(properties, function (prop) {\n  //     var value = obj[prop];\n  //     Object.defineProperty\n  //         && Object.defineProperty(obj, prop, {\n  //             value: value, writable: false\n  //         });\n  //     zrUtil.isArray(obj[prop])\n  //         && Object.freeze\n  //         && Object.freeze(obj[prop]);\n  // });\n}\n\nexports.parseClassType = parseClassType;\nexports.enableClassExtend = enableClassExtend;\nexports.enableClassCheck = enableClassCheck;\nexports.enableClassManagement = enableClassManagement;\nexports.setReadOnly = setReadOnly;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Avoid typo.\nvar SOURCE_FORMAT_ORIGINAL = 'original';\nvar SOURCE_FORMAT_ARRAY_ROWS = 'arrayRows';\nvar SOURCE_FORMAT_OBJECT_ROWS = 'objectRows';\nvar SOURCE_FORMAT_KEYED_COLUMNS = 'keyedColumns';\nvar SOURCE_FORMAT_UNKNOWN = 'unknown'; // ??? CHANGE A NAME\n\nvar SOURCE_FORMAT_TYPED_ARRAY = 'typedArray';\nvar SERIES_LAYOUT_BY_COLUMN = 'column';\nvar SERIES_LAYOUT_BY_ROW = 'row';\nexports.SOURCE_FORMAT_ORIGINAL = SOURCE_FORMAT_ORIGINAL;\nexports.SOURCE_FORMAT_ARRAY_ROWS = SOURCE_FORMAT_ARRAY_ROWS;\nexports.SOURCE_FORMAT_OBJECT_ROWS = SOURCE_FORMAT_OBJECT_ROWS;\nexports.SOURCE_FORMAT_KEYED_COLUMNS = SOURCE_FORMAT_KEYED_COLUMNS;\nexports.SOURCE_FORMAT_UNKNOWN = SOURCE_FORMAT_UNKNOWN;\nexports.SOURCE_FORMAT_TYPED_ARRAY = SOURCE_FORMAT_TYPED_ARRAY;\nexports.SERIES_LAYOUT_BY_COLUMN = SERIES_LAYOUT_BY_COLUMN;\nexports.SERIES_LAYOUT_BY_ROW = SERIES_LAYOUT_BY_ROW;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar isTypedArray = _util.isTypedArray;\n\nvar _clazz = require(\"../util/clazz\");\n\nvar enableClassCheck = _clazz.enableClassCheck;\n\nvar _sourceType = require(\"./helper/sourceType\");\n\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\nvar SERIES_LAYOUT_BY_COLUMN = _sourceType.SERIES_LAYOUT_BY_COLUMN;\nvar SOURCE_FORMAT_UNKNOWN = _sourceType.SOURCE_FORMAT_UNKNOWN;\nvar SOURCE_FORMAT_TYPED_ARRAY = _sourceType.SOURCE_FORMAT_TYPED_ARRAY;\nvar SOURCE_FORMAT_KEYED_COLUMNS = _sourceType.SOURCE_FORMAT_KEYED_COLUMNS;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [sourceFormat]\n *\n * + \"original\":\n * This format is only used in series.data, where\n * itemStyle can be specified in data item.\n *\n * + \"arrayRows\":\n * [\n *     ['product', 'score', 'amount'],\n *     ['Matcha Latte', 89.3, 95.8],\n *     ['Milk Tea', 92.1, 89.4],\n *     ['Cheese Cocoa', 94.4, 91.2],\n *     ['Walnut Brownie', 85.4, 76.9]\n * ]\n *\n * + \"objectRows\":\n * [\n *     {product: 'Matcha Latte', score: 89.3, amount: 95.8},\n *     {product: 'Milk Tea', score: 92.1, amount: 89.4},\n *     {product: 'Cheese Cocoa', score: 94.4, amount: 91.2},\n *     {product: 'Walnut Brownie', score: 85.4, amount: 76.9}\n * ]\n *\n * + \"keyedColumns\":\n * {\n *     'product': ['Matcha Latte', 'Milk Tea', 'Cheese Cocoa', 'Walnut Brownie'],\n *     'count': [823, 235, 1042, 988],\n *     'score': [95.8, 81.4, 91.2, 76.9]\n * }\n *\n * + \"typedArray\"\n *\n * + \"unknown\"\n */\n\n/**\n * @constructor\n * @param {Object} fields\n * @param {string} fields.sourceFormat\n * @param {Array|Object} fields.fromDataset\n * @param {Array|Object} [fields.data]\n * @param {string} [seriesLayoutBy='column']\n * @param {Array.<Object|string>} [dimensionsDefine]\n * @param {Objet|HashMap} [encodeDefine]\n * @param {number} [startIndex=0]\n * @param {number} [dimensionsDetectCount]\n */\nfunction Source(fields) {\n  /**\n   * @type {boolean}\n   */\n  this.fromDataset = fields.fromDataset;\n  /**\n   * Not null/undefined.\n   * @type {Array|Object}\n   */\n\n  this.data = fields.data || (fields.sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS ? {} : []);\n  /**\n   * See also \"detectSourceFormat\".\n   * Not null/undefined.\n   * @type {string}\n   */\n\n  this.sourceFormat = fields.sourceFormat || SOURCE_FORMAT_UNKNOWN;\n  /**\n   * 'row' or 'column'\n   * Not null/undefined.\n   * @type {string} seriesLayoutBy\n   */\n\n  this.seriesLayoutBy = fields.seriesLayoutBy || SERIES_LAYOUT_BY_COLUMN;\n  /**\n   * dimensions definition in option.\n   * can be null/undefined.\n   * @type {Array.<Object|string>}\n   */\n\n  this.dimensionsDefine = fields.dimensionsDefine;\n  /**\n   * encode definition in option.\n   * can be null/undefined.\n   * @type {Objet|HashMap}\n   */\n\n  this.encodeDefine = fields.encodeDefine && createHashMap(fields.encodeDefine);\n  /**\n   * Not null/undefined, uint.\n   * @type {number}\n   */\n\n  this.startIndex = fields.startIndex || 0;\n  /**\n   * Can be null/undefined (when unknown), uint.\n   * @type {number}\n   */\n\n  this.dimensionsDetectCount = fields.dimensionsDetectCount;\n}\n/**\n * Wrap original series data for some compatibility cases.\n */\n\n\nSource.seriesDataToSource = function (data) {\n  return new Source({\n    data: data,\n    sourceFormat: isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL,\n    fromDataset: false\n  });\n};\n\nenableClassCheck(Source);\nvar _default = Source;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\nvar getDataItemValue = _model.getDataItemValue;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\nvar map = _util.map;\nvar isArray = _util.isArray;\nvar isString = _util.isString;\nvar isObject = _util.isObject;\nvar isTypedArray = _util.isTypedArray;\nvar isArrayLike = _util.isArrayLike;\nvar extend = _util.extend;\nvar assert = _util.assert;\n\nvar Source = require(\"../Source\");\n\nvar _sourceType = require(\"./sourceType\");\n\nvar SOURCE_FORMAT_ORIGINAL = _sourceType.SOURCE_FORMAT_ORIGINAL;\nvar SOURCE_FORMAT_ARRAY_ROWS = _sourceType.SOURCE_FORMAT_ARRAY_ROWS;\nvar SOURCE_FORMAT_OBJECT_ROWS = _sourceType.SOURCE_FORMAT_OBJECT_ROWS;\nvar SOURCE_FORMAT_KEYED_COLUMNS = _sourceType.SOURCE_FORMAT_KEYED_COLUMNS;\nvar SOURCE_FORMAT_UNKNOWN = _sourceType.SOURCE_FORMAT_UNKNOWN;\nvar SOURCE_FORMAT_TYPED_ARRAY = _sourceType.SOURCE_FORMAT_TYPED_ARRAY;\nvar SERIES_LAYOUT_BY_ROW = _sourceType.SERIES_LAYOUT_BY_ROW;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// The result of `guessOrdinal`.\nvar BE_ORDINAL = {\n  Must: 1,\n  // Encounter string but not '-' and not number-like.\n  Might: 2,\n  // Encounter string but number-like.\n  Not: 3 // Other cases\n\n};\nvar inner = makeInner();\n/**\n * @see {module:echarts/data/Source}\n * @param {module:echarts/component/dataset/DatasetModel} datasetModel\n * @return {string} sourceFormat\n */\n\nfunction detectSourceFormat(datasetModel) {\n  var data = datasetModel.option.source;\n  var sourceFormat = SOURCE_FORMAT_UNKNOWN;\n\n  if (isTypedArray(data)) {\n    sourceFormat = SOURCE_FORMAT_TYPED_ARRAY;\n  } else if (isArray(data)) {\n    // FIXME Whether tolerate null in top level array?\n    if (data.length === 0) {\n      sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n    }\n\n    for (var i = 0, len = data.length; i < len; i++) {\n      var item = data[i];\n\n      if (item == null) {\n        continue;\n      } else if (isArray(item)) {\n        sourceFormat = SOURCE_FORMAT_ARRAY_ROWS;\n        break;\n      } else if (isObject(item)) {\n        sourceFormat = SOURCE_FORMAT_OBJECT_ROWS;\n        break;\n      }\n    }\n  } else if (isObject(data)) {\n    for (var key in data) {\n      if (data.hasOwnProperty(key) && isArrayLike(data[key])) {\n        sourceFormat = SOURCE_FORMAT_KEYED_COLUMNS;\n        break;\n      }\n    }\n  } else if (data != null) {\n    throw new Error('Invalid data');\n  }\n\n  inner(datasetModel).sourceFormat = sourceFormat;\n}\n/**\n * [Scenarios]:\n * (1) Provide source data directly:\n *     series: {\n *         encode: {...},\n *         dimensions: [...]\n *         seriesLayoutBy: 'row',\n *         data: [[...]]\n *     }\n * (2) Refer to datasetModel.\n *     series: [{\n *         encode: {...}\n *         // Ignore datasetIndex means `datasetIndex: 0`\n *         // and the dimensions defination in dataset is used\n *     }, {\n *         encode: {...},\n *         seriesLayoutBy: 'column',\n *         datasetIndex: 1\n *     }]\n *\n * Get data from series itself or datset.\n * @return {module:echarts/data/Source} source\n */\n\n\nfunction getSource(seriesModel) {\n  return inner(seriesModel).source;\n}\n/**\n * MUST be called before mergeOption of all series.\n * @param {module:echarts/model/Global} ecModel\n */\n\n\nfunction resetSourceDefaulter(ecModel) {\n  // `datasetMap` is used to make default encode.\n  inner(ecModel).datasetMap = createHashMap();\n}\n/**\n * [Caution]:\n * MUST be called after series option merged and\n * before \"series.getInitailData()\" called.\n *\n * [The rule of making default encode]:\n * Category axis (if exists) alway map to the first dimension.\n * Each other axis occupies a subsequent dimension.\n *\n * [Why make default encode]:\n * Simplify the typing of encode in option, avoiding the case like that:\n * series: [{encode: {x: 0, y: 1}}, {encode: {x: 0, y: 2}}, {encode: {x: 0, y: 3}}],\n * where the \"y\" have to be manually typed as \"1, 2, 3, ...\".\n *\n * @param {module:echarts/model/Series} seriesModel\n */\n\n\nfunction prepareSource(seriesModel) {\n  var seriesOption = seriesModel.option;\n  var data = seriesOption.data;\n  var sourceFormat = isTypedArray(data) ? SOURCE_FORMAT_TYPED_ARRAY : SOURCE_FORMAT_ORIGINAL;\n  var fromDataset = false;\n  var seriesLayoutBy = seriesOption.seriesLayoutBy;\n  var sourceHeader = seriesOption.sourceHeader;\n  var dimensionsDefine = seriesOption.dimensions;\n  var datasetModel = getDatasetModel(seriesModel);\n\n  if (datasetModel) {\n    var datasetOption = datasetModel.option;\n    data = datasetOption.source;\n    sourceFormat = inner(datasetModel).sourceFormat;\n    fromDataset = true; // These settings from series has higher priority.\n\n    seriesLayoutBy = seriesLayoutBy || datasetOption.seriesLayoutBy;\n    sourceHeader == null && (sourceHeader = datasetOption.sourceHeader);\n    dimensionsDefine = dimensionsDefine || datasetOption.dimensions;\n  }\n\n  var completeResult = completeBySourceData(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine);\n  inner(seriesModel).source = new Source({\n    data: data,\n    fromDataset: fromDataset,\n    seriesLayoutBy: seriesLayoutBy,\n    sourceFormat: sourceFormat,\n    dimensionsDefine: completeResult.dimensionsDefine,\n    startIndex: completeResult.startIndex,\n    dimensionsDetectCount: completeResult.dimensionsDetectCount,\n    // Note: dataset option does not have `encode`.\n    encodeDefine: seriesOption.encode\n  });\n} // return {startIndex, dimensionsDefine, dimensionsCount}\n\n\nfunction completeBySourceData(data, sourceFormat, seriesLayoutBy, sourceHeader, dimensionsDefine) {\n  if (!data) {\n    return {\n      dimensionsDefine: normalizeDimensionsDefine(dimensionsDefine)\n    };\n  }\n\n  var dimensionsDetectCount;\n  var startIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    // Rule: Most of the first line are string: it is header.\n    // Caution: consider a line with 5 string and 1 number,\n    // it still can not be sure it is a head, because the\n    // 5 string may be 5 values of category columns.\n    if (sourceHeader === 'auto' || sourceHeader == null) {\n      arrayRowsTravelFirst(function (val) {\n        // '-' is regarded as null/undefined.\n        if (val != null && val !== '-') {\n          if (isString(val)) {\n            startIndex == null && (startIndex = 1);\n          } else {\n            startIndex = 0;\n          }\n        } // 10 is an experience number, avoid long loop.\n\n      }, seriesLayoutBy, data, 10);\n    } else {\n      startIndex = sourceHeader ? 1 : 0;\n    }\n\n    if (!dimensionsDefine && startIndex === 1) {\n      dimensionsDefine = [];\n      arrayRowsTravelFirst(function (val, index) {\n        dimensionsDefine[index] = val != null ? val : '';\n      }, seriesLayoutBy, data);\n    }\n\n    dimensionsDetectCount = dimensionsDefine ? dimensionsDefine.length : seriesLayoutBy === SERIES_LAYOUT_BY_ROW ? data.length : data[0] ? data[0].length : null;\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = objectRowsCollectDimensions(data);\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimensionsDefine) {\n      dimensionsDefine = [];\n      each(data, function (colArr, key) {\n        dimensionsDefine.push(key);\n      });\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    var value0 = getDataItemValue(data[0]);\n    dimensionsDetectCount = isArray(value0) && value0.length || 1;\n  } else if (sourceFormat === SOURCE_FORMAT_TYPED_ARRAY) {}\n\n  return {\n    startIndex: startIndex,\n    dimensionsDefine: normalizeDimensionsDefine(dimensionsDefine),\n    dimensionsDetectCount: dimensionsDetectCount\n  };\n} // Consider dimensions defined like ['A', 'price', 'B', 'price', 'C', 'price'],\n// which is reasonable. But dimension name is duplicated.\n// Returns undefined or an array contains only object without null/undefiend or string.\n\n\nfunction normalizeDimensionsDefine(dimensionsDefine) {\n  if (!dimensionsDefine) {\n    // The meaning of null/undefined is different from empty array.\n    return;\n  }\n\n  var nameMap = createHashMap();\n  return map(dimensionsDefine, function (item, index) {\n    item = extend({}, isObject(item) ? item : {\n      name: item\n    }); // User can set null in dimensions.\n    // We dont auto specify name, othewise a given name may\n    // cause it be refered unexpectedly.\n\n    if (item.name == null) {\n      return item;\n    } // Also consider number form like 2012.\n\n\n    item.name += ''; // User may also specify displayName.\n    // displayName will always exists except user not\n    // specified or dim name is not specified or detected.\n    // (A auto generated dim name will not be used as\n    // displayName).\n\n    if (item.displayName == null) {\n      item.displayName = item.name;\n    }\n\n    var exist = nameMap.get(item.name);\n\n    if (!exist) {\n      nameMap.set(item.name, {\n        count: 1\n      });\n    } else {\n      item.name += '-' + exist.count++;\n    }\n\n    return item;\n  });\n}\n\nfunction arrayRowsTravelFirst(cb, seriesLayoutBy, data, maxLoop) {\n  maxLoop == null && (maxLoop = Infinity);\n\n  if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      cb(data[i] ? data[i][0] : null, i);\n    }\n  } else {\n    var value0 = data[0] || [];\n\n    for (var i = 0; i < value0.length && i < maxLoop; i++) {\n      cb(value0[i], i);\n    }\n  }\n}\n\nfunction objectRowsCollectDimensions(data) {\n  var firstIndex = 0;\n  var obj;\n\n  while (firstIndex < data.length && !(obj = data[firstIndex++])) {} // jshint ignore: line\n\n\n  if (obj) {\n    var dimensions = [];\n    each(obj, function (value, key) {\n      dimensions.push(key);\n    });\n    return dimensions;\n  }\n}\n/**\n * [The strategy of the arrengment of data dimensions for dataset]:\n * \"value way\": all axes are non-category axes. So series one by one take\n *     several (the number is coordSysDims.length) dimensions from dataset.\n *     The result of data arrengment of data dimensions like:\n *     | ser0_x | ser0_y | ser1_x | ser1_y | ser2_x | ser2_y |\n * \"category way\": at least one axis is category axis. So the the first data\n *     dimension is always mapped to the first category axis and shared by\n *     all of the series. The other data dimensions are taken by series like\n *     \"value way\" does.\n *     The result of data arrengment of data dimensions like:\n *     | ser_shared_x | ser0_y | ser1_y | ser2_y |\n *\n * @param {Array.<Object|string>} coordDimensions [{name: <string>, type: <string>, dimsDef: <Array>}, ...]\n * @param {module:model/Series} seriesModel\n * @param {module:data/Source} source\n * @return {Object} encode Never be `null/undefined`.\n */\n\n\nfunction makeSeriesEncodeForAxisCoordSys(coordDimensions, seriesModel, source) {\n  var encode = {};\n  var datasetModel = getDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel || !coordDimensions) {\n    return encode;\n  }\n\n  var encodeItemName = [];\n  var encodeSeriesName = [];\n  var ecModel = seriesModel.ecModel;\n  var datasetMap = inner(ecModel).datasetMap;\n  var key = datasetModel.uid + '_' + source.seriesLayoutBy;\n  var baseCategoryDimIndex;\n  var categoryWayValueDimStart;\n  coordDimensions = coordDimensions.slice();\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    !isObject(coordDimInfo) && (coordDimensions[coordDimIdx] = {\n      name: coordDimInfo\n    });\n\n    if (coordDimInfo.type === 'ordinal' && baseCategoryDimIndex == null) {\n      baseCategoryDimIndex = coordDimIdx;\n      categoryWayValueDimStart = getDataDimCountOnCoordDim(coordDimensions[coordDimIdx]);\n    }\n\n    encode[coordDimInfo.name] = [];\n  });\n  var datasetRecord = datasetMap.get(key) || datasetMap.set(key, {\n    categoryWayDim: categoryWayValueDimStart,\n    valueWayDim: 0\n  }); // TODO\n  // Auto detect first time axis and do arrangement.\n\n  each(coordDimensions, function (coordDimInfo, coordDimIdx) {\n    var coordDimName = coordDimInfo.name;\n    var count = getDataDimCountOnCoordDim(coordDimInfo); // In value way.\n\n    if (baseCategoryDimIndex == null) {\n      var start = datasetRecord.valueWayDim;\n      pushDim(encode[coordDimName], start, count);\n      pushDim(encodeSeriesName, start, count);\n      datasetRecord.valueWayDim += count; // ??? TODO give a better default series name rule?\n      // especially when encode x y specified.\n      // consider: when mutiple series share one dimension\n      // category axis, series name should better use\n      // the other dimsion name. On the other hand, use\n      // both dimensions name.\n    } // In category way, the first category axis.\n    else if (baseCategoryDimIndex === coordDimIdx) {\n        pushDim(encode[coordDimName], 0, count);\n        pushDim(encodeItemName, 0, count);\n      } // In category way, the other axis.\n      else {\n          var start = datasetRecord.categoryWayDim;\n          pushDim(encode[coordDimName], start, count);\n          pushDim(encodeSeriesName, start, count);\n          datasetRecord.categoryWayDim += count;\n        }\n  });\n\n  function pushDim(dimIdxArr, idxFrom, idxCount) {\n    for (var i = 0; i < idxCount; i++) {\n      dimIdxArr.push(idxFrom + i);\n    }\n  }\n\n  function getDataDimCountOnCoordDim(coordDimInfo) {\n    var dimsDef = coordDimInfo.dimsDef;\n    return dimsDef ? dimsDef.length : 1;\n  }\n\n  encodeItemName.length && (encode.itemName = encodeItemName);\n  encodeSeriesName.length && (encode.seriesName = encodeSeriesName);\n  return encode;\n}\n/**\n * Work for data like [{name: ..., value: ...}, ...].\n *\n * @param {module:model/Series} seriesModel\n * @param {module:data/Source} source\n * @return {Object} encode Never be `null/undefined`.\n */\n\n\nfunction makeSeriesEncodeForNameBased(seriesModel, source, dimCount) {\n  var encode = {};\n  var datasetModel = getDatasetModel(seriesModel); // Currently only make default when using dataset, util more reqirements occur.\n\n  if (!datasetModel) {\n    return encode;\n  }\n\n  var sourceFormat = source.sourceFormat;\n  var dimensionsDefine = source.dimensionsDefine;\n  var potentialNameDimIndex;\n\n  if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS || sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    each(dimensionsDefine, function (dim, idx) {\n      if ((isObject(dim) ? dim.name : dim) === 'name') {\n        potentialNameDimIndex = idx;\n      }\n    });\n  } // idxResult: {v, n}.\n\n\n  var idxResult = function () {\n    var idxRes0 = {};\n    var idxRes1 = {};\n    var guessRecords = []; // 5 is an experience value.\n\n    for (var i = 0, len = Math.min(5, dimCount); i < len; i++) {\n      var guessResult = doGuessOrdinal(source.data, sourceFormat, source.seriesLayoutBy, dimensionsDefine, source.startIndex, i);\n      guessRecords.push(guessResult);\n      var isPureNumber = guessResult === BE_ORDINAL.Not; // [Strategy of idxRes0]: find the first BE_ORDINAL.Not as the value dim,\n      // and then find a name dim with the priority:\n      // \"BE_ORDINAL.Might|BE_ORDINAL.Must\" > \"other dim\" > \"the value dim itself\".\n\n      if (isPureNumber && idxRes0.v == null && i !== potentialNameDimIndex) {\n        idxRes0.v = i;\n      }\n\n      if (idxRes0.n == null || idxRes0.n === idxRes0.v || !isPureNumber && guessRecords[idxRes0.n] === BE_ORDINAL.Not) {\n        idxRes0.n = i;\n      }\n\n      if (fulfilled(idxRes0) && guessRecords[idxRes0.n] !== BE_ORDINAL.Not) {\n        return idxRes0;\n      } // [Strategy of idxRes1]: if idxRes0 not satisfied (that is, no BE_ORDINAL.Not),\n      // find the first BE_ORDINAL.Might as the value dim,\n      // and then find a name dim with the priority:\n      // \"other dim\" > \"the value dim itself\".\n      // That is for backward compat: number-like (e.g., `'3'`, `'55'`) can be\n      // treated as number.\n\n\n      if (!isPureNumber) {\n        if (guessResult === BE_ORDINAL.Might && idxRes1.v == null && i !== potentialNameDimIndex) {\n          idxRes1.v = i;\n        }\n\n        if (idxRes1.n == null || idxRes1.n === idxRes1.v) {\n          idxRes1.n = i;\n        }\n      }\n    }\n\n    function fulfilled(idxResult) {\n      return idxResult.v != null && idxResult.n != null;\n    }\n\n    return fulfilled(idxRes0) ? idxRes0 : fulfilled(idxRes1) ? idxRes1 : null;\n  }();\n\n  if (idxResult) {\n    encode.value = idxResult.v; // `potentialNameDimIndex` has highest priority.\n\n    var nameDimIndex = potentialNameDimIndex != null ? potentialNameDimIndex : idxResult.n; // By default, label use itemName in charts.\n    // So we dont set encodeLabel here.\n\n    encode.itemName = [nameDimIndex];\n    encode.seriesName = [nameDimIndex];\n  }\n\n  return encode;\n}\n/**\n * If return null/undefined, indicate that should not use datasetModel.\n */\n\n\nfunction getDatasetModel(seriesModel) {\n  var option = seriesModel.option; // Caution: consider the scenario:\n  // A dataset is declared and a series is not expected to use the dataset,\n  // and at the beginning `setOption({series: { noData })` (just prepare other\n  // option but no data), then `setOption({series: {data: [...]}); In this case,\n  // the user should set an empty array to avoid that dataset is used by default.\n\n  var thisData = option.data;\n\n  if (!thisData) {\n    return seriesModel.ecModel.getComponent('dataset', option.datasetIndex || 0);\n  }\n}\n/**\n * The rule should not be complex, otherwise user might not\n * be able to known where the data is wrong.\n * The code is ugly, but how to make it neat?\n *\n * @param {module:echars/data/Source} source\n * @param {number} dimIndex\n * @return {BE_ORDINAL} guess result.\n */\n\n\nfunction guessOrdinal(source, dimIndex) {\n  return doGuessOrdinal(source.data, source.sourceFormat, source.seriesLayoutBy, source.dimensionsDefine, source.startIndex, dimIndex);\n} // dimIndex may be overflow source data.\n// return {BE_ORDINAL}\n\n\nfunction doGuessOrdinal(data, sourceFormat, seriesLayoutBy, dimensionsDefine, startIndex, dimIndex) {\n  var result; // Experience value.\n\n  var maxLoop = 5;\n\n  if (isTypedArray(data)) {\n    return BE_ORDINAL.Not;\n  } // When sourceType is 'objectRows' or 'keyedColumns', dimensionsDefine\n  // always exists in source.\n\n\n  var dimName;\n  var dimType;\n\n  if (dimensionsDefine) {\n    var dimDefItem = dimensionsDefine[dimIndex];\n\n    if (isObject(dimDefItem)) {\n      dimName = dimDefItem.name;\n      dimType = dimDefItem.type;\n    } else if (isString(dimDefItem)) {\n      dimName = dimDefItem;\n    }\n  }\n\n  if (dimType != null) {\n    return dimType === 'ordinal' ? BE_ORDINAL.Must : BE_ORDINAL.Not;\n  }\n\n  if (sourceFormat === SOURCE_FORMAT_ARRAY_ROWS) {\n    if (seriesLayoutBy === SERIES_LAYOUT_BY_ROW) {\n      var sample = data[dimIndex];\n\n      for (var i = 0; i < (sample || []).length && i < maxLoop; i++) {\n        if ((result = detectValue(sample[startIndex + i])) != null) {\n          return result;\n        }\n      }\n    } else {\n      for (var i = 0; i < data.length && i < maxLoop; i++) {\n        var row = data[startIndex + i];\n\n        if (row && (result = detectValue(row[dimIndex])) != null) {\n          return result;\n        }\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_OBJECT_ROWS) {\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      var item = data[i];\n\n      if (item && (result = detectValue(item[dimName])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_KEYED_COLUMNS) {\n    if (!dimName) {\n      return BE_ORDINAL.Not;\n    }\n\n    var sample = data[dimName];\n\n    if (!sample || isTypedArray(sample)) {\n      return BE_ORDINAL.Not;\n    }\n\n    for (var i = 0; i < sample.length && i < maxLoop; i++) {\n      if ((result = detectValue(sample[i])) != null) {\n        return result;\n      }\n    }\n  } else if (sourceFormat === SOURCE_FORMAT_ORIGINAL) {\n    for (var i = 0; i < data.length && i < maxLoop; i++) {\n      var item = data[i];\n      var val = getDataItemValue(item);\n\n      if (!isArray(val)) {\n        return BE_ORDINAL.Not;\n      }\n\n      if ((result = detectValue(val[dimIndex])) != null) {\n        return result;\n      }\n    }\n  }\n\n  function detectValue(val) {\n    var beStr = isString(val); // Consider usage convenience, '1', '2' will be treated as \"number\".\n    // `isFinit('')` get `true`.\n\n    if (val != null && isFinite(val) && val !== '') {\n      return beStr ? BE_ORDINAL.Might : BE_ORDINAL.Not;\n    } else if (beStr && val !== '-') {\n      return BE_ORDINAL.Must;\n    }\n  }\n\n  return BE_ORDINAL.Not;\n}\n\nexports.BE_ORDINAL = BE_ORDINAL;\nexports.detectSourceFormat = detectSourceFormat;\nexports.getSource = getSource;\nexports.resetSourceDefaulter = resetSourceDefaulter;\nexports.prepareSource = prepareSource;\nexports.makeSeriesEncodeForAxisCoordSys = makeSeriesEncodeForAxisCoordSys;\nexports.makeSeriesEncodeForNameBased = makeSeriesEncodeForNameBased;\nexports.guessOrdinal = guessOrdinal;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar each = _util.each;\nvar createHashMap = _util.createHashMap;\nvar assert = _util.assert;\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar OTHER_DIMENSIONS = createHashMap(['tooltip', 'label', 'itemName', 'itemId', 'seriesName']);\n\nfunction summarizeDimensions(data) {\n  var summary = {};\n  var encode = summary.encode = {};\n  var notExtraCoordDimMap = createHashMap();\n  var defaultedLabel = [];\n  var defaultedTooltip = []; // See the comment of `List.js#userOutput`.\n\n  var userOutput = summary.userOutput = {\n    dimensionNames: data.dimensions.slice(),\n    encode: {}\n  };\n  each(data.dimensions, function (dimName) {\n    var dimItem = data.getDimensionInfo(dimName);\n    var coordDim = dimItem.coordDim;\n\n    if (coordDim) {\n      var coordDimIndex = dimItem.coordDimIndex;\n      getOrCreateEncodeArr(encode, coordDim)[coordDimIndex] = dimName;\n\n      if (!dimItem.isExtraCoord) {\n        notExtraCoordDimMap.set(coordDim, 1); // Use the last coord dim (and label friendly) as default label,\n        // because when dataset is used, it is hard to guess which dimension\n        // can be value dimension. If both show x, y on label is not look good,\n        // and conventionally y axis is focused more.\n\n        if (mayLabelDimType(dimItem.type)) {\n          defaultedLabel[0] = dimName;\n        } // User output encode do not contain generated coords.\n        // And it only has index. User can use index to retrieve value from the raw item array.\n\n\n        getOrCreateEncodeArr(userOutput.encode, coordDim)[coordDimIndex] = dimItem.index;\n      }\n\n      if (dimItem.defaultTooltip) {\n        defaultedTooltip.push(dimName);\n      }\n    }\n\n    OTHER_DIMENSIONS.each(function (v, otherDim) {\n      var encodeArr = getOrCreateEncodeArr(encode, otherDim);\n      var dimIndex = dimItem.otherDims[otherDim];\n\n      if (dimIndex != null && dimIndex !== false) {\n        encodeArr[dimIndex] = dimItem.name;\n      }\n    });\n  });\n  var dataDimsOnCoord = [];\n  var encodeFirstDimNotExtra = {};\n  notExtraCoordDimMap.each(function (v, coordDim) {\n    var dimArr = encode[coordDim]; // ??? FIXME extra coord should not be set in dataDimsOnCoord.\n    // But should fix the case that radar axes: simplify the logic\n    // of `completeDimension`, remove `extraPrefix`.\n\n    encodeFirstDimNotExtra[coordDim] = dimArr[0]; // Not necessary to remove duplicate, because a data\n    // dim canot on more than one coordDim.\n\n    dataDimsOnCoord = dataDimsOnCoord.concat(dimArr);\n  });\n  summary.dataDimsOnCoord = dataDimsOnCoord;\n  summary.encodeFirstDimNotExtra = encodeFirstDimNotExtra;\n  var encodeLabel = encode.label; // FIXME `encode.label` is not recommanded, because formatter can not be set\n  // in this way. Use label.formatter instead. May be remove this approach someday.\n\n  if (encodeLabel && encodeLabel.length) {\n    defaultedLabel = encodeLabel.slice();\n  }\n\n  var encodeTooltip = encode.tooltip;\n\n  if (encodeTooltip && encodeTooltip.length) {\n    defaultedTooltip = encodeTooltip.slice();\n  } else if (!defaultedTooltip.length) {\n    defaultedTooltip = defaultedLabel.slice();\n  }\n\n  encode.defaultedLabel = defaultedLabel;\n  encode.defaultedTooltip = defaultedTooltip;\n  return summary;\n}\n\nfunction getOrCreateEncodeArr(encode, dim) {\n  if (!encode.hasOwnProperty(dim)) {\n    encode[dim] = [];\n  }\n\n  return encode[dim];\n}\n\nfunction getDimensionTypeByAxis(axisType) {\n  return axisType === 'category' ? 'ordinal' : axisType === 'time' ? 'time' : 'float';\n}\n\nfunction mayLabelDimType(dimType) {\n  // In most cases, ordinal and time do not suitable for label.\n  // Ordinal info can be displayed on axis. Time is too long.\n  return !(dimType === 'ordinal' || dimType === 'time');\n} // function findTheLastDimMayLabel(data) {\n//     // Get last value dim\n//     var dimensions = data.dimensions.slice();\n//     var valueType;\n//     var valueDim;\n//     while (dimensions.length && (\n//         valueDim = dimensions.pop(),\n//         valueType = data.getDimensionInfo(valueDim).type,\n//         valueType === 'ordinal' || valueType === 'time'\n//     )) {} // jshint ignore:line\n//     return valueDim;\n// }\n\n\nexports.OTHER_DIMENSIONS = OTHER_DIMENSIONS;\nexports.summarizeDimensions = summarizeDimensions;\nexports.getDimensionTypeByAxis = getDimensionTypeByAxis;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @class\n * @param {Object|DataDimensionInfo} [opt] All of the fields will be shallow copied.\n */\nfunction DataDimensionInfo(opt) {\n  if (opt != null) {\n    zrUtil.extend(this, opt);\n  }\n  /**\n   * Dimension name.\n   * Mandatory.\n   * @type {string}\n   */\n  // this.name;\n\n  /**\n   * The origin name in dimsDef, see source helper.\n   * If displayName given, the tooltip will displayed vertically.\n   * Optional.\n   * @type {string}\n   */\n  // this.displayName;\n\n  /**\n   * Which coordSys dimension this dimension mapped to.\n   * A `coordDim` can be a \"coordSysDim\" that the coordSys required\n   * (for example, an item in `coordSysDims` of `model/referHelper#CoordSysInfo`),\n   * or an generated \"extra coord name\" if does not mapped to any \"coordSysDim\"\n   * (That is determined by whether `isExtraCoord` is `true`).\n   * Mandatory.\n   * @type {string}\n   */\n  // this.coordDim;\n\n  /**\n   * The index of this dimension in `series.encode[coordDim]`.\n   * Mandatory.\n   * @type {number}\n   */\n  // this.coordDimIndex;\n\n  /**\n   * Dimension type. The enumerable values are the key of\n   * `dataCtors` of `data/List`.\n   * Optional.\n   * @type {string}\n   */\n  // this.type;\n\n  /**\n   * This index of this dimension info in `data/List#_dimensionInfos`.\n   * Mandatory after added to `data/List`.\n   * @type {number}\n   */\n  // this.index;\n\n  /**\n   * The format of `otherDims` is:\n   * ```js\n   * {\n   *     tooltip: number optional,\n   *     label: number optional,\n   *     itemName: number optional,\n   *     seriesName: number optional,\n   * }\n   * ```\n   *\n   * A `series.encode` can specified these fields:\n   * ```js\n   * encode: {\n   *     // \"3, 1, 5\" is the index of data dimension.\n   *     tooltip: [3, 1, 5],\n   *     label: [0, 3],\n   *     ...\n   * }\n   * ```\n   * `otherDims` is the parse result of the `series.encode` above, like:\n   * ```js\n   * // Suppose the index of this data dimension is `3`.\n   * this.otherDims = {\n   *     // `3` is at the index `0` of the `encode.tooltip`\n   *     tooltip: 0,\n   *     // `3` is at the index `1` of the `encode.tooltip`\n   *     label: 1\n   * };\n   * ```\n   *\n   * This prop should never be `null`/`undefined` after initialized.\n   * @type {Object}\n   */\n\n\n  this.otherDims = {};\n  /**\n   * Be `true` if this dimension is not mapped to any \"coordSysDim\" that the\n   * \"coordSys\" required.\n   * Mandatory.\n   * @type {boolean}\n   */\n  // this.isExtraCoord;\n\n  /**\n   * @type {module:data/OrdinalMeta}\n   */\n  // this.ordinalMeta;\n\n  /**\n   * Whether to create inverted indices.\n   * @type {boolean}\n   */\n  // this.createInvertedIndices;\n}\n\n;\nvar _default = DataDimensionInfo;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\nvar each = _util.each;\nvar isString = _util.isString;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar isObject = _util.isObject;\nvar clone = _util.clone;\n\nvar _model = require(\"../../util/model\");\n\nvar normalizeToArray = _model.normalizeToArray;\n\nvar _sourceHelper = require(\"./sourceHelper\");\n\nvar guessOrdinal = _sourceHelper.guessOrdinal;\nvar BE_ORDINAL = _sourceHelper.BE_ORDINAL;\n\nvar Source = require(\"../Source\");\n\nvar _dimensionHelper = require(\"./dimensionHelper\");\n\nvar OTHER_DIMENSIONS = _dimensionHelper.OTHER_DIMENSIONS;\n\nvar DataDimensionInfo = require(\"../DataDimensionInfo\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @deprecated\n * Use `echarts/data/helper/createDimensions` instead.\n */\n\n/**\n * @see {module:echarts/test/ut/spec/data/completeDimensions}\n *\n * This method builds the relationship between:\n * + \"what the coord sys or series requires (see `sysDims`)\",\n * + \"what the user defines (in `encode` and `dimensions`, see `opt.dimsDef` and `opt.encodeDef`)\"\n * + \"what the data source provids (see `source`)\".\n *\n * Some guess strategy will be adapted if user does not define something.\n * If no 'value' dimension specified, the first no-named dimension will be\n * named as 'value'.\n *\n * @param {Array.<string>} sysDims Necessary dimensions, like ['x', 'y'], which\n *      provides not only dim template, but also default order.\n *      properties: 'name', 'type', 'displayName'.\n *      `name` of each item provides default coord name.\n *      [{dimsDef: [string|Object, ...]}, ...] dimsDef of sysDim item provides default dim name, and\n *                                    provide dims count that the sysDim required.\n *      [{ordinalMeta}] can be specified.\n * @param {module:echarts/data/Source|Array|Object} source or data (for compatibal with pervious)\n * @param {Object} [opt]\n * @param {Array.<Object|string>} [opt.dimsDef] option.series.dimensions User defined dimensions\n *      For example: ['asdf', {name, type}, ...].\n * @param {Object|HashMap} [opt.encodeDef] option.series.encode {x: 2, y: [3, 1], tooltip: [1, 2], label: 3}\n * @param {Function} [opt.encodeDefaulter] Called if no `opt.encodeDef` exists.\n *      If not specified, auto find the next available data dim.\n *      param source {module:data/Source}\n *      param dimCount {number}\n *      return {Object} encode Never be `null/undefined`.\n * @param {string} [opt.generateCoord] Generate coord dim with the given name.\n *      If not specified, extra dim names will be:\n *      'value', 'value0', 'value1', ...\n * @param {number} [opt.generateCoordCount] By default, the generated dim name is `generateCoord`.\n *      If `generateCoordCount` specified, the generated dim names will be:\n *      `generateCoord` + 0, `generateCoord` + 1, ...\n *      can be Infinity, indicate that use all of the remain columns.\n * @param {number} [opt.dimCount] If not specified, guess by the first data item.\n * @return {Array.<module:data/DataDimensionInfo>}\n */\nfunction completeDimensions(sysDims, source, opt) {\n  if (!Source.isInstance(source)) {\n    source = Source.seriesDataToSource(source);\n  }\n\n  opt = opt || {};\n  sysDims = (sysDims || []).slice();\n  var dimsDef = (opt.dimsDef || []).slice();\n  var dataDimNameMap = createHashMap();\n  var coordDimNameMap = createHashMap(); // var valueCandidate;\n\n  var result = [];\n  var dimCount = getDimCount(source, sysDims, dimsDef, opt.dimCount); // Apply user defined dims (`name` and `type`) and init result.\n\n  for (var i = 0; i < dimCount; i++) {\n    var dimDefItem = dimsDef[i] = extend({}, isObject(dimsDef[i]) ? dimsDef[i] : {\n      name: dimsDef[i]\n    });\n    var userDimName = dimDefItem.name;\n    var resultItem = result[i] = new DataDimensionInfo(); // Name will be applied later for avoiding duplication.\n\n    if (userDimName != null && dataDimNameMap.get(userDimName) == null) {\n      // Only if `series.dimensions` is defined in option\n      // displayName, will be set, and dimension will be diplayed vertically in\n      // tooltip by default.\n      resultItem.name = resultItem.displayName = userDimName;\n      dataDimNameMap.set(userDimName, i);\n    }\n\n    dimDefItem.type != null && (resultItem.type = dimDefItem.type);\n    dimDefItem.displayName != null && (resultItem.displayName = dimDefItem.displayName);\n  }\n\n  var encodeDef = opt.encodeDef;\n\n  if (!encodeDef && opt.encodeDefaulter) {\n    encodeDef = opt.encodeDefaulter(source, dimCount);\n  }\n\n  encodeDef = createHashMap(encodeDef); // Set `coordDim` and `coordDimIndex` by `encodeDef` and normalize `encodeDef`.\n\n  encodeDef.each(function (dataDims, coordDim) {\n    dataDims = normalizeToArray(dataDims).slice(); // Note: It is allowed that `dataDims.length` is `0`, e.g., options is\n    // `{encode: {x: -1, y: 1}}`. Should not filter anything in\n    // this case.\n\n    if (dataDims.length === 1 && !isString(dataDims[0]) && dataDims[0] < 0) {\n      encodeDef.set(coordDim, false);\n      return;\n    }\n\n    var validDataDims = encodeDef.set(coordDim, []);\n    each(dataDims, function (resultDimIdx, idx) {\n      // The input resultDimIdx can be dim name or index.\n      isString(resultDimIdx) && (resultDimIdx = dataDimNameMap.get(resultDimIdx));\n\n      if (resultDimIdx != null && resultDimIdx < dimCount) {\n        validDataDims[idx] = resultDimIdx;\n        applyDim(result[resultDimIdx], coordDim, idx);\n      }\n    });\n  }); // Apply templetes and default order from `sysDims`.\n\n  var availDimIdx = 0;\n  each(sysDims, function (sysDimItem, sysDimIndex) {\n    var coordDim;\n    var sysDimItem;\n    var sysDimItemDimsDef;\n    var sysDimItemOtherDims;\n\n    if (isString(sysDimItem)) {\n      coordDim = sysDimItem;\n      sysDimItem = {};\n    } else {\n      coordDim = sysDimItem.name;\n      var ordinalMeta = sysDimItem.ordinalMeta;\n      sysDimItem.ordinalMeta = null;\n      sysDimItem = clone(sysDimItem);\n      sysDimItem.ordinalMeta = ordinalMeta; // `coordDimIndex` should not be set directly.\n\n      sysDimItemDimsDef = sysDimItem.dimsDef;\n      sysDimItemOtherDims = sysDimItem.otherDims;\n      sysDimItem.name = sysDimItem.coordDim = sysDimItem.coordDimIndex = sysDimItem.dimsDef = sysDimItem.otherDims = null;\n    }\n\n    var dataDims = encodeDef.get(coordDim); // negative resultDimIdx means no need to mapping.\n\n    if (dataDims === false) {\n      return;\n    }\n\n    var dataDims = normalizeToArray(dataDims); // dimensions provides default dim sequences.\n\n    if (!dataDims.length) {\n      for (var i = 0; i < (sysDimItemDimsDef && sysDimItemDimsDef.length || 1); i++) {\n        while (availDimIdx < result.length && result[availDimIdx].coordDim != null) {\n          availDimIdx++;\n        }\n\n        availDimIdx < result.length && dataDims.push(availDimIdx++);\n      }\n    } // Apply templates.\n\n\n    each(dataDims, function (resultDimIdx, coordDimIndex) {\n      var resultItem = result[resultDimIdx];\n      applyDim(defaults(resultItem, sysDimItem), coordDim, coordDimIndex);\n\n      if (resultItem.name == null && sysDimItemDimsDef) {\n        var sysDimItemDimsDefItem = sysDimItemDimsDef[coordDimIndex];\n        !isObject(sysDimItemDimsDefItem) && (sysDimItemDimsDefItem = {\n          name: sysDimItemDimsDefItem\n        });\n        resultItem.name = resultItem.displayName = sysDimItemDimsDefItem.name;\n        resultItem.defaultTooltip = sysDimItemDimsDefItem.defaultTooltip;\n      } // FIXME refactor, currently only used in case: {otherDims: {tooltip: false}}\n\n\n      sysDimItemOtherDims && defaults(resultItem.otherDims, sysDimItemOtherDims);\n    });\n  });\n\n  function applyDim(resultItem, coordDim, coordDimIndex) {\n    if (OTHER_DIMENSIONS.get(coordDim) != null) {\n      resultItem.otherDims[coordDim] = coordDimIndex;\n    } else {\n      resultItem.coordDim = coordDim;\n      resultItem.coordDimIndex = coordDimIndex;\n      coordDimNameMap.set(coordDim, true);\n    }\n  } // Make sure the first extra dim is 'value'.\n\n\n  var generateCoord = opt.generateCoord;\n  var generateCoordCount = opt.generateCoordCount;\n  var fromZero = generateCoordCount != null;\n  generateCoordCount = generateCoord ? generateCoordCount || 1 : 0;\n  var extra = generateCoord || 'value'; // Set dim `name` and other `coordDim` and other props.\n\n  for (var resultDimIdx = 0; resultDimIdx < dimCount; resultDimIdx++) {\n    var resultItem = result[resultDimIdx] = result[resultDimIdx] || new DataDimensionInfo();\n    var coordDim = resultItem.coordDim;\n\n    if (coordDim == null) {\n      resultItem.coordDim = genName(extra, coordDimNameMap, fromZero);\n      resultItem.coordDimIndex = 0;\n\n      if (!generateCoord || generateCoordCount <= 0) {\n        resultItem.isExtraCoord = true;\n      }\n\n      generateCoordCount--;\n    }\n\n    resultItem.name == null && (resultItem.name = genName(resultItem.coordDim, dataDimNameMap));\n\n    if (resultItem.type == null && (guessOrdinal(source, resultDimIdx, resultItem.name) === BE_ORDINAL.Must // Consider the case:\n    // {\n    //    dataset: {source: [\n    //        ['2001', 123],\n    //        ['2002', 456],\n    //        ...\n    //        ['The others', 987],\n    //    ]},\n    //    series: {type: 'pie'}\n    // }\n    // The first colum should better be treated as a \"ordinal\" although it\n    // might not able to be detected as an \"ordinal\" by `guessOrdinal`.\n    || resultItem.isExtraCoord && (resultItem.otherDims.itemName != null || resultItem.otherDims.seriesName != null))) {\n      resultItem.type = 'ordinal';\n    }\n  }\n\n  return result;\n} // ??? TODO\n// Originally detect dimCount by data[0]. Should we\n// optimize it to only by sysDims and dimensions and encode.\n// So only necessary dims will be initialized.\n// But\n// (1) custom series should be considered. where other dims\n// may be visited.\n// (2) sometimes user need to calcualte bubble size or use visualMap\n// on other dimensions besides coordSys needed.\n// So, dims that is not used by system, should be shared in storage?\n\n\nfunction getDimCount(source, sysDims, dimsDef, optDimCount) {\n  // Note that the result dimCount should not small than columns count\n  // of data, otherwise `dataDimNameMap` checking will be incorrect.\n  var dimCount = Math.max(source.dimensionsDetectCount || 1, sysDims.length, dimsDef.length, optDimCount || 0);\n  each(sysDims, function (sysDimItem) {\n    var sysDimItemDimsDef = sysDimItem.dimsDef;\n    sysDimItemDimsDef && (dimCount = Math.max(dimCount, sysDimItemDimsDef.length));\n  });\n  return dimCount;\n}\n\nfunction genName(name, map, fromZero) {\n  if (fromZero || map.get(name) != null) {\n    var i = 0;\n\n    while (map.get(name + i) != null) {\n      i++;\n    }\n\n    name += i;\n  }\n\n  map.set(name, true);\n  return name;\n}\n\nvar _default = completeDimensions;\nmodule.exports = _default;","import completeDimensions from 'echarts/lib/data/helper/completeDimensions';\nimport echarts from 'echarts';\n\necharts.extendSeriesModel({\n  type: 'series.wordCloud',\n\n  visualColorAccessPath: 'textStyle.normal.color',\n\n  optionUpdated: function () {\n    var option = this.option;\n    option.gridSize = Math.max(Math.floor(option.gridSize), 4);\n  },\n\n  getInitialData: function (option, ecModel) {\n    var dimensions = completeDimensions(['value'], option.data);\n    var list = new echarts.List(dimensions, this);\n    list.initData(option.data);\n    return list;\n  },\n\n  // Most of options are from https://github.com/timdream/wordcloud2.js/blob/gh-pages/API.md\n  defaultOption: {\n    maskImage: null,\n\n    // Shape can be 'circle', 'cardioid', 'diamond', 'triangle-forward', 'triangle', 'pentagon', 'star'\n    shape: 'circle',\n\n    left: 'center',\n\n    top: 'center',\n\n    width: '70%',\n\n    height: '80%',\n\n    sizeRange: [12, 60],\n\n    rotationRange: [-90, 90],\n\n    rotationStep: 45,\n\n    gridSize: 8,\n\n    drawOutOfBound: false,\n\n    textStyle: {\n      normal: {\n        fontWeight: 'normal',\n      },\n    },\n  },\n});\n","import echarts from 'echarts';\n\nfunction getShallow(model, path) {\n  return model && model.getShallow(path);\n}\n\necharts.extendChartView({\n  type: 'wordCloud',\n\n  render: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    group.removeAll();\n\n    var data = seriesModel.getData();\n\n    var gridSize = seriesModel.get('gridSize');\n\n    seriesModel.layoutInstance.ondraw = function (text, size, dataIdx, drawn) {\n      var itemModel = data.getItemModel(dataIdx);\n      var textStyleModel = itemModel.getModel('textStyle.normal');\n      var emphasisTextStyleModel = itemModel.getModel('textStyle.emphasis');\n\n      var textEl = new echarts.graphic.Text({\n        style: echarts.graphic.setTextStyle({}, textStyleModel, {\n          x: drawn.info.fillTextOffsetX,\n          y: drawn.info.fillTextOffsetY + size * 0.5,\n          text: text,\n          textBaseline: 'middle',\n          textFill: data.getItemVisual(dataIdx, 'color'),\n          fontSize: size,\n        }),\n        scale: [1 / drawn.info.mu, 1 / drawn.info.mu],\n        position: [\n          (drawn.gx + drawn.info.gw / 2) * gridSize,\n          (drawn.gy + drawn.info.gh / 2) * gridSize,\n        ],\n        rotation: drawn.rot,\n      });\n\n      group.add(textEl);\n\n      data.setItemGraphicEl(dataIdx, textEl);\n\n      echarts.graphic.setHoverStyle(\n        textEl,\n        echarts.graphic.setTextStyle({}, emphasisTextStyleModel, null, { forMerge: true }, true),\n      );\n    };\n\n    this._model = seriesModel;\n  },\n\n  remove: function () {\n    this.group.removeAll();\n\n    this._model.layoutInstance.dispose();\n  },\n\n  dispose: function () {\n    this._model.layoutInstance.dispose();\n  },\n});\n","/*!\n * wordcloud2.js\n * http://timdream.org/wordcloud2.js/\n *\n * Copyright 2011 - 2013 Tim Chien\n * Released under the MIT license\n */\n\n'use strict';\n\n// setImmediate\nif (!window.setImmediate) {\n  window.setImmediate = (function setupSetImmediate() {\n    return window.msSetImmediate ||\n    window.webkitSetImmediate ||\n    window.mozSetImmediate ||\n    window.oSetImmediate ||\n    (function setupSetZeroTimeout() {\n      if (!window.postMessage || !window.addEventListener) {\n        return null;\n      }\n\n      var callbacks = [undefined];\n      var message = 'zero-timeout-message';\n\n      // Like setTimeout, but only takes a function argument.  There's\n      // no time argument (always zero) and no arguments (you have to\n      // use a closure).\n      var setZeroTimeout = function setZeroTimeout(callback) {\n        var id = callbacks.length;\n        callbacks.push(callback);\n        window.postMessage(message + id.toString(36), '*');\n\n        return id;\n      };\n\n      window.addEventListener('message', function setZeroTimeoutMessage(evt) {\n        // Skipping checking event source, retarded IE confused this window\n        // object with another in the presence of iframe\n        if (typeof evt.data !== 'string' ||\n            evt.data.substr(0, message.length) !== message/* ||\n            evt.source !== window */) {\n          return;\n        }\n\n        evt.stopImmediatePropagation();\n\n        var id = parseInt(evt.data.substr(message.length), 36);\n        if (!callbacks[id]) {\n          return;\n        }\n\n        callbacks[id]();\n        callbacks[id] = undefined;\n      }, true);\n\n      /* specify clearImmediate() here since we need the scope */\n      window.clearImmediate = function clearZeroTimeout(id) {\n        if (!callbacks[id]) {\n          return;\n        }\n\n        callbacks[id] = undefined;\n      };\n\n      return setZeroTimeout;\n    })() ||\n    // fallback\n    function setImmediateFallback(fn) {\n      window.setTimeout(fn, 0);\n    };\n  })();\n}\n\nif (!window.clearImmediate) {\n  window.clearImmediate = (function setupClearImmediate() {\n    return window.msClearImmediate ||\n    window.webkitClearImmediate ||\n    window.mozClearImmediate ||\n    window.oClearImmediate ||\n    // \"clearZeroTimeout\" is implement on the previous block ||\n    // fallback\n    function clearImmediateFallback(timer) {\n      window.clearTimeout(timer);\n    };\n  })();\n}\n\n(function(global) {\n\n  // Check if WordCloud can run on this browser\n  var isSupported = (function isSupported() {\n    var canvas = document.createElement('canvas');\n    if (!canvas || !canvas.getContext) {\n      return false;\n    }\n\n    var ctx = canvas.getContext('2d');\n    if (!ctx.getImageData) {\n      return false;\n    }\n    if (!ctx.fillText) {\n      return false;\n    }\n\n    if (!Array.prototype.some) {\n      return false;\n    }\n    if (!Array.prototype.push) {\n      return false;\n    }\n\n    return true;\n  }());\n\n  // Find out if the browser impose minium font size by\n  // drawing small texts on a canvas and measure it's width.\n  var minFontSize = (function getMinFontSize() {\n    if (!isSupported) {\n      return;\n    }\n\n    var ctx = document.createElement('canvas').getContext('2d');\n\n    // start from 20\n    var size = 20;\n\n    // two sizes to measure\n    var hanWidth, mWidth;\n\n    while (size) {\n      ctx.font = size.toString(10) + 'px sans-serif';\n      if ((ctx.measureText('\\uFF37').width === hanWidth) &&\n          (ctx.measureText('m').width) === mWidth) {\n        return (size + 1);\n      }\n\n      hanWidth = ctx.measureText('\\uFF37').width;\n      mWidth = ctx.measureText('m').width;\n\n      size--;\n    }\n\n    return 0;\n  })();\n\n  // Based on http://jsfromhell.com/array/shuffle\n  var shuffleArray = function shuffleArray(arr) {\n    for (var j, x, i = arr.length; i;\n      j = Math.floor(Math.random() * i),\n      x = arr[--i], arr[i] = arr[j],\n      arr[j] = x) {}\n    return arr;\n  };\n\n  var WordCloud = function WordCloud(elements, options) {\n    if (!isSupported) {\n      return;\n    }\n\n    if (!Array.isArray(elements)) {\n      elements = [elements];\n    }\n\n    elements.forEach(function(el, i) {\n      if (typeof el === 'string') {\n        elements[i] = document.getElementById(el);\n        if (!elements[i]) {\n          throw 'The element id specified is not found.';\n        }\n      } else if (!el.tagName && !el.appendChild) {\n        throw 'You must pass valid HTML elements, or ID of the element.';\n      }\n    });\n\n    /* Default values to be overwritten by options object */\n    var settings = {\n      list: [],\n      fontFamily: '\"Trebuchet MS\", \"Heiti TC\", \"微軟正黑體\", ' +\n                  '\"Arial Unicode MS\", \"Droid Fallback Sans\", sans-serif',\n      fontWeight: 'normal',\n      color: 'random-dark',\n      minSize: 0, // 0 to disable\n      weightFactor: 1,\n      clearCanvas: true,\n      backgroundColor: '#fff',  // opaque white = rgba(255, 255, 255, 1)\n\n      gridSize: 8,\n      drawOutOfBound: false,\n      origin: null,\n\n      drawMask: false,\n      maskColor: 'rgba(255,0,0,0.3)',\n      maskGapWidth: 0.3,\n\n      wait: 0,\n      abortThreshold: 0, // disabled\n      abort: function noop() {},\n\n      minRotation: - Math.PI / 2,\n      maxRotation: Math.PI / 2,\n      rotationStep: 0.1,\n\n      shuffle: true,\n      rotateRatio: 0.1,\n\n      shape: 'circle',\n      ellipticity: 0.65,\n\n      classes: null,\n\n      hover: null,\n      click: null\n    };\n\n    if (options) {\n      for (var key in options) {\n        if (key in settings) {\n          settings[key] = options[key];\n        }\n      }\n    }\n\n    /* Convert weightFactor into a function */\n    if (typeof settings.weightFactor !== 'function') {\n      var factor = settings.weightFactor;\n      settings.weightFactor = function weightFactor(pt) {\n        return pt * factor; //in px\n      };\n    }\n\n    /* Convert shape into a function */\n    if (typeof settings.shape !== 'function') {\n      switch (settings.shape) {\n        case 'circle':\n        /* falls through */\n        default:\n          // 'circle' is the default and a shortcut in the code loop.\n          settings.shape = 'circle';\n          break;\n\n        case 'cardioid':\n          settings.shape = function shapeCardioid(theta) {\n            return 1 - Math.sin(theta);\n          };\n          break;\n\n        /*\n        To work out an X-gon, one has to calculate \"m\",\n        where 1/(cos(2*PI/X)+m*sin(2*PI/X)) = 1/(cos(0)+m*sin(0))\n        http://www.wolframalpha.com/input/?i=1%2F%28cos%282*PI%2FX%29%2Bm*sin%28\n        2*PI%2FX%29%29+%3D+1%2F%28cos%280%29%2Bm*sin%280%29%29\n        Copy the solution into polar equation r = 1/(cos(t') + m*sin(t'))\n        where t' equals to mod(t, 2PI/X);\n        */\n\n        case 'diamond':\n        case 'square':\n          // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n          // %28t%2C+PI%2F2%29%29%2Bsin%28mod+%28t%2C+PI%2F2%29%29%29%2C+t+%3D\n          // +0+..+2*PI\n          settings.shape = function shapeSquare(theta) {\n            var thetaPrime = theta % (2 * Math.PI / 4);\n            return 1 / (Math.cos(thetaPrime) + Math.sin(thetaPrime));\n          };\n          break;\n\n        case 'triangle-forward':\n          // http://www.wolframalpha.com/input/?i=plot+r+%3D+1%2F%28cos%28mod+\n          // %28t%2C+2*PI%2F3%29%29%2Bsqrt%283%29sin%28mod+%28t%2C+2*PI%2F3%29\n          // %29%29%2C+t+%3D+0+..+2*PI\n          settings.shape = function shapeTriangle(theta) {\n            var thetaPrime = theta % (2 * Math.PI / 3);\n            return 1 / (Math.cos(thetaPrime) +\n                        Math.sqrt(3) * Math.sin(thetaPrime));\n          };\n          break;\n\n        case 'triangle':\n        case 'triangle-upright':\n          settings.shape = function shapeTriangle(theta) {\n            var thetaPrime = (theta + Math.PI * 3 / 2) % (2 * Math.PI / 3);\n            return 1 / (Math.cos(thetaPrime) +\n                        Math.sqrt(3) * Math.sin(thetaPrime));\n          };\n          break;\n\n        case 'pentagon':\n          settings.shape = function shapePentagon(theta) {\n            var thetaPrime = (theta + 0.955) % (2 * Math.PI / 5);\n            return 1 / (Math.cos(thetaPrime) +\n                        0.726543 * Math.sin(thetaPrime));\n          };\n          break;\n\n        case 'star':\n          settings.shape = function shapeStar(theta) {\n            var thetaPrime = (theta + 0.955) % (2 * Math.PI / 10);\n            if ((theta + 0.955) % (2 * Math.PI / 5) - (2 * Math.PI / 10) >= 0) {\n              return 1 / (Math.cos((2 * Math.PI / 10) - thetaPrime) +\n                          3.07768 * Math.sin((2 * Math.PI / 10) - thetaPrime));\n            } else {\n              return 1 / (Math.cos(thetaPrime) +\n                          3.07768 * Math.sin(thetaPrime));\n            }\n          };\n          break;\n      }\n    }\n\n    /* Make sure gridSize is a whole number and is not smaller than 4px */\n    settings.gridSize = Math.max(Math.floor(settings.gridSize), 4);\n\n    /* shorthand */\n    var g = settings.gridSize;\n    var maskRectWidth = g - settings.maskGapWidth;\n\n    /* normalize rotation settings */\n    var rotationRange = Math.abs(settings.maxRotation - settings.minRotation);\n    var minRotation = Math.min(settings.maxRotation, settings.minRotation);\n    var rotationStep = settings.rotationStep;\n\n    /* information/object available to all functions, set when start() */\n    var grid, // 2d array containing filling information\n      ngx, ngy, // width and height of the grid\n      center, // position of the center of the cloud\n      maxRadius;\n\n    /* timestamp for measuring each putWord() action */\n    var escapeTime;\n\n    /* function for getting the color of the text */\n    var getTextColor;\n    function random_hsl_color(min, max) {\n      return 'hsl(' +\n        (Math.random() * 360).toFixed() + ',' +\n        (Math.random() * 30 + 70).toFixed() + '%,' +\n        (Math.random() * (max - min) + min).toFixed() + '%)';\n    }\n    switch (settings.color) {\n      case 'random-dark':\n        getTextColor = function getRandomDarkColor() {\n          return random_hsl_color(10, 50);\n        };\n        break;\n\n      case 'random-light':\n        getTextColor = function getRandomLightColor() {\n          return random_hsl_color(50, 90);\n        };\n        break;\n\n      default:\n        if (typeof settings.color === 'function') {\n          getTextColor = settings.color;\n        }\n        break;\n    }\n\n    /* function for getting the classes of the text */\n    var getTextClasses = null;\n    if (typeof settings.classes === 'function') {\n      getTextClasses = settings.classes;\n    }\n\n    /* Interactive */\n    var interactive = false;\n    var infoGrid = [];\n    var hovered;\n\n    var getInfoGridFromMouseTouchEvent =\n    function getInfoGridFromMouseTouchEvent(evt) {\n      var canvas = evt.currentTarget;\n      var rect = canvas.getBoundingClientRect();\n      var clientX;\n      var clientY;\n      /** Detect if touches are available */\n      if (evt.touches) {\n        clientX = evt.touches[0].clientX;\n        clientY = evt.touches[0].clientY;\n      } else {\n        clientX = evt.clientX;\n        clientY = evt.clientY;\n      }\n      var eventX = clientX - rect.left;\n      var eventY = clientY - rect.top;\n\n      var x = Math.floor(eventX * ((canvas.width / rect.width) || 1) / g);\n      var y = Math.floor(eventY * ((canvas.height / rect.height) || 1) / g);\n\n      return infoGrid[x][y];\n    };\n\n    var wordcloudhover = function wordcloudhover(evt) {\n      var info = getInfoGridFromMouseTouchEvent(evt);\n\n      if (hovered === info) {\n        return;\n      }\n\n      hovered = info;\n      if (!info) {\n        settings.hover(undefined, undefined, evt);\n\n        return;\n      }\n\n      settings.hover(info.item, info.dimension, evt);\n\n    };\n\n    var wordcloudclick = function wordcloudclick(evt) {\n      var info = getInfoGridFromMouseTouchEvent(evt);\n      if (!info) {\n        return;\n      }\n\n      settings.click(info.item, info.dimension, evt);\n      evt.preventDefault();\n    };\n\n    /* Get points on the grid for a given radius away from the center */\n    var pointsAtRadius = [];\n    var getPointsAtRadius = function getPointsAtRadius(radius) {\n      if (pointsAtRadius[radius]) {\n        return pointsAtRadius[radius];\n      }\n\n      // Look for these number of points on each radius\n      var T = radius * 8;\n\n      // Getting all the points at this radius\n      var t = T;\n      var points = [];\n\n      if (radius === 0) {\n        points.push([center[0], center[1], 0]);\n      }\n\n      while (t--) {\n        // distort the radius to put the cloud in shape\n        var rx = 1;\n        if (settings.shape !== 'circle') {\n          rx = settings.shape(t / T * 2 * Math.PI); // 0 to 1\n        }\n\n        // Push [x, y, t]; t is used solely for getTextColor()\n        points.push([\n          center[0] + radius * rx * Math.cos(-t / T * 2 * Math.PI),\n          center[1] + radius * rx * Math.sin(-t / T * 2 * Math.PI) *\n            settings.ellipticity,\n          t / T * 2 * Math.PI]);\n      }\n\n      pointsAtRadius[radius] = points;\n      return points;\n    };\n\n    /* Return true if we had spent too much time */\n    var exceedTime = function exceedTime() {\n      return ((settings.abortThreshold > 0) &&\n        ((new Date()).getTime() - escapeTime > settings.abortThreshold));\n    };\n\n    /* Get the deg of rotation according to settings, and luck. */\n    var getRotateDeg = function getRotateDeg() {\n      if (settings.rotateRatio === 0) {\n        return 0;\n      }\n\n      if (Math.random() > settings.rotateRatio) {\n        return 0;\n      }\n\n      if (rotationRange === 0) {\n        return minRotation;\n      }\n\n      return minRotation + Math.round(Math.random() * rotationRange / rotationStep) * rotationStep;\n    };\n\n    var getTextInfo = function getTextInfo(word, weight, rotateDeg) {\n      // calculate the acutal font size\n      // fontSize === 0 means weightFactor function wants the text skipped,\n      // and size < minSize means we cannot draw the text.\n      var debug = false;\n      var fontSize = settings.weightFactor(weight);\n      if (fontSize <= settings.minSize) {\n        return false;\n      }\n\n      // Scale factor here is to make sure fillText is not limited by\n      // the minium font size set by browser.\n      // It will always be 1 or 2n.\n      var mu = 1;\n      if (fontSize < minFontSize) {\n        mu = (function calculateScaleFactor() {\n          var mu = 2;\n          while (mu * fontSize < minFontSize) {\n            mu += 2;\n          }\n          return mu;\n        })();\n      }\n\n      var fcanvas = document.createElement('canvas');\n      var fctx = fcanvas.getContext('2d', { willReadFrequently: true });\n\n      fctx.font = settings.fontWeight + ' ' +\n        (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n      // Estimate the dimension of the text with measureText().\n      var fw = fctx.measureText(word).width / mu;\n      var fh = Math.max(fontSize * mu,\n                        fctx.measureText('m').width,\n                        fctx.measureText('\\uFF37').width) / mu;\n\n      // Create a boundary box that is larger than our estimates,\n      // so text don't get cut of (it sill might)\n      var boxWidth = fw + fh * 2;\n      var boxHeight = fh * 3;\n      var fgw = Math.ceil(boxWidth / g);\n      var fgh = Math.ceil(boxHeight / g);\n      boxWidth = fgw * g;\n      boxHeight = fgh * g;\n\n      // Calculate the proper offsets to make the text centered at\n      // the preferred position.\n\n      // This is simply half of the width.\n      var fillTextOffsetX = - fw / 2;\n      // Instead of moving the box to the exact middle of the preferred\n      // position, for Y-offset we move 0.4 instead, so Latin alphabets look\n      // vertical centered.\n      var fillTextOffsetY = - fh * 0.4;\n\n      // Calculate the actual dimension of the canvas, considering the rotation.\n      var cgh = Math.ceil((boxWidth * Math.abs(Math.sin(rotateDeg)) +\n                           boxHeight * Math.abs(Math.cos(rotateDeg))) / g);\n      var cgw = Math.ceil((boxWidth * Math.abs(Math.cos(rotateDeg)) +\n                           boxHeight * Math.abs(Math.sin(rotateDeg))) / g);\n      var width = cgw * g;\n      var height = cgh * g;\n\n      fcanvas.setAttribute('width', width);\n      fcanvas.setAttribute('height', height);\n\n      if (debug) {\n        // Attach fcanvas to the DOM\n        document.body.appendChild(fcanvas);\n        // Save it's state so that we could restore and draw the grid correctly.\n        fctx.save();\n      }\n\n      // Scale the canvas with |mu|.\n      fctx.scale(1 / mu, 1 / mu);\n      fctx.translate(width * mu / 2, height * mu / 2);\n      fctx.rotate(- rotateDeg);\n\n      // Once the width/height is set, ctx info will be reset.\n      // Set it again here.\n      fctx.font = settings.fontWeight + ' ' +\n        (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n\n      // Fill the text into the fcanvas.\n      // XXX: We cannot because textBaseline = 'top' here because\n      // Firefox and Chrome uses different default line-height for canvas.\n      // Please read https://bugzil.la/737852#c6.\n      // Here, we use textBaseline = 'middle' and draw the text at exactly\n      // 0.5 * fontSize lower.\n      fctx.fillStyle = '#000';\n      fctx.textBaseline = 'middle';\n      fctx.fillText(word, fillTextOffsetX * mu,\n                    (fillTextOffsetY + fontSize * 0.5) * mu);\n\n      // Get the pixels of the text\n      var imageData = fctx.getImageData(0, 0, width, height).data;\n\n      if (exceedTime()) {\n        return false;\n      }\n\n      if (debug) {\n        // Draw the box of the original estimation\n        fctx.strokeRect(fillTextOffsetX * mu,\n                        fillTextOffsetY, fw * mu, fh * mu);\n        fctx.restore();\n      }\n\n      // Read the pixels and save the information to the occupied array\n      var occupied = [];\n      var gx = cgw, gy, x, y;\n      var bounds = [cgh / 2, cgw / 2, cgh / 2, cgw / 2];\n      while (gx--) {\n        gy = cgh;\n        while (gy--) {\n          y = g;\n          singleGridLoop: {\n            while (y--) {\n              x = g;\n              while (x--) {\n                if (imageData[((gy * g + y) * width +\n                               (gx * g + x)) * 4 + 3]) {\n                  occupied.push([gx, gy]);\n\n                  if (gx < bounds[3]) {\n                    bounds[3] = gx;\n                  }\n                  if (gx > bounds[1]) {\n                    bounds[1] = gx;\n                  }\n                  if (gy < bounds[0]) {\n                    bounds[0] = gy;\n                  }\n                  if (gy > bounds[2]) {\n                    bounds[2] = gy;\n                  }\n\n                  if (debug) {\n                    fctx.fillStyle = 'rgba(255, 0, 0, 0.5)';\n                    fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n                  }\n                  break singleGridLoop;\n                }\n              }\n            }\n            if (debug) {\n              fctx.fillStyle = 'rgba(0, 0, 255, 0.5)';\n              fctx.fillRect(gx * g, gy * g, g - 0.5, g - 0.5);\n            }\n          }\n        }\n      }\n\n      if (debug) {\n        fctx.fillStyle = 'rgba(0, 255, 0, 0.5)';\n        fctx.fillRect(bounds[3] * g,\n                      bounds[0] * g,\n                      (bounds[1] - bounds[3] + 1) * g,\n                      (bounds[2] - bounds[0] + 1) * g);\n      }\n\n      // Return information needed to create the text on the real canvas\n      return {\n        mu: mu,\n        occupied: occupied,\n        bounds: bounds,\n        gw: cgw,\n        gh: cgh,\n        fillTextOffsetX: fillTextOffsetX,\n        fillTextOffsetY: fillTextOffsetY,\n        fillTextWidth: fw,\n        fillTextHeight: fh,\n        fontSize: fontSize\n      };\n    };\n\n    /* Determine if there is room available in the given dimension */\n    var canFitText = function canFitText(gx, gy, gw, gh, occupied) {\n      // Go through the occupied points,\n      // return false if the space is not available.\n      var i = occupied.length;\n      while (i--) {\n        var px = gx + occupied[i][0];\n        var py = gy + occupied[i][1];\n\n        if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n          if (!settings.drawOutOfBound) {\n            return false;\n          }\n          continue;\n        }\n\n        if (!grid[px][py]) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n    /* Actually draw the text on the grid */\n    var drawText = function drawText(gx, gy, info, word, weight,\n                                     distance, theta, rotateDeg, attributes) {\n\n      var fontSize = info.fontSize;\n      var color;\n      if (getTextColor) {\n        color = getTextColor(word, weight, fontSize, distance, theta);\n      } else {\n        color = settings.color;\n      }\n\n      var classes;\n      if (getTextClasses) {\n        classes = getTextClasses(word, weight, fontSize, distance, theta);\n      } else {\n        classes = settings.classes;\n      }\n\n      var dimension;\n      var bounds = info.bounds;\n      dimension = {\n        x: (gx + bounds[3]) * g,\n        y: (gy + bounds[0]) * g,\n        w: (bounds[1] - bounds[3] + 1) * g,\n        h: (bounds[2] - bounds[0] + 1) * g\n      };\n\n      elements.forEach(function(el) {\n        if (el.getContext) {\n          var ctx = el.getContext('2d');\n          var mu = info.mu;\n\n          // Save the current state before messing it\n          ctx.save();\n          ctx.scale(1 / mu, 1 / mu);\n\n          ctx.font = settings.fontWeight + ' ' +\n                     (fontSize * mu).toString(10) + 'px ' + settings.fontFamily;\n          ctx.fillStyle = color;\n\n          // Translate the canvas position to the origin coordinate of where\n          // the text should be put.\n          ctx.translate((gx + info.gw / 2) * g * mu,\n                        (gy + info.gh / 2) * g * mu);\n\n          if (rotateDeg !== 0) {\n            ctx.rotate(- rotateDeg);\n          }\n\n          // Finally, fill the text.\n\n          // XXX: We cannot because textBaseline = 'top' here because\n          // Firefox and Chrome uses different default line-height for canvas.\n          // Please read https://bugzil.la/737852#c6.\n          // Here, we use textBaseline = 'middle' and draw the text at exactly\n          // 0.5 * fontSize lower.\n          ctx.textBaseline = 'middle';\n          ctx.fillText(word, info.fillTextOffsetX * mu,\n                             (info.fillTextOffsetY + fontSize * 0.5) * mu);\n\n          // The below box is always matches how <span>s are positioned\n          /* ctx.strokeRect(info.fillTextOffsetX, info.fillTextOffsetY,\n            info.fillTextWidth, info.fillTextHeight); */\n\n          // Restore the state.\n          ctx.restore();\n        } else {\n          // drawText on DIV element\n          var span = document.createElement('span');\n          var transformRule = '';\n          transformRule = 'rotate(' + (- rotateDeg / Math.PI * 180) + 'deg) ';\n          if (info.mu !== 1) {\n            transformRule +=\n              'translateX(-' + (info.fillTextWidth / 4) + 'px) ' +\n              'scale(' + (1 / info.mu) + ')';\n          }\n          var styleRules = {\n            'position': 'absolute',\n            'display': 'block',\n            'font': settings.fontWeight + ' ' +\n                    (fontSize * info.mu) + 'px ' + settings.fontFamily,\n            'left': ((gx + info.gw / 2) * g + info.fillTextOffsetX) + 'px',\n            'top': ((gy + info.gh / 2) * g + info.fillTextOffsetY) + 'px',\n            'width': info.fillTextWidth + 'px',\n            'height': info.fillTextHeight + 'px',\n            'lineHeight': fontSize + 'px',\n            'whiteSpace': 'nowrap',\n            'transform': transformRule,\n            'webkitTransform': transformRule,\n            'msTransform': transformRule,\n            'transformOrigin': '50% 40%',\n            'webkitTransformOrigin': '50% 40%',\n            'msTransformOrigin': '50% 40%'\n          };\n          if (color) {\n            styleRules.color = color;\n          }\n          span.textContent = word;\n          for (var cssProp in styleRules) {\n            span.style[cssProp] = styleRules[cssProp];\n          }\n          if (attributes) {\n            for (var attribute in attributes) {\n              span.setAttribute(attribute, attributes[attribute]);\n            }\n          }\n          if (classes) {\n            span.className += classes;\n          }\n          el.appendChild(span);\n        }\n      });\n    };\n\n    /* Help function to updateGrid */\n    var fillGridAt = function fillGridAt(x, y, drawMask, dimension, item) {\n      if (x >= ngx || y >= ngy || x < 0 || y < 0) {\n        return;\n      }\n\n      grid[x][y] = false;\n\n      if (drawMask) {\n        var ctx = elements[0].getContext('2d');\n        ctx.fillRect(x * g, y * g, maskRectWidth, maskRectWidth);\n      }\n\n      if (interactive) {\n        infoGrid[x][y] = { item: item, dimension: dimension };\n      }\n    };\n\n    /* Update the filling information of the given space with occupied points.\n       Draw the mask on the canvas if necessary. */\n    var updateGrid = function updateGrid(gx, gy, gw, gh, info, item) {\n      var occupied = info.occupied;\n      var drawMask = settings.drawMask;\n      var ctx;\n      if (drawMask) {\n        ctx = elements[0].getContext('2d');\n        ctx.save();\n        ctx.fillStyle = settings.maskColor;\n      }\n\n      var dimension;\n      if (interactive) {\n        var bounds = info.bounds;\n        dimension = {\n          x: (gx + bounds[3]) * g,\n          y: (gy + bounds[0]) * g,\n          w: (bounds[1] - bounds[3] + 1) * g,\n          h: (bounds[2] - bounds[0] + 1) * g\n        };\n      }\n\n      var i = occupied.length;\n      while (i--) {\n        var px = gx + occupied[i][0];\n        var py = gy + occupied[i][1];\n\n        if (px >= ngx || py >= ngy || px < 0 || py < 0) {\n          continue;\n        }\n\n        fillGridAt(px, py, drawMask, dimension, item);\n      }\n\n      if (drawMask) {\n        ctx.restore();\n      }\n    };\n\n    /* putWord() processes each item on the list,\n       calculate it's size and determine it's position, and actually\n       put it on the canvas. */\n    var putWord = function putWord(item) {\n      var word, weight, attributes;\n      if (Array.isArray(item)) {\n        word = item[0];\n        weight = item[1];\n      } else {\n        word = item.word;\n        weight = item.weight;\n        attributes = item.attributes;\n      }\n      var rotateDeg = getRotateDeg();\n\n      // get info needed to put the text onto the canvas\n      var info = getTextInfo(word, weight, rotateDeg);\n\n      // not getting the info means we shouldn't be drawing this one.\n      if (!info) {\n        return false;\n      }\n\n      if (exceedTime()) {\n        return false;\n      }\n\n      // If drawOutOfBound is set to false,\n      // skip the loop if we have already know the bounding box of\n      // word is larger than the canvas.\n      if (!settings.drawOutOfBound) {\n        var bounds = info.bounds;\n        if ((bounds[1] - bounds[3] + 1) > ngx ||\n          (bounds[2] - bounds[0] + 1) > ngy) {\n          return false;\n        }\n      }\n\n      // Determine the position to put the text by\n      // start looking for the nearest points\n      var r = maxRadius + 1;\n\n      var tryToPutWordAtPoint = function(gxy) {\n        var gx = Math.floor(gxy[0] - info.gw / 2);\n        var gy = Math.floor(gxy[1] - info.gh / 2);\n        var gw = info.gw;\n        var gh = info.gh;\n\n        // If we cannot fit the text at this position, return false\n        // and go to the next position.\n        if (!canFitText(gx, gy, gw, gh, info.occupied)) {\n          return false;\n        }\n\n        // Actually put the text on the canvas\n        drawText(gx, gy, info, word, weight,\n                 (maxRadius - r), gxy[2], rotateDeg, attributes);\n\n        // Mark the spaces on the grid as filled\n        updateGrid(gx, gy, gw, gh, info, item);\n\n        return {\n          gx: gx,\n          gy: gy,\n          rot: rotateDeg,\n          info: info\n        };\n      };\n\n      while (r--) {\n        var points = getPointsAtRadius(maxRadius - r);\n\n        if (settings.shuffle) {\n          points = [].concat(points);\n          shuffleArray(points);\n        }\n\n        // Try to fit the words by looking at each point.\n        // array.some() will stop and return true\n        // when putWordAtPoint() returns true.\n        for (var i = 0; i < points.length; i++) {\n          var res = tryToPutWordAtPoint(points[i]);\n          if (res) {\n            return res;\n          }\n        }\n\n        // var drawn = points.some(tryToPutWordAtPoint);\n        // if (drawn) {\n        //   // leave putWord() and return true\n        //   return true;\n        // }\n      }\n      // we tried all distances but text won't fit, return null\n      return null;\n    };\n\n    /* Send DOM event to all elements. Will stop sending event and return\n       if the previous one is canceled (for cancelable events). */\n    var sendEvent = function sendEvent(type, cancelable, detail) {\n      if (cancelable) {\n        return !elements.some(function(el) {\n          var evt = document.createEvent('CustomEvent');\n          evt.initCustomEvent(type, true, cancelable, detail || {});\n          return !el.dispatchEvent(evt);\n        }, this);\n      } else {\n        elements.forEach(function(el) {\n          var evt = document.createEvent('CustomEvent');\n          evt.initCustomEvent(type, true, cancelable, detail || {});\n          el.dispatchEvent(evt);\n        }, this);\n      }\n    };\n\n    /* Start drawing on a canvas */\n    var start = function start() {\n      // For dimensions, clearCanvas etc.,\n      // we only care about the first element.\n      var canvas = elements[0];\n\n      if (canvas.getContext) {\n        ngx = Math.ceil(canvas.width / g);\n        ngy = Math.ceil(canvas.height / g);\n      } else {\n        var rect = canvas.getBoundingClientRect();\n        ngx = Math.ceil(rect.width / g);\n        ngy = Math.ceil(rect.height / g);\n      }\n\n      // Sending a wordcloudstart event which cause the previous loop to stop.\n      // Do nothing if the event is canceled.\n      if (!sendEvent('wordcloudstart', true)) {\n        return;\n      }\n\n      // Determine the center of the word cloud\n      center = (settings.origin) ?\n        [settings.origin[0]/g, settings.origin[1]/g] :\n        [ngx / 2, ngy / 2];\n\n      // Maxium radius to look for space\n      maxRadius = Math.floor(Math.sqrt(ngx * ngx + ngy * ngy));\n\n      /* Clear the canvas only if the clearCanvas is set,\n         if not, update the grid to the current canvas state */\n      grid = [];\n\n      var gx, gy, i;\n      if (!canvas.getContext || settings.clearCanvas) {\n        elements.forEach(function(el) {\n          if (el.getContext) {\n            var ctx = el.getContext('2d');\n            ctx.fillStyle = settings.backgroundColor;\n            ctx.clearRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n            ctx.fillRect(0, 0, ngx * (g + 1), ngy * (g + 1));\n          } else {\n            el.textContent = '';\n            el.style.backgroundColor = settings.backgroundColor;\n            el.style.position = 'relative';\n          }\n        });\n\n        /* fill the grid with empty state */\n        gx = ngx;\n        while (gx--) {\n          grid[gx] = [];\n          gy = ngy;\n          while (gy--) {\n            grid[gx][gy] = true;\n          }\n        }\n      } else {\n        /* Determine bgPixel by creating\n           another canvas and fill the specified background color. */\n        var bctx = document.createElement('canvas').getContext('2d');\n\n        bctx.fillStyle = settings.backgroundColor;\n        bctx.fillRect(0, 0, 1, 1);\n        var bgPixel = bctx.getImageData(0, 0, 1, 1).data;\n\n        /* Read back the pixels of the canvas we got to tell which part of the\n           canvas is empty.\n           (no clearCanvas only works with a canvas, not divs) */\n        var imageData =\n          canvas.getContext('2d').getImageData(0, 0, ngx * g, ngy * g).data;\n\n        gx = ngx;\n        var x, y;\n        while (gx--) {\n          grid[gx] = [];\n          gy = ngy;\n          while (gy--) {\n            y = g;\n            singleGridLoop: while (y--) {\n              x = g;\n              while (x--) {\n                i = 4;\n                while (i--) {\n                  if (imageData[((gy * g + y) * ngx * g +\n                                 (gx * g + x)) * 4 + i] !== bgPixel[i]) {\n                    grid[gx][gy] = false;\n                    break singleGridLoop;\n                  }\n                }\n              }\n            }\n            if (grid[gx][gy] !== false) {\n              grid[gx][gy] = true;\n            }\n          }\n        }\n\n        imageData = bctx = bgPixel = undefined;\n      }\n\n      // fill the infoGrid with empty state if we need it\n      if (settings.hover || settings.click) {\n\n        interactive = true;\n\n        /* fill the grid with empty state */\n        gx = ngx + 1;\n        while (gx--) {\n          infoGrid[gx] = [];\n        }\n\n        if (settings.hover) {\n          canvas.addEventListener('mousemove', wordcloudhover);\n        }\n\n        if (settings.click) {\n          canvas.addEventListener('click', wordcloudclick);\n          canvas.addEventListener('touchstart', wordcloudclick);\n          canvas.addEventListener('touchend', function (e) {\n            e.preventDefault();\n          });\n          canvas.style.webkitTapHighlightColor = 'rgba(0, 0, 0, 0)';\n        }\n\n        canvas.addEventListener('wordcloudstart', function stopInteraction() {\n          canvas.removeEventListener('wordcloudstart', stopInteraction);\n\n          canvas.removeEventListener('mousemove', wordcloudhover);\n          canvas.removeEventListener('click', wordcloudclick);\n          hovered = undefined;\n        });\n      }\n\n      i = 0;\n      var loopingFunction, stoppingFunction;\n      if (settings.wait !== 0) {\n        loopingFunction = window.setTimeout;\n        stoppingFunction = window.clearTimeout;\n      } else {\n        loopingFunction = window.setImmediate;\n        stoppingFunction = window.clearImmediate;\n      }\n\n      var addEventListener = function addEventListener(type, listener) {\n        elements.forEach(function(el) {\n          el.addEventListener(type, listener);\n        }, this);\n      };\n\n      var removeEventListener = function removeEventListener(type, listener) {\n        elements.forEach(function(el) {\n          el.removeEventListener(type, listener);\n        }, this);\n      };\n\n      var anotherWordCloudStart = function anotherWordCloudStart() {\n        removeEventListener('wordcloudstart', anotherWordCloudStart);\n        stoppingFunction(timer);\n      };\n\n      addEventListener('wordcloudstart', anotherWordCloudStart);\n\n      var timer = loopingFunction(function loop() {\n        if (i >= settings.list.length) {\n          stoppingFunction(timer);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n\n          return;\n        }\n        escapeTime = (new Date()).getTime();\n        var drawn = putWord(settings.list[i]);\n        var canceled = !sendEvent('wordclouddrawn', true, {\n          item: settings.list[i], drawn: drawn });\n        if (exceedTime() || canceled) {\n          stoppingFunction(timer);\n          settings.abort();\n          sendEvent('wordcloudabort', false);\n          sendEvent('wordcloudstop', false);\n          removeEventListener('wordcloudstart', anotherWordCloudStart);\n          return;\n        }\n        i++;\n        timer = loopingFunction(loop, settings.wait);\n      }, settings.wait);\n    };\n\n    // All set, start the drawing\n    start();\n  };\n\n  WordCloud.isSupported = isSupported;\n  WordCloud.minFontSize = minFontSize;\n\n  // Expose the library as an AMD module\n  if (typeof define === 'function' && define.amd) {\n    define('wordcloud', [], function() { return WordCloud; });\n  } else if (typeof module !== 'undefined' && module.exports) {\n    module.exports = WordCloud;\n  } else {\n    global.WordCloud = WordCloud;\n  }\n\n})(this); //jshint ignore:line","import echarts from 'echarts';\nimport layoutUtil from 'echarts/lib/util/layout';\nimport './WordCloudSeries';\nimport './WordCloudView';\nimport wordCloudLayoutHelper from './layout';\n\nif (!wordCloudLayoutHelper.isSupported) {\n  throw new Error('Sorry your browser not support wordCloud');\n}\n\n// https://github.com/timdream/wordcloud2.js/blob/c236bee60436e048949f9becc4f0f67bd832dc5c/index.js#L233\nfunction updateCanvasMask(maskCanvas) {\n  var ctx = maskCanvas.getContext('2d');\n  var imageData = ctx.getImageData(0, 0, maskCanvas.width, maskCanvas.height);\n  var newImageData = ctx.createImageData(imageData);\n\n  var toneSum = 0;\n  var toneCnt = 0;\n  for (var i = 0; i < imageData.data.length; i += 4) {\n    var alpha = imageData.data[i + 3];\n    if (alpha > 128) {\n      var tone = imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2];\n      toneSum += tone;\n      ++toneCnt;\n    }\n  }\n  var threshold = toneSum / toneCnt;\n\n  for (var i = 0; i < imageData.data.length; i += 4) {\n    var tone = imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2];\n    var alpha = imageData.data[i + 3];\n\n    if (alpha < 128 || tone > threshold) {\n      // Area not to draw\n      newImageData.data[i] = 0;\n      newImageData.data[i + 1] = 0;\n      newImageData.data[i + 2] = 0;\n      newImageData.data[i + 3] = 0;\n    } else {\n      // Area to draw\n      // The color must be same with backgroundColor\n      newImageData.data[i] = 255;\n      newImageData.data[i + 1] = 255;\n      newImageData.data[i + 2] = 255;\n      newImageData.data[i + 3] = 255;\n    }\n  }\n\n  ctx.putImageData(newImageData, 0, 0);\n}\n\necharts.registerLayout(function (ecModel, api) {\n  ecModel.eachSeriesByType('wordCloud', function (seriesModel) {\n    var gridRect = layoutUtil.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n      width: api.getWidth(),\n      height: api.getHeight(),\n    });\n    var data = seriesModel.getData();\n\n    var canvas = document.createElement('canvas');\n    canvas.width = gridRect.width;\n    canvas.height = gridRect.height;\n\n    var ctx = canvas.getContext('2d');\n    var maskImage = seriesModel.get('maskImage');\n    if (maskImage) {\n      try {\n        ctx.drawImage(maskImage, 0, 0, canvas.width, canvas.height);\n        updateCanvasMask(canvas);\n      } catch (e) {\n        console.error('Invalid mask image');\n        console.error(e.toString());\n      }\n    }\n\n    var sizeRange = seriesModel.get('sizeRange');\n    var rotationRange = seriesModel.get('rotationRange');\n    var valueExtent = data.getDataExtent('value');\n\n    var DEGREE_TO_RAD = Math.PI / 180;\n    var gridSize = seriesModel.get('gridSize');\n    wordCloudLayoutHelper(canvas, {\n      list: data\n        .mapArray('value', function (value, idx) {\n          var itemModel = data.getItemModel(idx);\n          return [\n            data.getName(idx),\n            itemModel.get('textStyle.normal.textSize', true) ||\n              echarts.number.linearMap(value, valueExtent, sizeRange),\n            idx,\n          ];\n        })\n        .sort(function (a, b) {\n          // Sort from large to small in case there is no more room for more words\n          return b[1] - a[1];\n        }),\n      fontFamily:\n        seriesModel.get('textStyle.normal.fontFamily') ||\n        seriesModel.get('textStyle.emphasis.fontFamily') ||\n        ecModel.get('textStyle.fontFamily'),\n      fontWeight:\n        seriesModel.get('textStyle.normal.fontWeight') ||\n        seriesModel.get('textStyle.emphasis.fontWeight') ||\n        ecModel.get('textStyle.fontWeight'),\n      gridSize: gridSize,\n\n      ellipticity: gridRect.height / gridRect.width,\n\n      minRotation: rotationRange[0] * DEGREE_TO_RAD,\n      maxRotation: rotationRange[1] * DEGREE_TO_RAD,\n\n      clearCanvas: !maskImage,\n\n      rotateRatio: 1,\n\n      rotationStep: seriesModel.get('rotationStep') * DEGREE_TO_RAD,\n\n      drawOutOfBound: seriesModel.get('drawOutOfBound'),\n\n      shuffle: false,\n\n      shape: seriesModel.get('shape'),\n    });\n\n    function onWordCloudDrawn(e) {\n      var item = e.detail.item;\n      if (e.detail.drawn && seriesModel.layoutInstance.ondraw) {\n        e.detail.drawn.gx += gridRect.x / gridSize;\n        e.detail.drawn.gy += gridRect.y / gridSize;\n        seriesModel.layoutInstance.ondraw(item[0], item[1], item[2], e.detail.drawn);\n      }\n    }\n\n    canvas.addEventListener('wordclouddrawn', onWordCloudDrawn);\n\n    if (seriesModel.layoutInstance) {\n      // Dispose previous\n      seriesModel.layoutInstance.dispose();\n    }\n\n    seriesModel.layoutInstance = {\n      ondraw: null,\n\n      dispose: function () {\n        canvas.removeEventListener('wordclouddrawn', onWordCloudDrawn);\n        // Abort\n        canvas.addEventListener('wordclouddrawn', function (e) {\n          // Prevent default to cancle the event and stop the loop\n          e.preventDefault();\n        });\n      },\n    };\n  });\n});\n\necharts.registerPreprocessor(function (option) {\n  var series = (option || {}).series;\n  !echarts.util.isArray(series) && (series = series ? [series] : []);\n\n  var compats = ['shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n\n  echarts.util.each(series, function (seriesItem) {\n    if (seriesItem && seriesItem.type === 'wordCloud') {\n      var textStyle = seriesItem.textStyle || {};\n\n      compatTextStyle(textStyle.normal);\n      compatTextStyle(textStyle.emphasis);\n    }\n  });\n\n  function compatTextStyle(textStyle) {\n    textStyle &&\n      echarts.util.each(compats, function (key) {\n        if (textStyle.hasOwnProperty(key)) {\n          textStyle['text' + echarts.format.capitalFirst(key)] = textStyle[key];\n        }\n      });\n  }\n});\n","import { SpecificChartConfig } from '@xmly/rocket-chart/lib/types';\n\nconst config: SpecificChartConfig = {\n  defaultChartProps: {\n    option: {\n      xAxis: { show: false },\n      legend: false,\n    },\n  },\n  optionHandler(options, datasetParams, { themeConfig } = {}) {\n    const { sizeRange = [8, 60] } = datasetParams as any;\n    const {\n      dataset: { source },\n    } = options;\n    const [nameArr, valueArr] = source;\n    if (!nameArr?.length || !valueArr?.length || valueArr.length < 2) return (options.series = []);\n\n    const data = nameArr\n      .slice(1)\n      .map((name: string, index: number) => ({\n        name,\n        value: valueArr[index + 1] || 0,\n      }))\n      .sort((a: any, b: any) => b.value - a.value);\n\n    data.forEach((item: any, index: number) => (item.index = index));\n\n    options.series = [\n      {\n        name: valueArr[0],\n        type: 'wordCloud',\n        left: 'center',\n        top: 'center',\n        width: '94%',\n        height: '94%',\n        sizeRange,\n        rotationRange: [0, 0],\n        rotationStep: 360,\n        // gridSize: 20,\n        drawOutOfBound: true,\n        data,\n        textStyle: {\n          normal: {\n            color: function(params: any) {\n              const {\n                data: { index },\n              } = params;\n              return themeConfig?.color[index % themeConfig.color.length];\n            },\n          },\n        },\n      },\n    ];\n  },\n  // onResize: (echart, chartOptions, chartProps) => {\n  //   if (!echart || !chartOptions || !chartProps) {\n  //     return;\n  //   }\n  //   console.log('onresize');\n  //   const dataArray = chartOptions.dataset.source[0];\n  //   const pattern = new RegExp('[\\u4E00-\\u9FA5]+');\n  //   const strAverageLength = dataArray.reduce(\n  //     (a, b, i, arr) =>\n  //       pattern.test(b) ? a + b.length / arr.length : a + b.length / arr.length / 2,\n  //     0,\n  //   );\n\n  //   const resizeType = targetWidth => {\n  //     const resizeWidth = echart.getWidth();\n  //     const resizeHeight = echart.getHeight();\n\n  //     const adjustHeight = considerHeight => {\n  //       const ratio = resizeWidth / (targetWidth - considerHeight);\n  //       const givenSize = chartProps.datasetParams.sizeRange || [8, 60];\n  //       const minSize = Math.max(givenSize[0], givenSize[0] * ratio);\n  //       const maxSize = Math.min(givenSize[1], givenSize[1] * ratio);\n  //       chartOptions.series[0].sizeRange = [minSize, maxSize];\n  //     };\n  //     if (resizeHeight <= 400) {\n  //       adjustHeight(0);\n  //     } else {\n  //       adjustHeight(Math.min(550, ((resizeHeight - 400) / 150) * 150));\n  //       /*高度增大 空白增大 所以调整字号增大*/\n  //     }\n  //   };\n  //   if (dataArray.length <= 15) {\n  //     resizeType(Math.max(450, 450 + (strAverageLength - 1) * 50));\n  //   } else if (dataArray.length <= 40) {\n  //     resizeType(Math.max(500, 500 + (strAverageLength - 1) * 100));\n  //   } else {\n  //     resizeType(Math.max(1500, 1500 + (strAverageLength - 4) * 100));\n  //   }\n  //   echart.setOption(chartOptions);\n  // },\n};\n\nexport default config;\n","import { ExternalChart } from '@xmly/rocket-chart/lib/types';\nimport './echartsWordcloud';\nimport basic from './basic';\n\nconst wordcloud: ExternalChart = {\n  types: {\n    'wordcloud-basic': basic,\n  },\n  moduleType: 'chart',\n};\n\nexport default wordcloud;\n"],"names":["BUILTIN_OBJECT","[object Function]","[object RegExp]","[object Date]","[object Error]","[object CanvasGradient]","[object CanvasPattern]","[object Image]","[object Canvas]","TYPED_ARRAY","[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","objToString","Object","prototype","toString","arrayProto","Array","nativeForEach","forEach","nativeFilter","filter","nativeSlice","slice","nativeMap","map","nativeReduce","reduce","methods","$override","name","fn","_ctx","clone","source","result","typeStr","call","isPrimitive","i","len","length","Ctor","constructor","from","isDom","key","hasOwnProperty","merge","target","overwrite","isObject","targetProp","sourceProp","isArray","isBuiltInObject","mergeAll","targetAndSources","extend","defaults","overlay","createCanvas","document","createElement","getContext","indexOf","array","value","inherits","clazz","baseClazz","clazzPrototype","F","prop","superClass","mixin","isArrayLike","data","each","obj","cb","context","push","memo","find","bind","func","args","arguments","apply","concat","curry","this","isFunction","isString","type","isTypedArray","nodeType","ownerDocument","eqNaN","retrieve","values","retrieve2","value0","value1","retrieve3","value2","Function","normalizeCssArray","val","assert","condition","message","Error","trim","str","replace","primitiveKey","setAsPrimitive","HashMap","isArr","thisMap","visit","set","get","removeKey","createHashMap","concatArray","a","b","newArray","offset","noop","ArrayCtor","Float32Array","create","x","y","out","copy","v","add","v1","v2","scaleAndAdd","sub","Math","sqrt","lenSquare","lengthSquare","mul","div","dot","scale","s","normalize","d","distance","dist","distanceSquare","distSquare","negate","lerp","t","applyTransform","m","min","max","identity","m1","m2","out0","out1","out2","out3","out4","out5","translate","rotate","rad","aa","ac","atx","ab","ad","aty","st","sin","ct","cos","vx","vy","invert","det","v2ApplyTransform","vec2","mathMin","mathMax","BoundingRect","width","height","union","other","lt","rb","lb","rt","maxX","maxY","calculateTransform","sx","sy","matrix","intersect","ax0","ax1","ay0","ay1","bx0","bx1","by0","by1","contain","rect","plain","_default","RADIAN_EPSILON","_trim","linearMap","domain","range","clamp","subDomain","subRange","parsePercent","percent","all","match","parseFloat","NaN","round","precision","returnStr","toFixed","asc","arr","sort","getPrecision","isNaN","e","count","getPrecisionSafe","eIndex","dotIndex","getPixelPrecision","dataExtent","pixelExtent","log","LN10","dataQuantity","floor","sizeQuantity","abs","isFinite","getPercentWithPrecision","valueList","idx","sum","zrUtil","acc","digits","pow","votesPerQuota","targetSeats","seats","votes","currentSum","remainder","Number","NEGATIVE_INFINITY","maxId","MAX_SAFE_INTEGER","remRadian","radian","pi2","PI","isRadianAroundZero","TIME_REG","parseDate","Date","exec","hour","toUpperCase","UTC","quantity","quantityExponent","exp","nice","exponent","exp10","f","nf","quantile","ascArr","p","H","h","reformIntervals","list","littleThan","curr","Infinity","currClose","interval","close","lg","splice","isNumeric","LinkedList","head","tail","_len","linkedListProto","insert","entry","Entry","insertEntry","next","prev","remove","clear","LRU","maxSize","_list","_map","_maxSize","_lastRemovedEntry","LRUProto","put","removed","leastUsedEntry","globalImageCache","findExistImage","newImageOrSrc","cachedImgObj","image","createOrUpdateImage","hostEl","cbPayload","__zrImageSrc","pendingWrap","isImageReady","pending","Image","onload","onerror","imageOnLoad","__cachedImgObj","src","dirty","_util","textWidthCache","textWidthCacheCounter","TEXT_CACHE_MAX","STYLE_REG","DEFAULT_FONT","getWidth","text","font","textLines","split","l","measureText","getBoundingRect","textAlign","textVerticalAlign","textPadding","textLineHeight","rich","truncate","getRichTextRect","getPlainTextRect","contentBlock","parsePlainText","outerWidth","outerHeight","adjustTextX","adjustTextY","lineHeight","parseRichText","calculateTextPosition","style","textPosition","textDistance","halfHeight","adjustTextPositionOnRect","dummyStyle","truncateText","containerWidth","ellipsis","options","prepareTruncateOptions","truncateSingleLine","join","maxIterations","minChar","cnCharWidth","ascCharWidth","placeholder","contentWidth","ellipsisWidth","textLine","lineWidth","j","subLength","estimateLength","substr","charCode","charCodeAt","getLineHeight","ctx","padding","lines","canCacheByTextString","truncOuterHeight","truncOuterWidth","lastIndex","matchedIndex","index","pushTokens","substring","contentHeight","pendingList","stlPadding","truncateWidth","truncateHeight","line","tokens","token","tokenStyle","styleName","tokenHeight","textHeight","textWidth","tokenWidth","tokenWidthNotSpecified","charAt","percentWidth","textBackgroundColor","bgImg","imageHelper","paddingW","remianTruncWidth","parseInt","block","isEmptyStr","strs","isLineHolder","tokensLen","makeFont","fontSize","fontFamily","fontStyle","fontWeight","textFont","addCommas","toCamelCase","upperCaseFirst","toLowerCase","group1","replaceReg","replaceMap","&","<",">","\"","'","encodeHTML","c","TPL_VAR_ALIAS","wrapVar","varName","seriesIdx","formatTpl","tpl","paramsList","encode","seriesLen","$vars","alias","k","formatTplSimple","param","getTooltipMarker","opt","extraCssText","color","renderMode","markerId","content","pad","formatTime","isUTC","date","numberUtil","utc","M","S","capitalFirst","textContain","getTextBoundingRect","getTextRect","_number","LOCATION_PARAMS","HV_NAMES","boxLayout","orient","group","gap","maxWidth","maxHeight","currentLineMaxSize","eachChild","child","position","nextChild","childAt","nextChildRect","nextX","nextY","moveX","newline","moveY","box","vbox","hbox","getAvailableSize","positionInfo","containerRect","margin","containerHeight","x2","y2","formatUtil","getLayoutRect","left","top","right","bottom","verticalMargin","horizontalMargin","aspect","positionElement","el","hv","boundingMode","needLocalTransform","transform","getLocalTransform","elPos","dx","dy","attr","sizeCalculable","option","hvIdx","mergeLayoutParam","targetOption","newOption","ignoreSize","hResult","vResult","names","newParams","newValueCount","merged","mergedValueCount","enoughParamNumber","hasProp","hasValue","getLayoutParams","copyLayoutParams","env","wx","getSystemInfoSync","browser","os","node","wxa","canvasSupported","svgSupported","touchEventsSupported","domSupported","self","worker","navigator","detect","userAgent","ua","firefox","ie","edge","weChat","test","version","SVGRect","window","pointerEventsSupported","DUMMY_COMPONENT_NAME_PREFIX","normalizeToArray","defaultEmphasis","subOpts","emphasis","subOptName","TEXT_STYLE_OPTIONS","getDataItemValue","dataItem","isDataItemOption","mappingToExists","exists","newCptOptions","exist","cptOption","id","isIdInner","makeIdAndName","mapResult","idMap","item","existCpt","keyInfo","idNum","isNameSpecified","componentModel","compressBatches","batchA","batchB","mapA","mapB","makeMap","mapToArray","sourceBatch","otherMap","seriesId","dataIndices","dataIndex","otherDataIndices","lenj","isData","queryDataIndex","payload","dataIndexInside","indexOfRawIndex","indexOfName","makeInner","innerUniqueIndex","random","hostObj","parseFinder","ecModel","finder","defaultMainType","has","parsedKey","mainType","queryType","includeMainTypes","queryParam","models","queryComponents","setAttribute","dom","getAttribute","getTooltipRenderMode","renderModeOption","groupData","getKey","buckets","keys","TYPE_DELIMITER","IS_CONTAINER","parseClassType","componentType","ret","main","checkClassType","enableClassExtend","RootClass","mandatoryMethods","$constructor","proto","ExtendedClass","superCall","superApply","classBase","enableClassCheck","Clz","classAttr","isInstance","methodName","enableClassManagement","entity","storage","registerClass","Clazz","container","makeContainer","getClass","componentMainType","subType","throwWhenNotFound","getClassesByMainType","o","hasClass","getAllClassMainTypes","types","hasSubTypes","registerWhenExtend","originalExtend","setReadOnly","properties","SOURCE_FORMAT_ORIGINAL","SOURCE_FORMAT_ARRAY_ROWS","SOURCE_FORMAT_OBJECT_ROWS","SOURCE_FORMAT_KEYED_COLUMNS","SOURCE_FORMAT_UNKNOWN","SOURCE_FORMAT_TYPED_ARRAY","SERIES_LAYOUT_BY_COLUMN","SERIES_LAYOUT_BY_ROW","_clazz","_sourceType","Source","fields","fromDataset","sourceFormat","seriesLayoutBy","dimensionsDefine","encodeDefine","startIndex","dimensionsDetectCount","seriesDataToSource","_model","BE_ORDINAL","Must","Might","Not","inner","detectSourceFormat","datasetModel","getSource","seriesModel","resetSourceDefaulter","datasetMap","prepareSource","seriesOption","sourceHeader","dimensions","getDatasetModel","datasetOption","completeResult","completeBySourceData","normalizeDimensionsDefine","arrayRowsTravelFirst","objectRowsCollectDimensions","colArr","nameMap","displayName","maxLoop","firstIndex","makeSeriesEncodeForAxisCoordSys","coordDimensions","encodeItemName","encodeSeriesName","uid","baseCategoryDimIndex","categoryWayValueDimStart","coordDimInfo","coordDimIdx","getDataDimCountOnCoordDim","datasetRecord","categoryWayDim","valueWayDim","coordDimName","start","pushDim","dimIdxArr","idxFrom","idxCount","dimsDef","itemName","seriesName","makeSeriesEncodeForNameBased","dimCount","potentialNameDimIndex","dim","idxResult","idxRes0","idxRes1","guessRecords","guessResult","doGuessOrdinal","isPureNumber","n","fulfilled","nameDimIndex","thisData","getComponent","datasetIndex","guessOrdinal","dimIndex","dimName","dimType","dimDefItem","sample","detectValue","row","beStr","OTHER_DIMENSIONS","summarizeDimensions","summary","notExtraCoordDimMap","defaultedLabel","defaultedTooltip","userOutput","dimensionNames","dimItem","getDimensionInfo","coordDim","coordDimIndex","getOrCreateEncodeArr","isExtraCoord","mayLabelDimType","defaultTooltip","otherDim","encodeArr","otherDims","dataDimsOnCoord","encodeFirstDimNotExtra","dimArr","encodeLabel","label","encodeTooltip","tooltip","getDimensionTypeByAxis","axisType","DataDimensionInfo","_sourceHelper","_dimensionHelper","completeDimensions","sysDims","dataDimNameMap","coordDimNameMap","getDimCount","userDimName","resultItem","encodeDef","encodeDefaulter","dataDims","validDataDims","resultDimIdx","applyDim","availDimIdx","sysDimItem","sysDimIndex","sysDimItemDimsDef","sysDimItemOtherDims","ordinalMeta","sysDimItemDimsDefItem","generateCoord","generateCoordCount","fromZero","extra","genName","optDimCount","echarts","extendSeriesModel","visualColorAccessPath","optionUpdated","gridSize","getInitialData","List","initData","defaultOption","maskImage","shape","sizeRange","rotationRange","rotationStep","drawOutOfBound","textStyle","normal","extendChartView","render","api","removeAll","getData","layoutInstance","ondraw","size","dataIdx","drawn","itemModel","getItemModel","textStyleModel","getModel","emphasisTextStyleModel","textEl","graphic","Text","setTextStyle","info","fillTextOffsetX","fillTextOffsetY","textBaseline","textFill","getItemVisual","mu","gx","gw","gy","gh","rotation","rot","setItemGraphicEl","setHoverStyle","forMerge","dispose","setImmediate","setupSetImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","oSetImmediate","setupSetZeroTimeout","postMessage","addEventListener","callbacks","undefined","setZeroTimeout","callback","setZeroTimeoutMessage","evt","stopImmediatePropagation","clearImmediate","clearZeroTimeout","setImmediateFallback","setTimeout","setupClearImmediate","msClearImmediate","webkitClearImmediate","mozClearImmediate","oClearImmediate","clearImmediateFallback","timer","clearTimeout","global","isSupported","canvas","getImageData","fillText","some","minFontSize","getMinFontSize","hanWidth","mWidth","shuffleArray","WordCloud","elements","getElementById","tagName","appendChild","settings","minSize","weightFactor","clearCanvas","backgroundColor","origin","drawMask","maskColor","maskGapWidth","wait","abortThreshold","abort","minRotation","maxRotation","shuffle","rotateRatio","ellipticity","classes","hover","click","factor","pt","shapeCardioid","theta","shapeSquare","thetaPrime","shapeTriangle","shapePentagon","shapeStar","g","maskRectWidth","grid","ngx","ngy","center","maxRadius","escapeTime","getTextColor","random_hsl_color","getRandomDarkColor","getRandomLightColor","getTextClasses","interactive","infoGrid","hovered","getInfoGridFromMouseTouchEvent","currentTarget","getBoundingClientRect","clientX","clientY","touches","eventX","eventY","wordcloudhover","dimension","wordcloudclick","preventDefault","pointsAtRadius","getPointsAtRadius","radius","T","points","rx","exceedTime","getTime","getRotateDeg","getTextInfo","word","weight","rotateDeg","calculateScaleFactor","fcanvas","fctx","willReadFrequently","fw","fh","boxWidth","boxHeight","fgw","ceil","fgh","cgh","cgw","fillStyle","imageData","occupied","bounds","singleGridLoop","fillTextWidth","fillTextHeight","canFitText","px","py","drawText","attributes","w","save","restore","span","transformRule","styleRules","textContent","cssProp","attribute","className","fillGridAt","fillRect","updateGrid","putWord","r","tryToPutWordAtPoint","gxy","res","sendEvent","cancelable","detail","createEvent","initCustomEvent","dispatchEvent","clearRect","bctx","bgPixel","webkitTapHighlightColor","stopInteraction","removeEventListener","loopingFunction","stoppingFunction","listener","anotherWordCloudStart","loop","canceled","module","exports","wordCloudLayoutHelper","updateCanvasMask","maskCanvas","newImageData","createImageData","toneSum","toneCnt","alpha","tone","threshold","putImageData","registerLayout","eachSeriesByType","gridRect","layoutUtil","getBoxLayoutParams","getHeight","drawImage","console","error","valueExtent","getDataExtent","DEGREE_TO_RAD","mapArray","getName","number","onWordCloudDrawn","registerPreprocessor","series","util","compats","seriesItem","compatTextStyle","format","config","defaultChartProps","xAxis","show","legend","optionHandler","datasetParams","themeConfig","dataset","nameArr","valueArr","params","wordcloud","basic","moduleType"],"mappings":";uBAIA,IAAIA,EAAiB,CACnBC,oBAAqB,EACrBC,kBAAmB,EACnBC,gBAAiB,EACjBC,iBAAkB,EAClBC,0BAA2B,EAC3BC,yBAA0B,EAE1BC,iBAAkB,EAClBC,kBAAmB,GAErB,IAAIC,EAAc,CAChBC,qBAAsB,EACtBC,sBAAuB,EACvBC,6BAA8B,EAC9BC,sBAAuB,EACvBC,uBAAwB,EACxBC,sBAAuB,EACvBC,uBAAwB,EACxBC,wBAAyB,EACzBC,wBAAyB,GAE3B,IAAIC,EAAcC,OAAOC,UAAUC,SACnC,IAAIC,EAAaC,MAAMH,UACvB,IAAII,EAAgBF,EAAWG,QAC/B,IAAIC,EAAeJ,EAAWK,OAC9B,IAAIC,EAAcN,EAAWO,MAC7B,IAAIC,EAAYR,EAAWS,IAC3B,IAAIC,EAAeV,EAAWW,OAE9B,IAAIC,EAAU,GAEd,SAASC,EAAUC,EAAMC,GAEvB,GAAID,IAAS,eAAgB,CAC3BE,EAAO,KAGTJ,EAAQE,GAAQC,EAoBlB,SAASE,EAAMC,GACb,GAAIA,GAAU,aAAeA,IAAW,SAAU,CAChD,OAAOA,EAGT,IAAIC,EAASD,EACb,IAAIE,EAAUxB,EAAYyB,KAAKH,GAE/B,GAAIE,IAAY,iBAAkB,CAChC,IAAKE,EAAYJ,GAAS,CACxBC,EAAS,GAET,IAAK,IAAII,EAAI,EAAGC,EAAMN,EAAOO,OAAQF,EAAIC,EAAKD,IAAK,CACjDJ,EAAOI,GAAKN,EAAMC,EAAOK,WAGxB,GAAIrC,EAAYkC,GAAU,CAC/B,IAAKE,EAAYJ,GAAS,CACxB,IAAIQ,EAAOR,EAAOS,YAElB,GAAIT,EAAOS,YAAYC,KAAM,CAC3BT,EAASO,EAAKE,KAAKV,OACd,CACLC,EAAS,IAAIO,EAAKR,EAAOO,QAEzB,IAAK,IAAIF,EAAI,EAAGC,EAAMN,EAAOO,OAAQF,EAAIC,EAAKD,IAAK,CACjDJ,EAAOI,GAAKN,EAAMC,EAAOK,YAI1B,IAAK9C,EAAe2C,KAAaE,EAAYJ,KAAYW,EAAMX,GAAS,CAC7EC,EAAS,GAET,IAAK,IAAIW,KAAOZ,EAAQ,CACtB,GAAIA,EAAOa,eAAeD,GAAM,CAC9BX,EAAOW,GAAOb,EAAMC,EAAOY,MAKjC,OAAOX,EAUT,SAASa,EAAMC,EAAQf,EAAQgB,GAG7B,IAAKC,EAASjB,KAAYiB,EAASF,GAAS,CAC1C,OAAOC,EAAYjB,EAAMC,GAAUe,EAGrC,IAAK,IAAIH,KAAOZ,EAAQ,CACtB,GAAIA,EAAOa,eAAeD,GAAM,CAC9B,IAAIM,EAAaH,EAAOH,GACxB,IAAIO,EAAanB,EAAOY,GAExB,GAAIK,EAASE,IAAeF,EAASC,KAAgBE,EAAQD,KAAgBC,EAAQF,KAAgBP,EAAMQ,KAAgBR,EAAMO,KAAgBG,EAAgBF,KAAgBE,EAAgBH,KAAgBd,EAAYe,KAAgBf,EAAYc,GAAa,CAEpQJ,EAAMI,EAAYC,EAAYH,QACzB,GAAIA,KAAeJ,KAAOG,GAAS,CAGxCA,EAAOH,GAAOb,EAAMC,EAAOY,MAKjC,OAAOG,EAST,SAASO,EAASC,EAAkBP,GAClC,IAAIf,EAASsB,EAAiB,GAE9B,IAAK,IAAIlB,EAAI,EAAGC,EAAMiB,EAAiBhB,OAAQF,EAAIC,EAAKD,IAAK,CAC3DJ,EAASa,EAAMb,EAAQsB,EAAiBlB,GAAIW,GAG9C,OAAOf,EAST,SAASuB,EAAOT,EAAQf,GACtB,IAAK,IAAIY,KAAOZ,EAAQ,CACtB,GAAIA,EAAOa,eAAeD,GAAM,CAC9BG,EAAOH,GAAOZ,EAAOY,IAIzB,OAAOG,EAUT,SAASU,EAASV,EAAQf,EAAQ0B,GAChC,IAAK,IAAId,KAAOZ,EAAQ,CACtB,GAAIA,EAAOa,eAAeD,KAASc,EAAU1B,EAAOY,IAAQ,KAAOG,EAAOH,IAAQ,MAAO,CACvFG,EAAOH,GAAOZ,EAAOY,IAIzB,OAAOG,EAGT,IAAIY,EAAe,WACjB,OAAOjC,EAAQiC,gBAGjBjC,EAAQiC,aAAe,WACrB,OAAOC,SAASC,cAAc,WAIhC,IAAI/B,EAEJ,SAASgC,IACP,IAAKhC,EAAM,CAGTA,EAAO6B,IAAeG,WAAW,MAGnC,OAAOhC,EAQT,SAASiC,EAAQC,EAAOC,GACtB,GAAID,EAAO,CACT,GAAIA,EAAMD,QAAS,CACjB,OAAOC,EAAMD,QAAQE,GAGvB,IAAK,IAAI5B,EAAI,EAAGC,EAAM0B,EAAMzB,OAAQF,EAAIC,EAAKD,IAAK,CAChD,GAAI2B,EAAM3B,KAAO4B,EAAO,CACtB,OAAO5B,IAKb,OAAQ,EAWV,SAAS6B,EAASC,EAAOC,GACvB,IAAIC,EAAiBF,EAAMvD,UAE3B,SAAS0D,KAETA,EAAE1D,UAAYwD,EAAUxD,UACxBuD,EAAMvD,UAAY,IAAI0D,EAEtB,IAAK,IAAIC,KAAQF,EAAgB,CAC/B,GAAIA,EAAexB,eAAe0B,GAAO,CACvCJ,EAAMvD,UAAU2D,GAAQF,EAAeE,IAI3CJ,EAAMvD,UAAU6B,YAAc0B,EAC9BA,EAAMK,WAAaJ,EAUrB,SAASK,EAAM1B,EAAQf,EAAQ0B,GAC7BX,EAAS,cAAeA,EAASA,EAAOnC,UAAYmC,EACpDf,EAAS,cAAeA,EAASA,EAAOpB,UAAYoB,EACpDyB,EAASV,EAAQf,EAAQ0B,GAQ3B,SAASgB,EAAYC,GACnB,IAAKA,EAAM,CACT,OAGF,UAAWA,IAAS,SAAU,CAC5B,OAAO,MAGT,cAAcA,EAAKpC,SAAW,SAWhC,SAASqC,EAAKC,EAAKC,EAAIC,GACrB,KAAMF,GAAOC,GAAK,CAChB,OAGF,GAAID,EAAI5D,SAAW4D,EAAI5D,UAAYD,EAAe,CAChD6D,EAAI5D,QAAQ6D,EAAIC,QACX,GAAIF,EAAItC,UAAYsC,EAAItC,OAAQ,CACrC,IAAK,IAAIF,EAAI,EAAGC,EAAMuC,EAAItC,OAAQF,EAAIC,EAAKD,IAAK,CAC9CyC,EAAG3C,KAAK4C,EAASF,EAAIxC,GAAIA,EAAGwC,QAEzB,CACL,IAAK,IAAIjC,KAAOiC,EAAK,CACnB,GAAIA,EAAIhC,eAAeD,GAAM,CAC3BkC,EAAG3C,KAAK4C,EAASF,EAAIjC,GAAMA,EAAKiC,MAexC,SAAStD,EAAIsD,EAAKC,EAAIC,GACpB,KAAMF,GAAOC,GAAK,CAChB,OAGF,GAAID,EAAItD,KAAOsD,EAAItD,MAAQD,EAAW,CACpC,OAAOuD,EAAItD,IAAIuD,EAAIC,OACd,CACL,IAAI9C,EAAS,GAEb,IAAK,IAAII,EAAI,EAAGC,EAAMuC,EAAItC,OAAQF,EAAIC,EAAKD,IAAK,CAC9CJ,EAAO+C,KAAKF,EAAG3C,KAAK4C,EAASF,EAAIxC,GAAIA,EAAGwC,IAG1C,OAAO5C,GAaX,SAASR,EAAOoD,EAAKC,EAAIG,EAAMF,GAC7B,KAAMF,GAAOC,GAAK,CAChB,OAGF,GAAID,EAAIpD,QAAUoD,EAAIpD,SAAWD,EAAc,CAC7C,OAAOqD,EAAIpD,OAAOqD,EAAIG,EAAMF,OACvB,CACL,IAAK,IAAI1C,EAAI,EAAGC,EAAMuC,EAAItC,OAAQF,EAAIC,EAAKD,IAAK,CAC9C4C,EAAOH,EAAG3C,KAAK4C,EAASE,EAAMJ,EAAIxC,GAAIA,EAAGwC,GAG3C,OAAOI,GAaX,SAAS9D,EAAO0D,EAAKC,EAAIC,GACvB,KAAMF,GAAOC,GAAK,CAChB,OAGF,GAAID,EAAI1D,QAAU0D,EAAI1D,SAAWD,EAAc,CAC7C,OAAO2D,EAAI1D,OAAO2D,EAAIC,OACjB,CACL,IAAI9C,EAAS,GAEb,IAAK,IAAII,EAAI,EAAGC,EAAMuC,EAAItC,OAAQF,EAAIC,EAAKD,IAAK,CAC9C,GAAIyC,EAAG3C,KAAK4C,EAASF,EAAIxC,GAAIA,EAAGwC,GAAM,CACpC5C,EAAO+C,KAAKH,EAAIxC,KAIpB,OAAOJ,GAaX,SAASiD,EAAKL,EAAKC,EAAIC,GACrB,KAAMF,GAAOC,GAAK,CAChB,OAGF,IAAK,IAAIzC,EAAI,EAAGC,EAAMuC,EAAItC,OAAQF,EAAIC,EAAKD,IAAK,CAC9C,GAAIyC,EAAG3C,KAAK4C,EAASF,EAAIxC,GAAIA,EAAGwC,GAAM,CACpC,OAAOA,EAAIxC,KAYjB,SAAS8C,EAAKC,EAAML,GAClB,IAAIM,EAAOjE,EAAYe,KAAKmD,UAAW,GACvC,OAAO,WACL,OAAOF,EAAKG,MAAMR,EAASM,EAAKG,OAAOpE,EAAYe,KAAKmD,cAU5D,SAASG,EAAML,GACb,IAAIC,EAAOjE,EAAYe,KAAKmD,UAAW,GACvC,OAAO,WACL,OAAOF,EAAKG,MAAMG,KAAML,EAAKG,OAAOpE,EAAYe,KAAKmD,cAUzD,SAASlC,EAAQa,GACf,OAAOvD,EAAYyB,KAAK8B,KAAW,iBASrC,SAAS0B,EAAW1B,GAClB,cAAcA,IAAU,WAS1B,SAAS2B,EAAS3B,GAChB,OAAOvD,EAAYyB,KAAK8B,KAAW,kBASrC,SAAShB,EAASgB,GAGhB,IAAI4B,SAAc5B,EAClB,OAAO4B,IAAS,cAAgB5B,GAAS4B,IAAS,SASpD,SAASxC,EAAgBY,GACvB,QAAS1E,EAAemB,EAAYyB,KAAK8B,IAS3C,SAAS6B,EAAa7B,GACpB,QAASjE,EAAYU,EAAYyB,KAAK8B,IASxC,SAAStB,EAAMsB,GACb,cAAcA,IAAU,iBAAmBA,EAAM8B,WAAa,iBAAmB9B,EAAM+B,gBAAkB,SAS3G,SAASC,EAAMhC,GAEb,OAAOA,IAAUA,EAUnB,SAASiC,EAASC,GAChB,IAAK,IAAI9D,EAAI,EAAGC,EAAMgD,UAAU/C,OAAQF,EAAIC,EAAKD,IAAK,CACpD,GAAIiD,UAAUjD,IAAM,KAAM,CACxB,OAAOiD,UAAUjD,KAKvB,SAAS+D,EAAUC,EAAQC,GACzB,OAAOD,GAAU,KAAOA,EAASC,EAGnC,SAASC,EAAUF,EAAQC,EAAQE,GACjC,OAAOH,GAAU,KAAOA,EAASC,GAAU,KAAOA,EAASE,EAW7D,SAASnF,IACP,OAAOoF,SAAStE,KAAKoD,MAAMnE,EAAakE,WAa1C,SAASoB,EAAkBC,GACzB,UAAWA,IAAQ,SAAU,CAC3B,MAAO,CAACA,EAAKA,EAAKA,EAAKA,GAGzB,IAAIrE,EAAMqE,EAAIpE,OAEd,GAAID,IAAQ,EAAG,CAEb,MAAO,CAACqE,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,SAC/B,GAAIrE,IAAQ,EAAG,CAEpB,MAAO,CAACqE,EAAI,GAAIA,EAAI,GAAIA,EAAI,GAAIA,EAAI,IAGtC,OAAOA,EAST,SAASC,EAAOC,EAAWC,GACzB,IAAKD,EAAW,CACd,MAAM,IAAIE,MAAMD,IAUpB,SAASE,EAAKC,GACZ,GAAIA,GAAO,KAAM,CACf,OAAO,UACF,UAAWA,EAAID,OAAS,WAAY,CACzC,OAAOC,EAAID,WACN,CACL,OAAOC,EAAIC,QAAQ,qCAAsC,KAI7D,IAAIC,EAAe,mBAKnB,SAASC,EAAevC,GACtBA,EAAIsC,GAAgB,KAGtB,SAAS/E,EAAYyC,GACnB,OAAOA,EAAIsC,GAQb,SAASE,EAAQxC,GACf,IAAIyC,EAAQlE,EAAQyB,GAGpBa,KAAKf,KAAO,GACZ,IAAI4C,EAAU7B,KACdb,aAAewC,EAAUxC,EAAID,KAAK4C,GAAS3C,GAAOD,EAAKC,EAAK2C,GAE5D,SAASA,EAAMvD,EAAOrB,GACpB0E,EAAQC,EAAQE,IAAIxD,EAAOrB,GAAO2E,EAAQE,IAAI7E,EAAKqB,IAIvDoD,EAAQzG,UAAY,CAClB6B,YAAa4E,EAIbK,IAAK,SAAU9E,GACb,OAAO8C,KAAKf,KAAK9B,eAAeD,GAAO8C,KAAKf,KAAK/B,GAAO,MAE1D6E,IAAK,SAAU7E,EAAKqB,GAGlB,OAAOyB,KAAKf,KAAK/B,GAAOqB,GAI1BW,KAAM,SAAUE,EAAIC,GAClBA,SAAiB,IAAMD,EAAKK,EAAKL,EAAIC,IAGrC,IAAK,IAAInC,KAAO8C,KAAKf,KAAM,CACzBe,KAAKf,KAAK9B,eAAeD,IAAQkC,EAAGY,KAAKf,KAAK/B,GAAMA,KAMxD+E,UAAW,SAAU/E,UACZ8C,KAAKf,KAAK/B,KAIrB,SAASgF,EAAc/C,GACrB,OAAO,IAAIwC,EAAQxC,GAGrB,SAASgD,EAAYC,EAAGC,GACtB,IAAIC,EAAW,IAAIF,EAAErF,YAAYqF,EAAEvF,OAASwF,EAAExF,QAE9C,IAAK,IAAIF,EAAI,EAAGA,EAAIyF,EAAEvF,OAAQF,IAAK,CACjC2F,EAAS3F,GAAKyF,EAAEzF,GAGlB,IAAI4F,EAASH,EAAEvF,OAEf,IAAKF,EAAI,EAAGA,EAAI0F,EAAExF,OAAQF,IAAK,CAC7B2F,EAAS3F,EAAI4F,GAAUF,EAAE1F,GAG3B,OAAO2F,EAGT,SAASE,KAET,MAAoBvG,EACpB,OAAgBI,EAChB,OAAgBe,EAChB,OAAmBQ,EACnB,OAAiBE,EACjB,OAAmBC,EACnB,OAAuBE,EACvB,OAAqBG,EACrB,OAAkBC,EAClB,OAAmBG,EACnB,OAAgBO,EAChB,OAAsBC,EACtB,OAAeE,EACf,OAAcrD,EACd,OAAiBE,EACjB,OAAiBN,EACjB,OAAe+D,EACf,OAAeC,EACf,OAAgBM,EAChB,OAAkBrC,EAClB,OAAqBuC,EACrB,OAAmBC,EACnB,OAAmB3C,EACnB,OAA0BI,EAC1B,OAAuByC,EACvB,OAAgBnD,EAChB,OAAgBsD,EAChB,OAAmBC,EACnB,OAAoBE,EACpB,OAAoBG,EACpB,OAAgBlF,EAChB,OAA4BqF,EAC5B,OAAiBE,EACjB,OAAeI,EACf,OAAyBI,EACzB,OAAsBhF,EACtB,OAAwBwF,EACxB,OAAsBC,EACtB,OAAeK,ydCluBf,IAAIC,UAAmBC,eAAiB,YAAcrH,MAAQqH,aAQ9D,SAASC,GAAOC,EAAGC,GACjB,IAAIC,EAAM,IAAIL,GAAU,GAExB,GAAIG,GAAK,KAAM,CACbA,EAAI,EAGN,GAAIC,GAAK,KAAM,CACbA,EAAI,EAGNC,EAAI,GAAKF,EACTE,EAAI,GAAKD,EACT,OAAOC,EAUT,SAASC,GAAKD,EAAKE,GACjBF,EAAI,GAAKE,EAAE,GACXF,EAAI,GAAKE,EAAE,GACX,OAAOF,EAST,SAASzG,GAAM2G,GACb,IAAIF,EAAM,IAAIL,GAAU,GACxBK,EAAI,GAAKE,EAAE,GACXF,EAAI,GAAKE,EAAE,GACX,OAAOF,EAWT,SAASf,GAAIe,EAAKV,EAAGC,GACnBS,EAAI,GAAKV,EACTU,EAAI,GAAKT,EACT,OAAOS,EAUT,SAASG,GAAIH,EAAKI,EAAIC,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpB,OAAOL,EAWT,SAASM,GAAYN,EAAKI,EAAIC,EAAIf,GAChCU,EAAI,GAAKI,EAAG,GAAKC,EAAG,GAAKf,EACzBU,EAAI,GAAKI,EAAG,GAAKC,EAAG,GAAKf,EACzB,OAAOU,EAUT,SAASO,GAAIP,EAAKI,EAAIC,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpB,OAAOL,EAST,SAASlG,GAAIoG,GACX,OAAOM,KAAKC,KAAKC,GAAUR,IAG7B,IAAInG,GAASD,GAQb,SAAS4G,GAAUR,GACjB,OAAOA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAGhC,IAAIS,GAAeD,GAQnB,SAASE,GAAIZ,EAAKI,EAAIC,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpB,OAAOL,EAUT,SAASa,GAAIb,EAAKI,EAAIC,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpBL,EAAI,GAAKI,EAAG,GAAKC,EAAG,GACpB,OAAOL,EAUT,SAASc,GAAIV,EAAIC,GACf,OAAOD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAUpC,SAASU,GAAMf,EAAKE,EAAGc,GACrBhB,EAAI,GAAKE,EAAE,GAAKc,EAChBhB,EAAI,GAAKE,EAAE,GAAKc,EAChB,OAAOhB,EAST,SAASiB,GAAUjB,EAAKE,GACtB,IAAIgB,EAAIpH,GAAIoG,GAEZ,GAAIgB,IAAM,EAAG,CACXlB,EAAI,GAAK,EACTA,EAAI,GAAK,MACJ,CACLA,EAAI,GAAKE,EAAE,GAAKgB,EAChBlB,EAAI,GAAKE,EAAE,GAAKgB,EAGlB,OAAOlB,EAUT,SAASmB,GAASf,EAAIC,GACpB,OAAOG,KAAKC,MAAML,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAGrF,IAAIe,GAAOD,GAQX,SAASE,GAAejB,EAAIC,GAC1B,OAAQD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,KAAOD,EAAG,GAAKC,EAAG,IAG3E,IAAIiB,GAAaD,GAOjB,SAASE,GAAOvB,EAAKE,GACnBF,EAAI,IAAME,EAAE,GACZF,EAAI,IAAME,EAAE,GACZ,OAAOF,EAWT,SAASwB,GAAKxB,EAAKI,EAAIC,EAAIoB,GACzBzB,EAAI,GAAKI,EAAG,GAAKqB,GAAKpB,EAAG,GAAKD,EAAG,IACjCJ,EAAI,GAAKI,EAAG,GAAKqB,GAAKpB,EAAG,GAAKD,EAAG,IACjC,OAAOJ,EAUT,SAAS0B,GAAe1B,EAAKE,EAAGyB,GAC9B,IAAI7B,EAAII,EAAE,GACV,IAAIH,EAAIG,EAAE,GACVF,EAAI,GAAK2B,EAAE,GAAK7B,EAAI6B,EAAE,GAAK5B,EAAI4B,EAAE,GACjC3B,EAAI,GAAK2B,EAAE,GAAK7B,EAAI6B,EAAE,GAAK5B,EAAI4B,EAAE,GACjC,OAAO3B,EAUT,SAAS4B,GAAI5B,EAAKI,EAAIC,GACpBL,EAAI,GAAKQ,KAAKoB,IAAIxB,EAAG,GAAIC,EAAG,IAC5BL,EAAI,GAAKQ,KAAKoB,IAAIxB,EAAG,GAAIC,EAAG,IAC5B,OAAOL,EAUT,SAAS6B,GAAI7B,EAAKI,EAAIC,GACpBL,EAAI,GAAKQ,KAAKqB,IAAIzB,EAAG,GAAIC,EAAG,IAC5BL,EAAI,GAAKQ,KAAKqB,IAAIzB,EAAG,GAAIC,EAAG,IAC5B,OAAOL,EAGT,OAAiBH,GACjB,OAAeI,GACf,OAAgB1G,GAChB,OAAc0F,GACd,OAAckB,GACd,OAAsBG,GACtB,OAAcC,GACd,OAAczG,GACd,OAAiBC,GACjB,OAAoB2G,GACpB,OAAuBC,GACvB,OAAcC,GACd,OAAcC,GACd,OAAcC,GACd,OAAgBC,GAChB,OAAoBE,GACpB,OAAmBE,GACnB,OAAeC,GACf,OAAyBC,GACzB,OAAqBC,GACrB,OAAiBC,GACjB,OAAeC,GACf,OAAyBE,GACzB,OAAcE,GACd,OAAcC,0QCnTd,IAAIlC,UAAmBC,eAAiB,YAAcrH,MAAQqH,aAM9D,SAASC,KACP,IAAIG,EAAM,IAAIL,GAAU,GACxBmC,GAAS9B,GACT,OAAOA,EAQT,SAAS8B,GAAS9B,GAChBA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,EACT,OAAOA,EAST,SAASC,GAAKD,EAAK2B,GACjB3B,EAAI,GAAK2B,EAAE,GACX3B,EAAI,GAAK2B,EAAE,GACX3B,EAAI,GAAK2B,EAAE,GACX3B,EAAI,GAAK2B,EAAE,GACX3B,EAAI,GAAK2B,EAAE,GACX3B,EAAI,GAAK2B,EAAE,GACX,OAAO3B,EAUT,SAASY,GAAIZ,EAAK+B,EAAIC,GAIpB,IAAIC,EAAOF,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,IAAIE,EAAOH,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,IAAIG,EAAOJ,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,IAAII,EAAOL,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GACtC,IAAIK,EAAON,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAC9C,IAAIO,EAAOP,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAC9C/B,EAAI,GAAKiC,EACTjC,EAAI,GAAKkC,EACTlC,EAAI,GAAKmC,EACTnC,EAAI,GAAKoC,EACTpC,EAAI,GAAKqC,EACTrC,EAAI,GAAKsC,EACT,OAAOtC,EAUT,SAASuC,GAAUvC,EAAKV,EAAGY,GACzBF,EAAI,GAAKV,EAAE,GACXU,EAAI,GAAKV,EAAE,GACXU,EAAI,GAAKV,EAAE,GACXU,EAAI,GAAKV,EAAE,GACXU,EAAI,GAAKV,EAAE,GAAKY,EAAE,GAClBF,EAAI,GAAKV,EAAE,GAAKY,EAAE,GAClB,OAAOF,EAUT,SAASwC,GAAOxC,EAAKV,EAAGmD,GACtB,IAAIC,EAAKpD,EAAE,GACX,IAAIqD,EAAKrD,EAAE,GACX,IAAIsD,EAAMtD,EAAE,GACZ,IAAIuD,EAAKvD,EAAE,GACX,IAAIwD,EAAKxD,EAAE,GACX,IAAIyD,EAAMzD,EAAE,GACZ,IAAI0D,EAAKxC,KAAKyC,IAAIR,GAClB,IAAIS,EAAK1C,KAAK2C,IAAIV,GAClBzC,EAAI,GAAK0C,EAAKQ,EAAKL,EAAKG,EACxBhD,EAAI,IAAM0C,EAAKM,EAAKH,EAAKK,EACzBlD,EAAI,GAAK2C,EAAKO,EAAKJ,EAAKE,EACxBhD,EAAI,IAAM2C,EAAKK,EAAKE,EAAKJ,EACzB9C,EAAI,GAAKkD,EAAKN,EAAMI,EAAKD,EACzB/C,EAAI,GAAKkD,EAAKH,EAAMC,EAAKJ,EACzB,OAAO5C,EAUT,SAASe,GAAMf,EAAKV,EAAGY,GACrB,IAAIkD,EAAKlD,EAAE,GACX,IAAImD,EAAKnD,EAAE,GACXF,EAAI,GAAKV,EAAE,GAAK8D,EAChBpD,EAAI,GAAKV,EAAE,GAAK+D,EAChBrD,EAAI,GAAKV,EAAE,GAAK8D,EAChBpD,EAAI,GAAKV,EAAE,GAAK+D,EAChBrD,EAAI,GAAKV,EAAE,GAAK8D,EAChBpD,EAAI,GAAKV,EAAE,GAAK+D,EAChB,OAAOrD,EAST,SAASsD,GAAOtD,EAAKV,GACnB,IAAIoD,EAAKpD,EAAE,GACX,IAAIqD,EAAKrD,EAAE,GACX,IAAIsD,EAAMtD,EAAE,GACZ,IAAIuD,EAAKvD,EAAE,GACX,IAAIwD,EAAKxD,EAAE,GACX,IAAIyD,EAAMzD,EAAE,GACZ,IAAIiE,EAAMb,EAAKI,EAAKD,EAAKF,EAEzB,IAAKY,EAAK,CACR,OAAO,KAGTA,EAAM,EAAMA,EACZvD,EAAI,GAAK8C,EAAKS,EACdvD,EAAI,IAAM6C,EAAKU,EACfvD,EAAI,IAAM2C,EAAKY,EACfvD,EAAI,GAAK0C,EAAKa,EACdvD,EAAI,IAAM2C,EAAKI,EAAMD,EAAKF,GAAOW,EACjCvD,EAAI,IAAM6C,EAAKD,EAAMF,EAAKK,GAAOQ,EACjC,OAAOvD,EAQT,SAASzG,GAAM+F,GACb,IAAIC,EAAIM,KACRI,GAAKV,EAAGD,GACR,OAAOC,EAGT,OAAiBM,GACjB,OAAmBiC,GACnB,OAAe7B,GACf,OAAcW,GACd,OAAoB2B,GACpB,OAAiBC,GACjB,OAAgBzB,GAChB,OAAiBuC,GACjB,OAAgB/J,oGCjLhB,IAAIiK,GAAmBC,GAAK/B,eAC5B,IAAIgC,GAAUlD,KAAKoB,IACnB,IAAI+B,GAAUnD,KAAKqB,IAKnB,SAAS+B,GAAa9D,EAAGC,EAAG8D,EAAOC,GACjC,GAAID,EAAQ,EAAG,CACb/D,EAAIA,EAAI+D,EACRA,GAASA,EAGX,GAAIC,EAAS,EAAG,CACd/D,EAAIA,EAAI+D,EACRA,GAAUA,EAOZ5G,KAAK4C,EAAIA,EAKT5C,KAAK6C,EAAIA,EAKT7C,KAAK2G,MAAQA,EAKb3G,KAAK4G,OAASA,EAGhBF,GAAaxL,UAAY,CACvB6B,YAAa2J,GAKbG,MAAO,SAAUC,GACf,IAAIlE,EAAI4D,GAAQM,EAAMlE,EAAG5C,KAAK4C,GAC9B,IAAIC,EAAI2D,GAAQM,EAAMjE,EAAG7C,KAAK6C,GAC9B7C,KAAK2G,MAAQF,GAAQK,EAAMlE,EAAIkE,EAAMH,MAAO3G,KAAK4C,EAAI5C,KAAK2G,OAAS/D,EACnE5C,KAAK4G,OAASH,GAAQK,EAAMjE,EAAIiE,EAAMF,OAAQ5G,KAAK6C,EAAI7C,KAAK4G,QAAU/D,EACtE7C,KAAK4C,EAAIA,EACT5C,KAAK6C,EAAIA,GAOX2B,eAAgB,WACd,IAAIuC,EAAK,GACT,IAAIC,EAAK,GACT,IAAIC,EAAK,GACT,IAAIC,EAAK,GACT,OAAO,SAAUzC,GAIf,IAAKA,EAAG,CACN,OAGFsC,EAAG,GAAKE,EAAG,GAAKjH,KAAK4C,EACrBmE,EAAG,GAAKG,EAAG,GAAKlH,KAAK6C,EACrBmE,EAAG,GAAKE,EAAG,GAAKlH,KAAK4C,EAAI5C,KAAK2G,MAC9BK,EAAG,GAAKC,EAAG,GAAKjH,KAAK6C,EAAI7C,KAAK4G,OAC9BN,GAAiBS,EAAIA,EAAItC,GACzB6B,GAAiBU,EAAIA,EAAIvC,GACzB6B,GAAiBW,EAAIA,EAAIxC,GACzB6B,GAAiBY,EAAIA,EAAIzC,GACzBzE,KAAK4C,EAAI4D,GAAQO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,IACzClH,KAAK6C,EAAI2D,GAAQO,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,IACzC,IAAIC,EAAOV,GAAQM,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,IAC3C,IAAIE,EAAOX,GAAQM,EAAG,GAAIC,EAAG,GAAIC,EAAG,GAAIC,EAAG,IAC3ClH,KAAK2G,MAAQQ,EAAOnH,KAAK4C,EACzB5C,KAAK4G,OAASQ,EAAOpH,KAAK6C,GA1Bd,GAmChBwE,mBAAoB,SAAUhF,GAC5B,IAAID,EAAIpC,KACR,IAAIsH,EAAKjF,EAAEsE,MAAQvE,EAAEuE,MACrB,IAAIY,EAAKlF,EAAEuE,OAASxE,EAAEwE,OACtB,IAAInC,EAAI+C,GAAO7E,SAEf6E,GAAOnC,UAAUZ,EAAGA,EAAG,EAAErC,EAAEQ,GAAIR,EAAES,IACjC2E,GAAO3D,MAAMY,EAAGA,EAAG,CAAC6C,EAAIC,IACxBC,GAAOnC,UAAUZ,EAAGA,EAAG,CAACpC,EAAEO,EAAGP,EAAEQ,IAC/B,OAAO4B,GAOTgD,UAAW,SAAUpF,GACnB,IAAKA,EAAG,CACN,OAAO,MAGT,KAAMA,aAAaqE,IAAe,CAEhCrE,EAAIqE,GAAa/D,OAAON,GAG1B,IAAID,EAAIpC,KACR,IAAI0H,EAAMtF,EAAEQ,EACZ,IAAI+E,EAAMvF,EAAEQ,EAAIR,EAAEuE,MAClB,IAAIiB,EAAMxF,EAAES,EACZ,IAAIgF,EAAMzF,EAAES,EAAIT,EAAEwE,OAClB,IAAIkB,EAAMzF,EAAEO,EACZ,IAAImF,EAAM1F,EAAEO,EAAIP,EAAEsE,MAClB,IAAIqB,EAAM3F,EAAEQ,EACZ,IAAIoF,EAAM5F,EAAEQ,EAAIR,EAAEuE,OAClB,QAASe,EAAMG,GAAOC,EAAML,GAAOG,EAAMG,GAAOC,EAAML,IAExDM,QAAS,SAAUtF,EAAGC,GACpB,IAAIsF,EAAOnI,KACX,OAAO4C,GAAKuF,EAAKvF,GAAKA,GAAKuF,EAAKvF,EAAIuF,EAAKxB,OAAS9D,GAAKsF,EAAKtF,GAAKA,GAAKsF,EAAKtF,EAAIsF,EAAKvB,QAMtFvK,MAAO,WACL,OAAO,IAAIqK,GAAa1G,KAAK4C,EAAG5C,KAAK6C,EAAG7C,KAAK2G,MAAO3G,KAAK4G,SAM3D7D,KAAM,SAAU+D,GACd9G,KAAK4C,EAAIkE,EAAMlE,EACf5C,KAAK6C,EAAIiE,EAAMjE,EACf7C,KAAK2G,MAAQG,EAAMH,MACnB3G,KAAK4G,OAASE,EAAMF,QAEtBwB,MAAO,WACL,MAAO,CACLxF,EAAG5C,KAAK4C,EACRC,EAAG7C,KAAK6C,EACR8D,MAAO3G,KAAK2G,MACZC,OAAQ5G,KAAK4G,UAanBF,GAAa/D,OAAS,SAAUwF,GAC9B,OAAO,IAAIzB,GAAayB,EAAKvF,EAAGuF,EAAKtF,EAAGsF,EAAKxB,MAAOwB,EAAKvB,SAG3D,IAAIyB,GAAW3B,GACf,OAAiB2B,GCrIjB,IAAIC,GAAiB,KAErB,SAASC,GAAMhH,GACb,OAAOA,EAAIC,QAAQ,aAAc,IAanC,SAASgH,GAAUvH,EAAKwH,EAAQC,EAAOC,GACrC,IAAIC,EAAYH,EAAO,GAAKA,EAAO,GACnC,IAAII,EAAWH,EAAM,GAAKA,EAAM,GAEhC,GAAIE,IAAc,EAAG,CACnB,OAAOC,IAAa,EAAIH,EAAM,IAAMA,EAAM,GAAKA,EAAM,IAAM,EAQ7D,GAAIC,EAAO,CACT,GAAIC,EAAY,EAAG,CACjB,GAAI3H,GAAOwH,EAAO,GAAI,CACpB,OAAOC,EAAM,QACR,GAAIzH,GAAOwH,EAAO,GAAI,CAC3B,OAAOC,EAAM,QAEV,CACL,GAAIzH,GAAOwH,EAAO,GAAI,CACpB,OAAOC,EAAM,QACR,GAAIzH,GAAOwH,EAAO,GAAI,CAC3B,OAAOC,EAAM,SAGZ,CACL,GAAIzH,IAAQwH,EAAO,GAAI,CACrB,OAAOC,EAAM,GAGf,GAAIzH,IAAQwH,EAAO,GAAI,CACrB,OAAOC,EAAM,IAIjB,OAAQzH,EAAMwH,EAAO,IAAMG,EAAYC,EAAWH,EAAM,GAY1D,SAASI,GAAaC,EAASC,GAC7B,OAAQD,GACN,IAAK,SACL,IAAK,SACHA,EAAU,MACV,MAEF,IAAK,OACL,IAAK,MACHA,EAAU,KACV,MAEF,IAAK,QACL,IAAK,SACHA,EAAU,OACV,MAGJ,UAAWA,IAAY,SAAU,CAC/B,GAAIR,GAAMQ,GAASE,MAAM,MAAO,CAC9B,OAAOC,WAAWH,GAAW,IAAMC,EAGrC,OAAOE,WAAWH,GAGpB,OAAOA,GAAW,KAAOI,KAAOJ,EAalC,SAASK,GAAMxG,EAAGyG,EAAWC,GAC3B,GAAID,GAAa,KAAM,CACrBA,EAAY,GAIdA,EAAY/F,KAAKoB,IAAIpB,KAAKqB,IAAI,EAAG0E,GAAY,IAC7CzG,IAAMA,GAAG2G,QAAQF,GACjB,OAAOC,EAAY1G,GAAKA,EAW1B,SAAS4G,GAAIC,GACXA,EAAIC,MAAK,SAAUtH,EAAGC,GACpB,OAAOD,EAAIC,KAEb,OAAOoH,EAQT,SAASE,GAAa1I,GACpBA,GAAOA,EAEP,GAAI2I,MAAM3I,GAAM,CACd,OAAO,EAOT,IAAI4I,EAAI,EACR,IAAIC,EAAQ,EAEZ,MAAOxG,KAAK8F,MAAMnI,EAAM4I,GAAKA,IAAM5I,EAAK,CACtC4I,GAAK,GACLC,IAGF,OAAOA,EAQT,SAASC,GAAiB9I,GACxB,IAAIM,EAAMN,EAAI9F,WAEd,IAAI6O,EAASzI,EAAIlD,QAAQ,KAEzB,GAAI2L,EAAS,EAAG,CACd,IAAIX,GAAa9H,EAAI5F,MAAMqO,EAAS,GACpC,OAAOX,EAAY,GAAKA,EAAY,MAC/B,CACL,IAAIY,EAAW1I,EAAIlD,QAAQ,KAC3B,OAAO4L,EAAW,EAAI,EAAI1I,EAAI1E,OAAS,EAAIoN,GAY/C,SAASC,GAAkBC,EAAYC,GACrC,IAAIC,EAAM/G,KAAK+G,IACf,IAAIC,EAAOhH,KAAKgH,KAChB,IAAIC,EAAejH,KAAKkH,MAAMH,EAAIF,EAAW,GAAKA,EAAW,IAAMG,GACnE,IAAIG,EAAenH,KAAK8F,MAAMiB,EAAI/G,KAAKoH,IAAIN,EAAY,GAAKA,EAAY,KAAOE,GAE/E,IAAIjB,EAAY/F,KAAKoB,IAAIpB,KAAKqB,KAAK4F,EAAeE,EAAc,GAAI,IACpE,OAAQE,SAAStB,GAAa,GAAKA,EAerC,SAASuB,GAAwBC,EAAWC,EAAKzB,GAC/C,IAAKwB,EAAUC,GAAM,CACnB,OAAO,EAGT,IAAIC,EAAMC,GAAOjP,OAAO8O,GAAW,SAAUI,EAAKhK,GAChD,OAAOgK,GAAOrB,MAAM3I,GAAO,EAAIA,KAC9B,GAEH,GAAI8J,IAAQ,EAAG,CACb,OAAO,EAGT,IAAIG,EAAS5H,KAAK6H,IAAI,GAAI9B,GAC1B,IAAI+B,EAAgBJ,GAAOnP,IAAIgP,GAAW,SAAU5J,GAClD,OAAQ2I,MAAM3I,GAAO,EAAIA,GAAO8J,EAAMG,EAAS,OAEjD,IAAIG,EAAcH,EAAS,IAC3B,IAAII,EAAQN,GAAOnP,IAAIuP,GAAe,SAAUG,GAE9C,OAAOjI,KAAKkH,MAAMe,MAEpB,IAAIC,EAAaR,GAAOjP,OAAOuP,GAAO,SAAUL,EAAKhK,GACnD,OAAOgK,EAAMhK,IACZ,GACH,IAAIwK,EAAYT,GAAOnP,IAAIuP,GAAe,SAAUG,EAAOT,GACzD,OAAOS,EAAQD,EAAMR,MAGvB,MAAOU,EAAaH,EAAa,CAE/B,IAAI1G,EAAM+G,OAAOC,kBACjB,IAAIC,EAAQ,KAEZ,IAAK,IAAIjP,EAAI,EAAGC,EAAM6O,EAAU5O,OAAQF,EAAIC,IAAOD,EAAG,CACpD,GAAI8O,EAAU9O,GAAKgI,EAAK,CACtBA,EAAM8G,EAAU9O,GAChBiP,EAAQjP,KAKV2O,EAAMM,GACRH,EAAUG,GAAS,IACjBJ,EAGJ,OAAOF,EAAMR,GAAOI,EAItB,IAAIW,GAAmB,iBAOvB,SAASC,GAAUC,GACjB,IAAIC,EAAM1I,KAAK2I,GAAK,EACpB,OAAQF,EAASC,EAAMA,GAAOA,EAQhC,SAASE,GAAmBjL,GAC1B,OAAOA,GAAOqH,IAAkBrH,EAAMqH,GAKxC,IAAI6D,GAAW,oIAoBf,SAASC,GAAU7N,GACjB,GAAIA,aAAiB8N,KAAM,CACzB,OAAO9N,OACF,UAAWA,IAAU,SAAU,CAMpC,IAAI0K,EAAQkD,GAASG,KAAK/N,GAE1B,IAAK0K,EAAO,CAEV,OAAO,IAAIoD,KAAKlD,KAIlB,IAAKF,EAAM,GAAI,CAGb,OAAO,IAAIoD,MAAMpD,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,GAAIA,EAAM,IAAM,IAAKA,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,OAQ7H,CACD,IAAIsD,GAAQtD,EAAM,IAAM,EAExB,GAAIA,EAAM,GAAGuD,gBAAkB,IAAK,CAClCD,GAAQtD,EAAM,GAAGtN,MAAM,EAAG,GAG5B,OAAO,IAAI0Q,KAAKA,KAAKI,KAAKxD,EAAM,KAAMA,EAAM,IAAM,GAAK,GAAIA,EAAM,IAAM,EAAGsD,IAAQtD,EAAM,IAAM,IAAKA,EAAM,IAAM,GAAIA,EAAM,IAAM,UAE9H,GAAI1K,GAAS,KAAM,CACxB,OAAO,IAAI8N,KAAKlD,KAGlB,OAAO,IAAIkD,KAAK/I,KAAK8F,MAAM7K,IAU7B,SAASmO,GAASzL,GAChB,OAAOqC,KAAK6H,IAAI,GAAIwB,GAAiB1L,IAWvC,SAAS0L,GAAiB1L,GACxB,GAAIA,IAAQ,EAAG,CACb,OAAO,EAGT,IAAI2L,EAAMtJ,KAAKkH,MAAMlH,KAAK+G,IAAIpJ,GAAOqC,KAAKgH,MAO1C,GAAIrJ,EAAMqC,KAAK6H,IAAI,GAAIyB,IAAQ,GAAI,CACjCA,IAGF,OAAOA,EAeT,SAASC,GAAK5L,EAAKmI,GACjB,IAAI0D,EAAWH,GAAiB1L,GAChC,IAAI8L,EAAQzJ,KAAK6H,IAAI,GAAI2B,GACzB,IAAIE,EAAI/L,EAAM8L,EAEd,IAAIE,EAEJ,GAAI7D,EAAO,CACT,GAAI4D,EAAI,IAAK,CACXC,EAAK,OACA,GAAID,EAAI,IAAK,CAClBC,EAAK,OACA,GAAID,EAAI,EAAG,CAChBC,EAAK,OACA,GAAID,EAAI,EAAG,CAChBC,EAAK,MACA,CACLA,EAAK,QAEF,CACL,GAAID,EAAI,EAAG,CACTC,EAAK,OACA,GAAID,EAAI,EAAG,CAChBC,EAAK,OACA,GAAID,EAAI,EAAG,CAChBC,EAAK,OACA,GAAID,EAAI,EAAG,CAChBC,EAAK,MACA,CACLA,EAAK,IAIThM,EAAMgM,EAAKF,EAGX,OAAOD,IAAa,IAAM7L,EAAIsI,QAAQuD,EAAW,GAAKA,EAAW,GAAK7L,EAUxE,SAASiM,GAASC,EAAQC,GACxB,IAAIC,GAAKF,EAAOtQ,OAAS,GAAKuQ,EAAI,EAClC,IAAIE,EAAIhK,KAAKkH,MAAM6C,GACnB,IAAIrK,GAAKmK,EAAOG,EAAI,GACpB,IAAIzD,EAAIwD,EAAIC,EACZ,OAAOzD,EAAI7G,EAAI6G,GAAKsD,EAAOG,GAAKtK,GAAKA,EA0BvC,SAASuK,GAAgBC,GACvBA,EAAK9D,MAAK,SAAUtH,EAAGC,GACrB,OAAOoL,EAAWrL,EAAGC,EAAG,IAAM,EAAI,KAEpC,IAAIqL,GAAQC,SACZ,IAAIC,EAAY,EAEhB,IAAK,IAAIjR,EAAI,EAAGA,EAAI6Q,EAAK3Q,QAAS,CAChC,IAAIgR,EAAWL,EAAK7Q,GAAGkR,SACvB,IAAIC,EAAQN,EAAK7Q,GAAGmR,MAEpB,IAAK,IAAIC,EAAK,EAAGA,EAAK,EAAGA,IAAM,CAC7B,GAAIF,EAASE,IAAOL,EAAM,CACxBG,EAASE,GAAML,EACfI,EAAMC,IAAOA,EAAK,EAAIH,EAAY,EAGpCF,EAAOG,EAASE,GAChBH,EAAYE,EAAMC,GAGpB,GAAIF,EAAS,KAAOA,EAAS,IAAMC,EAAM,GAAKA,EAAM,KAAO,EAAG,CAC5DN,EAAKQ,OAAOrR,EAAG,OACV,CACLA,KAIJ,OAAO6Q,EAEP,SAASC,EAAWrL,EAAGC,EAAG0L,GACxB,OAAO3L,EAAEyL,SAASE,GAAM1L,EAAEwL,SAASE,IAAO3L,EAAEyL,SAASE,KAAQ1L,EAAEwL,SAASE,KAAQ3L,EAAE0L,MAAMC,GAAM1L,EAAEyL,MAAMC,OAAUA,EAAK,GAAK,KAAOA,GAAMN,EAAWrL,EAAGC,EAAG,KAa5J,SAAS4L,GAAUjL,GACjB,OAAOA,EAAIkG,WAAWlG,IAAM,EAG9B,OAAoBwF,GACpB,OAAuBM,GACvB,OAAgBM,GAChB,OAAcI,GACd,OAAuBG,GACvB,OAA2BI,GAC3B,OAA4BG,GAC5B,OAAkCU,GAClC,OAA2BiB,GAC3B,OAAoBC,GACpB,OAA6BI,GAC7B,OAAoBE,GACpB,OAAmBM,GACnB,OAA2BC,GAC3B,OAAeE,GACf,OAAmBK,GACnB,OAA0BK,GAC1B,OAAoBU,qSClkBpB,IAAIC,GAAa,WAIflO,KAAKmO,KAAO,KAKZnO,KAAKoO,KAAO,KACZpO,KAAKqO,KAAO,GAGd,IAAIC,GAAkBJ,GAAWhT,UAOjCoT,GAAgBC,OAAS,SAAUtN,GACjC,IAAIuN,EAAQ,IAAIC,GAAMxN,GACtBjB,KAAK0O,YAAYF,GACjB,OAAOA,GAQTF,GAAgBI,YAAc,SAAUF,GACtC,IAAKxO,KAAKmO,KAAM,CACdnO,KAAKmO,KAAOnO,KAAKoO,KAAOI,MACnB,CACLxO,KAAKoO,KAAKO,KAAOH,EACjBA,EAAMI,KAAO5O,KAAKoO,KAClBI,EAAMG,KAAO,KACb3O,KAAKoO,KAAOI,EAGdxO,KAAKqO,QAQPC,GAAgBO,OAAS,SAAUL,GACjC,IAAII,EAAOJ,EAAMI,KACjB,IAAID,EAAOH,EAAMG,KAEjB,GAAIC,EAAM,CACRA,EAAKD,KAAOA,MACP,CAEL3O,KAAKmO,KAAOQ,EAGd,GAAIA,EAAM,CACRA,EAAKC,KAAOA,MACP,CAEL5O,KAAKoO,KAAOQ,EAGdJ,EAAMG,KAAOH,EAAMI,KAAO,KAC1B5O,KAAKqO,QAOPC,GAAgB1R,IAAM,WACpB,OAAOoD,KAAKqO,MAOdC,GAAgBQ,MAAQ,WACtB9O,KAAKmO,KAAOnO,KAAKoO,KAAO,KACxBpO,KAAKqO,KAAO,GAQd,IAAII,GAAQ,SAAUxN,GAIpBjB,KAAKzB,MAAQ0C,EAKbjB,KAAK2O,KAKL3O,KAAK4O,MASP,IAAIG,GAAM,SAAUC,GAClBhP,KAAKiP,MAAQ,IAAIf,GACjBlO,KAAKkP,KAAO,GACZlP,KAAKmP,SAAWH,GAAW,GAC3BhP,KAAKoP,kBAAoB,MAG3B,IAAIC,GAAWN,GAAI7T,UAOnBmU,GAASC,IAAM,SAAUpS,EAAKqB,GAC5B,IAAIiP,EAAOxN,KAAKiP,MAChB,IAAIpT,EAAMmE,KAAKkP,KACf,IAAIK,EAAU,KAEd,GAAI1T,EAAIqB,IAAQ,KAAM,CACpB,IAAIN,EAAM4Q,EAAK5Q,MAEf,IAAI4R,EAAQxO,KAAKoP,kBAEjB,GAAIxS,GAAOoD,KAAKmP,UAAYvS,EAAM,EAAG,CAEnC,IAAI4S,EAAiBhC,EAAKW,KAC1BX,EAAKqB,OAAOW,UACL3T,EAAI2T,EAAetS,KAC1BqS,EAAUC,EAAejR,MACzByB,KAAKoP,kBAAoBI,EAG3B,GAAIhB,EAAO,CACTA,EAAMjQ,MAAQA,MACT,CACLiQ,EAAQ,IAAIC,GAAMlQ,GAGpBiQ,EAAMtR,IAAMA,EACZsQ,EAAKkB,YAAYF,GACjB3S,EAAIqB,GAAOsR,EAGb,OAAOe,GAQTF,GAASrN,IAAM,SAAU9E,GACvB,IAAIsR,EAAQxO,KAAKkP,KAAKhS,GACtB,IAAIsQ,EAAOxN,KAAKiP,MAEhB,GAAIT,GAAS,KAAM,CAEjB,GAAIA,IAAUhB,EAAKY,KAAM,CACvBZ,EAAKqB,OAAOL,GACZhB,EAAKkB,YAAYF,GAGnB,OAAOA,EAAMjQ,QAQjB8Q,GAASP,MAAQ,WACf9O,KAAKiP,MAAMH,QAEX9O,KAAKkP,KAAO,IAGd,IAAI7G,GAAW0G,GACf,OAAiB1G,GCvMjB,IAAIoH,GAAmB,IAAIV,GAAI,IAM/B,SAASW,GAAeC,GACtB,UAAWA,IAAkB,SAAU,CACrC,IAAIC,EAAeH,GAAiBzN,IAAI2N,GACxC,OAAOC,GAAgBA,EAAaC,UAC/B,CACL,OAAOF,GAgBX,SAASG,GAAoBH,EAAeE,EAAOE,EAAQ3Q,EAAI4Q,GAC7D,IAAKL,EAAe,CAClB,OAAOE,OACF,UAAWF,IAAkB,SAAU,CAE5C,GAAIE,GAASA,EAAMI,eAAiBN,IAAkBI,EAAQ,CAC5D,OAAOF,EAKT,IAAID,EAAeH,GAAiBzN,IAAI2N,GACxC,IAAIO,EAAc,CAChBH,OAAQA,EACR3Q,GAAIA,EACJ4Q,UAAWA,GAGb,GAAIJ,EAAc,CAChBC,EAAQD,EAAaC,OACpBM,GAAaN,IAAUD,EAAaQ,QAAQ9Q,KAAK4Q,OAC7C,CACLL,EAAQ,IAAIQ,MACZR,EAAMS,OAAST,EAAMU,QAAUC,GAC/Bf,GAAiBH,IAAIK,EAAeE,EAAMY,eAAiB,CACzDZ,MAAOA,EACPO,QAAS,CAACF,KAEZL,EAAMa,IAAMb,EAAMI,aAAeN,EAGnC,OAAOE,MAEJ,CACD,OAAOF,GAIb,SAASa,KACP,IAAIZ,EAAe5P,KAAKyQ,eACxBzQ,KAAKsQ,OAAStQ,KAAKuQ,QAAUvQ,KAAKyQ,eAAiB,KAEnD,IAAK,IAAI9T,EAAI,EAAGA,EAAIiT,EAAaQ,QAAQvT,OAAQF,IAAK,CACpD,IAAIuT,EAAcN,EAAaQ,QAAQzT,GACvC,IAAIyC,EAAK8Q,EAAY9Q,GACrBA,GAAMA,EAAGY,KAAMkQ,EAAYF,WAC3BE,EAAYH,OAAOY,QAGrBf,EAAaQ,QAAQvT,OAAS,EAGhC,SAASsT,GAAaN,GACpB,OAAOA,GAASA,EAAMlJ,OAASkJ,EAAMjJ,OAGvC,OAAyB8I,GACzB,OAA8BI,GAC9B,OAAuBK,qECjFvB,IAAI/R,GAAawS,GAAMxS,WACvB,IAAIN,GAAS8S,GAAM9S,OACnB,IAAI4C,GAAYkQ,GAAMlQ,UACtB,IAAIG,GAAY+P,GAAM/P,UACtB,IAAIS,GAAOsP,GAAMtP,KACjB,IAAIuP,GAAiB,GACrB,IAAIC,GAAwB,EAC5B,IAAIC,GAAiB,IACrB,IAAIC,GAAY,gCAChB,IAAIC,GAAe,kBAEnB,IAAIjV,GAAU,GAEd,SAASC,GAAUC,EAAMC,GACvBH,GAAQE,GAAQC,EAUlB,SAAS+U,GAASC,EAAMC,GACtBA,EAAOA,GAAQH,GACf,IAAI/T,EAAMiU,EAAO,IAAMC,EAEvB,GAAIP,GAAe3T,GAAM,CACvB,OAAO2T,GAAe3T,GAGxB,IAAImU,GAAaF,EAAO,IAAIG,MAAM,MAClC,IAAI3K,EAAQ,EAEZ,IAAK,IAAIhK,EAAI,EAAG4U,EAAIF,EAAUxU,OAAQF,EAAI4U,EAAG5U,IAAK,CAEhDgK,EAAQrD,KAAKqB,IAAI6M,GAAYH,EAAU1U,GAAIyU,GAAMzK,MAAOA,GAG1D,GAAImK,GAAwBC,GAAgB,CAC1CD,GAAwB,EACxBD,GAAiB,GAGnBC,KACAD,GAAe3T,GAAOyJ,EACtB,OAAOA,EAeT,SAAS8K,GAAgBN,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBC,EAAMC,GACpG,OAAOD,EAAOE,GAAgBb,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBC,EAAMC,GAAYE,GAAiBd,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBE,GAGjN,SAASE,GAAiBd,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBE,GAC/F,IAAIG,EAAeC,GAAehB,EAAMC,EAAMQ,EAAaC,EAAgBE,GAC3E,IAAIK,EAAalB,GAASC,EAAMC,GAEhC,GAAIQ,EAAa,CACfQ,GAAcR,EAAY,GAAKA,EAAY,GAG7C,IAAIS,EAAcH,EAAaG,YAC/B,IAAIzP,EAAI0P,GAAY,EAAGF,EAAYV,GACnC,IAAI7O,EAAI0P,GAAY,EAAGF,EAAaV,GACpC,IAAIxJ,EAAO,IAAIzB,GAAa9D,EAAGC,EAAGuP,EAAYC,GAC9ClK,EAAKqK,WAAaN,EAAaM,WAC/B,OAAOrK,EAGT,SAAS6J,GAAgBb,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBC,EAAMC,GACpG,IAAIG,EAAeO,GAActB,EAAM,CACrCW,KAAMA,EACNC,SAAUA,EACVX,KAAMA,EACNM,UAAWA,EACXE,YAAaA,EACbC,eAAgBA,IAElB,IAAIO,EAAaF,EAAaE,WAC9B,IAAIC,EAAcH,EAAaG,YAC/B,IAAIzP,EAAI0P,GAAY,EAAGF,EAAYV,GACnC,IAAI7O,EAAI0P,GAAY,EAAGF,EAAaV,GACpC,OAAO,IAAIjL,GAAa9D,EAAGC,EAAGuP,EAAYC,GAW5C,SAASC,GAAY1P,EAAG+D,EAAO+K,GAE7B,GAAIA,IAAc,QAAS,CACzB9O,GAAK+D,OACA,GAAI+K,IAAc,SAAU,CACjC9O,GAAK+D,EAAQ,EAGf,OAAO/D,EAWT,SAAS2P,GAAY1P,EAAG+D,EAAQ+K,GAC9B,GAAIA,IAAsB,SAAU,CAClC9O,GAAK+D,EAAS,OACT,GAAI+K,IAAsB,SAAU,CACzC9O,GAAK+D,EAGP,OAAO/D,EAYT,SAAS6P,GAAsB5P,EAAK6P,EAAOxK,GACzC,IAAIyK,EAAeD,EAAMC,aACzB,IAAI3O,EAAW0O,EAAME,aACrB,IAAIjQ,EAAIuF,EAAKvF,EACb,IAAIC,EAAIsF,EAAKtF,EACboB,EAAWA,GAAY,EACvB,IAAI2C,EAASuB,EAAKvB,OAClB,IAAID,EAAQwB,EAAKxB,MACjB,IAAImM,EAAalM,EAAS,EAC1B,IAAI8K,EAAY,OAChB,IAAIC,EAAoB,MAExB,OAAQiB,GACN,IAAK,OACHhQ,GAAKqB,EACLpB,GAAKiQ,EACLpB,EAAY,QACZC,EAAoB,SACpB,MAEF,IAAK,QACH/O,GAAKqB,EAAW0C,EAChB9D,GAAKiQ,EACLnB,EAAoB,SACpB,MAEF,IAAK,MACH/O,GAAK+D,EAAQ,EACb9D,GAAKoB,EACLyN,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,SACH/O,GAAK+D,EAAQ,EACb9D,GAAK+D,EAAS3C,EACdyN,EAAY,SACZ,MAEF,IAAK,SACH9O,GAAK+D,EAAQ,EACb9D,GAAKiQ,EACLpB,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,aACH/O,GAAKqB,EACLpB,GAAKiQ,EACLnB,EAAoB,SACpB,MAEF,IAAK,cACH/O,GAAK+D,EAAQ1C,EACbpB,GAAKiQ,EACLpB,EAAY,QACZC,EAAoB,SACpB,MAEF,IAAK,YACH/O,GAAK+D,EAAQ,EACb9D,GAAKoB,EACLyN,EAAY,SACZ,MAEF,IAAK,eACH9O,GAAK+D,EAAQ,EACb9D,GAAK+D,EAAS3C,EACdyN,EAAY,SACZC,EAAoB,SACpB,MAEF,IAAK,gBACH/O,GAAKqB,EACLpB,GAAKoB,EACL,MAEF,IAAK,iBACHrB,GAAK+D,EAAQ1C,EACbpB,GAAKoB,EACLyN,EAAY,QACZ,MAEF,IAAK,mBACH9O,GAAKqB,EACLpB,GAAK+D,EAAS3C,EACd0N,EAAoB,SACpB,MAEF,IAAK,oBACH/O,GAAK+D,EAAQ1C,EACbpB,GAAK+D,EAAS3C,EACdyN,EAAY,QACZC,EAAoB,SACpB,MAGJ7O,EAAMA,GAAO,GACbA,EAAIF,EAAIA,EACRE,EAAID,EAAIA,EACRC,EAAI4O,UAAYA,EAChB5O,EAAI6O,kBAAoBA,EACxB,OAAO7O,EAaT,SAASiQ,GAAyBH,EAAczK,EAAMlE,GACpD,IAAI+O,EAAa,CACfJ,aAAcA,EACdC,aAAc5O,GAEhB,OAAOyO,GAAsB,GAAIM,EAAY7K,GAoB/C,SAAS8K,GAAa9B,EAAM+B,EAAgB9B,EAAM+B,EAAUC,GAC1D,IAAKF,EAAgB,CACnB,MAAO,GAGT,IAAI7B,GAAaF,EAAO,IAAIG,MAAM,MAClC8B,EAAUC,GAAuBH,EAAgB9B,EAAM+B,EAAUC,GAGjE,IAAK,IAAIzW,EAAI,EAAGC,EAAMyU,EAAUxU,OAAQF,EAAIC,EAAKD,IAAK,CACpD0U,EAAU1U,GAAK2W,GAAmBjC,EAAU1U,GAAIyW,GAGlD,OAAO/B,EAAUkC,KAAK,MAGxB,SAASF,GAAuBH,EAAgB9B,EAAM+B,EAAUC,GAC9DA,EAAUtV,GAAO,GAAIsV,GACrBA,EAAQhC,KAAOA,EACf,IAAI+B,EAAWzS,GAAUyS,EAAU,OACnCC,EAAQI,cAAgB9S,GAAU0S,EAAQI,cAAe,GACzD,IAAIC,EAAUL,EAAQK,QAAU/S,GAAU0S,EAAQK,QAAS,GAG3DL,EAAQM,YAAcxC,GAAS,IAAKE,GAGpC,IAAIuC,EAAeP,EAAQO,aAAezC,GAAS,IAAKE,GACxDgC,EAAQQ,YAAclT,GAAU0S,EAAQQ,YAAa,IAGrD,IAAIC,EAAeX,EAAiB5P,KAAKqB,IAAI,EAAGuO,EAAiB,GAEjE,IAAK,IAAIvW,EAAI,EAAGA,EAAI8W,GAAWI,GAAgBF,EAAchX,IAAK,CAChEkX,GAAgBF,EAGlB,IAAIG,EAAgB5C,GAASiC,EAAU/B,GAEvC,GAAI0C,EAAgBD,EAAc,CAChCV,EAAW,GACXW,EAAgB,EAGlBD,EAAeX,EAAiBY,EAChCV,EAAQD,SAAWA,EACnBC,EAAQU,cAAgBA,EACxBV,EAAQS,aAAeA,EACvBT,EAAQF,eAAiBA,EACzB,OAAOE,EAGT,SAASE,GAAmBS,EAAUX,GACpC,IAAIF,EAAiBE,EAAQF,eAC7B,IAAI9B,EAAOgC,EAAQhC,KACnB,IAAIyC,EAAeT,EAAQS,aAE3B,IAAKX,EAAgB,CACnB,MAAO,GAGT,IAAIc,EAAY9C,GAAS6C,EAAU3C,GAEnC,GAAI4C,GAAad,EAAgB,CAC/B,OAAOa,EAGT,IAAK,IAAIE,EAAI,GAAIA,IAAK,CACpB,GAAID,GAAaH,GAAgBI,GAAKb,EAAQI,cAAe,CAC3DO,GAAYX,EAAQD,SACpB,MAGF,IAAIe,EAAYD,IAAM,EAAIE,GAAeJ,EAAUF,EAAcT,EAAQO,aAAcP,EAAQM,aAAeM,EAAY,EAAI1Q,KAAKkH,MAAMuJ,EAASlX,OAASgX,EAAeG,GAAa,EACvLD,EAAWA,EAASK,OAAO,EAAGF,GAC9BF,EAAY9C,GAAS6C,EAAU3C,GAGjC,GAAI2C,IAAa,GAAI,CACnBA,EAAWX,EAAQQ,YAGrB,OAAOG,EAGT,SAASI,GAAehD,EAAM0C,EAAcF,EAAcD,GACxD,IAAI/M,EAAQ,EACZ,IAAIhK,EAAI,EAER,IAAK,IAAIC,EAAMuU,EAAKtU,OAAQF,EAAIC,GAAO+J,EAAQkN,EAAclX,IAAK,CAChE,IAAI0X,EAAWlD,EAAKmD,WAAW3X,GAC/BgK,GAAS,GAAK0N,GAAYA,GAAY,IAAMV,EAAeD,EAG7D,OAAO/W,EAST,SAAS4X,GAAcnD,GAErB,OAAOF,GAAS,IAAKE,GAUvB,SAASI,GAAYL,EAAMC,GACzB,OAAOpV,GAAQwV,YAAYL,EAAMC,GAInCpV,GAAQwV,YAAc,SAAUL,EAAMC,GACpC,IAAIoD,EAAMpW,KACVoW,EAAIpD,KAAOA,GAAQH,GACnB,OAAOuD,EAAIhD,YAAYL,IAezB,SAASgB,GAAehB,EAAMC,EAAMqD,EAAS5C,EAAgBE,GAC3DZ,GAAQ,OAASA,GAAQ,IACzB,IAAIqB,EAAa9R,GAAUmR,EAAgB0C,GAAcnD,IACzD,IAAIsD,EAAQvD,EAAOA,EAAKG,MAAM,MAAQ,GACtC,IAAI1K,EAAS8N,EAAM7X,OAAS2V,EAC5B,IAAIH,EAAczL,EAClB,IAAI+N,EAAuB,KAE3B,GAAIF,EAAS,CACXpC,GAAeoC,EAAQ,GAAKA,EAAQ,GAGtC,GAAItD,GAAQY,EAAU,CACpB4C,EAAuB,MACvB,IAAIC,EAAmB7C,EAASM,YAChC,IAAIwC,EAAkB9C,EAASK,WAE/B,GAAIwC,GAAoB,MAAQvC,EAAcuC,EAAkB,CAC9DzD,EAAO,GACPuD,EAAQ,QACH,GAAIG,GAAmB,KAAM,CAClC,IAAIzB,EAAUC,GAAuBwB,GAAmBJ,EAAUA,EAAQ,GAAKA,EAAQ,GAAK,GAAIrD,EAAMW,EAASoB,SAAU,CACvHM,QAAS1B,EAAS0B,QAClBG,YAAa7B,EAAS6B,cAIxB,IAAK,IAAIjX,EAAI,EAAGC,EAAM8X,EAAM7X,OAAQF,EAAIC,EAAKD,IAAK,CAChD+X,EAAM/X,GAAK2W,GAAmBoB,EAAM/X,GAAIyW,KAK9C,MAAO,CACLsB,MAAOA,EACP9N,OAAQA,EACRyL,YAAaA,EACbG,WAAYA,EACZmC,qBAAsBA,GAmC1B,SAASlC,GAActB,EAAMwB,GAC3B,IAAIT,EAAe,CACjBwC,MAAO,GACP/N,MAAO,EACPC,OAAQ,GAEVuK,GAAQ,OAASA,GAAQ,IAEzB,IAAKA,EAAM,CACT,OAAOe,EAGT,IAAI4C,EAAY9D,GAAU8D,UAAY,EACtC,IAAIvY,EAEJ,OAAQA,EAASyU,GAAU1E,KAAK6E,KAAU,KAAM,CAC9C,IAAI4D,EAAexY,EAAOyY,MAE1B,GAAID,EAAeD,EAAW,CAC5BG,GAAW/C,EAAcf,EAAK+D,UAAUJ,EAAWC,IAGrDE,GAAW/C,EAAc3V,EAAO,GAAIA,EAAO,IAC3CuY,EAAY9D,GAAU8D,UAGxB,GAAIA,EAAY3D,EAAKtU,OAAQ,CAC3BoY,GAAW/C,EAAcf,EAAK+D,UAAUJ,EAAW3D,EAAKtU,SAG1D,IAAI6X,EAAQxC,EAAawC,MACzB,IAAIS,EAAgB,EACpB,IAAItB,EAAe,EAEnB,IAAIuB,EAAc,GAClB,IAAIC,EAAa1C,EAAMf,YACvB,IAAIG,EAAWY,EAAMZ,SACrB,IAAIuD,EAAgBvD,GAAYA,EAASK,WACzC,IAAImD,EAAiBxD,GAAYA,EAASM,YAE1C,GAAIgD,EAAY,CACdC,GAAiB,OAASA,GAAiBD,EAAW,GAAKA,EAAW,IACtEE,GAAkB,OAASA,GAAkBF,EAAW,GAAKA,EAAW,IAI1E,IAAK,IAAI1Y,EAAI,EAAGA,EAAI+X,EAAM7X,OAAQF,IAAK,CACrC,IAAI6Y,EAAOd,EAAM/X,GACjB,IAAI6V,EAAa,EACjB,IAAIwB,EAAY,EAEhB,IAAK,IAAIC,EAAI,EAAGA,EAAIuB,EAAKC,OAAO5Y,OAAQoX,IAAK,CAC3C,IAAIyB,EAAQF,EAAKC,OAAOxB,GACxB,IAAI0B,EAAaD,EAAME,WAAajD,EAAMb,KAAK4D,EAAME,YAAc,GAEnE,IAAIhE,EAAc8D,EAAM9D,YAAc+D,EAAW/D,YAEjD,IAAIR,EAAOsE,EAAMtE,KAAOuE,EAAWvE,MAAQuB,EAAMvB,KAEjD,IAAIyE,EAAcH,EAAMI,WAAapV,GAErCiV,EAAWG,WAAYvB,GAAcnD,IACrCQ,IAAgBiE,GAAejE,EAAY,GAAKA,EAAY,IAC5D8D,EAAM9O,OAASiP,EACfH,EAAMlD,WAAa3R,GAAU8U,EAAW9D,eAAgBc,EAAMd,eAAgBgE,GAC9EH,EAAMhE,UAAYiE,GAAcA,EAAWjE,WAAaiB,EAAMjB,UAC9DgE,EAAM/D,kBAAoBgE,GAAcA,EAAWhE,mBAAqB,SAExE,GAAI4D,GAAkB,MAAQJ,EAAgBO,EAAMlD,WAAa+C,EAAgB,CAC/E,MAAO,CACLb,MAAO,GACP/N,MAAO,EACPC,OAAQ,GAIZ8O,EAAMK,UAAY7E,GAASwE,EAAMvE,KAAMC,GACvC,IAAI4E,EAAaL,EAAWI,UAC5B,IAAIE,EAAyBD,GAAc,MAAQA,IAAe,OAGlE,UAAWA,IAAe,UAAYA,EAAWE,OAAOF,EAAWnZ,OAAS,KAAO,IAAK,CACtF6Y,EAAMS,aAAeH,EACrBZ,EAAY9V,KAAKoW,GACjBM,EAAa,MAER,CACL,GAAIC,EAAwB,CAC1BD,EAAaN,EAAMK,UAGnB,IAAIK,EAAsBT,EAAWS,oBACrC,IAAIC,EAAQD,GAAuBA,EAAoBvG,MAWvD,GAAIwG,EAAO,CACTA,EAAQC,GAAY5G,eAAe2G,GAEnC,GAAIC,GAAYnG,aAAakG,GAAQ,CACnCL,EAAa1S,KAAKqB,IAAIqR,EAAYK,EAAM1P,MAAQkP,EAAcQ,EAAMzP,UAK1E,IAAI2P,EAAW3E,EAAcA,EAAY,GAAKA,EAAY,GAAK,EAC/DoE,GAAcO,EACd,IAAIC,EAAmBlB,GAAiB,KAAOA,EAAgBtB,EAAY,KAE3E,GAAIwC,GAAoB,MAAQA,EAAmBR,EAAY,CAC7D,IAAKC,GAA0BO,EAAmBD,EAAU,CAC1Db,EAAMvE,KAAO,GACbuE,EAAMK,UAAYC,EAAa,MAC1B,CACLN,EAAMvE,KAAO8B,GAAayC,EAAMvE,KAAMqF,EAAmBD,EAAUnF,EAAMW,EAASoB,SAAU,CAC1FM,QAAS1B,EAAS0B,UAEpBiC,EAAMK,UAAY7E,GAASwE,EAAMvE,KAAMC,GACvC4E,EAAaN,EAAMK,UAAYQ,IAKrCvC,GAAa0B,EAAM/O,MAAQqP,EAC3BL,IAAenD,EAAalP,KAAKqB,IAAI6N,EAAYkD,EAAMlD,aAGzDgD,EAAK7O,MAAQqN,EACbwB,EAAKhD,WAAaA,EAClB2C,GAAiB3C,EACjBqB,EAAevQ,KAAKqB,IAAIkP,EAAcG,GAGxC9B,EAAaE,WAAaF,EAAavL,MAAQjG,GAAUiS,EAAMoD,UAAWlC,GAC1E3B,EAAaG,YAAcH,EAAatL,OAASlG,GAAUiS,EAAMmD,WAAYX,GAE7E,GAAIE,EAAY,CACdnD,EAAaE,YAAciD,EAAW,GAAKA,EAAW,GACtDnD,EAAaG,aAAegD,EAAW,GAAKA,EAAW,GAGzD,IAAK,IAAI1Y,EAAI,EAAGA,EAAIyY,EAAYvY,OAAQF,IAAK,CAC3C,IAAI+Y,EAAQN,EAAYzY,GACxB,IAAIwZ,EAAeT,EAAMS,aAEzBT,EAAM/O,MAAQ8P,SAASN,EAAc,IAAM,IAAMtC,EAGnD,OAAO3B,EAGT,SAAS+C,GAAWyB,EAAOnV,EAAKqU,GAC9B,IAAIe,EAAapV,IAAQ,GACzB,IAAIqV,EAAOrV,EAAI+P,MAAM,MACrB,IAAIoD,EAAQgC,EAAMhC,MAElB,IAAK,IAAI/X,EAAI,EAAGA,EAAIia,EAAK/Z,OAAQF,IAAK,CACpC,IAAIwU,EAAOyF,EAAKja,GAChB,IAAI+Y,EAAQ,CACVE,UAAWA,EACXzE,KAAMA,EACN0F,cAAe1F,IAASwF,GAG1B,IAAKha,EAAG,CACN,IAAI8Y,GAAUf,EAAMA,EAAM7X,OAAS,KAAO6X,EAAM,GAAK,CACnDe,OAAQ,MACNA,OAQJ,IAAIqB,EAAYrB,EAAO5Y,OACvBia,IAAc,GAAKrB,EAAO,GAAGoB,aAAepB,EAAO,GAAKC,GAEvDvE,IAAS2F,GAAaH,IAAelB,EAAOnW,KAAKoW,OAE/C,CAEDhB,EAAMpV,KAAK,CACTmW,OAAQ,CAACC,OAMnB,SAASqB,GAASpE,GAGhB,IAAIvB,GAAQuB,EAAMqE,UAAYrE,EAAMsE,aAAe,CAACtE,EAAMuE,UAAWvE,EAAMwE,YAAaxE,EAAMqE,UAAY,IAAM,KAChHrE,EAAMsE,YAAc,cAAc1D,KAAK,KACvC,OAAOnC,GAAQ9P,GAAK8P,IAASuB,EAAMyE,UAAYzE,EAAMvB,KAGvD,OAAuBH,GACvB,OAAoBhV,GACpB,OAAmBiV,GACnB,OAA0BO,GAC1B,OAAsBa,GACtB,OAAsBC,GACtB,OAAgCG,GAChC,OAAmCK,GACnC,OAAuBE,GACvB,OAAwBsB,GACxB,OAAsB/C,GACtB,OAAyBW,GACzB,OAAwBM,GACxB,OAAmBsE,0PC3pBnB,SAASM,GAAUzU,GACjB,GAAIgH,MAAMhH,GAAI,CACZ,MAAO,IAGTA,GAAKA,EAAI,IAAI0O,MAAM,KACnB,OAAO1O,EAAE,GAAGpB,QAAQ,iCAAkC,QAAUoB,EAAE/F,OAAS,EAAI,IAAM+F,EAAE,GAAK,IAS9F,SAAS0U,GAAY/V,EAAKgW,GACxBhW,GAAOA,GAAO,IAAIiW,cAAchW,QAAQ,SAAS,SAAUyH,EAAOwO,GAChE,OAAOA,EAAOjL,iBAGhB,GAAI+K,GAAkBhW,EAAK,CACzBA,EAAMA,EAAI2U,OAAO,GAAG1J,cAAgBjL,EAAI5F,MAAM,GAGhD,OAAO4F,EAGT,IAAIP,GAAoBgK,GAAOhK,kBAC/B,IAAI0W,GAAa,aACjB,IAAIC,GAAa,CACfC,IAAK,QACLC,IAAK,OACLC,IAAK,OACLC,IAAK,SACLC,IAAM,SAGR,SAASC,GAAW3b,GAClB,OAAOA,GAAU,KAAO,IAAMA,EAAS,IAAIkF,QAAQkW,IAAY,SAAUnW,EAAK2W,GAC5E,OAAOP,GAAWO,MAItB,IAAIC,GAAgB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAEnD,IAAIC,GAAU,SAAUC,EAASC,GAC/B,MAAO,IAAMD,GAAWC,GAAa,KAAO,GAAKA,GAAa,KAWhE,SAASC,GAAUC,EAAKC,EAAYC,GAClC,IAAK1N,GAAOtN,QAAQ+a,GAAa,CAC/BA,EAAa,CAACA,GAGhB,IAAIE,EAAYF,EAAW5b,OAE3B,IAAK8b,EAAW,CACd,MAAO,GAGT,IAAIC,EAAQH,EAAW,GAAGG,OAAS,GAEnC,IAAK,IAAIjc,EAAI,EAAGA,EAAIic,EAAM/b,OAAQF,IAAK,CACrC,IAAIkc,EAAQV,GAAcxb,GAC1B6b,EAAMA,EAAIhX,QAAQ4W,GAAQS,GAAQT,GAAQS,EAAO,IAGnD,IAAK,IAAIP,EAAY,EAAGA,EAAYK,EAAWL,IAAa,CAC1D,IAAK,IAAIQ,EAAI,EAAGA,EAAIF,EAAM/b,OAAQic,IAAK,CACrC,IAAI7X,EAAMwX,EAAWH,GAAWM,EAAME,IACtCN,EAAMA,EAAIhX,QAAQ4W,GAAQD,GAAcW,GAAIR,GAAYI,EAAST,GAAWhX,GAAOA,IAIvF,OAAOuX,EAYT,SAASO,GAAgBP,EAAKQ,EAAON,GACnC1N,GAAO9L,KAAK8Z,GAAO,SAAUza,EAAOrB,GAClCsb,EAAMA,EAAIhX,QAAQ,IAAMtE,EAAM,IAAKwb,EAAST,GAAW1Z,GAASA,MAElE,OAAOia,EAaT,SAASS,GAAiBC,EAAKC,GAC7BD,EAAMlO,GAAO9K,SAASgZ,GAAO,CAC3BE,MAAOF,EACPC,aAAcA,GACZD,GAAO,GACX,IAAIE,EAAQF,EAAIE,MAChB,IAAIjZ,EAAO+Y,EAAI/Y,KACf,IAAIgZ,EAAeD,EAAIC,aACvB,IAAIE,EAAaH,EAAIG,YAAc,OACnC,IAAIC,EAAWJ,EAAII,UAAY,IAE/B,IAAKF,EAAO,CACV,MAAO,GAGT,GAAIC,IAAe,OAAQ,CACzB,OAAOlZ,IAAS,UAAY,4FAA8F,2DAA6D8X,GAAWmB,GAAS,KAAOD,GAAgB,IAAM,YAAc,sDAAwD,8DAAgElB,GAAWmB,GAAS,KAAOD,GAAgB,IAAM,gBAC1Z,CAEL,MAAO,CACLE,WAAYA,EACZE,QAAS,UAAYD,EAAW,OAChC3G,MAAO,CACLyG,MAAOA,KAMf,SAASI,GAAIjY,EAAK3E,GAChB2E,GAAO,GACP,MAAO,OAAO6S,OAAO,EAAGxX,EAAM2E,EAAI1E,QAAU0E,EAa9C,SAASkY,GAAWjB,EAAKja,EAAOmb,GAC9B,GAAIlB,IAAQ,QAAUA,IAAQ,SAAWA,IAAQ,WAAaA,IAAQ,aAAeA,IAAQ,OAAQ,CACnGA,EAAM,cAGR,IAAImB,EAAOC,GAAWxN,UAAU7N,GAChC,IAAIsb,EAAMH,EAAQ,MAAQ,GAC1B,IAAI7W,EAAI8W,EAAK,MAAQE,EAAM,cAC3B,IAAIC,EAAIH,EAAK,MAAQE,EAAM,WAAa,EACxC,IAAI7V,EAAI2V,EAAK,MAAQE,EAAM,UAC3B,IAAIvM,EAAIqM,EAAK,MAAQE,EAAM,WAC3B,IAAIpV,EAAIkV,EAAK,MAAQE,EAAM,aAC3B,IAAI/V,EAAI6V,EAAK,MAAQE,EAAM,aAC3B,IAAIE,EAAIJ,EAAK,MAAQE,EAAM,kBAC3BrB,EAAMA,EAAIhX,QAAQ,KAAMgY,GAAIM,EAAG,IAAItY,QAAQ,IAAKsY,GAAGtY,QAAQ,OAAQqB,GAAGrB,QAAQ,KAAMqB,EAAI,KAAKrB,QAAQ,KAAMgY,GAAIxV,EAAG,IAAIxC,QAAQ,IAAKwC,GAAGxC,QAAQ,KAAMgY,GAAIlM,EAAG,IAAI9L,QAAQ,IAAK8L,GAAG9L,QAAQ,KAAMgY,GAAI/U,EAAG,IAAIjD,QAAQ,IAAKiD,GAAGjD,QAAQ,KAAMgY,GAAI1V,EAAG,IAAItC,QAAQ,IAAKsC,GAAGtC,QAAQ,MAAOgY,GAAIO,EAAG,IACvR,OAAOvB,EAST,SAASwB,GAAazY,GACpB,OAAOA,EAAMA,EAAI2U,OAAO,GAAG1J,cAAgBjL,EAAI6S,OAAO,GAAK7S,EAG7D,IAAI0R,GAAegH,GAAYhH,aAe/B,SAASiH,GAAoBhB,GAC3B,OAAOe,GAAYxI,gBAAgByH,EAAI/H,KAAM+H,EAAI9H,KAAM8H,EAAIxH,UAAWwH,EAAIvH,kBAAmBuH,EAAItH,YAAasH,EAAIrH,eAAgBqH,EAAIpH,KAAMoH,EAAInH,UAUlJ,SAASoI,GAAYhJ,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaE,EAAMC,EAAUF,GAC1F,OAAOoI,GAAYxI,gBAAgBN,EAAMC,EAAMM,EAAWC,EAAmBC,EAAaC,EAAgBC,EAAMC,GAGlH,OAAoBsF,GACpB,OAAsBC,GACtB,OAA4BtW,GAC5B,OAAqBiX,GACrB,OAAoBM,GACpB,OAA0BQ,GAC1B,OAA2BE,GAC3B,OAAqBQ,GACrB,OAAuBO,GACvB,OAAuB/G,GACvB,OAA8BiH,GAC9B,OAAsBC,mNCzPtB,IAAIrR,GAAesR,GAAQtR,aAuB3B,IAAI5J,GAAO8L,GAAO9L,KAKlB,IAAImb,GAAkB,CAAC,OAAQ,QAAS,MAAO,SAAU,QAAS,UAKlE,IAAIC,GAAW,CAAC,CAAC,QAAS,OAAQ,SAAU,CAAC,SAAU,MAAO,WAE9D,SAASC,GAAUC,EAAQC,EAAOC,EAAKC,EAAUC,GAC/C,IAAIhY,EAAI,EACR,IAAIC,EAAI,EAER,GAAI8X,GAAY,KAAM,CACpBA,EAAWhN,SAGb,GAAIiN,GAAa,KAAM,CACrBA,EAAYjN,SAGd,IAAIkN,EAAqB,EACzBJ,EAAMK,WAAU,SAAUC,EAAOjQ,GAC/B,IAAIkQ,EAAWD,EAAMC,SACrB,IAAI7S,EAAO4S,EAAMtJ,kBACjB,IAAIwJ,EAAYR,EAAMS,QAAQpQ,EAAM,GACpC,IAAIqQ,EAAgBF,GAAaA,EAAUxJ,kBAC3C,IAAI2J,EACJ,IAAIC,EAEJ,GAAIb,IAAW,aAAc,CAC3B,IAAIc,EAAQnT,EAAKxB,OAASwU,GAAiBA,EAAcvY,EAAIuF,EAAKvF,EAAI,GACtEwY,EAAQxY,EAAI0Y,EAGZ,GAAIF,EAAQT,GAAYI,EAAMQ,QAAS,CACrC3Y,EAAI,EACJwY,EAAQE,EACRzY,GAAKgY,EAAqBH,EAC1BG,EAAqB1S,EAAKvB,WACrB,CAELiU,EAAqBvX,KAAKqB,IAAIkW,EAAoB1S,EAAKvB,aAEpD,CACL,IAAI4U,EAAQrT,EAAKvB,QAAUuU,GAAiBA,EAActY,EAAIsF,EAAKtF,EAAI,GACvEwY,EAAQxY,EAAI2Y,EAEZ,GAAIH,EAAQT,GAAaG,EAAMQ,QAAS,CACtC3Y,GAAKiY,EAAqBH,EAC1B7X,EAAI,EACJwY,EAAQG,EACRX,EAAqB1S,EAAKxB,UACrB,CACLkU,EAAqBvX,KAAKqB,IAAIkW,EAAoB1S,EAAKxB,QAI3D,GAAIoU,EAAMQ,QAAS,CACjB,OAGFP,EAAS,GAAKpY,EACdoY,EAAS,GAAKnY,EACd2X,IAAW,aAAe5X,EAAIwY,EAAQV,EAAM7X,EAAIwY,EAAQX,KAa5D,IAAIe,GAAMlB,GASV,IAAImB,GAAO1Q,GAAOjL,MAAMwa,GAAW,YASnC,IAAIoB,GAAO3Q,GAAOjL,MAAMwa,GAAW,cAiBnC,SAASqB,GAAiBC,EAAcC,EAAeC,GACrD,IAAI7I,EAAiB4I,EAAcnV,MACnC,IAAIqV,EAAkBF,EAAclV,OACpC,IAAIhE,EAAIkG,GAAa+S,EAAajZ,EAAGsQ,GACrC,IAAIrQ,EAAIiG,GAAa+S,EAAahZ,EAAGmZ,GACrC,IAAIC,EAAKnT,GAAa+S,EAAaI,GAAI/I,GACvC,IAAIgJ,EAAKpT,GAAa+S,EAAaK,GAAIF,IACtCpS,MAAMhH,IAAMgH,MAAMV,WAAW2S,EAAajZ,OAASA,EAAI,IACvDgH,MAAMqS,IAAOrS,MAAMV,WAAW2S,EAAaI,QAAUA,EAAK/I,IAC1DtJ,MAAM/G,IAAM+G,MAAMV,WAAW2S,EAAahZ,OAASA,EAAI,IACvD+G,MAAMsS,IAAOtS,MAAMV,WAAW2S,EAAaK,QAAUA,EAAKF,GAC3DD,EAASI,GAAWnb,kBAAkB+a,GAAU,GAChD,MAAO,CACLpV,MAAOrD,KAAKqB,IAAIsX,EAAKrZ,EAAImZ,EAAO,GAAKA,EAAO,GAAI,GAChDnV,OAAQtD,KAAKqB,IAAIuX,EAAKrZ,EAAIkZ,EAAO,GAAKA,EAAO,GAAI,IAqBrD,SAASK,GAAcP,EAAcC,EAAeC,GAClDA,EAASI,GAAWnb,kBAAkB+a,GAAU,GAChD,IAAI7I,EAAiB4I,EAAcnV,MACnC,IAAIqV,EAAkBF,EAAclV,OACpC,IAAIyV,EAAOvT,GAAa+S,EAAaQ,KAAMnJ,GAC3C,IAAIoJ,EAAMxT,GAAa+S,EAAaS,IAAKN,GACzC,IAAIO,EAAQzT,GAAa+S,EAAaU,MAAOrJ,GAC7C,IAAIsJ,EAAS1T,GAAa+S,EAAaW,OAAQR,GAC/C,IAAIrV,EAAQmC,GAAa+S,EAAalV,MAAOuM,GAC7C,IAAItM,EAASkC,GAAa+S,EAAajV,OAAQoV,GAC/C,IAAIS,EAAiBV,EAAO,GAAKA,EAAO,GACxC,IAAIW,EAAmBX,EAAO,GAAKA,EAAO,GAC1C,IAAIY,EAASd,EAAac,OAE1B,GAAI/S,MAAMjD,GAAQ,CAChBA,EAAQuM,EAAiBqJ,EAAQG,EAAmBL,EAGtD,GAAIzS,MAAMhD,GAAS,CACjBA,EAASoV,EAAkBQ,EAASC,EAAiBH,EAGvD,GAAIK,GAAU,KAAM,CAQlB,GAAI/S,MAAMjD,IAAUiD,MAAMhD,GAAS,CACjC,GAAI+V,EAASzJ,EAAiB8I,EAAiB,CAC7CrV,EAAQuM,EAAiB,OACpB,CACLtM,EAASoV,EAAkB,IAK/B,GAAIpS,MAAMjD,GAAQ,CAChBA,EAAQgW,EAAS/V,EAGnB,GAAIgD,MAAMhD,GAAS,CACjBA,EAASD,EAAQgW,GAKrB,GAAI/S,MAAMyS,GAAO,CACfA,EAAOnJ,EAAiBqJ,EAAQ5V,EAAQ+V,EAG1C,GAAI9S,MAAM0S,GAAM,CACdA,EAAMN,EAAkBQ,EAAS5V,EAAS6V,EAI5C,OAAQZ,EAAaQ,MAAQR,EAAaU,OACxC,IAAK,SACHF,EAAOnJ,EAAiB,EAAIvM,EAAQ,EAAIoV,EAAO,GAC/C,MAEF,IAAK,QACHM,EAAOnJ,EAAiBvM,EAAQ+V,EAChC,MAGJ,OAAQb,EAAaS,KAAOT,EAAaW,QACvC,IAAK,SACL,IAAK,SACHF,EAAMN,EAAkB,EAAIpV,EAAS,EAAImV,EAAO,GAChD,MAEF,IAAK,SACHO,EAAMN,EAAkBpV,EAAS6V,EACjC,MAIJJ,EAAOA,GAAQ,EACfC,EAAMA,GAAO,EAEb,GAAI1S,MAAMjD,GAAQ,CAEhBA,EAAQuM,EAAiBwJ,EAAmBL,GAAQE,GAAS,GAG/D,GAAI3S,MAAMhD,GAAS,CAEjBA,EAASoV,EAAkBS,EAAiBH,GAAOE,GAAU,GAG/D,IAAIrU,EAAO,IAAIzB,GAAa2V,EAAON,EAAO,GAAIO,EAAMP,EAAO,GAAIpV,EAAOC,GACtEuB,EAAK4T,OAASA,EACd,OAAO5T,EA0CT,SAASyU,GAAgBC,EAAIhB,EAAcC,EAAeC,EAAQ7C,GAChE,IAAI5L,GAAK4L,IAAQA,EAAI4D,IAAM5D,EAAI4D,GAAG,GAClC,IAAI9Z,GAAKkW,IAAQA,EAAI4D,IAAM5D,EAAI4D,GAAG,GAClC,IAAIC,EAAe7D,GAAOA,EAAI6D,cAAgB,MAE9C,IAAKzP,IAAMtK,EAAG,CACZ,OAGF,IAAImF,EAEJ,GAAI4U,IAAiB,MAAO,CAC1B5U,EAAO0U,EAAG1c,OAAS,QAAU,IAAIuG,GAAa,EAAG,GAAImV,EAAalV,OAAS,GAAIkV,EAAajV,QAAU,GAAKiW,EAAGpL,sBACzG,CACLtJ,EAAO0U,EAAGpL,kBAEV,GAAIoL,EAAGG,qBAAsB,CAC3B,IAAIC,EAAYJ,EAAGK,oBAGnB/U,EAAOA,EAAK9L,QACZ8L,EAAK3D,eAAeyY,IAKxBpB,EAAeO,GAAcpR,GAAOjN,SAAS,CAC3C4I,MAAOwB,EAAKxB,MACZC,OAAQuB,EAAKvB,QACZiV,GAAeC,EAAeC,GAIjC,IAAIoB,EAAQN,EAAG7B,SACf,IAAIoC,EAAK9P,EAAIuO,EAAajZ,EAAIuF,EAAKvF,EAAI,EACvC,IAAIya,EAAKra,EAAI6Y,EAAahZ,EAAIsF,EAAKtF,EAAI,EACvCga,EAAGS,KAAK,WAAYP,IAAiB,MAAQ,CAACK,EAAIC,GAAM,CAACF,EAAM,GAAKC,EAAID,EAAM,GAAKE,IAQrF,SAASE,GAAeC,EAAQC,GAC9B,OAAOD,EAAOlD,GAASmD,GAAO,KAAO,MAAQD,EAAOlD,GAASmD,GAAO,KAAO,MAAQD,EAAOlD,GAASmD,GAAO,KAAO,KA6BnH,SAASC,GAAiBC,EAAcC,EAAW1E,IAChDlO,GAAOzN,SAAS2b,KAASA,EAAM,IAChC,IAAI2E,EAAa3E,EAAI2E,YACpB7S,GAAOtN,QAAQmgB,KAAgBA,EAAa,CAACA,EAAYA,IAC1D,IAAIC,EAAU1gB,EAAMkd,GAAS,GAAI,GACjC,IAAIyD,EAAU3gB,EAAMkd,GAAS,GAAI,GACjCvX,EAAKuX,GAAS,GAAIqD,EAAcG,GAChC/a,EAAKuX,GAAS,GAAIqD,EAAcI,GAEhC,SAAS3gB,EAAM4gB,EAAOP,GACpB,IAAIQ,EAAY,GAChB,IAAIC,EAAgB,EACpB,IAAIC,EAAS,GACb,IAAIC,EAAmB,EACvB,IAAIC,EAAoB,EACxBnf,GAAK8e,GAAO,SAAU9hB,GACpBiiB,EAAOjiB,GAAQyhB,EAAazhB,MAE9BgD,GAAK8e,GAAO,SAAU9hB,GAGpBoiB,EAAQV,EAAW1hB,KAAU+hB,EAAU/hB,GAAQiiB,EAAOjiB,GAAQ0hB,EAAU1hB,IACxEqiB,EAASN,EAAW/hB,IAASgiB,IAC7BK,EAASJ,EAAQjiB,IAASkiB,OAG5B,GAAIP,EAAWJ,GAAQ,CAErB,GAAIc,EAASX,EAAWI,EAAM,IAAK,CACjCG,EAAOH,EAAM,IAAM,UACd,GAAIO,EAASX,EAAWI,EAAM,IAAK,CACxCG,EAAOH,EAAM,IAAM,KAGrB,OAAOG,EAOT,GAAIC,IAAqBC,IAAsBH,EAAe,CAC5D,OAAOC,OAIJ,GAAID,GAAiBG,EAAmB,CACzC,OAAOJ,MACF,CAEL,IAAK,IAAIthB,EAAI,EAAGA,EAAIqhB,EAAMnhB,OAAQF,IAAK,CACrC,IAAIT,EAAO8hB,EAAMrhB,GAEjB,IAAK2hB,EAAQL,EAAW/hB,IAASoiB,EAAQX,EAAczhB,GAAO,CAC5D+hB,EAAU/hB,GAAQyhB,EAAazhB,GAC/B,OAIJ,OAAO+hB,GAIb,SAASK,EAAQnf,EAAKjD,GACpB,OAAOiD,EAAIhC,eAAejB,GAG5B,SAASqiB,EAASpf,EAAKjD,GACrB,OAAOiD,EAAIjD,IAAS,MAAQiD,EAAIjD,KAAU,OAG5C,SAAS6G,EAAKib,EAAO3gB,EAAQf,GAC3B4C,GAAK8e,GAAO,SAAU9hB,GACpBmB,EAAOnB,GAAQI,EAAOJ,OAW5B,SAASsiB,GAAgBliB,GACvB,OAAOmiB,GAAiB,GAAIniB,GAS9B,SAASmiB,GAAiBphB,EAAQf,GAChCA,GAAUe,GAAU6B,GAAKmb,IAAiB,SAAUne,GAClDI,EAAOa,eAAejB,KAAUmB,EAAOnB,GAAQI,EAAOJ,OAExD,OAAOmB,EAGT,OAA0Bgd,GAC1B,OAAmBC,GACnB,OAAcmB,GACd,OAAeC,GACf,OAAeC,GACf,OAA2BC,GAC3B,OAAwBQ,GACxB,OAA0BQ,GAC1B,OAAyBW,GACzB,OAA2BG,GAC3B,OAA0Bc,GAC1B,OAA2BC,uMCjgB3B,IAAIC,GAAM,GAEV,UAAWC,KAAO,iBAAmBA,GAAGC,oBAAsB,WAAY,CAExEF,GAAM,CACJG,QAAS,GACTC,GAAI,GACJC,KAAM,MACNC,IAAK,KAELC,gBAAiB,KACjBC,aAAc,MACdC,qBAAsB,KACtBC,aAAc,YAEX,UAAWlhB,WAAa,oBAAsBmhB,OAAS,YAAa,CAEzEX,GAAM,CACJG,QAAS,GACTC,GAAI,GACJC,KAAM,MACNO,OAAQ,KACRL,gBAAiB,KACjBG,aAAc,YAEX,UAAWG,YAAc,YAAa,CAE3Cb,GAAM,CACJG,QAAS,GACTC,GAAI,GACJC,KAAM,KACNO,OAAQ,MAERL,gBAAiB,KACjBC,aAAc,KACdE,aAAc,WAEX,CACLV,GAAMc,GAAOD,UAAUE,WAGzB,IAAIpX,GAAWqW,GAIf,SAASc,GAAOE,GACd,IAAIZ,EAAK,GACT,IAAID,EAAU,GAed,IAAIc,EAAUD,EAAGzW,MAAM,qBAGvB,IAAI2W,EAAKF,EAAGzW,MAAM,mBACfyW,EAAGzW,MAAM,6BACZ,IAAI4W,EAAOH,EAAGzW,MAAM,kBAEpB,IAAI6W,EAAS,kBAAkBC,KAAKL,GAqBpC,GAAIC,EAAS,CACXd,EAAQc,QAAU,KAClBd,EAAQmB,QAAUL,EAAQ,GAK5B,GAAIC,EAAI,CACNf,EAAQe,GAAK,KACbf,EAAQmB,QAAUJ,EAAG,GAGvB,GAAIC,EAAM,CACRhB,EAAQgB,KAAO,KACfhB,EAAQmB,QAAUH,EAAK,GAKzB,GAAIC,EAAQ,CACVjB,EAAQiB,OAAS,KAQnB,MAAO,CACLjB,QAASA,EACTC,GAAIA,EACJC,KAAM,MAGNE,kBAAmB/gB,SAASC,cAAc,UAAUC,WACpD8gB,oBAAqBe,UAAY,YAIjCd,qBAAsB,iBAAkBe,SAAWrB,EAAQe,KAAOf,EAAQgB,KAE1EM,uBAQA,kBAAmBD,SAAWrB,EAAQgB,MAAQhB,EAAQe,IAAMf,EAAQmB,SAAW,IAE/EZ,oBAAqBlhB,WAAa,aAmBtC,OAAiBmK,GC/HjB,IAAInJ,GAAO8L,GAAO9L,KAClB,IAAI3B,GAAWyN,GAAOzN,SACtB,IAAIG,GAAUsN,GAAOtN,QAOrB,IAAI0iB,GAA8B,WAOlC,SAASC,GAAiB9hB,GACxB,OAAOA,aAAiBlD,MAAQkD,EAAQA,GAAS,KAAO,GAAK,CAACA,GAmBhE,SAAS+hB,GAAgBpH,EAAKhc,EAAKqjB,GAEjC,GAAIrH,EAAK,CACPA,EAAIhc,GAAOgc,EAAIhc,IAAQ,GACvBgc,EAAIsH,SAAWtH,EAAIsH,UAAY,GAC/BtH,EAAIsH,SAAStjB,GAAOgc,EAAIsH,SAAStjB,IAAQ,GAEzC,IAAK,IAAIP,EAAI,EAAGC,EAAM2jB,EAAQ1jB,OAAQF,EAAIC,EAAKD,IAAK,CAClD,IAAI8jB,EAAaF,EAAQ5jB,GAEzB,IAAKuc,EAAIsH,SAAStjB,GAAKC,eAAesjB,IAAevH,EAAIhc,GAAKC,eAAesjB,GAAa,CACxFvH,EAAIsH,SAAStjB,GAAKujB,GAAcvH,EAAIhc,GAAKujB,MAMjD,IAAIC,GAAqB,CAAC,YAAa,aAAc,WAAY,aAAc,OAAQ,MAAO,QAAS,kBAAmB,kBAAmB,QAAS,SAAU,aAAc,QAAS,gBAAiB,WAAY,cAAe,aAAc,gBAAiB,gBAAiB,kBAAmB,iBAAkB,oBAAqB,oBAAqB,kBAAmB,cAAe,cAAe,eAAgB,WAena,SAASC,GAAiBC,GACxB,OAAOrjB,GAASqjB,KAAcljB,GAAQkjB,MAAeA,aAAoBvU,MAAQuU,EAASriB,MAAQqiB,EASpG,SAASC,GAAiBD,GACxB,OAAOrjB,GAASqjB,MAAeA,aAAoBvlB,OAcrD,SAASylB,GAAgBC,EAAQC,GAO/BA,GAAiBA,GAAiB,IAAIrlB,QACtC,IAAIY,EAASyO,GAAOnP,IAAIklB,GAAU,IAAI,SAAU5hB,EAAK6V,GACnD,MAAO,CACLiM,MAAO9hB,MAIXD,GAAK8hB,GAAe,SAAUE,EAAWlM,GACvC,IAAKzX,GAAS2jB,GAAY,CACxB,OAIF,IAAK,IAAIvkB,EAAI,EAAGA,EAAIJ,EAAOM,OAAQF,IAAK,CACtC,IAAKJ,EAAOI,GAAG6gB,QACZ0D,EAAUC,IAAM,MAAQ5kB,EAAOI,GAAGskB,MAAME,KAAOD,EAAUC,GAAK,GAAI,CACnE5kB,EAAOI,GAAG6gB,OAAS0D,EACnBF,EAAchM,GAAS,KACvB,QAIJ,IAAK,IAAIrY,EAAI,EAAGA,EAAIJ,EAAOM,OAAQF,IAAK,CACtC,IAAIskB,EAAQ1kB,EAAOI,GAAGskB,MAEtB,IAAK1kB,EAAOI,GAAG6gB,SAEXyD,EAAME,IAAM,MAAQD,EAAUC,IAAM,OAASD,EAAUhlB,MAAQ,OAASklB,GAAUF,KAAeE,GAAUH,IAAUA,EAAM/kB,OAASglB,EAAUhlB,KAAO,GAAI,CAC3JK,EAAOI,GAAG6gB,OAAS0D,EACnBF,EAAchM,GAAS,KACvB,YAKN9V,GAAK8hB,GAAe,SAAUE,EAAWlM,GACvC,IAAKzX,GAAS2jB,GAAY,CACxB,OAGF,IAAIvkB,EAAI,EAER,KAAOA,EAAIJ,EAAOM,OAAQF,IAAK,CAC7B,IAAIskB,EAAQ1kB,EAAOI,GAAGskB,MAEtB,IAAK1kB,EAAOI,GAAG6gB,SAIX4D,GAAUH,IAKXC,EAAUC,IAAM,KAAM,CACvB5kB,EAAOI,GAAG6gB,OAAS0D,EACnB,OAIJ,GAAIvkB,GAAKJ,EAAOM,OAAQ,CACtBN,EAAO+C,KAAK,CACVke,OAAQ0D,QAId,OAAO3kB,EAaT,SAAS8kB,GAAcC,GAUrB,IAAIC,EAAQvW,GAAO9I,gBACnBhD,GAAKoiB,GAAW,SAAUE,EAAMxM,GAC9B,IAAIyM,EAAWD,EAAKP,MACpBQ,GAAYF,EAAMxf,IAAI0f,EAASN,GAAIK,MAErCtiB,GAAKoiB,GAAW,SAAUE,EAAMxM,GAC9B,IAAIkE,EAAMsI,EAAKhE,OACfxS,GAAO9J,QAAQgY,GAAOA,EAAIiI,IAAM,OAASI,EAAMvf,IAAIkX,EAAIiI,KAAOI,EAAMvf,IAAIkX,EAAIiI,MAAQK,EAAM,mBAAqBtI,GAAOA,EAAIiI,KAC1HjI,GAAOA,EAAIiI,IAAM,MAAQI,EAAMxf,IAAImX,EAAIiI,GAAIK,IAC1CA,EAAKE,UAAYF,EAAKE,QAAU,OAGnCxiB,GAAKoiB,GAAW,SAAUE,EAAMxM,GAC9B,IAAIyM,EAAWD,EAAKP,MACpB,IAAI/H,EAAMsI,EAAKhE,OACf,IAAIkE,EAAUF,EAAKE,QAEnB,IAAKnkB,GAAS2b,GAAM,CAClB,OAOFwI,EAAQxlB,KAAOgd,EAAIhd,MAAQ,KAAOgd,EAAIhd,KAAO,GAAKulB,EAAWA,EAASvlB,KAEpEkkB,GAA8BpL,EAEhC,GAAIyM,EAAU,CACZC,EAAQP,GAAKM,EAASN,QACjB,GAAIjI,EAAIiI,IAAM,KAAM,CACzBO,EAAQP,GAAKjI,EAAIiI,GAAK,OACjB,CAML,IAAIQ,EAAQ,EAEZ,EAAG,CACDD,EAAQP,GAAK,KAAOO,EAAQxlB,KAAO,KAAOylB,UACnCJ,EAAMvf,IAAI0f,EAAQP,KAG7BI,EAAMxf,IAAI2f,EAAQP,GAAIK,MAI1B,SAASI,GAAgBC,GACvB,IAAI3lB,EAAO2lB,EAAe3lB,KAE1B,SAAUA,GAAQA,EAAKmC,QAAQ+hB,KASjC,SAASgB,GAAUF,GACjB,OAAO3jB,GAAS2jB,IAAcA,EAAUC,KAAOD,EAAUC,GAAK,IAAI9iB,QAAQ,cAAgB,EAY5F,SAASyjB,GAAgBC,EAAQC,GAC/B,IAAIC,EAAO,GACX,IAAIC,EAAO,GACXC,EAAQJ,GAAU,GAAIE,GACtBE,EAAQH,GAAU,GAAIE,EAAMD,GAC5B,MAAO,CAACG,EAAWH,GAAOG,EAAWF,IAErC,SAASC,EAAQE,EAAaxmB,EAAKymB,GACjC,IAAK,IAAI3lB,EAAI,EAAGC,EAAMylB,EAAYxlB,OAAQF,EAAIC,EAAKD,IAAK,CACtD,IAAI4lB,EAAWF,EAAY1lB,GAAG4lB,SAC9B,IAAIC,EAAcnC,GAAiBgC,EAAY1lB,GAAG8lB,WAClD,IAAIC,EAAmBJ,GAAYA,EAASC,GAE5C,IAAK,IAAItO,EAAI,EAAG0O,EAAOH,EAAY3lB,OAAQoX,EAAI0O,EAAM1O,IAAK,CACxD,IAAIwO,EAAYD,EAAYvO,GAE5B,GAAIyO,GAAoBA,EAAiBD,GAAY,CACnDC,EAAiBD,GAAa,SACzB,EACJ5mB,EAAI0mB,KAAc1mB,EAAI0mB,GAAY,KAAKE,GAAa,KAM7D,SAASL,EAAWvmB,EAAK+mB,GACvB,IAAIrmB,EAAS,GAEb,IAAK,IAAII,KAAKd,EAAK,CACjB,GAAIA,EAAIsB,eAAeR,IAAMd,EAAIc,IAAM,KAAM,CAC3C,GAAIimB,EAAQ,CACVrmB,EAAO+C,MAAM3C,OACR,CACL,IAAI6lB,EAAcJ,EAAWvmB,EAAIc,GAAI,MACrC6lB,EAAY3lB,QAAUN,EAAO+C,KAAK,CAChCijB,SAAU5lB,EACV8lB,UAAWD,MAMnB,OAAOjmB,GAWX,SAASsmB,GAAe5jB,EAAM6jB,GAC5B,GAAIA,EAAQC,iBAAmB,KAAM,CACnC,OAAOD,EAAQC,qBACV,GAAID,EAAQL,WAAa,KAAM,CACpC,OAAOzX,GAAOtN,QAAQolB,EAAQL,WAAazX,GAAOnP,IAAIinB,EAAQL,WAAW,SAAUlkB,GACjF,OAAOU,EAAK+jB,gBAAgBzkB,MACzBU,EAAK+jB,gBAAgBF,EAAQL,gBAC7B,GAAIK,EAAQ5mB,MAAQ,KAAM,CAC/B,OAAO8O,GAAOtN,QAAQolB,EAAQ5mB,MAAQ8O,GAAOnP,IAAIinB,EAAQ5mB,MAAM,SAAUqC,GACvE,OAAOU,EAAKgkB,YAAY1kB,MACrBU,EAAKgkB,YAAYH,EAAQ5mB,OAyBlC,SAASgnB,KAEP,IAAIhmB,EAAM,gBAAkBimB,KAAqB,IAAM7f,KAAK8f,SAAS7Z,QAAQ,GAC7E,OAAO,SAAU8Z,GACf,OAAOA,EAAQnmB,KAASmmB,EAAQnmB,GAAO,KAI3C,IAAIimB,GAAmB,EAqCvB,SAASG,GAAYC,EAASC,EAAQtK,GACpC,GAAIlO,GAAO9K,SAASsjB,GAAS,CAC3B,IAAIrkB,EAAM,GACVA,EAAIqkB,EAAS,SAAW,EACxBA,EAASrkB,EAGX,IAAIskB,EAAkBvK,GAAOA,EAAIuK,gBAEjC,GAAIA,IAAoBC,GAAIF,EAAQC,EAAkB,WAAaC,GAAIF,EAAQC,EAAkB,QAAUC,GAAIF,EAAQC,EAAkB,QAAS,CAChJD,EAAOC,EAAkB,SAAW,EAGtC,IAAIlnB,EAAS,GACb2C,GAAKskB,GAAQ,SAAUjlB,EAAOrB,GAC5B,IAAIqB,EAAQilB,EAAOtmB,GAEnB,GAAIA,IAAQ,aAAeA,IAAQ,kBAAmB,CACpDX,EAAOW,GAAOqB,EACd,OAGF,IAAIolB,EAAYzmB,EAAI+L,MAAM,2BAA6B,GACvD,IAAI2a,EAAWD,EAAU,GACzB,IAAIE,GAAaF,EAAU,IAAM,IAAInM,cAErC,IAAKoM,IAAaC,GAAatlB,GAAS,MAAQslB,IAAc,SAAWtlB,IAAU,QAAU2a,GAAOA,EAAI4K,kBAAoB9Y,GAAO3M,QAAQ6a,EAAI4K,iBAAkBF,GAAY,EAAG,CAC9K,OAGF,IAAIG,EAAa,CACfH,SAAUA,GAGZ,GAAIC,IAAc,SAAWtlB,IAAU,MAAO,CAC5CwlB,EAAWF,GAAatlB,EAG1B,IAAIylB,EAAST,EAAQU,gBAAgBF,GACrCxnB,EAAOqnB,EAAW,UAAYI,EAC9BznB,EAAOqnB,EAAW,SAAWI,EAAO,MAEtC,OAAOznB,EAGT,SAASmnB,GAAIvkB,EAAKN,GAChB,OAAOM,GAAOA,EAAIhC,eAAe0B,GAGnC,SAASqlB,GAAaC,EAAKjnB,EAAKqB,GAC9B4lB,EAAID,aAAeC,EAAID,aAAahnB,EAAKqB,GAAS4lB,EAAIjnB,GAAOqB,EAG/D,SAAS6lB,GAAaD,EAAKjnB,GACzB,OAAOinB,EAAIC,aAAeD,EAAIC,aAAalnB,GAAOinB,EAAIjnB,GAGxD,SAASmnB,GAAqBC,GAC5B,GAAIA,IAAqB,OAAQ,CAE/B,OAAO5F,GAAIU,aAAe,OAAS,eAC9B,CACL,OAAOkF,GAAoB,QAgB/B,SAASC,GAAUjmB,EAAOkmB,GACxB,IAAIC,EAAUzZ,GAAO9I,gBACrB,IAAIwiB,EAAO,GACX1Z,GAAO9L,KAAKZ,GAAO,SAAUkjB,GAC3B,IAAItkB,EAAMsnB,EAAOhD,IAChBiD,EAAQziB,IAAI9E,KAASwnB,EAAKplB,KAAKpC,GAAMunB,EAAQ1iB,IAAI7E,EAAK,MAAMoC,KAAKkiB,MAEpE,MAAO,CACLkD,KAAMA,EACND,QAASA,GAIb,OAA2BpE,GAC3B,OAA0BC,GAC1B,OAA6BI,GAC7B,OAA2BC,GAC3B,OAA2BE,GAC3B,OAA0BC,GAC1B,OAAwBO,GACxB,OAA0BO,GAC1B,OAAoBR,GACpB,OAA0BU,GAC1B,OAAyBe,GACzB,OAAoBK,GACpB,OAAsBI,GACtB,OAAuBY,GACvB,OAAuBE,GACvB,OAA+BC,GAC/B,OAAoBE,uhBCtfpB,IAAII,GAAiB,IACrB,IAAIC,GAAe,iCAMnB,SAASC,GAAeC,GACtB,IAAIC,EAAM,CACRC,KAAM,GACN3hB,IAAK,IAGP,GAAIyhB,EAAe,CACjBA,EAAgBA,EAAcxT,MAAMqT,IACpCI,EAAIC,KAAOF,EAAc,IAAM,GAC/BC,EAAI1hB,IAAMyhB,EAAc,IAAM,GAGhC,OAAOC,EAOT,SAASE,GAAeH,GACtB9Z,GAAO9J,OAAO,qCAAqC6e,KAAK+E,GAAgB,kBAAoBA,EAAgB,aAO9G,SAASI,GAAkBC,EAAWC,GACpCD,EAAUE,aAAeF,EAEzBA,EAAUrnB,OAAS,SAAUwnB,GAC3B,IAAIxmB,EAAakB,KAEjB,IAAIulB,EAAgB,WAClB,IAAKD,EAAMD,aAAc,CACvBvmB,EAAWe,MAAMG,KAAMJ,eAClB,CACL0lB,EAAMD,aAAaxlB,MAAMG,KAAMJ,aAInCoL,GAAOlN,OAAOynB,EAAcrqB,UAAWoqB,GACvCC,EAAcznB,OAASkC,KAAKlC,OAC5BynB,EAAcC,UAAYA,GAC1BD,EAAcE,WAAaA,GAC3Bza,GAAOxM,SAAS+mB,EAAevlB,MAC/BulB,EAAczmB,WAAaA,EAC3B,OAAOymB,GAIX,IAAIG,GAAY,EAOhB,SAASC,GAAiBC,GACxB,IAAIC,EAAY,CAAC,aAAcH,KAAapiB,KAAK8f,SAAS7Z,QAAQ,IAAIgK,KAAK,KAC3EqS,EAAI1qB,UAAU2qB,GAAa,KAE3BD,EAAIE,WAAa,SAAU3mB,GACzB,SAAUA,GAAOA,EAAI0mB,KAUzB,SAASL,GAAUnmB,EAAS0mB,GAC1B,IAAIpmB,EAAOqL,GAAOrP,MAAMiE,UAAW,GACnC,OAAOI,KAAKlB,WAAW5D,UAAU6qB,GAAYlmB,MAAMR,EAASM,GAG9D,SAAS8lB,GAAWpmB,EAAS0mB,EAAYpmB,GACvC,OAAOK,KAAKlB,WAAW5D,UAAU6qB,GAAYlmB,MAAMR,EAASM,GAU9D,SAASqmB,GAAsBC,EAAQ7S,GACrCA,EAAUA,GAAW,GAUrB,IAAI8S,EAAU,GAEdD,EAAOE,cAAgB,SAAUC,EAAOtB,GACtC,GAAIA,EAAe,CACjBG,GAAeH,GACfA,EAAgBD,GAAeC,GAE/B,IAAKA,EAAczhB,IAAK,CACtB6iB,EAAQpB,EAAcE,MAAQoB,OACzB,GAAItB,EAAczhB,MAAQuhB,GAAc,CAC7C,IAAIyB,EAAYC,EAAcxB,GAC9BuB,EAAUvB,EAAczhB,KAAO+iB,GAInC,OAAOA,GAGTH,EAAOM,SAAW,SAAUC,EAAmBC,EAASC,GACtD,IAAIN,EAAQF,EAAQM,GAEpB,GAAIJ,GAASA,EAAMxB,IAAe,CAChCwB,EAAQK,EAAUL,EAAMK,GAAW,KAGrC,GAAIC,IAAsBN,EAAO,CAC/B,MAAM,IAAI/kB,OAAOolB,EAAUD,EAAoB,IAAM,4BAA8B,aAAeA,EAAoB,KAAOC,GAAW,IAAM,+BAGhJ,OAAOL,GAGTH,EAAOU,qBAAuB,SAAU7B,GACtCA,EAAgBD,GAAeC,GAC/B,IAAIvoB,EAAS,GACb,IAAI4C,EAAM+mB,EAAQpB,EAAcE,MAEhC,GAAI7lB,GAAOA,EAAIylB,IAAe,CAC5B5Z,GAAO9L,KAAKC,GAAK,SAAUynB,EAAGzmB,GAC5BA,IAASykB,IAAgBroB,EAAO+C,KAAKsnB,UAElC,CACLrqB,EAAO+C,KAAKH,GAGd,OAAO5C,GAGT0pB,EAAOY,SAAW,SAAU/B,GAE1BA,EAAgBD,GAAeC,GAC/B,QAASoB,EAAQpB,EAAcE,OAOjCiB,EAAOa,qBAAuB,WAC5B,IAAIC,EAAQ,GACZ/b,GAAO9L,KAAKgnB,GAAS,SAAU/mB,EAAKgB,GAClC4mB,EAAMznB,KAAKa,MAEb,OAAO4mB,GASTd,EAAOe,YAAc,SAAUlC,GAC7BA,EAAgBD,GAAeC,GAC/B,IAAI3lB,EAAM+mB,EAAQpB,EAAcE,MAChC,OAAO7lB,GAAOA,EAAIylB,KAGpBqB,EAAOpB,eAAiBA,GAExB,SAASyB,EAAcxB,GACrB,IAAIuB,EAAYH,EAAQpB,EAAcE,MAEtC,IAAKqB,IAAcA,EAAUzB,IAAe,CAC1CyB,EAAYH,EAAQpB,EAAcE,MAAQ,GAC1CqB,EAAUzB,IAAgB,KAG5B,OAAOyB,EAGT,GAAIjT,EAAQ6T,mBAAoB,CAC9B,IAAIC,EAAiBjB,EAAOnoB,OAE5B,GAAIopB,EAAgB,CAClBjB,EAAOnoB,OAAS,SAAUwnB,GACxB,IAAIC,EAAgB2B,EAAezqB,KAAKuD,KAAMslB,GAC9C,OAAOW,EAAOE,cAAcZ,EAAeD,EAAMnlB,QAKvD,OAAO8lB,EAOT,SAASkB,GAAYhoB,EAAKioB,IAgB1B,OAAyBvC,GACzB,OAA4BK,GAC5B,OAA2BS,GAC3B,OAAgCK,GAChC,OAAsBmB,+GCjPtB,IAAIE,GAAyB,WAC7B,IAAIC,GAA2B,YAC/B,IAAIC,GAA4B,aAChC,IAAIC,GAA8B,eAClC,IAAIC,GAAwB,UAE5B,IAAIC,GAA4B,aAChC,IAAIC,GAA0B,SAC9B,IAAIC,GAAuB,MAC3B,OAAiCP,GACjC,OAAmCC,GACnC,OAAoCC,GACpC,OAAsCC,GACtC,OAAgCC,GAChC,OAAoCC,GACpC,OAAkCC,GAClC,OAA+BC,uOCjC/B,IAAI1lB,GAAgB0O,GAAM1O,cAC1B,IAAI9B,GAAewQ,GAAMxQ,aAIzB,IAAIulB,GAAmBkC,GAAOlC,iBAI9B,IAAI0B,GAAyBS,GAAYT,uBACzC,IAAIM,GAA0BG,GAAYH,wBAC1C,IAAIF,GAAwBK,GAAYL,sBACxC,IAAIC,GAA4BI,GAAYJ,0BAC5C,IAAIF,GAA8BM,GAAYN,4BAqE9C,SAASO,GAAOC,GAIdhoB,KAAKioB,YAAcD,EAAOC,YAM1BjoB,KAAKf,KAAO+oB,EAAO/oB,OAAS+oB,EAAOE,eAAiBV,GAA8B,GAAK,IAOvFxnB,KAAKkoB,aAAeF,EAAOE,cAAgBT,GAO3CznB,KAAKmoB,eAAiBH,EAAOG,gBAAkBR,GAO/C3nB,KAAKooB,iBAAmBJ,EAAOI,iBAO/BpoB,KAAKqoB,aAAeL,EAAOK,cAAgBnmB,GAAc8lB,EAAOK,cAMhEroB,KAAKsoB,WAAaN,EAAOM,YAAc,EAMvCtoB,KAAKuoB,sBAAwBP,EAAOO,sBAOtCR,GAAOS,mBAAqB,SAAUvpB,GACpC,OAAO,IAAI8oB,GAAO,CAChB9oB,KAAMA,EACNipB,aAAc9nB,GAAanB,GAAQyoB,GAA4BL,GAC/DY,YAAa,SAIjBtC,GAAiBoC,IACjB,IAAI1f,GAAW0f,GACf,OAAiB1f,GCjJjB,IAAI6a,GAAYuF,GAAOvF,UACvB,IAAIvC,GAAmB8H,GAAO9H,iBAI9B,IAAIze,GAAgB0O,GAAM1O,cAC1B,IAAIhD,GAAO0R,GAAM1R,KACjB,IAAIrD,GAAM+U,GAAM/U,IAChB,IAAI6B,GAAUkT,GAAMlT,QACpB,IAAIwC,GAAW0Q,GAAM1Q,SACrB,IAAI3C,GAAWqT,GAAMrT,SACrB,IAAI6C,GAAewQ,GAAMxQ,aACzB,IAAIpB,GAAc4R,GAAM5R,YACxB,IAAIlB,GAAS8S,GAAM9S,OAOnB,IAAIupB,GAAyBS,GAAYT,uBACzC,IAAIC,GAA2BQ,GAAYR,yBAC3C,IAAIC,GAA4BO,GAAYP,0BAC5C,IAAIC,GAA8BM,GAAYN,4BAC9C,IAAIC,GAAwBK,GAAYL,sBACxC,IAAIC,GAA4BI,GAAYJ,0BAC5C,IAAIE,GAAuBE,GAAYF,qBAqBvC,IAAIc,GAAa,CACfC,KAAM,EAENC,MAAO,EAEPC,IAAK,GAGP,IAAIC,GAAQ5F,KAOZ,SAAS6F,GAAmBC,GAC1B,IAAI/pB,EAAO+pB,EAAaxL,OAAOlhB,OAC/B,IAAI4rB,EAAeT,GAEnB,GAAIrnB,GAAanB,GAAO,CACtBipB,EAAeR,QACV,GAAIhqB,GAAQuB,GAAO,CAExB,GAAIA,EAAKpC,SAAW,EAAG,CACrBqrB,EAAeZ,GAGjB,IAAK,IAAI3qB,EAAI,EAAGC,EAAMqC,EAAKpC,OAAQF,EAAIC,EAAKD,IAAK,CAC/C,IAAI6kB,EAAOviB,EAAKtC,GAEhB,GAAI6kB,GAAQ,KAAM,CAChB,cACK,GAAI9jB,GAAQ8jB,GAAO,CACxB0G,EAAeZ,GACf,WACK,GAAI/pB,GAASikB,GAAO,CACzB0G,EAAeX,GACf,aAGC,GAAIhqB,GAAS0B,GAAO,CACzB,IAAK,IAAI/B,KAAO+B,EAAM,CACpB,GAAIA,EAAK9B,eAAeD,IAAQ8B,GAAYC,EAAK/B,IAAO,CACtDgrB,EAAeV,GACf,aAGC,GAAIvoB,GAAQ,KAAM,CACvB,MAAM,IAAIoC,MAAM,gBAGlBynB,GAAME,GAAcd,aAAeA,EA2BrC,SAASe,GAAUC,GACjB,OAAOJ,GAAMI,GAAa5sB,OAQ5B,SAAS6sB,GAAqB5F,GAE5BuF,GAAMvF,GAAS6F,WAAalnB,KAoB9B,SAASmnB,GAAcH,GACrB,IAAII,EAAeJ,EAAY1L,OAC/B,IAAIve,EAAOqqB,EAAarqB,KACxB,IAAIipB,EAAe9nB,GAAanB,GAAQyoB,GAA4BL,GACpE,IAAIY,EAAc,MAClB,IAAIE,EAAiBmB,EAAanB,eAClC,IAAIoB,EAAeD,EAAaC,aAChC,IAAInB,EAAmBkB,EAAaE,WACpC,IAAIR,EAAeS,GAAgBP,GAEnC,GAAIF,EAAc,CAChB,IAAIU,EAAgBV,EAAaxL,OACjCve,EAAOyqB,EAAcptB,OACrB4rB,EAAeY,GAAME,GAAcd,aACnCD,EAAc,KAEdE,EAAiBA,GAAkBuB,EAAcvB,eACjDoB,GAAgB,OAASA,EAAeG,EAAcH,cACtDnB,EAAmBA,GAAoBsB,EAAcF,WAGvD,IAAIG,EAAiBC,GAAqB3qB,EAAMipB,EAAcC,EAAgBoB,EAAcnB,GAC5FU,GAAMI,GAAa5sB,OAAS,IAAIyrB,GAAO,CACrC9oB,KAAMA,EACNgpB,YAAaA,EACbE,eAAgBA,EAChBD,aAAcA,EACdE,iBAAkBuB,EAAevB,iBACjCE,WAAYqB,EAAerB,WAC3BC,sBAAuBoB,EAAepB,sBAEtCF,aAAciB,EAAa5Q,SAK/B,SAASkR,GAAqB3qB,EAAMipB,EAAcC,EAAgBoB,EAAcnB,GAC9E,IAAKnpB,EAAM,CACT,MAAO,CACLmpB,iBAAkByB,GAA0BzB,IAIhD,IAAIG,EACJ,IAAID,EAEJ,GAAIJ,IAAiBZ,GAA0B,CAK7C,GAAIiC,IAAiB,QAAUA,GAAgB,KAAM,CACnDO,IAAqB,SAAU7oB,GAE7B,GAAIA,GAAO,MAAQA,IAAQ,IAAK,CAC9B,GAAIf,GAASe,GAAM,CACjBqnB,GAAc,OAASA,EAAa,OAC/B,CACLA,EAAa,MAIhBH,EAAgBlpB,EAAM,QACpB,CACLqpB,EAAaiB,EAAe,EAAI,EAGlC,IAAKnB,GAAoBE,IAAe,EAAG,CACzCF,EAAmB,GACnB0B,IAAqB,SAAU7oB,EAAK+T,GAClCoT,EAAiBpT,GAAS/T,GAAO,KAAOA,EAAM,KAC7CknB,EAAgBlpB,GAGrBspB,EAAwBH,EAAmBA,EAAiBvrB,OAASsrB,IAAmBP,GAAuB3oB,EAAKpC,OAASoC,EAAK,GAAKA,EAAK,GAAGpC,OAAS,UACnJ,GAAIqrB,IAAiBX,GAA2B,CACrD,IAAKa,EAAkB,CACrBA,EAAmB2B,GAA4B9qB,SAE5C,GAAIipB,IAAiBV,GAA6B,CACvD,IAAKY,EAAkB,CACrBA,EAAmB,GACnBlpB,GAAKD,GAAM,SAAU+qB,EAAQ9sB,GAC3BkrB,EAAiB9oB,KAAKpC,YAGrB,GAAIgrB,IAAiBb,GAAwB,CAClD,IAAI1mB,EAASggB,GAAiB1hB,EAAK,IACnCspB,EAAwB7qB,GAAQiD,IAAWA,EAAO9D,QAAU,OAG9D,MAAO,CACLyrB,WAAYA,EACZF,iBAAkByB,GAA0BzB,GAC5CG,sBAAuBA,GAO3B,SAASsB,GAA0BzB,GACjC,IAAKA,EAAkB,CAErB,OAGF,IAAI6B,EAAU/nB,KACd,OAAOrG,GAAIusB,GAAkB,SAAU5G,EAAMxM,GAC3CwM,EAAO1jB,GAAO,GAAIP,GAASikB,GAAQA,EAAO,CACxCtlB,KAAMslB,IAKR,GAAIA,EAAKtlB,MAAQ,KAAM,CACrB,OAAOslB,EAITA,EAAKtlB,MAAQ,GAMb,GAAIslB,EAAK0I,aAAe,KAAM,CAC5B1I,EAAK0I,YAAc1I,EAAKtlB,KAG1B,IAAI+kB,EAAQgJ,EAAQjoB,IAAIwf,EAAKtlB,MAE7B,IAAK+kB,EAAO,CACVgJ,EAAQloB,IAAIyf,EAAKtlB,KAAM,CACrB4N,MAAO,QAEJ,CACL0X,EAAKtlB,MAAQ,IAAM+kB,EAAMnX,QAG3B,OAAO0X,KAIX,SAASsI,GAAqB1qB,EAAI+oB,EAAgBlpB,EAAMkrB,GACtDA,GAAW,OAASA,EAAUxc,UAE9B,GAAIwa,IAAmBP,GAAsB,CAC3C,IAAK,IAAIjrB,EAAI,EAAGA,EAAIsC,EAAKpC,QAAUF,EAAIwtB,EAASxtB,IAAK,CACnDyC,EAAGH,EAAKtC,GAAKsC,EAAKtC,GAAG,GAAK,KAAMA,QAE7B,CACL,IAAIgE,EAAS1B,EAAK,IAAM,GAExB,IAAK,IAAItC,EAAI,EAAGA,EAAIgE,EAAO9D,QAAUF,EAAIwtB,EAASxtB,IAAK,CACrDyC,EAAGuB,EAAOhE,GAAIA,KAKpB,SAASotB,GAA4B9qB,GACnC,IAAImrB,EAAa,EACjB,IAAIjrB,EAEJ,MAAOirB,EAAanrB,EAAKpC,UAAYsC,EAAMF,EAAKmrB,MAAgB,EAGhE,GAAIjrB,EAAK,CACP,IAAIqqB,EAAa,GACjBtqB,GAAKC,GAAK,SAAUZ,EAAOrB,GACzBssB,EAAWlqB,KAAKpC,MAElB,OAAOssB,GAuBX,SAASa,GAAgCC,EAAiBpB,EAAa5sB,GACrE,IAAIoc,EAAS,GACb,IAAIsQ,EAAeS,GAAgBP,GAEnC,IAAKF,IAAiBsB,EAAiB,CACrC,OAAO5R,EAGT,IAAI6R,EAAiB,GACrB,IAAIC,EAAmB,GACvB,IAAIjH,EAAU2F,EAAY3F,QAC1B,IAAI6F,EAAaN,GAAMvF,GAAS6F,WAChC,IAAIlsB,EAAM8rB,EAAayB,IAAM,IAAMnuB,EAAO6rB,eAC1C,IAAIuC,EACJ,IAAIC,EACJL,EAAkBA,EAAgB3uB,QAClCuD,GAAKorB,GAAiB,SAAUM,EAAcC,IAC3CttB,GAASqtB,KAAkBN,EAAgBO,GAAe,CACzD3uB,KAAM0uB,IAGR,GAAIA,EAAazqB,OAAS,WAAauqB,GAAwB,KAAM,CACnEA,EAAuBG,EACvBF,EAA2BG,EAA0BR,EAAgBO,IAGvEnS,EAAOkS,EAAa1uB,MAAQ,MAE9B,IAAI6uB,EAAgB3B,EAAWpnB,IAAI9E,IAAQksB,EAAWrnB,IAAI7E,EAAK,CAC7D8tB,eAAgBL,EAChBM,YAAa,IAIf/rB,GAAKorB,GAAiB,SAAUM,EAAcC,GAC5C,IAAIK,EAAeN,EAAa1uB,KAChC,IAAI4N,EAAQghB,EAA0BF,GAEtC,GAAIF,GAAwB,KAAM,CAChC,IAAIS,EAAQJ,EAAcE,YAC1BG,EAAQ1S,EAAOwS,GAAeC,EAAOrhB,GACrCshB,EAAQZ,EAAkBW,EAAOrhB,GACjCihB,EAAcE,aAAenhB,OAO1B,GAAI4gB,IAAyBG,EAAa,CAC3CO,EAAQ1S,EAAOwS,GAAe,EAAGphB,GACjCshB,EAAQb,EAAgB,EAAGzgB,OAExB,CACD,IAAIqhB,EAAQJ,EAAcC,eAC1BI,EAAQ1S,EAAOwS,GAAeC,EAAOrhB,GACrCshB,EAAQZ,EAAkBW,EAAOrhB,GACjCihB,EAAcC,gBAAkBlhB,MAIxC,SAASshB,EAAQC,EAAWC,EAASC,GACnC,IAAK,IAAI5uB,EAAI,EAAGA,EAAI4uB,EAAU5uB,IAAK,CACjC0uB,EAAU/rB,KAAKgsB,EAAU3uB,IAI7B,SAASmuB,EAA0BF,GACjC,IAAIY,EAAUZ,EAAaY,QAC3B,OAAOA,EAAUA,EAAQ3uB,OAAS,EAGpC0tB,EAAe1tB,SAAW6b,EAAO+S,SAAWlB,GAC5CC,EAAiB3tB,SAAW6b,EAAOgT,WAAalB,GAChD,OAAO9R,EAWT,SAASiT,GAA6BzC,EAAa5sB,EAAQsvB,GACzD,IAAIlT,EAAS,GACb,IAAIsQ,EAAeS,GAAgBP,GAEnC,IAAKF,EAAc,CACjB,OAAOtQ,EAGT,IAAIwP,EAAe5rB,EAAO4rB,aAC1B,IAAIE,EAAmB9rB,EAAO8rB,iBAC9B,IAAIyD,EAEJ,GAAI3D,IAAiBX,IAA6BW,IAAiBV,GAA6B,CAC9FtoB,GAAKkpB,GAAkB,SAAU0D,EAAKhhB,GACpC,IAAKvN,GAASuuB,GAAOA,EAAI5vB,KAAO4vB,KAAS,OAAQ,CAC/CD,EAAwB/gB,MAM9B,IAAIihB,EAAY,WACd,IAAIC,EAAU,GACd,IAAIC,EAAU,GACd,IAAIC,EAAe,GAEnB,IAAK,IAAIvvB,EAAI,EAAGC,EAAM0G,KAAKoB,IAAI,EAAGknB,GAAWjvB,EAAIC,EAAKD,IAAK,CACzD,IAAIwvB,EAAcC,GAAe9vB,EAAO2C,KAAMipB,EAAc5rB,EAAO6rB,eAAgBC,EAAkB9rB,EAAOgsB,WAAY3rB,GACxHuvB,EAAa5sB,KAAK6sB,GAClB,IAAIE,EAAeF,IAAgBzD,GAAWG,IAI9C,GAAIwD,GAAgBL,EAAQhpB,GAAK,MAAQrG,IAAMkvB,EAAuB,CACpEG,EAAQhpB,EAAIrG,EAGd,GAAIqvB,EAAQM,GAAK,MAAQN,EAAQM,IAAMN,EAAQhpB,IAAMqpB,GAAgBH,EAAaF,EAAQM,KAAO5D,GAAWG,IAAK,CAC/GmD,EAAQM,EAAI3vB,EAGd,GAAI4vB,EAAUP,IAAYE,EAAaF,EAAQM,KAAO5D,GAAWG,IAAK,CACpE,OAAOmD,EAST,IAAKK,EAAc,CACjB,GAAIF,IAAgBzD,GAAWE,OAASqD,EAAQjpB,GAAK,MAAQrG,IAAMkvB,EAAuB,CACxFI,EAAQjpB,EAAIrG,EAGd,GAAIsvB,EAAQK,GAAK,MAAQL,EAAQK,IAAML,EAAQjpB,EAAG,CAChDipB,EAAQK,EAAI3vB,IAKlB,SAAS4vB,EAAUR,GACjB,OAAOA,EAAU/oB,GAAK,MAAQ+oB,EAAUO,GAAK,KAG/C,OAAOC,EAAUP,GAAWA,EAAUO,EAAUN,GAAWA,EAAU,KA7CvD,GAgDhB,GAAIF,EAAW,CACbrT,EAAOna,MAAQwtB,EAAU/oB,EAEzB,IAAIwpB,EAAeX,GAAyB,KAAOA,EAAwBE,EAAUO,EAGrF5T,EAAO+S,SAAW,CAACe,GACnB9T,EAAOgT,WAAa,CAACc,GAGvB,OAAO9T,EAOT,SAAS+Q,GAAgBP,GACvB,IAAI1L,EAAS0L,EAAY1L,OAMzB,IAAIiP,EAAWjP,EAAOve,KAEtB,IAAKwtB,EAAU,CACb,OAAOvD,EAAY3F,QAAQmJ,aAAa,UAAWlP,EAAOmP,cAAgB,IAc9E,SAASC,GAAatwB,EAAQuwB,GAC5B,OAAOT,GAAe9vB,EAAO2C,KAAM3C,EAAO4rB,aAAc5rB,EAAO6rB,eAAgB7rB,EAAO8rB,iBAAkB9rB,EAAOgsB,WAAYuE,GAK7H,SAAST,GAAentB,EAAMipB,EAAcC,EAAgBC,EAAkBE,EAAYuE,GACxF,IAAItwB,EAEJ,IAAI4tB,EAAU,EAEd,GAAI/pB,GAAanB,GAAO,CACtB,OAAOypB,GAAWG,IAKpB,IAAIiE,EACJ,IAAIC,EAEJ,GAAI3E,EAAkB,CACpB,IAAI4E,EAAa5E,EAAiByE,GAElC,GAAItvB,GAASyvB,GAAa,CACxBF,EAAUE,EAAW9wB,KACrB6wB,EAAUC,EAAW7sB,UAChB,GAAID,GAAS8sB,GAAa,CAC/BF,EAAUE,GAId,GAAID,GAAW,KAAM,CACnB,OAAOA,IAAY,UAAYrE,GAAWC,KAAOD,GAAWG,IAG9D,GAAIX,IAAiBZ,GAA0B,CAC7C,GAAIa,IAAmBP,GAAsB,CAC3C,IAAIqF,EAAShuB,EAAK4tB,GAElB,IAAK,IAAIlwB,EAAI,EAAGA,GAAKswB,GAAU,IAAIpwB,QAAUF,EAAIwtB,EAASxtB,IAAK,CAC7D,IAAKJ,EAAS2wB,EAAYD,EAAO3E,EAAa3rB,MAAQ,KAAM,CAC1D,OAAOJ,QAGN,CACL,IAAK,IAAII,EAAI,EAAGA,EAAIsC,EAAKpC,QAAUF,EAAIwtB,EAASxtB,IAAK,CACnD,IAAIwwB,EAAMluB,EAAKqpB,EAAa3rB,GAE5B,GAAIwwB,IAAQ5wB,EAAS2wB,EAAYC,EAAIN,MAAe,KAAM,CACxD,OAAOtwB,UAIR,GAAI2rB,IAAiBX,GAA2B,CACrD,IAAKuF,EAAS,CACZ,OAAOpE,GAAWG,IAGpB,IAAK,IAAIlsB,EAAI,EAAGA,EAAIsC,EAAKpC,QAAUF,EAAIwtB,EAASxtB,IAAK,CACnD,IAAI6kB,EAAOviB,EAAKtC,GAEhB,GAAI6kB,IAASjlB,EAAS2wB,EAAY1L,EAAKsL,MAAc,KAAM,CACzD,OAAOvwB,SAGN,GAAI2rB,IAAiBV,GAA6B,CACvD,IAAKsF,EAAS,CACZ,OAAOpE,GAAWG,IAGpB,IAAIoE,EAAShuB,EAAK6tB,GAElB,IAAKG,GAAU7sB,GAAa6sB,GAAS,CACnC,OAAOvE,GAAWG,IAGpB,IAAK,IAAIlsB,EAAI,EAAGA,EAAIswB,EAAOpwB,QAAUF,EAAIwtB,EAASxtB,IAAK,CACrD,IAAKJ,EAAS2wB,EAAYD,EAAOtwB,MAAQ,KAAM,CAC7C,OAAOJ,SAGN,GAAI2rB,IAAiBb,GAAwB,CAClD,IAAK,IAAI1qB,EAAI,EAAGA,EAAIsC,EAAKpC,QAAUF,EAAIwtB,EAASxtB,IAAK,CACnD,IAAI6kB,EAAOviB,EAAKtC,GAChB,IAAIsE,EAAM0f,GAAiBa,GAE3B,IAAK9jB,GAAQuD,GAAM,CACjB,OAAOynB,GAAWG,IAGpB,IAAKtsB,EAAS2wB,EAAYjsB,EAAI4rB,MAAe,KAAM,CACjD,OAAOtwB,IAKb,SAAS2wB,EAAYjsB,GACnB,IAAImsB,EAAQltB,GAASe,GAGrB,GAAIA,GAAO,MAAQ0J,SAAS1J,IAAQA,IAAQ,GAAI,CAC9C,OAAOmsB,EAAQ1E,GAAWE,MAAQF,GAAWG,SACxC,GAAIuE,GAASnsB,IAAQ,IAAK,CAC/B,OAAOynB,GAAWC,MAItB,OAAOD,GAAWG,IAGpB,OAAqBH,GACrB,OAA6BK,GAC7B,OAAoBE,GACpB,OAA+BE,GAC/B,OAAwBE,GACxB,OAA0CgB,GAC1C,OAAuCsB,GACvC,OAAuBiB,yLC3pBvB,IAAI1tB,GAAO0R,GAAM1R,KACjB,IAAIgD,GAAgB0O,GAAM1O,cAyB1B,IAAImrB,GAAmBnrB,GAAc,CAAC,UAAW,QAAS,WAAY,SAAU,eAEhF,SAASorB,GAAoBruB,GAC3B,IAAIsuB,EAAU,GACd,IAAI7U,EAAS6U,EAAQ7U,OAAS,GAC9B,IAAI8U,EAAsBtrB,KAC1B,IAAIurB,EAAiB,GACrB,IAAIC,EAAmB,GAEvB,IAAIC,EAAaJ,EAAQI,WAAa,CACpCC,eAAgB3uB,EAAKuqB,WAAW7tB,QAChC+c,OAAQ,IAEVxZ,GAAKD,EAAKuqB,YAAY,SAAUsD,GAC9B,IAAIe,EAAU5uB,EAAK6uB,iBAAiBhB,GACpC,IAAIiB,EAAWF,EAAQE,SAEvB,GAAIA,EAAU,CACZ,IAAIC,EAAgBH,EAAQG,cAC5BC,GAAqBvV,EAAQqV,GAAUC,GAAiBlB,EAExD,IAAKe,EAAQK,aAAc,CACzBV,EAAoBzrB,IAAIgsB,EAAU,GAKlC,GAAII,GAAgBN,EAAQ1tB,MAAO,CACjCstB,EAAe,GAAKX,EAKtBmB,GAAqBN,EAAWjV,OAAQqV,GAAUC,GAAiBH,EAAQ7Y,MAG7E,GAAI6Y,EAAQO,eAAgB,CAC1BV,EAAiBpuB,KAAKwtB,IAI1BO,GAAiBnuB,MAAK,SAAU8D,EAAGqrB,GACjC,IAAIC,EAAYL,GAAqBvV,EAAQ2V,GAC7C,IAAIxB,EAAWgB,EAAQU,UAAUF,GAEjC,GAAIxB,GAAY,MAAQA,IAAa,MAAO,CAC1CyB,EAAUzB,GAAYgB,EAAQ3xB,YAIpC,IAAIsyB,EAAkB,GACtB,IAAIC,EAAyB,GAC7BjB,EAAoBtuB,MAAK,SAAU8D,EAAG+qB,GACpC,IAAIW,EAAShW,EAAOqV,GAIpBU,EAAuBV,GAAYW,EAAO,GAG1CF,EAAkBA,EAAgB1uB,OAAO4uB,MAE3CnB,EAAQiB,gBAAkBA,EAC1BjB,EAAQkB,uBAAyBA,EACjC,IAAIE,EAAcjW,EAAOkW,MAGzB,GAAID,GAAeA,EAAY9xB,OAAQ,CACrC4wB,EAAiBkB,EAAYhzB,QAG/B,IAAIkzB,EAAgBnW,EAAOoW,QAE3B,GAAID,GAAiBA,EAAchyB,OAAQ,CACzC6wB,EAAmBmB,EAAclzB,aAC5B,IAAK+xB,EAAiB7wB,OAAQ,CACnC6wB,EAAmBD,EAAe9xB,QAGpC+c,EAAO+U,eAAiBA,EACxB/U,EAAOgV,iBAAmBA,EAC1B,OAAOH,EAGT,SAASU,GAAqBvV,EAAQoT,GACpC,IAAKpT,EAAOvb,eAAe2uB,GAAM,CAC/BpT,EAAOoT,GAAO,GAGhB,OAAOpT,EAAOoT,GAGhB,SAASiD,GAAuBC,GAC9B,OAAOA,IAAa,WAAa,UAAYA,IAAa,OAAS,OAAS,QAG9E,SAASb,GAAgBpB,GAGvB,QAASA,IAAY,WAAaA,IAAY,QAehD,OAA2BM,GAC3B,OAA8BC,GAC9B,OAAiCyB,iFCvHjC,SAASE,GAAkB/V,GACzB,GAAIA,GAAO,KAAM,CACflO,GAAOlN,OAAOkC,KAAMkZ,GAsFtBlZ,KAAKuuB,UAAY,GAsBnB,IAAIlmB,GAAW4mB,GACf,OAAiB5mB,GCtIjB,IAAInG,GAAgB0O,GAAM1O,cAC1B,IAAIhD,GAAO0R,GAAM1R,KACjB,IAAIgB,GAAW0Q,GAAM1Q,SACrB,IAAInC,GAAW6S,GAAM7S,SACrB,IAAID,GAAS8S,GAAM9S,OACnB,IAAIP,GAAWqT,GAAMrT,SACrB,IAAIlB,GAAQuU,GAAMvU,MAIlB,IAAIgkB,GAAmBoI,GAAOpI,iBAI9B,IAAIuM,GAAesC,GAActC,aACjC,IAAIlE,GAAawG,GAAcxG,WAM/B,IAAI2E,GAAmB8B,GAAiB9B,iBAmExC,SAAS+B,GAAmBC,EAAS/yB,EAAQ4c,GAC3C,IAAK6O,GAAOjC,WAAWxpB,GAAS,CAC9BA,EAASyrB,GAAOS,mBAAmBlsB,GAGrC4c,EAAMA,GAAO,GACbmW,GAAWA,GAAW,IAAI1zB,QAC1B,IAAI6vB,GAAWtS,EAAIsS,SAAW,IAAI7vB,QAClC,IAAI2zB,EAAiBptB,KACrB,IAAIqtB,EAAkBrtB,KAEtB,IAAI3F,EAAS,GACb,IAAIqvB,EAAW4D,GAAYlzB,EAAQ+yB,EAAS7D,EAAStS,EAAI0S,UAEzD,IAAK,IAAIjvB,EAAI,EAAGA,EAAIivB,EAAUjvB,IAAK,CACjC,IAAIqwB,EAAaxB,EAAQ7uB,GAAKmB,GAAO,GAAIP,GAASiuB,EAAQ7uB,IAAM6uB,EAAQ7uB,GAAK,CAC3ET,KAAMsvB,EAAQ7uB,KAEhB,IAAI8yB,EAAczC,EAAW9wB,KAC7B,IAAIwzB,EAAanzB,EAAOI,GAAK,IAAIsyB,GAEjC,GAAIQ,GAAe,MAAQH,EAAettB,IAAIytB,IAAgB,KAAM,CAIlEC,EAAWxzB,KAAOwzB,EAAWxF,YAAcuF,EAC3CH,EAAevtB,IAAI0tB,EAAa9yB,GAGlCqwB,EAAW7sB,MAAQ,OAASuvB,EAAWvvB,KAAO6sB,EAAW7sB,MACzD6sB,EAAW9C,aAAe,OAASwF,EAAWxF,YAAc8C,EAAW9C,aAGzE,IAAIyF,EAAYzW,EAAIyW,UAEpB,IAAKA,GAAazW,EAAI0W,gBAAiB,CACrCD,EAAYzW,EAAI0W,gBAAgBtzB,EAAQsvB,GAG1C+D,EAAYztB,GAAcytB,GAE1BA,EAAUzwB,MAAK,SAAU2wB,EAAU9B,GACjC8B,EAAWxP,GAAiBwP,GAAUl0B,QAItC,GAAIk0B,EAAShzB,SAAW,IAAMqD,GAAS2vB,EAAS,KAAOA,EAAS,GAAK,EAAG,CACtEF,EAAU5tB,IAAIgsB,EAAU,OACxB,OAGF,IAAI+B,EAAgBH,EAAU5tB,IAAIgsB,EAAU,IAC5C7uB,GAAK2wB,GAAU,SAAUE,EAAcjlB,GAErC5K,GAAS6vB,KAAkBA,EAAeT,EAAettB,IAAI+tB,IAE7D,GAAIA,GAAgB,MAAQA,EAAenE,EAAU,CACnDkE,EAAchlB,GAAOilB,EACrBC,EAASzzB,EAAOwzB,GAAehC,EAAUjjB,UAK/C,IAAImlB,EAAc,EAClB/wB,GAAKmwB,GAAS,SAAUa,EAAYC,GAClC,IAAIpC,EACJ,IAAImC,EACJ,IAAIE,EACJ,IAAIC,EAEJ,GAAInwB,GAASgwB,GAAa,CACxBnC,EAAWmC,EACXA,EAAa,OACR,CACLnC,EAAWmC,EAAWh0B,KACtB,IAAIo0B,EAAcJ,EAAWI,YAC7BJ,EAAWI,YAAc,KACzBJ,EAAa7zB,GAAM6zB,GACnBA,EAAWI,YAAcA,EAEzBF,EAAoBF,EAAW1E,QAC/B6E,EAAsBH,EAAW3B,UACjC2B,EAAWh0B,KAAOg0B,EAAWnC,SAAWmC,EAAWlC,cAAgBkC,EAAW1E,QAAU0E,EAAW3B,UAAY,KAGjH,IAAIsB,EAAWF,EAAU3tB,IAAI+rB,GAE7B,GAAI8B,IAAa,MAAO,CACtB,OAGF,IAAIA,EAAWxP,GAAiBwP,GAEhC,IAAKA,EAAShzB,OAAQ,CACpB,IAAK,IAAIF,EAAI,EAAGA,GAAKyzB,GAAqBA,EAAkBvzB,QAAU,GAAIF,IAAK,CAC7E,MAAOszB,EAAc1zB,EAAOM,QAAUN,EAAO0zB,GAAalC,UAAY,KAAM,CAC1EkC,IAGFA,EAAc1zB,EAAOM,QAAUgzB,EAASvwB,KAAK2wB,MAKjD/wB,GAAK2wB,GAAU,SAAUE,EAAc/B,GACrC,IAAI0B,EAAanzB,EAAOwzB,GACxBC,EAASjyB,GAAS2xB,EAAYQ,GAAanC,EAAUC,GAErD,GAAI0B,EAAWxzB,MAAQ,MAAQk0B,EAAmB,CAChD,IAAIG,EAAwBH,EAAkBpC,IAC7CzwB,GAASgzB,KAA2BA,EAAwB,CAC3Dr0B,KAAMq0B,IAERb,EAAWxzB,KAAOwzB,EAAWxF,YAAcqG,EAAsBr0B,KACjEwzB,EAAWtB,eAAiBmC,EAAsBnC,eAIpDiC,GAAuBtyB,GAAS2xB,EAAWnB,UAAW8B,SAI1D,SAASL,EAASN,EAAY3B,EAAUC,GACtC,GAAIX,GAAiBrrB,IAAI+rB,IAAa,KAAM,CAC1C2B,EAAWnB,UAAUR,GAAYC,MAC5B,CACL0B,EAAW3B,SAAWA,EACtB2B,EAAW1B,cAAgBA,EAC3BuB,EAAgBxtB,IAAIgsB,EAAU,OAKlC,IAAIyC,EAAgBtX,EAAIsX,cACxB,IAAIC,EAAqBvX,EAAIuX,mBAC7B,IAAIC,EAAWD,GAAsB,KACrCA,EAAqBD,EAAgBC,GAAsB,EAAI,EAC/D,IAAIE,EAAQH,GAAiB,QAE7B,IAAK,IAAIT,EAAe,EAAGA,EAAenE,EAAUmE,IAAgB,CAClE,IAAIL,EAAanzB,EAAOwzB,GAAgBxzB,EAAOwzB,IAAiB,IAAId,GACpE,IAAIlB,EAAW2B,EAAW3B,SAE1B,GAAIA,GAAY,KAAM,CACpB2B,EAAW3B,SAAW6C,GAAQD,EAAOpB,EAAiBmB,GACtDhB,EAAW1B,cAAgB,EAE3B,IAAKwC,GAAiBC,GAAsB,EAAG,CAC7Cf,EAAWxB,aAAe,KAG5BuC,IAGFf,EAAWxzB,MAAQ,OAASwzB,EAAWxzB,KAAO00B,GAAQlB,EAAW3B,SAAUuB,IAE3E,GAAII,EAAWvvB,MAAQ,OAASysB,GAAatwB,EAAQyzB,EAAcL,EAAWxzB,QAAUwsB,GAAWC,MAYhG+G,EAAWxB,eAAiBwB,EAAWnB,UAAU9C,UAAY,MAAQiE,EAAWnB,UAAU7C,YAAc,OAAQ,CACjHgE,EAAWvvB,KAAO,WAItB,OAAO5D,EAaT,SAASizB,GAAYlzB,EAAQ+yB,EAAS7D,EAASqF,GAG7C,IAAIjF,EAAWtoB,KAAKqB,IAAIrI,EAAOisB,uBAAyB,EAAG8G,EAAQxyB,OAAQ2uB,EAAQ3uB,OAAQg0B,GAAe,GAC1G3xB,GAAKmwB,GAAS,SAAUa,GACtB,IAAIE,EAAoBF,EAAW1E,QACnC4E,IAAsBxE,EAAWtoB,KAAKqB,IAAIinB,EAAUwE,EAAkBvzB,YAExE,OAAO+uB,EAGT,SAASgF,GAAQ10B,EAAML,EAAK60B,GAC1B,GAAIA,GAAY70B,EAAImG,IAAI9F,IAAS,KAAM,CACrC,IAAIS,EAAI,EAER,MAAOd,EAAImG,IAAI9F,EAAOS,IAAM,KAAM,CAChCA,IAGFT,GAAQS,EAGVd,EAAIkG,IAAI7F,EAAM,MACd,OAAOA,EAGT,IAAImM,GAAW+mB,GACf,OAAiB/mB,GChUjByoB,EAAQC,kBAAkB,CACxB5wB,KAAM,mBAEN6wB,sBAAuB,yBAEvBC,cAAe,iBACTzT,EAASxd,KAAKwd,OAClBA,EAAO0T,SAAW5tB,KAAKqB,IAAIrB,KAAKkH,MAAMgT,EAAO0T,UAAW,IAG1DC,eAAgB,WAAU3T,EAAQ+F,OAC5BiG,EAAa4F,GAAmB,CAAC,SAAU5R,EAAOve,UAClDuO,EAAO,IAAIsjB,EAAQM,KAAK5H,EAAYxpB,MACxCwN,EAAK6jB,SAAS7T,EAAOve,aACduO,GAIT8jB,cAAe,CACbC,UAAW,KAGXC,MAAO,SAEPnV,KAAM,SAENC,IAAK,SAEL3V,MAAO,MAEPC,OAAQ,MAER6qB,UAAW,CAAC,GAAI,IAEhBC,cAAe,EAAE,GAAI,IAErBC,aAAc,GAEdT,SAAU,EAEVU,eAAgB,MAEhBC,UAAW,CACTC,OAAQ,CACN3a,WAAY,cCzCpB2Z,EAAQiB,gBAAgB,CACtB5xB,KAAM,YAEN6xB,OAAQ,WAAU9I,EAAa3F,EAAS0O,OAClCxX,EAAQza,KAAKya,MACjBA,EAAMyX,gBAEFjzB,EAAOiqB,EAAYiJ,cAEnBjB,EAAWhI,EAAYlnB,IAAI,YAE/BknB,EAAYkJ,eAAeC,OAAS,SAAUlhB,EAAMmhB,EAAMC,EAASC,OAC7DC,EAAYxzB,EAAKyzB,aAAaH,OAC9BI,EAAiBF,EAAUG,SAAS,wBACpCC,EAAyBJ,EAAUG,SAAS,0BAE5CE,EAAS,IAAIhC,EAAQiC,QAAQC,KAAK,CACpCrgB,MAAOme,EAAQiC,QAAQE,aAAa,GAAIN,EAAgB,CACtD/vB,EAAG4vB,EAAMU,KAAKC,gBACdtwB,EAAG2vB,EAAMU,KAAKE,gBAAkBd,EAAO,GACvCnhB,KAAMA,EACNkiB,aAAc,SACdC,SAAUr0B,EAAKs0B,cAAchB,EAAS,SACtCvb,SAAUsb,IAEZzuB,MAAO,CAAC,EAAI2uB,EAAMU,KAAKM,GAAI,EAAIhB,EAAMU,KAAKM,IAC1CxY,SAAU,EACPwX,EAAMiB,GAAKjB,EAAMU,KAAKQ,GAAK,GAAKxC,GAChCsB,EAAMmB,GAAKnB,EAAMU,KAAKU,GAAK,GAAK1C,GAEnC2C,SAAUrB,EAAMsB,MAGlBrZ,EAAMxX,IAAI6vB,GAEV7zB,EAAK80B,iBAAiBxB,EAASO,GAE/BhC,EAAQiC,QAAQiB,cACdlB,EACAhC,EAAQiC,QAAQE,aAAa,GAAIJ,EAAwB,KAAM,CAAEoB,SAAU,MAAQ,aAIlFxL,OAASS,GAGhBra,OAAQ,kBACD4L,MAAMyX,iBAENzJ,OAAO2J,eAAe8B,WAG7BA,QAAS,kBACFzL,OAAO2J,eAAe8B,oCChD/B,IAAKhU,OAAOiU,aAAc,CACxBjU,OAAOiU,aAAgB,SAASC,WACvBlU,OAAOmU,gBACdnU,OAAOoU,oBACPpU,OAAOqU,iBACPrU,OAAOsU,eACN,SAASC,QACHvU,OAAOwU,cAAgBxU,OAAOyU,iBAAkB,QAC5C,SAGLC,EAAY,CAACC,eACbzzB,EAAU,2BAKV0zB,EAAiB,SAASA,EAAeC,OACvC5T,EAAKyT,EAAU/3B,OACnB+3B,EAAUt1B,KAAKy1B,GACf7U,OAAOwU,YAAYtzB,EAAU+f,EAAGhmB,SAAS,IAAK,YAEvCgmB,GAGTjB,OAAOyU,iBAAiB,WAAW,SAASK,EAAsBC,aAGrDA,EAAIh2B,OAAS,UACpBg2B,EAAIh2B,KAAKmV,OAAO,EAAGhT,EAAQvE,UAAYuE,EACb,QAI9B6zB,EAAIC,+BAEA/T,EAAK1K,SAASwe,EAAIh2B,KAAKmV,OAAOhT,EAAQvE,QAAS,QAC9C+3B,EAAUzT,GAAK,QAIpByT,EAAUzT,KACVyT,EAAUzT,GAAM0T,YACf,MAGH3U,OAAOiV,eAAiB,SAASC,EAAiBjU,OAC3CyT,EAAUzT,GAAK,QAIpByT,EAAUzT,GAAM0T,kBAGXC,EAhDR,aAmDQO,EAAqBl5B,GAC5B+jB,OAAOoV,WAAWn5B,EAAI,IAzDH,GA8DzB,IAAK+jB,OAAOiV,eAAgB,CAC1BjV,OAAOiV,eAAkB,SAASI,WACzBrV,OAAOsV,kBACdtV,OAAOuV,sBACPvV,OAAOwV,mBACPxV,OAAOyV,0BAGEC,EAAuBC,GAC9B3V,OAAO4V,aAAaD,IARC,IAa3B,SAAUE,OAGJC,EAAe,SAASA,QACtBC,EAAS/3B,SAASC,cAAc,cAC/B83B,IAAWA,EAAO73B,WAAY,QAC1B,UAGLoW,EAAMyhB,EAAO73B,WAAW,UACvBoW,EAAI0hB,aAAc,QACd,UAEJ1hB,EAAI2hB,SAAU,QACV,UAGJ96B,MAAMH,UAAUk7B,KAAM,QAClB,UAEJ/6B,MAAMH,UAAUoE,KAAM,QAClB,aAGF,KArBU,OA0Bf+2B,EAAe,SAASC,QACrBN,EAAa,YAIdxhB,EAAMtW,SAASC,cAAc,UAAUC,WAAW,UAGlDk0B,EAAO,OAGPiE,EAAUC,QAEPlE,EAAM,CACX9d,EAAIpD,KAAOkhB,EAAKn3B,SAAS,IAAM,mBAC1BqZ,EAAIhD,YAAY,KAAU7K,QAAU4vB,GACpC/hB,EAAIhD,YAAY,KAAK7K,QAAW6vB,EAAQ,QACnClE,EAAO,EAGjBiE,EAAW/hB,EAAIhD,YAAY,KAAU7K,MACrC6vB,EAAShiB,EAAIhD,YAAY,KAAK7K,MAE9B2rB,WAGK,EA1BU,OA8BfmE,EAAe,SAASA,EAAahtB,OAClC,IAAIwK,EAAGrR,EAAGjG,EAAI8M,EAAI5M,OAAQF,EAC7BsX,EAAI3Q,KAAKkH,MAAMlH,KAAK8f,SAAWzmB,GAC/BiG,EAAI6G,IAAM9M,GAAI8M,EAAI9M,GAAK8M,EAAIwK,GAC3BxK,EAAIwK,GAAKrR,EAAG,SACP6G,OAGLitB,EAAY,SAASA,EAAUC,EAAUvjB,OACtC4iB,EAAa,YAIb36B,MAAMqC,QAAQi5B,GAAW,CAC5BA,EAAW,CAACA,GAGdA,EAASp7B,SAAQ,SAASshB,EAAIlgB,aACjBkgB,IAAO,SAAU,CAC1B8Z,EAASh6B,GAAKuB,SAAS04B,eAAe/Z,OACjC8Z,EAASh6B,GAAI,MACV,+CAEH,IAAKkgB,EAAGga,UAAYha,EAAGia,YAAa,MACnC,mEAKNC,EAAW,CACbvpB,KAAM,GACNyJ,WAAY,wCACA,wDACZE,WAAY,SACZiC,MAAO,cACP4d,QAAS,EACTC,aAAc,EACdC,YAAa,KACbC,gBAAiB,OAEjBjG,SAAU,EACVU,eAAgB,MAChBwF,OAAQ,KAERC,SAAU,MACVC,UAAW,oBACXC,aAAc,GAEdC,KAAM,EACNC,eAAgB,EAChBC,MAAO,SAASl1B,MAEhBm1B,aAAer0B,KAAK2I,GAAK,EACzB2rB,YAAat0B,KAAK2I,GAAK,EACvB0lB,aAAc,GAEdkG,QAAS,KACTC,YAAa,GAEbtG,MAAO,SACPuG,YAAa,IAEbC,QAAS,KAETC,MAAO,KACPC,MAAO,SAGL9kB,EAAS,KACN,IAAIlW,KAAOkW,EAAS,IACnBlW,KAAO65B,EAAU,CACnBA,EAAS75B,GAAOkW,EAAQlW,eAMnB65B,EAASE,eAAiB,WAAY,KAC3CkB,EAASpB,EAASE,aACtBF,EAASE,aAAe,SAASA,EAAamB,UACrCA,EAAKD,aAKLpB,EAASvF,QAAU,WAAY,QAChCuF,EAASvF,WACV,iBAIHuF,EAASvF,MAAQ,mBAGd,WACHuF,EAASvF,MAAQ,SAAS6G,EAAcC,UAC/B,EAAIh1B,KAAKyC,IAAIuyB,cAanB,cACA,SAIHvB,EAASvF,MAAQ,SAAS+G,EAAYD,OAChCE,EAAaF,GAAS,EAAIh1B,KAAK2I,GAAK,UACjC,GAAK3I,KAAK2C,IAAIuyB,GAAcl1B,KAAKyC,IAAIyyB,eAI3C,mBAIHzB,EAASvF,MAAQ,SAASiH,EAAcH,OAClCE,EAAaF,GAAS,EAAIh1B,KAAK2I,GAAK,UACjC,GAAK3I,KAAK2C,IAAIuyB,GACTl1B,KAAKC,KAAK,GAAKD,KAAKyC,IAAIyyB,eAInC,eACA,mBACHzB,EAASvF,MAAQ,SAASiH,EAAcH,OAClCE,GAAcF,EAAQh1B,KAAK2I,GAAK,EAAI,IAAM,EAAI3I,KAAK2I,GAAK,UACrD,GAAK3I,KAAK2C,IAAIuyB,GACTl1B,KAAKC,KAAK,GAAKD,KAAKyC,IAAIyyB,eAInC,WACHzB,EAASvF,MAAQ,SAASkH,EAAcJ,OAClCE,GAAcF,EAAQ,OAAU,EAAIh1B,KAAK2I,GAAK,UAC3C,GAAK3I,KAAK2C,IAAIuyB,GACT,QAAWl1B,KAAKyC,IAAIyyB,eAI/B,OACHzB,EAASvF,MAAQ,SAASmH,EAAUL,OAC9BE,GAAcF,EAAQ,OAAU,EAAIh1B,KAAK2I,GAAK,QAC7CqsB,EAAQ,OAAU,EAAIh1B,KAAK2I,GAAK,GAAM,EAAI3I,KAAK2I,GAAK,IAAO,EAAG,QAC1D,GAAK3I,KAAK2C,IAAK,EAAI3C,KAAK2I,GAAK,GAAMusB,GAC9B,QAAUl1B,KAAKyC,IAAK,EAAIzC,KAAK2I,GAAK,GAAMusB,QAC/C,QACE,GAAKl1B,KAAK2C,IAAIuyB,GACT,QAAUl1B,KAAKyC,IAAIyyB,aAQzCzB,EAAS7F,SAAW5tB,KAAKqB,IAAIrB,KAAKkH,MAAMusB,EAAS7F,UAAW,OAGxD0H,EAAI7B,EAAS7F,aACb2H,EAAgBD,EAAI7B,EAASQ,iBAG7B7F,EAAgBpuB,KAAKoH,IAAIqsB,EAASa,YAAcb,EAASY,iBACzDA,EAAcr0B,KAAKoB,IAAIqyB,EAASa,YAAab,EAASY,iBACtDhG,EAAeoF,EAASpF,iBAGxBmH,EACFC,EAAKC,EACLC,EACAC,MAGEC,MAGAC,WACKC,EAAiB30B,EAAKC,SACtB,QACJrB,KAAK8f,SAAW,KAAK7Z,UAAY,KACjCjG,KAAK8f,SAAW,GAAK,IAAI7Z,UAAY,MACrCjG,KAAK8f,UAAYze,EAAMD,GAAOA,GAAK6E,UAAY,YAE5CwtB,EAAS3d,WACV,cACHggB,EAAe,SAASE,WACfD,EAAiB,GAAI,eAI3B,eACHD,EAAe,SAASG,WACfF,EAAiB,GAAI,6BAKnBtC,EAAS3d,QAAU,WAAY,CACxCggB,EAAerC,EAAS3d,gBAM1BogB,EAAiB,eACVzC,EAASiB,UAAY,WAAY,CAC1CwB,EAAiBzC,EAASiB,YAIxByB,EAAc,UACdC,EAAW,OACXC,MAEAC,EACJ,SAASA,EAA+B3E,OAClCgB,EAAShB,EAAI4E,kBACb1xB,EAAO8tB,EAAO6D,4BACdC,MACAC,KAEA/E,EAAIgF,QAAS,CACfF,EAAU9E,EAAIgF,QAAQ,GAAGF,QACzBC,EAAU/E,EAAIgF,QAAQ,GAAGD,YACpB,CACLD,EAAU9E,EAAI8E,QACdC,EAAU/E,EAAI+E,YAEZE,EAASH,EAAU5xB,EAAKkU,SACxB8d,EAASH,EAAU7xB,EAAKmU,QAExB1Z,EAAIU,KAAKkH,MAAM0vB,GAAWjE,EAAOtvB,MAAQwB,EAAKxB,OAAU,GAAKiyB,OAC7D/1B,EAAIS,KAAKkH,MAAM2vB,GAAWlE,EAAOrvB,OAASuB,EAAKvB,QAAW,GAAKgyB,UAE5Dc,EAAS92B,GAAGC,QAGjBu3B,EAAiB,SAASA,EAAenF,OACvC/B,EAAO0G,EAA+B3E,MAEtC0E,IAAYzG,EAAM,QAItByG,EAAUzG,MACLA,EAAM,CACT6D,EAASkB,MAAMpD,UAAWA,UAAWI,UAKvC8B,EAASkB,MAAM/E,EAAK1R,KAAM0R,EAAKmH,UAAWpF,QAIxCqF,EAAiB,SAASA,EAAerF,OACvC/B,EAAO0G,EAA+B3E,OACrC/B,EAAM,QAIX6D,EAASmB,MAAMhF,EAAK1R,KAAM0R,EAAKmH,UAAWpF,GAC1CA,EAAIsF,sBAIFC,EAAiB,OACjBC,EAAoB,SAASA,EAAkBC,MAC7CF,EAAeE,GAAS,QACnBF,EAAeE,OAIpBC,EAAID,EAAS,MAGbn2B,EAAIo2B,MACJC,EAAS,MAETF,IAAW,EAAG,CAChBE,EAAOt7B,KAAK,CAAC25B,EAAO,GAAIA,EAAO,GAAI,UAG9B10B,IAAK,KAENs2B,EAAK,KACL9D,EAASvF,QAAU,SAAU,CAC/BqJ,EAAK9D,EAASvF,MAAMjtB,EAAIo2B,EAAI,EAAIr3B,KAAK2I,IAIvC2uB,EAAOt7B,KAAK,CACV25B,EAAO,GAAKyB,EAASG,EAAKv3B,KAAK2C,KAAK1B,EAAIo2B,EAAI,EAAIr3B,KAAK2I,IACrDgtB,EAAO,GAAKyB,EAASG,EAAKv3B,KAAKyC,KAAKxB,EAAIo2B,EAAI,EAAIr3B,KAAK2I,IACnD8qB,EAASgB,YACXxzB,EAAIo2B,EAAI,EAAIr3B,KAAK2I,KAGrBuuB,EAAeE,GAAUE,SAClBA,OAILE,EAAa,SAASA,WACf/D,EAASU,eAAiB,IAC/B,IAAIprB,MAAQ0uB,UAAY5B,EAAapC,EAASU,oBAIhDuD,EAAe,SAASA,OACtBjE,EAASe,cAAgB,EAAG,QACvB,KAGLx0B,KAAK8f,SAAW2T,EAASe,YAAa,QACjC,KAGLpG,IAAkB,EAAG,QAChBiG,SAGFA,EAAcr0B,KAAK8F,MAAM9F,KAAK8f,SAAWsO,EAAgBC,GAAgBA,OAG9EsJ,EAAc,SAASA,EAAYC,EAAMC,EAAQC,OAK/CpkB,EAAW+f,EAASE,aAAakE,MACjCnkB,GAAY+f,EAASC,QAAS,QACzB,UAMLxD,EAAK,KACLxc,EAAWqf,EAAa,CAC1B7C,EAAM,SAAS6H,QACT7H,EAAK,QACFA,EAAKxc,EAAWqf,EAAa,CAClC7C,GAAM,SAEDA,EALH,OASJ8H,EAAUp9B,SAASC,cAAc,cACjCo9B,EAAOD,EAAQl9B,WAAW,KAAM,CAAEo9B,mBAAoB,OAE1DD,EAAKnqB,KAAO2lB,EAAS5f,WAAa,KAC/BH,EAAWwc,GAAIr4B,SAAS,IAAM,MAAQ47B,EAAS9f,eAG9CwkB,EAAKF,EAAK/pB,YAAY0pB,GAAMv0B,MAAQ6sB,MACpCkI,EAAKp4B,KAAKqB,IAAIqS,EAAWwc,EACX+H,EAAK/pB,YAAY,KAAK7K,MACtB40B,EAAK/pB,YAAY,KAAU7K,OAAS6sB,MAIlDmI,EAAWF,EAAKC,EAAK,MACrBE,EAAYF,EAAK,MACjBG,EAAMv4B,KAAKw4B,KAAKH,EAAW/C,OAC3BmD,EAAMz4B,KAAKw4B,KAAKF,EAAYhD,GAChC+C,EAAWE,EAAMjD,EACjBgD,EAAYG,EAAMnD,MAMdzF,GAAoBsI,EAAK,MAIzBrI,GAAoBsI,EAAK,OAGzBM,EAAM14B,KAAKw4B,MAAMH,EAAWr4B,KAAKoH,IAAIpH,KAAKyC,IAAIq1B,IAC7BQ,EAAYt4B,KAAKoH,IAAIpH,KAAK2C,IAAIm1B,KAAexC,OAC9DqD,EAAM34B,KAAKw4B,MAAMH,EAAWr4B,KAAKoH,IAAIpH,KAAK2C,IAAIm1B,IAC7BQ,EAAYt4B,KAAKoH,IAAIpH,KAAKyC,IAAIq1B,KAAexC,OAC9DjyB,EAAQs1B,EAAMrD,MACdhyB,EAASo1B,EAAMpD,EAEnB0C,EAAQpX,aAAa,QAASvd,GAC9B20B,EAAQpX,aAAa,SAAUtd,GAU/B20B,EAAK13B,MAAM,EAAI2vB,EAAI,EAAIA,GACvB+H,EAAKl2B,UAAUsB,EAAQ6sB,EAAK,EAAG5sB,EAAS4sB,EAAK,GAC7C+H,EAAKj2B,QAAS81B,GAIdG,EAAKnqB,KAAO2lB,EAAS5f,WAAa,KAC/BH,EAAWwc,GAAIr4B,SAAS,IAAM,MAAQ47B,EAAS9f,WAQlDskB,EAAKW,UAAY,OACjBX,EAAKlI,aAAe,SACpBkI,EAAKpF,SAAS+E,EAAM/H,EAAkBK,GACvBJ,EAAkBpc,EAAW,IAAOwc,OAG/C2I,EAAYZ,EAAKrF,aAAa,EAAG,EAAGvvB,EAAOC,GAAQ3H,QAEnD67B,IAAc,QACT,UAWLsB,EAAW,OACX3I,EAAKwI,EAAKtI,EAAI/wB,EAAGC,MACjBw5B,EAAS,CAACL,EAAM,EAAGC,EAAM,EAAGD,EAAM,EAAGC,EAAM,SACxCxI,IAAM,CACXE,EAAKqI,QACErI,IAAM,CACX9wB,EAAI+1B,EACJ0D,EAAgB,OACPz5B,IAAK,CACVD,EAAIg2B,QACGh2B,IAAK,IACNu5B,IAAYxI,EAAKiF,EAAI/1B,GAAK8D,GACd8sB,EAAKmF,EAAIh2B,IAAM,EAAI,GAAI,CACrCw5B,EAAS98B,KAAK,CAACm0B,EAAIE,OAEfF,EAAK4I,EAAO,GAAI,CAClBA,EAAO,GAAK5I,KAEVA,EAAK4I,EAAO,GAAI,CAClBA,EAAO,GAAK5I,KAEVE,EAAK0I,EAAO,GAAI,CAClBA,EAAO,GAAK1I,KAEVA,EAAK0I,EAAO,GAAI,CAClBA,EAAO,GAAK1I,QAOR2I,aAqBX,CACL9I,GAAIA,EACJ4I,SAAUA,EACVC,OAAQA,EACR3I,GAAIuI,EACJrI,GAAIoI,EACJ7I,gBAAiBA,EACjBC,gBAAiBA,EACjBmJ,cAAed,EACfe,eAAgBd,EAChB1kB,SAAUA,QAKVylB,EAAa,SAASA,EAAWhJ,EAAIE,EAAID,EAAIE,EAAIwI,OAG/Cz/B,EAAIy/B,EAASv/B,aACVF,IAAK,KACN+/B,EAAKjJ,EAAK2I,EAASz/B,GAAG,OACtBggC,EAAKhJ,EAAKyI,EAASz/B,GAAG,MAEtB+/B,GAAM3D,GAAO4D,GAAM3D,GAAO0D,EAAK,GAAKC,EAAK,EAAG,KACzC5F,EAASnF,eAAgB,QACrB,mBAKNkH,EAAK4D,GAAIC,GAAK,QACV,cAGJ,UAILC,EAAW,SAASA,EAASnJ,EAAIE,EAAIT,EAAMgI,EAAMC,EACpBl3B,EAAUq0B,EAAO8C,EAAWyB,OAEvD7lB,EAAWkc,EAAKlc,aAChBoC,KACAggB,EAAc,CAChBhgB,EAAQggB,EAAa8B,EAAMC,EAAQnkB,EAAU/S,EAAUq0B,OAClD,CACLlf,EAAQ2d,EAAS3d,UAGf4e,KACAwB,EAAgB,CAClBxB,EAAUwB,EAAe0B,EAAMC,EAAQnkB,EAAU/S,EAAUq0B,OACtD,CACLN,EAAUjB,EAASiB,YAIjBqE,EAASnJ,EAAKmJ,SAEhBz5B,GAAI6wB,EAAK4I,EAAO,IAAMzD,EACtB/1B,GAAI8wB,EAAK0I,EAAO,IAAMzD,EACtBkE,GAAIT,EAAO,GAAKA,EAAO,GAAK,GAAKzD,EACjCtrB,GAAI+uB,EAAO,GAAKA,EAAO,GAAK,GAAKzD,IAGnCjC,EAASp7B,SAAQ,SAASshB,MACpBA,EAAGze,WAAY,KACboW,EAAMqI,EAAGze,WAAW,UACpBo1B,EAAKN,EAAKM,GAGdhf,EAAIuoB,OACJvoB,EAAI3Q,MAAM,EAAI2vB,EAAI,EAAIA,GAEtBhf,EAAIpD,KAAO2lB,EAAS5f,WAAa,KACrBH,EAAWwc,GAAIr4B,SAAS,IAAM,MAAQ47B,EAAS9f,WAC3DzC,EAAI0nB,UAAY9iB,EAIhB5E,EAAInP,WAAWouB,EAAKP,EAAKQ,GAAK,GAAKkF,EAAIpF,GACxBG,EAAKT,EAAKU,GAAK,GAAKgF,EAAIpF,MAEnC4H,IAAc,EAAG,CACnB5mB,EAAIlP,QAAS81B,GAUf5mB,EAAI6e,aAAe,SACnB7e,EAAI2hB,SAAS+E,EAAMhI,EAAKC,gBAAkBK,GACtBN,EAAKE,gBAAkBpc,EAAW,IAAOwc,GAO7Dhf,EAAIwoB,cACC,KAEDC,EAAO/+B,SAASC,cAAc,YAC9B++B,EAAgB,GACpBA,EAAgB,WAAe9B,EAAY93B,KAAK2I,GAAK,IAAO,WACxDinB,EAAKM,KAAO,EAAG,CACjB0J,GACE,eAAkBhK,EAAKqJ,cAAgB,EAAK,OAC5C,SAAY,EAAIrJ,EAAKM,GAAM,QAE3B2J,EAAa,UACH,mBACD,aACHpG,EAAS5f,WAAa,IACrBH,EAAWkc,EAAKM,GAAM,MAAQuD,EAAS9f,iBACtCwc,EAAKP,EAAKQ,GAAK,GAAKkF,EAAI1F,EAAKC,gBAAmB,UACjDQ,EAAKT,EAAKU,GAAK,GAAKgF,EAAI1F,EAAKE,gBAAmB,WAChDF,EAAKqJ,cAAgB,YACpBrJ,EAAKsJ,eAAiB,gBAClBxlB,EAAW,gBACX,mBACDkmB,kBACMA,cACJA,kBACI,gCACM,4BACJ,cAEnB9jB,EAAO,CACT+jB,EAAW/jB,MAAQA,EAErB6jB,EAAKG,YAAclC,MACd,IAAImC,KAAWF,EAAY,CAC9BF,EAAKtqB,MAAM0qB,GAAWF,EAAWE,MAE/BR,EAAY,KACT,IAAIS,KAAaT,EAAY,CAChCI,EAAK/Y,aAAaoZ,EAAWT,EAAWS,QAGxCtF,EAAS,CACXiF,EAAKM,WAAavF,EAEpBnb,EAAGia,YAAYmG,YAMjBO,EAAa,SAASA,EAAW56B,EAAGC,EAAGw0B,EAAUgD,EAAW7Y,MAC1D5e,GAAKm2B,GAAOl2B,GAAKm2B,GAAOp2B,EAAI,GAAKC,EAAI,EAAG,QAI5Ci2B,EAAKl2B,GAAGC,GAAK,SAETw0B,EAAU,KACR7iB,EAAMmiB,EAAS,GAAGv4B,WAAW,MACjCoW,EAAIipB,SAAS76B,EAAIg2B,EAAG/1B,EAAI+1B,EAAGC,EAAeA,MAGxCY,EAAa,CACfC,EAAS92B,GAAGC,GAAK,CAAE2e,KAAMA,EAAM6Y,UAAWA,SAM1CqD,EAAa,SAASA,EAAWjK,EAAIE,EAAID,EAAIE,EAAIV,EAAM1R,OACrD4a,EAAWlJ,EAAKkJ,aAChB/E,EAAWN,EAASM,aACpB7iB,KACA6iB,EAAU,CACZ7iB,EAAMmiB,EAAS,GAAGv4B,WAAW,MAC7BoW,EAAIuoB,OACJvoB,EAAI0nB,UAAYnF,EAASO,cAGvB+C,KACAZ,EAAa,KACX4C,EAASnJ,EAAKmJ,OAClBhC,EAAY,CACVz3B,GAAI6wB,EAAK4I,EAAO,IAAMzD,EACtB/1B,GAAI8wB,EAAK0I,EAAO,IAAMzD,EACtBkE,GAAIT,EAAO,GAAKA,EAAO,GAAK,GAAKzD,EACjCtrB,GAAI+uB,EAAO,GAAKA,EAAO,GAAK,GAAKzD,OAIjCj8B,EAAIy/B,EAASv/B,aACVF,IAAK,KACN+/B,EAAKjJ,EAAK2I,EAASz/B,GAAG,OACtBggC,EAAKhJ,EAAKyI,EAASz/B,GAAG,MAEtB+/B,GAAM3D,GAAO4D,GAAM3D,GAAO0D,EAAK,GAAKC,EAAK,EAAG,UAIhDa,EAAWd,EAAIC,EAAItF,EAAUgD,EAAW7Y,MAGtC6V,EAAU,CACZ7iB,EAAIwoB,gBAOJW,EAAU,SAASA,EAAQnc,OACzB0Z,EAAMC,EAAQ0B,KACdxhC,MAAMqC,QAAQ8jB,GAAO,CACvB0Z,EAAO1Z,EAAK,GACZ2Z,EAAS3Z,EAAK,OACT,CACL0Z,EAAO1Z,EAAK0Z,KACZC,EAAS3Z,EAAK2Z,OACd0B,EAAarb,EAAKqb,eAEhBzB,EAAYJ,QAGZ9H,EAAO+H,EAAYC,EAAMC,EAAQC,OAGhClI,EAAM,QACF,SAGL4H,IAAc,QACT,UAMJ/D,EAASnF,eAAgB,KACxByK,EAASnJ,EAAKmJ,UACbA,EAAO,GAAKA,EAAO,GAAK,EAAKtD,GAC/BsD,EAAO,GAAKA,EAAO,GAAK,EAAKrD,EAAK,QAC5B,WAMP4E,EAAI1E,EAAY,MAEhB2E,EAAsB,SAAtBA,EAA+BC,OAC7BrK,EAAKnwB,KAAKkH,MAAMszB,EAAI,GAAK5K,EAAKQ,GAAK,OACnCC,EAAKrwB,KAAKkH,MAAMszB,EAAI,GAAK5K,EAAKU,GAAK,OACnCF,EAAKR,EAAKQ,OACVE,EAAKV,EAAKU,OAIT6I,EAAWhJ,EAAIE,EAAID,EAAIE,EAAIV,EAAKkJ,UAAW,QACvC,MAITQ,EAASnJ,EAAIE,EAAIT,EAAMgI,EAAMC,EACnBjC,EAAY0E,EAAIE,EAAI,GAAI1C,EAAWyB,GAG7Ca,EAAWjK,EAAIE,EAAID,EAAIE,EAAIV,EAAM1R,SAE1B,CACLiS,GAAIA,EACJE,GAAIA,EACJG,IAAKsH,EACLlI,KAAMA,UAIH0K,IAAK,KACNhD,EAASH,EAAkBvB,EAAY0E,MAEvC7G,EAASc,QAAS,CACpB+C,EAAS,GAAG96B,OAAO86B,GACnBnE,EAAamE,OAMV,IAAIj+B,EAAI,EAAGA,EAAIi+B,EAAO/9B,OAAQF,IAAK,KAClCohC,EAAMF,EAAoBjD,EAAOj+B,OACjCohC,EAAK,QACAA,WAWN,UAKLC,EAAY,SAASA,EAAU79B,EAAM89B,EAAYC,MAC/CD,EAAY,QACNtH,EAASP,MAAK,SAASvZ,OACzBoY,EAAM/2B,SAASigC,YAAY,eAC/BlJ,EAAImJ,gBAAgBj+B,EAAM,KAAM89B,EAAYC,GAAU,WAC9CrhB,EAAGwhB,cAAcpJ,KACxBj1B,UACE,CACL22B,EAASp7B,SAAQ,SAASshB,OACpBoY,EAAM/2B,SAASigC,YAAY,eAC/BlJ,EAAImJ,gBAAgBj+B,EAAM,KAAM89B,EAAYC,GAAU,IACtDrhB,EAAGwhB,cAAcpJ,KAChBj1B,YAKHmrB,EAAQ,SAASA,QAGf8K,EAASU,EAAS,MAElBV,EAAO73B,WAAY,CACrB26B,EAAMz1B,KAAKw4B,KAAK7F,EAAOtvB,MAAQiyB,GAC/BI,EAAM11B,KAAKw4B,KAAK7F,EAAOrvB,OAASgyB,OAC3B,KACDzwB,EAAO8tB,EAAO6D,wBAClBf,EAAMz1B,KAAKw4B,KAAK3zB,EAAKxB,MAAQiyB,GAC7BI,EAAM11B,KAAKw4B,KAAK3zB,EAAKvB,OAASgyB,OAK3BoF,EAAU,iBAAkB,MAAO,QAKxC/E,EAAUlC,EAASK,OACjB,CAACL,EAASK,OAAO,GAAGwB,EAAG7B,EAASK,OAAO,GAAGwB,GAC1C,CAACG,EAAM,EAAGC,EAAM,GAGlBE,EAAY51B,KAAKkH,MAAMlH,KAAKC,KAAKw1B,EAAMA,EAAMC,EAAMA,IAInDF,EAAO,OAEHrF,EAAIE,EAAIh3B,MACPs5B,EAAO73B,YAAc24B,EAASG,YAAa,CAC9CP,EAASp7B,SAAQ,SAASshB,MACpBA,EAAGze,WAAY,KACboW,EAAMqI,EAAGze,WAAW,MACxBoW,EAAI0nB,UAAYnF,EAASI,gBACzB3iB,EAAI8pB,UAAU,EAAG,EAAGvF,GAAOH,EAAI,GAAII,GAAOJ,EAAI,IAC9CpkB,EAAIipB,SAAS,EAAG,EAAG1E,GAAOH,EAAI,GAAII,GAAOJ,EAAI,QACxC,CACL/b,EAAGugB,YAAc,GACjBvgB,EAAGlK,MAAMwkB,gBAAkBJ,EAASI,gBACpCta,EAAGlK,MAAMqI,SAAW,eAKxByY,EAAKsF,QACEtF,IAAM,CACXqF,EAAKrF,GAAM,GACXE,EAAKqF,QACErF,IAAM,CACXmF,EAAKrF,GAAIE,GAAM,WAGd,KAGD4K,EAAOrgC,SAASC,cAAc,UAAUC,WAAW,MAEvDmgC,EAAKrC,UAAYnF,EAASI,gBAC1BoH,EAAKd,SAAS,EAAG,EAAG,EAAG,OACnBe,EAAUD,EAAKrI,aAAa,EAAG,EAAG,EAAG,GAAGj3B,SAKxCk9B,EACFlG,EAAO73B,WAAW,MAAM83B,aAAa,EAAG,EAAG6C,EAAMH,EAAGI,EAAMJ,GAAG35B,KAE/Dw0B,EAAKsF,MACDn2B,EAAGC,QACA4wB,IAAM,CACXqF,EAAKrF,GAAM,GACXE,EAAKqF,QACErF,IAAM,CACX9wB,EAAI+1B,EACJ0D,EAAgB,MAAOz5B,IAAK,CAC1BD,EAAIg2B,QACGh2B,IAAK,CACVjG,EAAI,QACGA,IAAK,IACNw/B,IAAYxI,EAAKiF,EAAI/1B,GAAKk2B,EAAMH,GACpBnF,EAAKmF,EAAIh2B,IAAM,EAAIjG,KAAO6hC,EAAQ7hC,GAAI,CACpDm8B,EAAKrF,GAAIE,GAAM,YACT2I,QAKVxD,EAAKrF,GAAIE,KAAQ,MAAO,CAC1BmF,EAAKrF,GAAIE,GAAM,OAKrBwI,EAAYoC,EAAOC,EAAU3J,aAI3BkC,EAASkB,OAASlB,EAASmB,MAAO,CAEpCuB,EAAc,KAGdhG,EAAKsF,EAAM,QACJtF,IAAM,CACXiG,EAASjG,GAAM,MAGbsD,EAASkB,MAAO,CAClBhC,EAAOtB,iBAAiB,YAAayF,MAGnCrD,EAASmB,MAAO,CAClBjC,EAAOtB,iBAAiB,QAAS2F,GACjCrE,EAAOtB,iBAAiB,aAAc2F,GACtCrE,EAAOtB,iBAAiB,YAAY,SAAU9qB,GAC5CA,EAAE0wB,oBAEJtE,EAAOtjB,MAAM8rB,wBAA0B,mBAGzCxI,EAAOtB,iBAAiB,kBAAkB,SAAS+J,IACjDzI,EAAO0I,oBAAoB,iBAAkBD,GAE7CzI,EAAO0I,oBAAoB,YAAavE,GACxCnE,EAAO0I,oBAAoB,QAASrE,GACpCX,EAAU9E,aAIdl4B,EAAI,MACAiiC,EAAiBC,KACjB9H,EAASS,OAAS,EAAG,CACvBoH,EAAkB1e,OAAOoV,WACzBuJ,EAAmB3e,OAAO4V,iBACrB,CACL8I,EAAkB1e,OAAOiU,aACzB0K,EAAmB3e,OAAOiV,mBAGxBR,EAAmB,SAASA,EAAiBx0B,EAAM2+B,GACrDnI,EAASp7B,SAAQ,SAASshB,GACxBA,EAAG8X,iBAAiBx0B,EAAM2+B,KACzB9+B,WAGD2+B,EAAsB,SAASA,EAAoBx+B,EAAM2+B,GAC3DnI,EAASp7B,SAAQ,SAASshB,GACxBA,EAAG8hB,oBAAoBx+B,EAAM2+B,KAC5B9+B,WAGD++B,EAAwB,SAASA,IACnCJ,EAAoB,iBAAkBI,GACtCF,EAAiBhJ,IAGnBlB,EAAiB,iBAAkBoK,OAE/BlJ,EAAQ+I,GAAgB,SAASI,OAC/BriC,GAAKo6B,EAASvpB,KAAK3Q,OAAQ,CAC7BgiC,EAAiBhJ,GACjBmI,EAAU,gBAAiB,OAC3BW,EAAoB,iBAAkBI,UAIxC5F,GAAc,IAAI9sB,MAAQ0uB,cACtBvI,EAAQmL,EAAQ5G,EAASvpB,KAAK7Q,QAC9BsiC,GAAYjB,EAAU,iBAAkB,KAAM,CAChDxc,KAAMuV,EAASvpB,KAAK7Q,GAAI61B,MAAOA,OAC7BsI,KAAgBmE,EAAU,CAC5BJ,EAAiBhJ,GACjBkB,EAASW,QACTsG,EAAU,iBAAkB,OAC5BA,EAAU,gBAAiB,OAC3BW,EAAoB,iBAAkBI,UAGxCpiC,IACAk5B,EAAQ+I,EAAgBI,EAAMjI,EAASS,QACtCT,EAASS,OAIdrM,KAGFuL,EAAUV,YAAcA,EACxBU,EAAUL,YAAcA,EAKjB,GAAqC6I,EAAOC,QAAS,CAC1DD,UAAiBxI,MACZ,CACLX,EAAOW,UAAYA,IAzjCvB,CA4jCG12B,OC9oCH,IAAKo/B,GAAsBpJ,YAAa,OAChC,IAAI30B,MAAM,4CAIlB,SAASg+B,GAAiBC,OACpB9qB,EAAM8qB,EAAWlhC,WAAW,UAC5B+9B,EAAY3nB,EAAI0hB,aAAa,EAAG,EAAGoJ,EAAW34B,MAAO24B,EAAW14B,YAChE24B,EAAe/qB,EAAIgrB,gBAAgBrD,OAEnCsD,EAAU,MACVC,EAAU,MACT,IAAI/iC,EAAI,EAAGA,EAAIw/B,EAAUl9B,KAAKpC,OAAQF,GAAK,EAAG,KAC7CgjC,EAAQxD,EAAUl9B,KAAKtC,EAAI,MAC3BgjC,EAAQ,IAAK,KACXC,EAAOzD,EAAUl9B,KAAKtC,GAAKw/B,EAAUl9B,KAAKtC,EAAI,GAAKw/B,EAAUl9B,KAAKtC,EAAI,GAC1E8iC,GAAWG,IACTF,OAGFG,EAAYJ,EAAUC,MAErB,IAAI/iC,EAAI,EAAGA,EAAIw/B,EAAUl9B,KAAKpC,OAAQF,GAAK,EAAG,KAC7CijC,EAAOzD,EAAUl9B,KAAKtC,GAAKw/B,EAAUl9B,KAAKtC,EAAI,GAAKw/B,EAAUl9B,KAAKtC,EAAI,OACtEgjC,EAAQxD,EAAUl9B,KAAKtC,EAAI,MAE3BgjC,EAAQ,KAAOC,EAAOC,EAAW,CAEnCN,EAAatgC,KAAKtC,GAAK,EACvB4iC,EAAatgC,KAAKtC,EAAI,GAAK,EAC3B4iC,EAAatgC,KAAKtC,EAAI,GAAK,EAC3B4iC,EAAatgC,KAAKtC,EAAI,GAAK,MACtB,CAGL4iC,EAAatgC,KAAKtC,GAAK,IACvB4iC,EAAatgC,KAAKtC,EAAI,GAAK,IAC3B4iC,EAAatgC,KAAKtC,EAAI,GAAK,IAC3B4iC,EAAatgC,KAAKtC,EAAI,GAAK,KAI/B6X,EAAIsrB,aAAaP,EAAc,EAAG,GAGpCzO,EAAQiP,gBAAe,SAAUxc,EAAS0O,GACxC1O,EAAQyc,iBAAiB,aAAa,SAAU9W,OAC1C+W,EAAWC,GAAW9jB,cAAc8M,EAAYiX,qBAAsB,CACxEx5B,MAAOsrB,EAAI/gB,WACXtK,OAAQqrB,EAAImO,kBAEVnhC,EAAOiqB,EAAYiJ,cAEnB8D,EAAS/3B,SAASC,cAAc,UACpC83B,EAAOtvB,MAAQs5B,EAASt5B,MACxBsvB,EAAOrvB,OAASq5B,EAASr5B,WAErB4N,EAAMyhB,EAAO73B,WAAW,UACxBmzB,EAAYrI,EAAYlnB,IAAI,gBAC5BuvB,EAAW,KAEX/c,EAAI6rB,UAAU9O,EAAW,EAAG,EAAG0E,EAAOtvB,MAAOsvB,EAAOrvB,QACpDy4B,GAAiBpJ,GACjB,MAAOpsB,GACPy2B,QAAQC,MAAM,sBACdD,QAAQC,MAAM12B,EAAE1O,iBAIhBs2B,EAAYvI,EAAYlnB,IAAI,iBAC5B0vB,EAAgBxI,EAAYlnB,IAAI,qBAChCw+B,EAAcvhC,EAAKwhC,cAAc,aAEjCC,EAAgBp9B,KAAK2I,GAAK,QAC1BilB,EAAWhI,EAAYlnB,IAAI,YAC/Bo9B,GAAsBnJ,EAAQ,CAC5BzoB,KAAMvO,EACH0hC,SAAS,SAAS,SAAUpiC,EAAOuM,OAC9B2nB,EAAYxzB,EAAKyzB,aAAa5nB,SAC3B,CACL7L,EAAK2hC,QAAQ91B,GACb2nB,EAAUzwB,IAAI,4BAA6B,OACzC8uB,EAAQ+P,OAAOr4B,UAAUjK,EAAOiiC,EAAa/O,GAC/C3mB,MAGHpB,MAAK,SAAUtH,EAAGC,UAEVA,EAAE,GAAKD,EAAE,MAEpB6U,WACEiS,EAAYlnB,IAAI,gCAChBknB,EAAYlnB,IAAI,kCAChBuhB,EAAQvhB,IAAI,wBACdmV,WACE+R,EAAYlnB,IAAI,gCAChBknB,EAAYlnB,IAAI,kCAChBuhB,EAAQvhB,IAAI,wBACdkvB,SAAUA,EAEV6G,YAAakI,EAASr5B,OAASq5B,EAASt5B,MAExCgxB,YAAajG,EAAc,GAAKgP,EAChC9I,YAAalG,EAAc,GAAKgP,EAEhCxJ,aAAc3F,EAEduG,YAAa,EAEbnG,aAAczI,EAAYlnB,IAAI,gBAAkB0+B,EAEhD9O,eAAgB1I,EAAYlnB,IAAI,kBAEhC61B,QAAS,MAETrG,MAAOtI,EAAYlnB,IAAI,oBAGhB8+B,EAAiBj3B,OACpB2X,EAAO3X,EAAEq0B,OAAO1c,QAChB3X,EAAEq0B,OAAO1L,OAAStJ,EAAYkJ,eAAeC,OAAQ,CACvDxoB,EAAEq0B,OAAO1L,MAAMiB,IAAMwM,EAASr9B,EAAIsuB,EAClCrnB,EAAEq0B,OAAO1L,MAAMmB,IAAMsM,EAASp9B,EAAIquB,EAClChI,EAAYkJ,eAAeC,OAAO7Q,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAI3X,EAAEq0B,OAAO1L,QAI1EyD,EAAOtB,iBAAiB,iBAAkBmM,MAEtC5X,EAAYkJ,eAAgB,CAE9BlJ,EAAYkJ,eAAe8B,UAG7BhL,EAAYkJ,eAAiB,CAC3BC,OAAQ,KAER6B,QAAS,aACP+B,EAAO0I,oBAAoB,iBAAkBmC,GAE7C7K,EAAOtB,iBAAiB,kBAAkB,SAAU9qB,GAElDA,EAAE0wB,4BAOZzJ,EAAQiQ,sBAAqB,SAAUvjB,OACjCwjB,GAAUxjB,GAAU,IAAIwjB,QAC3BlQ,EAAQmQ,KAAKvjC,QAAQsjC,KAAYA,EAASA,EAAS,CAACA,GAAU,QAE3DE,EAAU,CAAC,cAAe,aAAc,gBAAiB,iBAE7DpQ,EAAQmQ,KAAK/hC,KAAK8hC,GAAQ,SAAUG,MAC9BA,GAAcA,EAAWhhC,OAAS,YAAa,KAC7C0xB,EAAYsP,EAAWtP,WAAa,GAExCuP,EAAgBvP,EAAUC,QAC1BsP,EAAgBvP,EAAUrR,uBAIrB4gB,EAAgBvP,GACvBA,GACEf,EAAQmQ,KAAK/hC,KAAKgiC,GAAS,SAAUhkC,MAC/B20B,EAAU10B,eAAeD,GAAM,CACjC20B,EAAU,OAASf,EAAQuQ,OAAOrnB,aAAa9c,IAAQ20B,EAAU30B,WC5K3E,IAAMokC,GAA8B,CAClCC,kBAAmB,CACjB/jB,OAAQ,CACNgkB,MAAO,CAAEC,KAAM,OACfC,OAAQ,QAGZC,yBAAcvuB,EAASwuB,sBAAiC,KAAhBC,IAAAA,kBACND,EAAxBnQ,UAAAA,aAAY,CAAC,EAAG,UAEXn1B,EACT8W,EADF0uB,QAAWxlC,WAENylC,EAAqBzlC,KAAZ0lC,EAAY1lC,UACvBylC,SAAAA,EAASllC,WAAWmlC,SAAAA,EAAUnlC,SAAUmlC,EAASnlC,OAAS,EAAG,OAAQuW,EAAQ4tB,OAAS,OAErF/hC,EAAO8iC,EACVpmC,MAAM,GACNE,KAAI,SAACK,EAAc8Y,SAAmB,CACrC9Y,KAAAA,EACAqC,MAAOyjC,EAAShtB,EAAQ,IAAM,MAE/BtL,MAAK,SAACtH,EAAQC,UAAWA,EAAE9D,MAAQ6D,EAAE7D,SAExCU,EAAK1D,SAAQ,SAACimB,EAAWxM,UAAmBwM,EAAKxM,MAAQA,KAEzD5B,EAAQ4tB,OAAS,CACf,CACE9kC,KAAM8lC,EAAS,GACf7hC,KAAM,YACNkc,KAAM,SACNC,IAAK,SACL3V,MAAO,MACPC,OAAQ,MACR6qB,UAAAA,EACAC,cAAe,CAAC,EAAG,GACnBC,aAAc,IAEdC,eAAgB,KAChB3yB,KAAAA,EACA4yB,UAAW,CACTC,OAAQ,CACN1Y,MAAO,WAAS6oB,OAEJjtB,EACNitB,EADFhjC,KAAQ+V,aAEH6sB,eAAAA,EAAazoB,MAAMpE,EAAQ6sB,EAAYzoB,MAAMvc,mBC3C5DqlC,GAA2B,CAC/Bnb,MAAO,mBACcob,IAErBC,WAAY"}