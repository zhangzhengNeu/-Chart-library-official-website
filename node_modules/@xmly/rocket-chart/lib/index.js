/* @xmly/rocket-chart version : 1.5.0-beta2 */
import e,{useRef as t,useState as r,useEffect as n,useMemo as o,isValidElement as a}from"react";import i from"react-dom";import l from"echarts";import c from"html2canvas";import s from"numeral";import{merge as u,cloneDeep as d,every as p,isPlainObject as f,isObject as h,isArray as m,differenceWith as v,isEqual as g,pick as y}from"lodash-es";import b from"echarts-stat";import x from"dayjs";import w from"number-precision";var k=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o};function C(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var E=C((function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.exports=t})),A=C((function(e){var t=function(e){var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(e,t,r){var n=u;return function(o,a){if(n===p)throw new Error("Generator is already running");if(n===f){if("throw"===o)throw a;return O()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===h)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=p;var c=s(e,t,r);if("normal"===c.type){if(n=r.done?f:d,c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=f,r.method="throw",r.arg=c.arg)}}}(e,r,i),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u="suspendedStart",d="suspendedYield",p="executing",f="completed",h={};function m(){}function v(){}function g(){}var y={};y[a]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(L([])));x&&x!==r&&n.call(x,a)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e){var t;this._invoke=function(r,o){function a(){return new Promise((function(t,a){!function t(r,o,a,i){var l=s(e[r],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):Promise.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return t("throw",e,a,i)}))}i(l.arg)}(r,o,t,a)}))}return t=t?t.then(a,a):a()}}function E(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=s(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,h;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,h):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function L(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:O}}function O(){return{value:t,done:!0}}return v.prototype=w.constructor=g,g.constructor=v,g[l]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l in e||(e[l]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,r,n,o){var a=new C(c(t,r,n,o));return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(w),w[l]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=L,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return l.type="throw",l.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:L(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function P(e,t,r,n,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var S=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){P(a,n,o,i,l,"next",e)}function l(e){P(a,n,o,i,l,"throw",e)}i(void 0)}))}};function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var O=function(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),e},_=[{unit:"亿",number:1e8},{unit:"万",number:1e4}];s.nullFormat("--");var z=function(e){return void 0===e&&(e=0),".".padEnd((e>10?10:e)+1,"0")},F=function(e){return!e&&0!==e},N=function(e,t){var r=(void 0===t?{}:t).place,n=void 0===r?10:r;if(F(e))return"--";var o=s(e).format("0,0"+".[".padEnd((n>10?10:n)+2,"0")+"]");return"--"===o?e:o},j={number:N,decimal:function(e,t){var r=(void 0===t?{}:t).place,n=void 0===r?2:r;return s(e).format("0,0"+z(n))},integer:function(e){return s(e).format("0,0")},percent:function(e,t){var r=(void 0===t?{}:t).place,n=void 0===r?2:r;return s(e).format("0"+z(n)+"%")},string:function(e){return F(e)?"":e.toString()},abbr:function(e,t){if(F(e))return"--";var r=(t||{}).maxValue,n=void 0===r?0:r,o="",a=e;return n=n||e,_.some((function(t){return!(n<t.number)&&(o=t.unit,a=Number(e)/t.number,!0)})),N(a)+o}},D=function(e){void 0===e&&(e="");var t=e.match(/\.(\d)([\S]+)/);if(t&&t[1]&&t[2]){var r=t[1],n=t[2],o=j[n]||j.string;return function(e){return o(e,{place:+r})}}return j[e]||j.string},T=function(r){var n=r.selectable,o=void 0!==n&&n,a=r.selected,i=r.data,l=void 0===i?[]:i,c=r.style,s=void 0===c?{}:c,u=r.formatter,d=void 0===u?{}:u,p=r.clickEvent,f=t(null),h=t(null),m=l[0],v=void 0===m?"":m,g=l[1],y=void 0===g?"":g,b=l[2],x=void 0===b?"":b,w="string"==typeof d?{type:d}:"function"==typeof d?d():d,k=w.type,C=void 0===k?"string":k,A=w.prefix,P=void 0===A?"":A,S=w.suffix,L=void 0===S?"":S,O=w.valueStyle,_=void 0===O?{}:O,z=w.labelStyle,F=void 0===z?{}:z,N=a.selectedKey,j=a.selectedType,T=D(C);return e.createElement("div",{className:"card-item",key:v},e.createElement("div",{className:"card-item-label "+(o?"cursor-handler":"")+" "+(v===N&&"label"===j?"selected":""),style:E({},F),onClick:function(){return o&&p(v,"label",f.current)},ref:f},y),e.createElement("div",{className:"card-item-value "+(o?"cursor-handler":"")+" "+(v===N&&"value"===j?"selected":""),style:E(E({},s),_),onClick:function(){return o&&p(v,"value",h.current)},ref:h},e.createElement("span",{className:"card-item-value-prefix"},P),e.createElement("label",null,T(x)),e.createElement("span",{className:"card-item-value-suffix"},L)))},M=function(t){var r=t.data,n=t.datasetParams,o=t.selected,a=t.clickEvent,i=(null==n?void 0:n.basic)?n.basic:n,l=i.selectable,c=void 0!==l&&l,s=i.flow,u=void 0===s?"row":s,d=i.align,p=void 0===d?"left":d,f=i.verticalAlign,h=void 0===f?"center":f,m=i.className,v=void 0===m?"":m,g=i.style,y=void 0===g?{}:g,b=i.valueStyle,x=void 0===b?{}:b,w=i.formatters,k=void 0===w?{}:w,C=r[0],E=r.slice(1);return e.createElement("div",{className:"rocketChart-card rocketChart-card-basic "+v+" verticalAlign-"+h,style:y},e.createElement("div",{className:"card-group card-main align-"+u+"-"+p},e.createElement(T,{key:C[0],selected:o,selectable:c,data:C,style:x,formatter:k[C[0]],clickEvent:a})),e.createElement("div",{className:"card-group card-sec align-"+u+"-"+p+" flow-"+u},E.map((function(t){var r=t[0],n=t[1],i=t[2];return e.createElement(T,{key:r,selected:o,selectable:c,data:[r,n,i],style:x,formatter:k[r],clickEvent:a})}))))},H=function(t){var r=t.data,n=t.datasetParams,o=t.selected,a=t.clickEvent,i=(null==n?void 0:n.average)?n.average:n,l=i.selectable,c=void 0!==l&&l,s=i.flow,u=void 0===s?"row":s,d=i.align,p=void 0===d?"left":d,f=i.verticalAlign,h=void 0===f?"center":f,m=i.className,v=void 0===m?"":m,g=i.style,y=void 0===g?{}:g,b=i.valueStyle,x=void 0===b?{}:b,w=i.formatters,k=void 0===w?{}:w;return e.createElement("div",{className:"rocketChart-card rocketChart-card-average "+v+" verticalAlign-"+h,style:y},e.createElement("div",{className:"card-group align-"+u+"-"+p+" flow-"+u},r.map((function(t){var r=t[0],n=t[1],i=t[2];return e.createElement(T,{key:r,selectable:c,selected:o,data:[r,n,i],style:x,formatter:k[r],clickEvent:a})}))))},B=function(e){var t,r=getComputedStyle(e),n=r.color,o=r.fontFamily,a=r.fontSize;return{color:n,fontFamily:o,fontSize:(t=a,Math.round(parseFloat(t))+"px")}};function I(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}I('.flow-row{flex-direction:row}.flow-column{flex-direction:column}.align-row-left{justify-content:flex-start}.align-row-center{justify-content:center}.align-row-right{justify-content:flex-end}.align-row-around{justify-content:space-around}.align-row-between{justify-content:space-between}.align-column-left{align-items:flex-start}.align-column-center{align-items:center}.align-column-right{align-items:flex-end}.verticalAlign-top{place-content:flex-start}.verticalAlign-center{place-content:center}.verticalAlign-bottom{place-content:flex-end}.rocketChart-card{display:flex;flex-flow:column;min-width:100px;height:100%;font-size:12px;line-height:1.5;padding:.5em 0;overflow:auto}.rocketChart-card .card-group{display:flex;flex-wrap:wrap}.rocketChart-card .card-group .card-item{padding:0 1em;font-family:Helvetica;box-sizing:border-box}.rocketChart-card .card-group .card-item .cursor-handler{cursor:pointer}.rocketChart-card .card-group .card-item .selected{border:1px solid hsla(0,0%,62.7%,.8)}.rocketChart-card .card-group .card-item-label{font-size:1.5em;line-height:1.5;box-sizing:border-box;border:1px solid transparent;overflow:hidden}.rocketChart-card .card-group .card-item-value{font-weight:600;font-size:3em;white-space:nowrap;box-sizing:border-box;border:1px solid transparent}.rocketChart-card .card-group .card-item-value-prefix,.rocketChart-card .card-group .card-item-value-suffix,.rocketChart-card .card-group .card-item-value label{cursor:inherit}.rocketChart-card .card-group .card-item-value-suffix{font-size:.4em}.rocketChart-card .card-group.card-sec{line-height:1.2;margin-top:2px}.rocketChart-card .card-group.card-sec .card-item{font-size:1em;color:#a0a0a0}.rocketChart-card .card-group.card-sec .card-item-label{font-size:inherit;display:inline}.rocketChart-card .card-group.card-sec .card-item-label:after{content:": ";display:inline-block;width:0;height:0}.rocketChart-card .card-group.card-sec .card-item-value{display:inline;margin-left:10px;font-weight:400;font-size:inherit}.rocketChart-card .card-group.card-sec .card-item-value span{padding-left:.2em}');var $=function(t){var o=t.type,a=t.data,i=t.chartOptions.dataset,l=(i=void 0===i?{}:i).source,c=void 0===l?[]:l,s=t.datasetParams,u=void 0===s?{}:s,d=k(t,["type","data","chartOptions","datasetParams"]),p="card-average"===o,f=function(e,t){return"{}"===JSON.stringify(e)?e:"card-basic"===t?(null==e?void 0:e.basic)?e.basic:e:"card-average"===t?(null==e?void 0:e.average)?e.average:e:void 0}(u,o),h=f.selectable,m=void 0!==h&&h,v=f.onSelect,g=r({selectedKey:null,selectedType:null}),y=g[0],b=g[1];n((function(){m||b({selectedKey:null,selectedType:null})}),[m,b]);var x=function(e,t,r){b({selectedKey:e,selectedType:t}),v&&v({key:e,type:t,style:B(r)})};if(!(null==c?void 0:c.length))return null;var w=(null==a?void 0:a.target)||[],C=c.map((function(e,t){var r;return[null===(r=w[t])||void 0===r?void 0:r.key].concat(e)}));return p?e.createElement(H,Object.assign({data:C,datasetParams:u},d,{selected:y,clickEvent:x})):e.createElement(M,Object.assign({data:C,datasetParams:u},d,{selected:y,clickEvent:x}))},R=["title"];var W=function(e,t){void 0===t&&(t={});var r=e.target,n=e.source,o=d(n);if(!Array.isArray(o))return e;for(var a=function(){var e=l[i],t=e[0],a=e[1];if(p(n,f)&&o.forEach((function(e){e[t]=a(e[t])})),p(n,Array)){var c=r.findIndex((function(e){return e.key===t}));-1!==c&&(o[c]=o[c].map((function(e){return a(e)})))}},i=0,l=Object.entries(t);i<l.length;i++)a();return{target:r,source:o}},G={renderDrawItem:function(e,t,r,n,o){var a=e.getHeight(),i=e.getWidth(),l=n?"bottom":"top",c="right";if(e.value(0)&&e.value(1)){var s=e.coord([e.value(0),e.value(1)]);s[1]<=80&&(l="bottom"),s[1]+80>=a&&(l="top"),s[0]+80>=i&&(c="left");var u={circle:{r:4,borderWidth:2,fill:r.fill||"#4d6e99",stroke:r.stroke||"#4d6e99"},line:{length:30},text:{fontSize:12,color:"#787878"}},d=[{type:"circle",shape:{r:u.circle.r},position:s,style:{fill:u.circle.fill,stroke:u.circle.stroke,lineWidth:u.circle.borderWidth}}];if("click"!==o){var p="bottom"===l,f="right"===c,h=u.circle.borderWidth+u.circle.r,m=p?s[1]+h:s[1]-h,v=p?m+u.line.length:m-u.line.length,g=p?v:v-10;d=[].concat(d,[{type:"line",shape:{x1:s[0],y1:m,x2:s[0],y2:v},style:{stroke:"#cdcdcd"}},{type:"text",style:{text:t,x:f?s[0]+5:s[0]-80,y:g,fontSize:u.text.fontSize,fill:u.text.color}}])}return{type:"group",children:d}}}},Y="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,U=Y||q||Function("return this")(),V=U.Symbol,Z=Object.prototype,K=Z.hasOwnProperty,X=Z.toString,J=V?V.toStringTag:void 0;var Q=Object.prototype.toString;var ee="[object Null]",te="[object Undefined]",re=V?V.toStringTag:void 0;function ne(e){return null==e?void 0===e?te:ee:re&&re in Object(e)?function(e){var t=K.call(e,J),r=e[J];try{e[J]=void 0;var n=!0}catch(e){}var o=X.call(e);return n&&(t?e[J]=r:delete e[J]),o}(e):function(e){return Q.call(e)}(e)}function oe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var ae="[object AsyncFunction]",ie="[object Function]",le="[object GeneratorFunction]",ce="[object Proxy]";var se,ue=U["__core-js_shared__"],de=(se=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"";var pe=Function.prototype.toString;var fe=/^\[object .+?Constructor\]$/,he=Function.prototype,me=Object.prototype,ve=he.toString,ge=me.hasOwnProperty,ye=RegExp("^"+ve.call(ge).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function be(e){return!(!oe(e)||(t=e,de&&de in t))&&(function(e){if(!oe(e))return!1;var t=ne(e);return t==ie||t==le||t==ae||t==ce}(e)?ye:fe).test(function(e){if(null!=e){try{return pe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function xe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return be(r)?r:void 0}var we=xe(Object,"create");var ke="__lodash_hash_undefined__",Ce=Object.prototype.hasOwnProperty;var Ee=Object.prototype.hasOwnProperty;var Ae="__lodash_hash_undefined__";function Pe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Se(e,t){for(var r,n,o=e.length;o--;)if((r=e[o][0])===(n=t)||r!=r&&n!=n)return o;return-1}Pe.prototype.clear=function(){this.__data__=we?we(null):{},this.size=0},Pe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pe.prototype.get=function(e){var t=this.__data__;if(we){var r=t[e];return r===ke?void 0:r}return Ce.call(t,e)?t[e]:void 0},Pe.prototype.has=function(e){var t=this.__data__;return we?void 0!==t[e]:Ee.call(t,e)},Pe.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=we&&void 0===t?Ae:t,this};var Le=Array.prototype.splice;function Oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Oe.prototype.clear=function(){this.__data__=[],this.size=0},Oe.prototype.delete=function(e){var t=this.__data__,r=Se(t,e);return!(r<0)&&(r==t.length-1?t.pop():Le.call(t,r,1),--this.size,!0)},Oe.prototype.get=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]},Oe.prototype.has=function(e){return Se(this.__data__,e)>-1},Oe.prototype.set=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var _e=xe(U,"Map");function ze(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function Fe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fe.prototype.clear=function(){this.size=0,this.__data__={hash:new Pe,map:new(_e||Oe),string:new Pe}},Fe.prototype.delete=function(e){var t=ze(this,e).delete(e);return this.size-=t?1:0,t},Fe.prototype.get=function(e){return ze(this,e).get(e)},Fe.prototype.has=function(e){return ze(this,e).has(e)},Fe.prototype.set=function(e,t){var r=ze(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var Ne="Expected a function";function je(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(Ne);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var i=e.apply(this,n);return r.cache=a.set(o,i)||a,i};return r.cache=new(je.Cache||Fe),r}je.Cache=Fe;var De=function(e){var t=e.target,r=void 0===t?[]:t,n=e.source;if(f(n))return{source:n};var o=0,a=r.map((function(e){return void 0===e.name?"未知"+ ++o:e.name+""}));if(p(n,f)){var i=[];return r.forEach((function(e,t){var r=e.key,o=[a[t]];n.forEach((function(e){o.push(e[r])})),i.push(o)})),{source:i}}return Array.isArray(n)&&p(n,Array)?{source:a.map((function(e,t){var r=n[t]||[];return[e].concat(r)}))}:e},Te=(je((function(e){var t=e.target,r=e.source,n=t.map((function(e){return e.key})),o=[];return r[0].forEach((function(e,t){var a={};n.forEach((function(e,n){a[e]=r[n][t]})),o.push(a)})),o})),je((function(e){return!!h(e)&&(!(!m(e.target)||!m(e.source))&&!(0===e.target.length||0===e.source.length))})),function(e,t){return e&&"value"===e.type&&t&&"category"===t.type}),Me=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},He=function(e){return void 0===e&&(e=[]),e.length?[Math.min.apply(Math,e),Math.max.apply(Math,e)]:[]},Be=function(e){var t=e.source;return(void 0===t?[]:t).slice(1).map((function(e){return function(e){void 0===e&&(e=[]);var t=e.slice(1);return He(t)}(e)}))},Ie=function(e){var t=Be(e);return He(t.flat())},$e=Be,Re=function(e){var t=e||{},r=t.xAxis,n=t.yAxis,o=t.dataset,a=void 0===o?{source:[]}:o,i=e[Te(r,n)?"xAxis":"yAxis"]||{};if(+i.max)return+i.max;var l=Ie(a);l[0];return l[1]};I('@charset "UTF-8";.base-rocketChart-indicator{position:relative;font-family:Helvetica;font-size:11px;background:inherit;white-space:nowrap;width:100%;height:100%}.base-rocketChart-indicator .card-cont{font-size:32px;font-weight:600;margin-top:8px;margin-bottom:10px}.base-rocketChart-indicator .card-cont-unit{font-size:11px;margin-left:3px}.base-rocketChart-indicator .card-footer{display:flex;justify-content:start;align-items:center;font-size:12px;height:17px;line-height:17px}.base-rocketChart-indicator .card-footer-item-text,.base-rocketChart-indicator .card-footer-item:not(:first-child){margin-left:10px}.base-rocketChart-indicator .card-footer-item-icon{margin-left:5px}.base-rocketChart-indicator .card-footer-item-icon .anticon{display:inline-block;color:inherit;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-.2em;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.base-rocketChart-indicator .card-footer-item-title:after{content:"：";display:inline-block;width:0;height:0}');var We={nameMap:["同比","环比"]},Ge=function(t){return t.icon&&"object"==typeof t.icon?t.icon:t.value&&0!==Number(t.value)?e.createElement("span",{className:"card-footer-item-icon"},t.value.toString().includes("-")?e.createElement("i",{className:"anticon",style:{color:"#04A2A4",transform:"rotate(180deg)"}},e.createElement("svg",{id:"icon-jiantou",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024"},e.createElement("path",{d:"M137.93433786 933.875h746.92493976c34.76850183 0 60.5614812-40.94887912 40.25009262-81.36978579-16.24290024-32.40815735-344.6103587-680.15202402-372.68604108-735.37167207-18.43243067-36.30583163-62.45596939-35.71574551-80.88839923 0C450.8819116 156.90224819 120.80630845 807.09963192 97.90164517 854.16677301c-16.8019291 34.47345877 1.75472974 79.70822699 40.03269269 79.70822699z"}))):e.createElement("i",{className:"anticon",style:{color:"#D87A80"}},e.createElement("svg",{id:"icon-jiantou",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024"},e.createElement("path",{d:"M137.93433786 933.875h746.92493976c34.76850183 0 60.5614812-40.94887912 40.25009262-81.36978579-16.24290024-32.40815735-344.6103587-680.15202402-372.68604108-735.37167207-18.43243067-36.30583163-62.45596939-35.71574551-80.88839923 0C450.8819116 156.90224819 120.80630845 807.09963192 97.90164517 854.16677301c-16.8019291 34.47345877 1.75472974 79.70822699 40.03269269 79.70822699z"})))):void 0},Ye=function(t){var r=[];return t.slice(0,2).forEach((function(t,n){r.push(e.createElement("div",{className:"card-footer-item",key:t.key||n},e.createElement("span",{className:"card-footer-item-title"},t.name||We.nameMap[n]),e.createElement("span",{className:"card-footer-item-text"},function(e){return e.preRender?e.preRender?"string"==typeof e.preRender&&j[e.preRender]?j[e.preRender](e.value):"function"==typeof e.preRender?e.preRender(e.value):e.value:void 0:j.string(e.value)}(t)),Ge(t)))})),r},qe=function(t){var r,n=t.datasetParams.basic,o=void 0===n?{cont:"",unit:"",compare:""}:n,a=o.cont,i=void 0===a?"":a,l=o.unit,c=o.compare,s=void 0===c?"":c;return e.createElement("div",{className:"base-rocketChart-indicator",key:"rocketChart-indicator"},e.createElement("div",{className:"card-cont"},i,l?e.createElement("span",{className:"card-cont-unit"},l):null),e.createElement("div",{className:"card-footer"},(r=s,Array.isArray(r)?Ye(r):r)))};I(".multi-rocketChart-indicator{position:relative;font-family:Helvetica;font-size:11px;background:inherit;white-space:nowrap;width:100%;height:100%}.multi-rocketChart-indicator .card-main{display:flex;flex-flow:column nowrap}.multi-rocketChart-indicator .card-main-row{padding-top:12px;padding-bottom:5px;display:flex;justify-content:flex-start}.multi-rocketChart-indicator .card-main-row:not(:last-child){border-bottom:1px solid #f1f1f1}.multi-rocketChart-indicator .card-main-row:last-child{padding-bottom:0}.multi-rocketChart-indicator .card-main-row-cont{position:relative;min-width:150px;max-width:500px;overflow:hidden}.multi-rocketChart-indicator .card-main-row-cont-title{height:20px;line-height:20px;font-size:14px;text-align:center;margin-bottom:6px}.multi-rocketChart-indicator .card-main-row-cont-value{height:38px;line-height:38px;font-weight:700;font-size:32px;text-align:center}.multi-rocketChart-indicator .card-main-row-cont-value-unit{margin-left:3px;font-size:11px}.multi-rocketChart-indicator .card-main-row-footer{width:100%;display:flex;justify-content:space-around;font-size:11px;margin-left:15px}.multi-rocketChart-indicator .card-main-row-footer-item{display:inline-flex;flex-flow:column nowrap;align-items:center}.multi-rocketChart-indicator .card-main-row-footer-item-title{height:20px;line-height:20px;font-size:14px;margin-bottom:4px}.multi-rocketChart-indicator .card-main-row-footer-item-text{height:38px;line-height:38px;font-size:18px}.multi-rocketChart-indicator .card-main-row-footer-item-text-icon{display:inline-flex;font-size:11px;margin-left:5px}.multi-rocketChart-indicator .card-main-row-footer-item-text-icon .anticon{display:inline-block;color:inherit;font-style:normal;line-height:0;text-align:center;text-transform:none;vertical-align:-.2em;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased}.rocketChart-dark .card-main-row:not(:last-child){border-bottom:1px solid #444}");var Ue={nameMap:["同比","环比"]},Ve=function(e){return e.preRender?e.preRender?"string"==typeof e.preRender&&j[e.preRender]?j[e.preRender](e.value):"function"==typeof e.preRender?e.preRender(e.value):e.value:void 0:j.string(e.value)},Ze=function(t){return t.icon&&"object"==typeof t.icon?t.icon:t.value&&0!==Number(t.value)?e.createElement("span",{className:"card-main-row-footer-item-text-icon"},t.value.toString().includes("-")?e.createElement("i",{className:"anticon",style:{color:"#04A2A4",transform:"rotate(180deg)"}},e.createElement("svg",{id:"icon-jiantou",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024"},e.createElement("path",{d:"M137.93433786 933.875h746.92493976c34.76850183 0 60.5614812-40.94887912 40.25009262-81.36978579-16.24290024-32.40815735-344.6103587-680.15202402-372.68604108-735.37167207-18.43243067-36.30583163-62.45596939-35.71574551-80.88839923 0C450.8819116 156.90224819 120.80630845 807.09963192 97.90164517 854.16677301c-16.8019291 34.47345877 1.75472974 79.70822699 40.03269269 79.70822699z"}))):e.createElement("i",{className:"anticon",style:{color:"#D87A80"}},e.createElement("svg",{id:"icon-jiantou",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 1024 1024"},e.createElement("path",{d:"M137.93433786 933.875h746.92493976c34.76850183 0 60.5614812-40.94887912 40.25009262-81.36978579-16.24290024-32.40815735-344.6103587-680.15202402-372.68604108-735.37167207-18.43243067-36.30583163-62.45596939-35.71574551-80.88839923 0C450.8819116 156.90224819 120.80630845 807.09963192 97.90164517 854.16677301c-16.8019291 34.47345877 1.75472974 79.70822699 40.03269269 79.70822699z"})))):void 0},Ke=function(t){return Array.isArray(t)?function(t){var r=[];return t.slice(0,2).forEach((function(t,n){r.push(e.createElement("div",{className:"card-main-row-footer-item",key:t.key||n},e.createElement("div",{className:"card-main-row-footer-item-title"},t.name||Ue.nameMap[n]),e.createElement("div",{className:"card-main-row-footer-item-text",style:{color:t.value&&t.value.toString().includes("-")?"#04A2A4":"#D87A80"}},Ve(t),Ze(t))))})),r}(t):t},Xe=function(t){var r=t.datasetParams.multi,n=(void 0===r?{cont:[]}:r).cont,o=void 0===n?[]:n;return e.createElement("div",{className:"multi-rocketChart-indicator",key:"rocketChart-indicator"},e.createElement("div",{className:"card-main"},function(t){var r=null;return Array.isArray(t)?(r=[],t.forEach((function(t,n){var o=t.key,a=t.name,i=t.unit,l=t.compare;r.push(e.createElement("div",{className:"card-main-row",key:o||n},e.createElement("div",{className:"card-main-row-cont"},e.createElement("div",{className:"card-main-row-cont-title"},e.createElement("span",{className:"card-main-row-cont-title-name"},a)),e.createElement("div",{className:"card-main-row-cont-value"},Ve(t),e.createElement("span",{className:"card-main-row-cont-value-unit"},i))),e.createElement("div",{className:"card-main-row-footer"},l&&Ke(l))))}))):r=t,r}(o)))},Je=function(e,t){var r=void 0===t?{}:t,n=r.name,o=r.value,a=r.color,i="",l=o.map((function(e){return'<div style="display: table-cell; padding-left: 10px">'+e+"</div>"})).join("");switch(e){case"light":i='<div style="color:'+a+'">'+n+":</div>",l='<div style="color:'+a+';text-align: right; display: table-row;">'+l+"</div>";break;default:i="<div>"+('<i style="display:inline-block; width: 7px; height: 7px; background:'+a+'; border-radius: 7px; vertical-align: 1px; margin-right: 6px"></i>')+" "+n+":</div>",l='<div style="text-align: right; display: table-row;">'+l+"</div>"}return{key:i,value:l}},Qe=function(e){var t=e||{},r=t.mode,n=t.formatter,o=void 0===n?D("number"):n,a=t.valueKeys,i=void 0===a?[]:a,l=t.tips,c=l?'<p style="color: #aaa; margin: 0">'+l+"</p>":"";return function(e){var t=function(e,t,r){var n,o,a=Array.isArray(e)?e:[e];a.sort((function(e,t){return t.value[t.seriesIndex+1]-e.value[e.seriesIndex+1]}));var i=a.map((function(e,n){var o=e.componentType,a=e.dimensionNames,i=e.data,l=void 0===i?{}:i,c=e.seriesIndex,s=Array.isArray(e.value)?e.value[c+1]:e.value;s=t?t(s):s,l&&(null==r?void 0:r.length)?s=r.map((function(e){var t=l[e]||"";return"value"===e&&s||t})):(s=[s],e.percent&&s.push("("+e.percent+"%)"));var u=(null==l?void 0:l.name)||a[c+1]||e.name,d=e.color;return"markPoint"===o&&(d="orangered"),{color:d,name:u,value:s}}));return{title:(null===(n=a[0])||void 0===n?void 0:n.name)===i[0].name?"":null===(o=a[0])||void 0===o?void 0:o.name,listData:i}}(e,o,i),n="",a="";return t.listData.forEach((function(e){var t=Je(r,e);n+=t.key,a+=t.value})),'\n          <div>\n            <div style="font-size:12px;">'+t.title+' </div>\n            <div style="display:flex; margin: 5px 0;">\n              <div>'+n+'</div>\n              <div style="display:table; margin-left: 5px">'+a+"</div>\n            </div>\n            "+c+"\n          </div>\n      "}},et={tooltipFormatter:function(e,t){if(null==t?void 0:t.$tooltip)return{tooltip:{formatter:Qe(t.$tooltip)}}},formatter:Qe};I('.rocket-chart-funnel{padding:30px 8px 8px;height:100%;width:100%;overflow:auto;font-size:12px;line-height:1.5}.rocket-chart-funnel ul{padding:0;margin:0}.rocket-chart-funnel-item{display:table-row-group;width:100%}.rocket-chart-funnel-item .funnel-wrapper{width:100%;display:table-row}.rocket-chart-funnel-item .funnel-wrapper .funnel-text{display:table-cell;vertical-align:sub;padding:1px 8px 0 0!important;font-size:12px;color:#7f7f7f;text-align:right;vertical-align:top;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px;line-height:1.1}.rocket-chart-funnel-item .funnel-wrapper .funnel-text-sub{font-size:12px;color:#999;line-height:1.5;white-space:nowrap}.rocket-chart-funnel-item .funnel-wrapper .funnel-text-sub .btn-icon{vertical-align:top}.rocket-chart-funnel-item .funnel-wrapper .funnel-cover-wrap{display:table-cell;width:100%;position:relative}.rocket-chart-funnel-item .funnel-wrapper .funnel-cover-wrap:hover .tooltip-content{display:block}.rocket-chart-funnel-item .funnel-wrapper .funnel-cover-wrap .tooltip-content{position:absolute;display:none;border-style:solid;white-space:nowrap;z-index:9999999;transition:left .4s cubic-bezier(.23,1,.32,1) 0s,top .4s cubic-bezier(.23,1,.32,1) 0s;background-color:hsla(0,0%,100%,.95);border-width:0;color:#666;font:400 12px/21px Lucida Grande,Lucida Sans Unicode,Arial,Helvetica,sans-serif;left:22%;top:80%;box-shadow:0 0 10px #aeaeae;border-radius:3px;padding:10px 12px 8px;pointer-events:none;transform:translate(-50%)}.rocket-chart-funnel-item .funnel-wrapper .funnel-cover-wrap .funnel-cover{justify-self:start;background:rgba(104,130,255,.05);width:100%;height:32px}.rocket-chart-funnel-item .funnel-wrapper .funnel-cover-wrap .funnel-cover .cover-color{height:100%}.rocket-chart-funnel-item .funnel-conversion{padding-left:100%;width:35px;margin:10px 0 12px}.rocket-chart-funnel-item .funnel-conversion-icon{position:relative;display:inline-block;min-width:60px;padding:3px 10px 0;font-size:12px;line-height:1.2;color:rgba(0,0,0,.65);text-align:center;background:#f6f7f8;z-index:0}.rocket-chart-funnel-item .funnel-conversion-icon:after{content:"";position:absolute;top:18px;left:0;background-color:inherit;padding-bottom:26%;width:52%;z-index:-1;transform-origin:0 0;transform:rotate(-15deg) skewX(60deg)}.rocket-chart-funnel-item:first-child .funnel-conversion,.rocket-chart-funnel-item:first-child .funnel-placeholder{display:none}.rocket-chart-funnel .conversion-wrapper{display:table-row-group}.rocket-chart-funnel .conversion-wrapper .placeholder{display:table-cell}.rocket-chart-funnel .conversion-wrapper .rocket-chart-funnel-transPercent{display:table-cell;color:rgba(0,0,0,.85);font-weight:500;font-size:16px;padding:16px 0}');var tt=j.percent,rt=function(t){var r=t.hideSymbol,n=t.color,o=t.step,a=void 0===o?"-":o,i=t.name,l=void 0===i?"":i,c=t.value,s=void 0===c?0:c,u=t.maxValue,d=t.lastValue,p=t.renderItemInfo,f=t.formatter,h=t.mode,m=t.tipsDom,v=t.showTotalConversion,g=t.firstValue,y=f?f({data:{value:s}}):s,b=tt((d||s)/u),x=d?tt(s/d):"100%",w="",k="",C=Je(h,{color:n,name:l,value:[y+"","("+x+")"]});return w+=C.key,k+=C.value,e.createElement("li",{className:"rocket-chart-funnel-item"},e.createElement("div",{className:"funnel-conversion"},a>1&&e.createElement("span",{className:"funnel-conversion-icon"},x)),e.createElement("div",{className:"funnel-wrapper"},e.createElement("div",{className:"funnel-text",style:{visibility:r?"hidden":"visible"}},e.createElement("span",{title:l},l),e.createElement("div",{className:"funnel-text-sub"},p&&p(l,a),e.createElement("span",{style:{paddingLeft:5}},y,v?"("+tt(s/g)+")":[]))),e.createElement("div",{className:"funnel-cover-wrap"},e.createElement("div",{className:"funnel-cover",style:{width:b}},e.createElement("div",{className:"cover-color",style:{background:n,width:x}}),e.createElement("div",{className:"tooltip-content",dangerouslySetInnerHTML:{__html:'\n          <div >\n            <div style="display:flex; margin: 5px 0;">\n              <div>'+w+'</div>\n              <div style="display:table; margin-left: 5px">'+k+"</div>\n            </div>\n            "+m+"\n          </div>\n      "}})))))},nt=function(t){var r,n=t.datasetParams,a=(void 0===n?{}:n).showTotalConversion,i=void 0!==a&&a,l=t.data,c=(l=void 0===l?{}:l).source,s=void 0===c?[[],[]]:c,u=t.colors,d=t.hideSymbol,p=t.datasetParams,f=(p=void 0===p?{}:p).sort,h=void 0===f?"default":f,m=p.$tooltip,v=t.chartOptions,g=t.option,y=void 0===g?{}:g,b=m||{},x=b.mode,w=b.tips,k=w?'<p style="color: #aaa; margin: 0">'+w+"</p>":"",C=function(){},E=o((function(){if("none"===h)return s;var e=s[0].map((function(e,t){return{item:e,value:s[1][t]}}));return e.sort((function(e,t){return t.value-e.value})),[e.map((function(e){return e.item})),e.map((function(e){return e.value}))]}),[s]),A=o((function(){var e=E[1][0];return E[1][E[1].length-1]/e}),[E]),P=o((function(){return Math.max.apply(Math,E[1])}),[E]),S=o((function(){var e,t;return(null==v?void 0:v.series)&&(null==v?void 0:null===(e=v.series[0])||void 0===e?void 0:null===(t=e.label)||void 0===t?void 0:t.formatter)}),[v]);return e.createElement("div",{className:"rocket-chart-funnel",style:{paddingTop:(null==y?void 0:null===(r=y.grid)||void 0===r?void 0:r.top)||30}},e.createElement("ul",{className:"rocket-chart-ul"},E[0].map((function(t,r){var n=E[1][r-1],o=E[1][0];return e.createElement(rt,{firstValue:o,showTotalConversion:i,length:length,tipsDom:k,mode:x,key:t,hideSymbol:d,color:u[r%u.length],step:r+1,maxValue:P,lastValue:n,name:t,value:E[1][r],renderItemInfo:C,formatter:S})})),e.createElement("div",{className:"conversion-wrapper"},e.createElement("div",{className:"placeholder"}),s[0].length?e.createElement("div",{className:"rocket-chart-funnel-transPercent"},"总转化率：",tt(A)):e.createElement("h4",null,"暂无数据"))))};I(".no-data{position:absolute;display:flex;justify-content:center;align-items:center;height:100%;width:100%}.no-data .text{font-size:22px;color:#999}");var ot=function(t){var r=t.empty,n=void 0===r?"暂无数据":r;return e.createElement("div",{className:"no-data"},a(n)?n:e.createElement("label",{className:"text"},n))},at={defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=t,n=r.datazoomX,o=r.datazoomY,a={},i={},l=[{orient:"horizontal",xAxisIndex:[0],bottom:5,show:!0},{orient:"vertical",yAxisIndex:[0],top:18,show:!0}];n&&(a.bottom=60,i.bottom=35),o&&(a.right=50),Te(e.xAxis,e.yAxis)?n=void 0!==n&&n:o=void 0!==o&&o,l[0].show=n,l[1].show=o,u(e,{grid:a,legend:i,dataZoom:l})}},it={defaultChartProps:{},optionHandler:function(e){e.series.forEach((function(e){u(e,{showSymbol:!1,label:{show:!1}})}))}},lt=function(e,t){if(e){var r=e.type,n=void 0===r?"number":r,o=e.prefix,a=void 0===o?"":o,i=e.suffix,l=void 0===i?"":i,c=e.formatter,s=D(n);if(s||a||l||c){var u=function(e){return a+(s?s(e,{maxValue:t}):e)+l};return"function"==typeof c?function(e,t){return c(e,u(e),t)}:function(e,t){return u(e)}}}},ct=function(e){return function(t){var r=t.seriesIndex,n=void 0===r?-1:r,o=t.value;return e(o[n+1])}},st=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=!0);var n,o=e,a=o.scope,i=void 0===a?"":a,l=o.type,c=void 0===l?"number":l,s=""===i&&"abbr"===c?"axis":i,u=lt(e,r),d={};if(["all",""].includes(s))d={axis:u,tooltip:u,series:u};else{var p,f="number"===c?u:lt(E(E({},e),{},{type:"number"}));(p={axis:f,tooltip:f,series:f})[s]=u,d=p}return{$tooltip:{formatter:d.tooltip},axis:t?(n=d.axis,{axisLabel:{formatter:function(e,t){return n(e)}}}):{},series:ct(d.series),formatter:d}},ut=function(e,t,r,n){var o=r||{},a=o.target,i=(o.source,(t||{}).$renderLabel),l=void 0===i?{type:"number"}:i;if(!a||!l)return{};var c=e.xAxis,s=e.yAxis,u=e.series,d=Te(c,s)?"xAxis":"yAxis",p=e[d]||{},f=function(t,r,n){void 0===t&&(t={});var o=void 0;return"abbr"===t.type&&(o=Re(e)),st(t,p.show,o)},h=l;if(!Array.isArray(l)||n&&1!==l.length||(h=l[0]),n){var m,v=f(h[0]||h),g=f(h[1]||h);return{$tooltip:null==v?void 0:v.$tooltip,config:(m={},m[d]=[null==v?void 0:v.axis,null==g?void 0:g.axis],m)}}var y,b=f(h);return b?(null==u||u.forEach((function(e){e.label=E({formatter:b.series},e.label)})),{$tooltip:b.$tooltip,config:(y={},y[d]=b.axis,y)}):{}},dt={defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset,n=e.series,o=e.xAxis,a=e.yAxis,i=t,l=i.showAllLabel,c=void 0!==l&&l,s=i.showLabel,u=void 0===s||s,d=i.showPercentage,p=void 0!==d&&d,f=i.position,h=i.$renderLabel,m=r.source[0].length-1,v=~~(m/4);e.showLabel=!0;var g=st(h),y=g.series,b=g.formatter.series;n.forEach((function(e,t){e.label={show:u},"line"===(e=function(e,t,r,n){return Te(e,t)&&"bar"===r.type&&r.label&&r.label.show&&(r.label=E(E({},r.label),n?{position:n}:{position:"insideLeft",offset:[5,0]})),r}(o,a,e,f)).type?(e.showAllSymbol=!0,e.label.formatter=c||!c&&m<5?y:function(e){var t=e.seriesIndex,r=e.dataIndex,n=e.value,o=m===r+1||[0,1,2,3].includes(r/v),a=b?b(n[t+1]):n[t+1];return o?a:" "}):"bar"===e.type&&(e.label.formatter=p?function(e){var t=e.seriesIndex,n=e.value,o=function(e,t){var n=function(e){for(var t=0,r=e.length-1;r>=1;r--)t+=e[r];return t}(r.source[e+1]);return(t[e+1]/n*100).toFixed(2)+"%"}(t,n);return b(n[t+1])+"  ("+o+")"}:y)}))}},pt={defaultChartProps:{option:{yAxis:{axisLabel:{showMaxLabel:!0,showMinLabel:!0}}}},optionHandler:function(e,t){void 0===t&&(t={});var r=t.reverseData,n=void 0===r||r,o=e.dataset;n&&(o.source=o.source.map((function(e){var t=e[0],r=e.slice(1);return[t].concat(r.reverse())}))),u(e,{xAxis:{type:"value"},yAxis:{type:"category"}})}},ft={autoOther:{defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset,n=e.series,o=t,a=o.mergeStart,i=void 0===a?6:a,l=o.mergeText,c=void 0===l?"其他":l,s=r.source.slice(0,i),u=r.source.slice(i);if(u[0]){var d=new Array(u[0].length);d.fill(0),d[0]=c;for(var p=0;p<u.length;p++)for(var f=1;f<u[0].length;f++)d[f]+=u[p][f];s.push(d),r.source=s,e.dataset={source:s},e.series=n.slice(0,s.length-1)}}},autoSum:{defaultChartProps:{},optionHandler:function(e){var t=e.dataset,r=e.series,n=t.source;if(t.source.length>2){var o=new Array(n[0].length).fill(0);o[0]="sum";for(var a=1;a<o.length;a++){for(var i=0,l=1;l<n.length;l++)i+=+n[l][a];o[a]=i}n.push(o),r.push(r[0])}}},calendar:{defaultChartProps:{},optionHandler:function(e){var t=e.dataset,r=[],n={};t.source[0]&&t.source[0].slice(1).forEach((function(e){var t=new Date(e),o=[t.getFullYear(),t.getMonth()+1,t.getDate()];n[o[0]]?o.shift():n[o[0]]=!0,r.push(o.join("-"))}));var o={axisLabel:{formatter:function(e,t){return r[t]}}};e.xAxis=o,e.dataset=t}},dataZoom:at,hideSymbol:it,label:dt,maxTag:{defaultChartProps:{},optionHandler:function(e,t){var r=e.series,n=(void 0===t?{}:t).$renderLabel,o=st(void 0===n?{}:n).formatter.series;r.forEach((function(e){u(e,{showSymbol:!1,label:{show:!1},markPoint:{symbol:"pin",symbolSize:20,itemStyle:{color:"transparent"},label:{color:"orangered",formatter:function(t){return["line","bar"].includes(e.type||"")?o(t.value):t.value}},data:[{type:"max",name:"最大值"}]}})}))}},reverse:pt,autoYAxis:{defaultChartProps:{option:{}},optionHandler:function(e){var t=e.yAxis;Array.isArray(t)?t.forEach((function(e){e.scale=!0})):u(e,{yAxis:{scale:!0}})}}},ht={maxGap:10,maxLineNum:1},mt=function(e,t){return e.map((function(r,n){return n>0?r[0]-e[n-1][0]:t})).sort((function(e,t){return e-t}))[0]},vt={defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=e.series,n=e.dataset;if(r.length){for(var o=t,a=o.regressionFormula,i=void 0!==a&&a,l=o.regressionOrder,c=void 0===l?2:l,s=n.source[0].slice(1),u=[],d=1;d<n.source[0].length;d++){for(var p=0,f=1;f<n.source.length;f++)p+=n.source[f][d];u.push([d,p/r.length])}var h=b.regression("polynomial",u,parseInt(c));h.points.sort((function(e,t){return e[0]-t[0]})),h.points=h.points.map((function(e,t){return[s[t],e[1]]}));var m=h.points.map((function(e){return+e[1].toFixed(2)})),v={type:"line",showSymbol:!1,smooth:!0,color:"rgb(140, 140, 140)",lineStyle:{type:"dashed"},markPoint:{silent:!0,itemStyle:{normal:{color:"transparent"}},label:{normal:{show:i,position:"left",formatter:h.expression,textStyle:{color:"rgb(140, 140, 140)",fontSize:14}}},data:[{coord:h.points[h.points.length-1]}]}};n.source.push(["趋势线"].concat(m)),r.push(v)}}},gt=function(e,t){void 0===t&&(t=0);var r,n,o=function(e,t){var r=e.match(/[\d.]+/g);if(r.length>=3)return"rgba("+r[0]+","+r[1]+","+r[2]+","+t+")"};if(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.test(e))r=o(e,t);else if(/^rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)$/.test(e)){r=o((n=e.match(/[\d.]+/g)).length>=3?"rgb("+n[0]+","+n[1]+","+n[2]+")":"",t)}else/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(e)&&(r=function(e,t){var r=e.toLowerCase();if(r&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(r)){if(4===r.length){for(var n="#",o=1;o<4;o+=1)n+=r.slice(o,o+1).concat(r.slice(o,o+1));r=n}var a=[];for(o=1;o<7;o+=2)a.push(parseInt("0x"+r.slice(o,o+2)));return"rgba("+a.join(",")+","+t+")"}return r}(e,t));return r};function yt(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return bt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(e,t)}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var xt=["min","max","average","median"],wt=function(e,t,r){if("number"==typeof e)return e;if("string"==typeof e){if("min"===e)return t;if("max"===e)return r}},kt=function(e){var t=e.pieces,r=e.markLineColor,n=e.show,o=e.position;if(!n)return{};return{symbol:"none",data:t.map((function(e){var t=e.value,n=void 0===t?"min":t,a=e.name;return function(e,t){var n={lineStyle:{color:r},label:{position:o}};return"string"==typeof e&&xt.includes(e)&&(n.type=e),"number"==typeof e&&(n.yAxis=e),n.label.formatter=t||"",n}(n,void 0===a?n:a)})).flat(1)}},Ct={holidays:{"2020-01-01":"元旦","2020-01-24":"除夕","2020-01-25":"春节","2020-01-26":"春节","2020-01-27":"春节","2020-01-28":"春节","2020-01-29":"春节","2020-01-30":"春节","2020-01-31":"春节","2020-02-01":"春节","2020-02-02":"春节","2020-04-04":"清明节","2020-04-05":"清明节","2020-04-06":"清明节","2020-05-01":"劳动节","2020-05-02":"劳动节","2020-05-03":"劳动节","2020-05-04":"劳动节","2020-05-05":"劳动节","2020-06-25":"端午节","2020-06-26":"端午节","2020-06-27":"端午节","2020-10-01":"中秋节","2020-10-02":"国庆节","2020-10-03":"国庆节","2020-10-04":"国庆节","2020-10-05":"国庆节","2020-10-06":"国庆节","2020-10-07":"国庆节","2020-10-08":"国庆节"},restDays:{"2020-01-19":"春节前调休","2020-04-26":"劳动节前调休","2020-05-09":"劳动节后调休","2020-06-28":"端午节后调休","2020-09-27":"国庆节前调休","2020-10-10":"国庆节后调休"},workDays:{},weekend:{"2020-01-11":"周末","2020-01-12":"周末","2020-01-18":"周末","2020-01-04":"周末","2020-01-05":"周末","2020-02-15":"周末","2020-02-16":"周末","2020-02-22":"周末","2020-02-23":"周末","2020-02-29":"周末","2020-02-08":"周末","2020-02-09":"周末","2020-03-14":"周末","2020-03-15":"周末","2020-03-21":"周末","2020-03-22":"周末","2020-03-28":"周末","2020-03-29":"周末","2020-03-01":"周末","2020-03-07":"周末","2020-03-08":"周末","2020-04-11":"周末","2020-04-12":"周末","2020-04-18":"周末","2020-04-19":"周末","2020-04-25":"周末","2020-05-10":"周末","2020-05-16":"周末","2020-05-17":"周末","2020-05-23":"周末","2020-05-24":"周末","2020-05-30":"周末","2020-05-31":"周末","2020-06-13":"周末","2020-06-14":"周末","2020-06-20":"周末","2020-06-21":"周末","2020-06-06":"周末","2020-06-07":"周末","2020-07-11":"周末","2020-07-12":"周末","2020-07-18":"周末","2020-07-19":"周末","2020-07-25":"周末","2020-07-26":"周末","2020-07-04":"周末","2020-07-05":"周末","2020-08-15":"周末","2020-08-16":"周末","2020-08-22":"周末","2020-08-23":"周末","2020-08-29":"周末","2020-08-30":"周末","2020-08-01":"周末","2020-08-02":"周末","2020-08-08":"周末","2020-08-09":"周末","2020-09-12":"周末","2020-09-13":"周末","2020-09-19":"周末","2020-09-20":"周末","2020-09-26":"周末","2020-09-05":"周末","2020-09-06":"周末","2020-10-11":"周末","2020-10-17":"周末","2020-10-18":"周末","2020-10-24":"周末","2020-10-25":"周末","2020-10-31":"周末","2020-11-14":"周末","2020-11-15":"周末","2020-11-21":"周末","2020-11-22":"周末","2020-11-28":"周末","2020-11-29":"周末","2020-11-01":"周末","2020-11-07":"周末","2020-11-08":"周末","2020-12-12":"周末","2020-12-13":"周末","2020-12-19":"周末","2020-12-20":"周末","2020-12-26":"周末","2020-12-27":"周末","2020-12-05":"周末","2020-12-06":"周末"}},Et={holidays:{"2019-01-01":"元旦","2019-02-04":"除夕","2019-02-05":"春节","2019-02-06":"春节","2019-02-07":"春节","2019-02-08":"春节","2019-02-09":"春节","2019-02-10":"春节","2019-04-05":"清明节","2019-04-06":"清明节","2019-04-07":"清明节","2019-05-01":"劳动节","2019-05-02":"劳动节","2019-05-03":"劳动节","2019-05-04":"劳动节","2019-06-07":"端午节","2019-06-08":"端午节","2019-06-09":"端午节","2019-09-13":"中秋节","2019-09-14":"中秋节","2019-09-15":"中秋节","2019-10-01":"国庆节","2019-10-02":"国庆节","2019-10-03":"国庆节","2019-10-04":"国庆节","2019-10-05":"国庆节","2019-10-06":"国庆节","2019-10-07":"国庆节"},restDays:{"2019-02-02":"春节前调休","2019-02-03":"春节前调休","2019-04-28":"劳动节前调休","2019-05-05":"劳动节后调休","2019-09-29":"国庆节前调休","2019-10-12":"国庆节后调休"},workDays:{},weekend:{"2019-01-12":"周末","2019-01-13":"周末","2019-01-19":"周末","2019-01-20":"周末","2019-01-26":"周末","2019-01-27":"周末","2019-01-05":"周末","2019-01-06":"周末","2019-02-16":"周末","2019-02-17":"周末","2019-02-23":"周末","2019-02-24":"周末","2019-03-10":"周末","2019-03-16":"周末","2019-03-17":"周末","2019-03-23":"周末","2019-03-24":"周末","2019-03-30":"周末","2019-03-31":"周末","2019-03-02":"周末","2019-03-03":"周末","2019-03-09":"周末","2019-04-13":"周末","2019-04-14":"周末","2019-04-20":"周末","2019-04-21":"周末","2019-04-27":"周末","2019-05-11":"周末","2019-05-12":"周末","2019-05-18":"周末","2019-05-19":"周末","2019-05-25":"周末","2019-05-26":"周末","2019-06-15":"周末","2019-06-16":"周末","2019-06-22":"周末","2019-06-23":"周末","2019-06-29":"周末","2019-06-30":"周末","2019-06-01":"周末","2019-06-02":"周末","2019-07-13":"周末","2019-07-14":"周末","2019-07-20":"周末","2019-07-21":"周末","2019-07-27":"周末","2019-07-28":"周末","2019-07-06":"周末","2019-07-07":"周末","2019-08-10":"周末","2019-08-11":"周末","2019-08-17":"周末","2019-08-18":"周末","2019-08-24":"周末","2019-08-25":"周末","2019-08-31":"周末","2019-08-03":"周末","2019-08-04":"周末","2019-09-21":"周末","2019-09-22":"周末","2019-09-28":"周末","2019-09-01":"周末","2019-09-07":"周末","2019-09-08":"周末","2019-10-13":"周末","2019-10-19":"周末","2019-10-20":"周末","2019-10-26":"周末","2019-10-27":"周末","2019-11-10":"周末","2019-11-16":"周末","2019-11-17":"周末","2019-11-23":"周末","2019-11-24":"周末","2019-11-30":"周末","2019-11-02":"周末","2019-11-03":"周末","2019-11-09":"周末","2019-12-14":"周末","2019-12-15":"周末","2019-12-21":"周末","2019-12-22":"周末","2019-12-28":"周末","2019-12-29":"周末","2019-12-01":"周末","2019-12-07":"周末","2019-12-08":"周末"}},At={holidays:{"2018-01-01":"元旦","2018-02-15":"春节","2018-02-16":"春节","2018-02-17":"春节","2018-02-18":"春节","2018-02-19":"春节","2018-02-20":"春节","2018-02-21":"春节","2018-04-05":"清明节","2018-04-06":"清明节","2018-04-07":"清明节","2018-04-29":"劳动节","2018-04-30":"劳动节","2018-05-01":"劳动节","2018-06-16":"端午节","2018-06-17":"端午节","2018-06-18":"端午节","2018-09-22":"中秋节","2018-09-23":"中秋节","2018-09-24":"中秋节","2018-10-01":"国庆节","2018-10-02":"国庆节","2018-10-03":"国庆节","2018-10-04":"国庆节","2018-10-05":"国庆节","2018-10-06":"国庆节","2018-10-07":"国庆节","2018-12-30":"元旦","2018-12-31":"元旦"},restDays:{"2018-02-11":"春节前调休","2018-02-24":"春节后调休","2018-04-08":"清明节调休","2018-04-28":"劳动节前调休","2018-09-29":"国庆前调休","2018-09-30":"国庆前调休","2018-12-29":"元旦前调休"},workDays:{},weekend:{"2018-01-13":"周末","2018-01-14":"周末","2018-01-20":"周末","2018-01-21":"周末","2018-01-27":"周末","2018-01-28":"周末","2018-01-06":"周末","2018-01-07":"周末","2018-02-10":"周末","2018-02-25":"周末","2018-02-03":"周末","2018-02-04":"周末","2018-03-10":"周末","2018-03-11":"周末","2018-03-17":"周末","2018-03-18":"周末","2018-03-24":"周末","2018-03-25":"周末","2018-03-31":"周末","2018-03-03":"周末","2018-03-04":"周末","2018-04-14":"周末","2018-04-15":"周末","2018-04-21":"周末","2018-04-22":"周末","2018-04-01":"周末","2018-05-12":"周末","2018-05-13":"周末","2018-05-19":"周末","2018-05-20":"周末","2018-05-26":"周末","2018-05-27":"周末","2018-05-05":"周末","2018-05-06":"周末","2018-06-10":"周末","2018-06-23":"周末","2018-06-24":"周末","2018-06-30":"周末","2018-06-02":"周末","2018-06-03":"周末","2018-06-09":"周末","2018-07-14":"周末","2018-07-15":"周末","2018-07-21":"周末","2018-07-22":"周末","2018-07-28":"周末","2018-07-29":"周末","2018-07-01":"周末","2018-07-07":"周末","2018-07-08":"周末","2018-08-11":"周末","2018-08-12":"周末","2018-08-18":"周末","2018-08-19":"周末","2018-08-25":"周末","2018-08-26":"周末","2018-08-04":"周末","2018-08-05":"周末","2018-09-15":"周末","2018-09-16":"周末","2018-09-01":"周末","2018-09-02":"周末","2018-09-08":"周末","2018-09-09":"周末","2018-10-13":"周末","2018-10-14":"周末","2018-10-20":"周末","2018-10-21":"周末","2018-10-27":"周末","2018-10-28":"周末","2018-11-10":"周末","2018-11-11":"周末","2018-11-17":"周末","2018-11-18":"周末","2018-11-24":"周末","2018-11-25":"周末","2018-11-03":"周末","2018-11-04":"周末","2018-12-15":"周末","2018-12-16":"周末","2018-12-22":"周末","2018-12-23":"周末","2018-12-01":"周末","2018-12-02":"周末","2018-12-08":"周末","2018-12-09":"周末"}},Pt=function(e){return new Date(e).getTime()},St=function(e){return x(e).format("YYYY-MM-DD")},Lt=function(){var e=Ct,t=Et,r=At,n={holidays:{},restDays:{},workDays:{},weekend:{}};return Object.keys(n).forEach((function(o){!function(n,o){o[n]=Object.assign({},e[n],t[n],r[n])}(o,n)})),n},Ot=function(e,t,r){var n={};return Object.keys(e).forEach((function(o){Pt(o)>=t&&Pt(o)<=r&&(n[o]=e[o])})),n},_t=function(e,t){var r=function(e){return new Date(Pt(e)-864e5).getTime()}(e),n=function(e){return new Date(Pt(e)+864e5).getTime()}(e),o=St(r),a=St(n);return!!t[o]||!!t[a]},zt=function(e,t,r,n){return[{name:e,yAxis:null,xAxis:n[t]},{yAxis:null,xAxis:n[r]}]},Ft=function(e,t,r,n){var o=r.includes("holiday"),a=r.includes("weekend"),i=t.length,l=Lt(),c=l.holidays,s=l.weekend,u=l.restDays,d=[Pt(e[0]),Pt(e[i-1])],p=d[0],f=d[1],h={holidays:{},weekend:{}};h.holidays=Ot(c,p,f),h.weekend=Ot(s,p,f);var m,v,g,y=[],b=(m=h.holidays,v={},g={},Object.keys(m).forEach((function(e){var t=m[e],r=e.toString().split("-")[0]+"-"+t;v[r]?v[r].count+=1:v[r]={date:e,count:1}})),Object.keys(v).map((function(e){var t=v[e],r=t.date,n=t.count,o=e.split("-")[1];g[r]={name:o,count:n}})),g),x=[],w=e.reverse(),k=t.reverse();return w.forEach((function(e,t){var r=i-1-t;if(b[e]&&o){var l=b[e]||{},c=l.count,s=void 0===c?0:c,d=l.name,p=void 0===d?"":d;1===s?y[r]=0:s>1&&(x.push(zt(n?p:"",t,t-s+1,k)),y[r]=null)}else h.weekend[e]&&a?_t(e,u)?y[r]=0:t>=1&&"周末"===h.weekend[w[t]]&&"周末"===h.weekend[w[t-1]]?(x.push(zt(n?"周末":"",t,t-1,k)),y[r]=null):y[r]=null:y[r]=null})),{barData:y,markAreaData:x}},Nt={"line-basic":{defaultChartProps:{option:{}},optionHandler:function(e){var t=e.dataset.source.length-1;e.series=new Array(t).fill({}).map((function(e,t){return{type:"line"}}))}},"line-autoSum":ft.autoSum,"line-autoOther":ft.autoOther,"line-maxTag":ft.maxTag,"line-markLine":{defaultChartProps:{},optionHandler:function(e,t){var r=e.series;void 0===t&&(t={});var n=t,o=n.type,a=void 0===o?"average":o,i=n.name,l=void 0===i?"平均值":i;r.forEach((function(e){u(e,{markLine:{data:[{type:a,name:l}]}})}))}},"line-peak":{defaultChartProps:{},optionHandler:function(e,t){var r=e.dataset,n=e.series,o=r.source,a=E(E({},ht),t),i=a.maxGap,l=a.maxLineNum,c=a.$renderLabel,s=void 0===c?{}:c,d={},p=o.slice(1,l+1).map((function(e){return e.slice(1)})),f=st(s).formatter.series;p.forEach((function(e,t){for(var r=[],n=[],o=[],a=1;a<e.length-1;a++)e[a]>e[a-1]&&e[a]>e[a+1]&&(r.push([a,e[a],"on_peak"]),o.push([a,e[a],"on_peak"])),e[a]<e[a-1]&&e[a]<e[a+1]&&(n.push([a,e[a],"off_peak"]),o.push([a,e[a],"off_peak"]));for(var l=mt(r,i),c=mt(n,i),s=[],u=o;l<i;){s=[];for(var p=0;p<=r.length-2;p++)r[p+1][0]-r[p][0]<i&&s.push(r[p+1][1]>r[p][1]?r[p]:r[p+1]);u=v(u,s,g),r=v(r,s,g),l=mt(r,i)}for(;c<i;){s=[];for(var f=0;f<=n.length-2;f++)n[f+1][0]-n[f][0]<i&&s.push(n[f+1][1]>n[f][1]?n[f+1]:n[f]);u=v(u,s,g),n=v(n,s,g),c=mt(n,i)}var h=[];if(u.length){for(var m=[u[0]],y=u[0][2],b=1;b<u.length;b++)u[b][2]===y?m.push(u[b]):(h.push(m),m=[u[b]],y=u[b][2]);h.push(m)}for(var x=[],w=0;w<h.length;w++)if(h[w].length>1){var k=h[w][0][2];if("on_peak"===k){var C=h[w].sort((function(e,t){return t[1]-e[1]}))[0];x.push(C)}if("off_peak"===k){var E=h[w].sort((function(e,t){return e[1]-t[1]}))[0];x.push(E)}}else x.push(h[w][0]);var A=[];x.forEach((function(e,t){var r=e[2];"on_peak"===r&&t<x.length-1&&e[1]<x[t+1][1]&&A.push(e,x[t+1]),"off_peak"===r&&t<x.length-1&&e[1]>x[t+1][1]&&A.push(e,x[t+1])}));var P=(x=v(x,A,g)).filter((function(e){return"on_peak"===e[2]})).map((function(e){return e[0]}));d["line"+t+"_on"]=e.map((function(e,t){return P.indexOf(t)>=0?1:0}));var S=x.filter((function(e){return"off_peak"===e[2]})).map((function(e){return e[0]}));d["line"+t+"_off"]=e.map((function(e,t){return S.indexOf(t)>=0?1:0}))})),n.forEach((function(e,t){u(e,{showAllSymbol:!0,label:{show:!0,position:"inside",formatter:function(e){var r="",n=f?f(e.value[t+1]):e.value[t+1];return t<l&&d["line"+t+"_on"][e.dataIndex]&&(r=n+"\r\n\r\n"),t<l&&d["line"+t+"_off"][e.dataIndex]&&(r="\r\n\r\n"+n),r},color:"auto"}})}))}},"line-calendar":ft.calendar,"line-regression":vt,"line-smooth":{defaultChartProps:{},optionHandler:function(e){e.series.forEach((function(e){e.smooth=!0}))}},"line-hideSymbol":ft.hideSymbol,"line-label":ft.label,"line-dataZoom":ft.dataZoom,"line-autoYAxis":ft.autoYAxis,"line-holiday":{defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset.source,n=e.series,o=t,a=o.ranges,i=void 0===a?["holiday","weekend"]:a,c=o.show,s=void 0===c||c;if(r.length>1){var u=r[0].slice(1),d=u.map((function(e){return l.format.formatTime("yyyy-MM-dd",e)})),p=Ft(d,u,i,s),f={type:"bar",data:p.barData,barGap:"-100%",barCategoryGap:0,barMinHeight:2e3,itemStyle:{color:"rgba(170, 170, 170, 0.08)",barWidth:"40%"},markArea:{data:p.markAreaData,itemStyle:{color:"rgba(170, 170, 170, 0.08)"},label:{color:"#000"}},tooltip:{show:!1}};n.push(f)}}},"line-area":{defaultChartProps:{option:{}},optionHandler:function(e,t,r){var n=e.series;void 0===t&&(t={});var o=(void 0===r?{}:r).themeConfig,a=t.gradualColors,i=void 0===a||a,l=null==o?void 0:o.color;n.forEach((function(e,t){var r=i?{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:""+gt(l[t],.1)},{offset:1,color:""+l[t]}]}}:{};u(e,{areaStyle:E({opacity:.25},r)})}))}},"line-areaStack":{defaultChartProps:{option:{}},optionHandler:function(e,t,r){var n=e.series;void 0===t&&(t={});var o=(void 0===r?{}:r).themeConfig,a=t.gradualColors,i=void 0!==a&&a,l=null==o?void 0:o.color;n.forEach((function(e,t){var r=i?{color:{type:"linear",x:0,y:1,x2:0,y2:0,colorStops:[{offset:0,color:""+gt(l[t],.1)},{offset:1,color:""+l[t]}]}}:{};u(e,{stack:"总量",areaStyle:E({opacity:.25},r)})}))}},"line-marker":{defaultChartProps:{},optionHandler:function(e,t,r){void 0===t&&(t={});var n=e.series,o=e.dataset;if(!n||!n.length)throw new Error("series未定义或者series长度小于1");var a=r.themeConfig.color,i=t,l=i.show,c=void 0===l||l,s=i.position,d=void 0===s?"insideStartTop":s,p=i.visuals,f=void 0===p?[]:p,h=i.pieces,m=void 0===h?[]:h,v=i.visualColor,g=void 0===v?"red":v,y=i.markLineColor,b=void 0===y?"#666":y;u(n[0],{markLine:kt({pieces:m,markLineColor:b,show:c,position:d})});var x={visuals:f,lineColor:g,color:a,dataset:o};e.visualMap=function(e){var t=e.visuals,r=e.lineColor,n=e.color,o=e.seriesIndex,a=void 0===o?0:o,i=e.dataset,l=$e(i)[a],c=l[0],s=l[1],u=[];t.forEach((function(e,t){var r=e[0],n=void 0===r?1/0:r,o=e[1],a=void 0===o?1/0:o,i=wt(n,c,s),l=wt(a,c,s),d=i>l?l:i;u[t]=d}));for(var d,p=Object.keys(u).sort((function(e,t){return u[e]-u[t]})),f=[],h=yt(p);!(d=h()).done;){var m=d.value;f.push(t[m])}var v=f.length;if(!v)return[];var g=function(e){for(var t={},r=[],n=0;n<e.length;n++){var o=e[n];t[o.gte+"-"+o.lte]||(t[o.gte+"-"+o.lte]=o,r.push(o))}return r}(f.map((function(e,t){var o=e[0],a=e[1],i=[],l=0!==t&&t!==v-1,u=0===t,d=t===v-1,p=f[t-1],h=f[t+1],m=p?p[0]:null,g=p?p[1]:null,y=h?h[0]:null,b=h?h[1]:null,x={lineColor:r,isMiddleNum:l,isLastNum:d,prevNum2:g,nextNum1:y,min:c,max:s,color:n};return o&&a?i=i.concat(function(e){var t=e.num1,r=e.num2,n=e.lineColor,o=e.isMiddleNum,a=e.isFirstNum,i=e.isLastNum,l=e.prevNum2,c=e.nextNum1,s=e.min,u=e.max,d=[];return d.push({gte:t,lte:r,color:n}),o?(l&&d.push({gte:l,lte:t}),c&&d.push({gte:r,lte:c})):a&&t>s&&(d.push({gte:s,lte:t}),c&&d.push({gte:r,lte:c})),i&&r<u&&d.push({gte:r,lte:u}),d}(E(E({},x),{},{num1:o,num2:a,isFirstNum:u}))):o?i=i.concat(function(e){var t=e.num1,r=e.lineColor,n=e.isMiddleNum,o=e.prevNum1,a=e.prevNum2,i=e.nextNum1,l=e.nextNum2,c=e.min,s=e.max,u=[];return n?(i&&u.push({gte:t,lte:i,color:r}),a&&u.push({gte:a,lte:t})):t<s&&(u.push({gte:t,lte:i||l||s,color:r}),u.push({gte:a||o||c,lte:t})),u}(E(E({},x),{},{num1:o,prevNum1:m,nextNum2:b}))):a&&(i=i.concat(function(e){var t=e.num2,r=e.lineColor,n=e.isMiddleNum,o=e.prevNum1,a=e.prevNum2,i=e.nextNum1,l=e.nextNum2,c=e.min,s=e.max,u=[];return n?(a&&u.push({gte:a,lte:t,color:r}),i&&u.push({gte:t,lte:i})):t>c&&(u.push({gte:a||o||c,lte:t,color:r}),u.push({gte:t,lte:i||l||s})),u}(E(E({},x),{},{num2:a,prevNum1:m,nextNum2:b})))),i.flat(1)})).flat(1));return[{seriesIndex:a||0,show:!1,dimension:1,inRange:{color:n[a]},pieces:g}]}(x)}}},jt={defaultChartProps:{option:{tooltip:{axisPointer:{type:"shadow",shadowStyle:{color:"rgba(213, 218, 246, 0.25)"},z:0}}}},optionHandler:function(e){var t=e.dataset.source.length-1;e.series=new Array(t).fill({}).map((function(e,t){return{type:"bar"}}))}},Dt={defaultChartProps:{},optionHandler:function(e){var t=e.dataset;e.series.forEach((function(e){u(e,{type:"bar",barGap:"-100%",stack:t.source[1][0]})}))}},Tt={axisLine:{show:!1},splitLine:{show:!1},axisTick:{show:!1}},Mt={xAxis:E({show:!1},Tt),yAxis:E({show:!0},Tt),grid:{top:15}},Ht={xAxis:E({show:!0},Tt),yAxis:E({show:!1},Tt)};function Bt(e,t){return function(e,t){var r=[];if(e&&Array.isArray(e)){var n=[].concat(e);t&&n.reverse();for(var o=1;o<n.length;o++){var a=n[o]/n[o-1]*100;r.push(a.toFixed(2))}}return t&&r.reverse(),r}(e,t).map((function(e){return{value:0,label:{show:!0,color:"#000",formatter:e+"%"}}}))}var It,$t={"bar-basic":jt,"bar-label":dt,"bar-hideSymbol":it,"bar-reverse":pt,"bar-stack":Dt,"bar-hideAxis":{defaultChartProps:{},optionHandler:function(e){var t=e.xAxis,r=e.yAxis;u(e,function(e,t){return Te(e,t)?Mt:Ht}(t,r))}},"bar-percent":{defaultChartProps:{},optionHandler:function(e,t){var r=e.dataset,n=e.series,o=e.xAxis,a=e.yAxis;if(n&&1===n.length&&r&&r.source&&r.source.length>1){var i=[].concat(r.source[1]);i.shift();var l=Te(o,a)?function(e,t,r){var n=r||{},o=n.barWidth,a=void 0===o?"auto":o,i=n.barCategoryGap,l=void 0===i?30:i;return e[0].barCategoryGap=l,e[0].barWidth=a,e[0].barMaxWidth="40%",e.push({name:"",type:"pictorialBar",symbolBoundingData:70,barWidth:"100%",symbolSize:[70,"40%"],symbolOffset:[0,"-120%"],symbolRepeat:!1,hoverAnimation:!1,cursor:"auto",symbol:"path://M171.571,263.667v-48.81h108.333v48.81l-54.167,19.048L171.571,263.667z",color:"rgba(221, 221, 221, 0.4)",emphasis:{itemStyle:{color:"rgba(221, 221, 221, 0.4)"}},z:110,tooltip:{show:!1},label:{position:"top",offset:[0,10]},data:Bt(t,!0)}),{series:e}}(n,i,t):function(e,t,r){var n=r||{},o=n.barWidth,a=void 0===o?"auto":o,i=n.barCategoryGap,l=void 0===i?30:i;return e[0].barCategoryGap=l,e[0].barWidth=a,e[0].barMaxWidth="40%",e.push({name:"",type:"pictorialBar",symbolBoundingData:40,barWidth:"100%",symbolSize:["50%",40],symbolOffset:["100%",-25],symbolRepeat:!1,hoverAnimation:!1,cursor:"auto",symbol:"path://M0,0 L30,0 L40,40 L30,80 L0,80Z",color:"rgba(221, 221, 221, 0.4)",emphasis:{itemStyle:{color:"rgba(221, 221, 221, 0.4)"}},z:110,tooltip:{show:!1},label:{position:"right",offset:[-29,-13]},data:Bt(t,!1)}),{series:e}}(n,i,t);return u(e,l)}}},"bar-range":{defaultChartProps:{datasetParams:{$tooltip:{valueKeys:["range"]}}},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset,n=e.xAxis,o=void 0===n?{}:n,a=e.yAxis,i=void 0===a?{}:a,l=e.showLabel,c=void 0!==l&&l,s=t.$renderLabel,p=void 0===s?{}:s,f=function(e){var t=d(e),r=[],n=t.shift();return n.shift(),t.forEach((function(e){r.push(e.shift())})),{pureArr:t,nameArr:r,categoryArr:n}}(r.source),h=f.pureArr,m=f.nameArr,v=f.categoryArr,g=Te(o,i),y=st(p).formatter.series,b=[];h.forEach((function(e,t){b=[].concat(b,function(e,t,r,n,o){var a=function(e,t,r,n){var o=[],a=[],i=[],l=[],c=d(e);return c.sort((function(e,t){return e[0]-t[0]})),e.forEach((function(e,s){o.push(e[1]<=0?e[1]:e[0]<=0?0:e[0]),i.push(e[1]<=0||e[0]>=0?0:e[0]);var u=r?[e[0],s]:[s,e[0]];l.push({value:e[0],coord:e[0]||c[0][0]?u:[]}),a.push({value:e[1]<=0?e[0]-e[1]:e[0]<=0?e[1]:e[1]-e[0],range:n(e[0])+" - "+n(e[1]),name:t,label:{formatter:n(e[1])},itemStyle:{color:e[2]}})})),{min:o,max:a,negative:i,minLabel:l}}(e,t,n,o),i=a.min,l=a.max,c=a.minLabel,s=a.negative;return[{type:"bar",stack:t,tooltip:{show:!1},itemStyle:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"},emphasis:{itemStyle:{barBorderColor:"rgba(0,0,0,0)",color:"rgba(0,0,0,0)"}},label:{show:!1},data:i},{type:"bar",stack:t,name:t,tooltip:{show:!1},label:{show:!1},data:s},{type:"bar",stack:t,name:t,tooltip:{show:!0},label:{show:r,position:n?"right":"top"},markPoint:{symbol:"rect",symbolSize:1e-15,label:{show:r,position:n?"left":"bottom"},data:c},data:l}]}(e,m[t],c,g,y))}));var x={onZero:!1};return g?e.yAxis=E(E({},i),{},{data:v,axisLine:x}):e.xAxis=E(E({},o),{},{data:v,axisLine:x}),u(e,{series:b})}},"bar-dataZoom":at,"bar-stackPercent":{defaultChartProps:{datasetParams:{$renderLabel:{type:".2percent"}}},optionHandler:function(e){var t=e.dataset.source,r=void 0===t?[]:t,n=e.series,o=r.slice(1),a=o.reduce((function(e,t){return e.map((function(e,r){return 0===r?e:e+(+t[r]||0)}))}),new Array(r[0].length).fill(0)),i=o.map((function(e){return e.map((function(e,t){return 0===t?e:e/(a[t]||1)}))}));e.dataset.source=[r[0]].concat(i),n.forEach((function(e,t){u(e,{stack:r[0][0]})}))}}},Rt={"pie-basic":{defaultChartProps:{option:{xAxis:{show:!1}}},optionHandler:function(e){for(var t=e.dataset,r=t.source.length-1,n=[],o=0;o<r;o++){t.source[o+1][0];n.push({type:"pie",radius:[0,"60%"],label:{formatter:"{b}"}})}e.series=n}},"pie-ring":{defaultChartProps:{option:{}},optionHandler:function(e,t){var r=e.series;void 0===t&&(t={});var n=t.radius,o=void 0===n?["40%","60%"]:n;r.forEach((function(e){u(e,{radius:o,label:u({},e.label,{formatter:function(e){var t=e.name,r=e.percent;return t.replace(/(.{11})(.*)/,"$1...")+"\n"+r+"%"}})})}))}},"pie-hideSymbol":ft.hideSymbol,"pie-ringIndicator":{defaultChartProps:{option:{}},optionHandler:function(e,t){void 0===t&&(t={});var r=t,n=r.radius,o=void 0===n?["40%","60%"]:n,a=r.sumKey,i=void 0===a?null:a,l=r.name,c=void 0===l?"":l,s=r.value,d=void 0===s?"":s,p=e.series,f=e.dataset,h=f.source,m=f.target,v=i?m.findIndex((function(e){return e.key===i})):1,g=d|h[-1===v?1:v].reduce((function(e,t,r){return 0!==r&&e+t}),[0]);e.graphic=[{type:"text",top:"44%",left:"center",z:10,style:{text:c||"总计",textAlign:"center",fill:"#ababab",fontSize:16,fontWeight:"bold"}},{type:"text",left:"center",top:"50%",z:10,style:{text:g.toString().replace(/\B(?=(?:\d{3})+$)/g,","),textAlign:"center",fill:"#000",fontSize:20,fontWeight:"bold"}}],p.forEach((function(e){u(e,{radius:o,label:u({},e.label,{formatter:function(e){var t=e.name,r=e.percent;return t.replace(/(.{11})(.*)/,"$1...")+"\n"+r+"%"}})})}))}},"pie-autoOther":{defaultChartProps:{},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset,n=t,o=n.mergeStart,a=void 0===o?6:o,i=n.mergeText,l=void 0===i?"其他":i,c=r.source,s=c[0],u=c[1],d=void 0===u?[]:u,p=0;if(s.splice(a,1/0,l),!(d.length-1<=a)){for(var f=a;f<d.length;f++)p+=d[f];d.splice(a,1/0,p)}}}},Wt={line:{type:"line",showSymbol:!1,label:{show:!1}},bar:{type:"bar",label:{show:!1}},area:{type:"line",label:{show:!1},areaStyle:{}}},Gt=function(e,t){void 0===t&&(t=0);var r,n,o,a,i,l=(n=(r=e).toString().split("."),o=n[0],a=n[1],i=void 0===a?"":a,Math.abs(r)>1?o.length-1:i.length-i.replace(/^0*/,"").length+1),c=e;if(Math.abs(e)>1){var s=Math.pow(10,l-t),u=w.divide(e,s);c=w.times(Math.ceil(u),s)}else{var d=Math.pow(10,l+t),p=w.times(e,d);c=w.divide(Math.ceil(p),d)}return c},Yt={"doubleY-basic":{defaultChartProps:{option:{}},optionHandler:function(e,t){void 0===t&&(t={});for(var r=e.dataset,n=e.series,o=void 0===n?[]:n,a=t.seriesTypes,i=void 0===a?["line","bar"]:a,l=0,c=0,s=0,u=0,d=1,p=r.source.length;d<p;d++){var f=r.source[d],h=(f[0],f.slice(1)),m="line";d===r.source.length-1?(s=Math.min.apply(Math,[s].concat(h)),u=Math.max.apply(Math,[u].concat(h)),m=i[1]):(l=Math.max.apply(Math,[l].concat(h)),c=Math.min.apply(Math,[c].concat(h)),m=i[0]);var v=Wt[m]||Wt.line;o.push(E({},v))}var g=w.divide(w.minus(l,c),5),y=Gt(g),b=w.divide(w.minus(u,s),5);b=w.times(b,w.divide(y,g));var x=Gt(b),k=Math.max(Math.ceil(l/y),Math.ceil(u/x)),C=Math.min(Math.floor(c/y),Math.floor(s/x));o.length>1&&(o[o.length-1].yAxisIndex=1),e.series=o,e.yAxis=[{max:w.times(y,k),min:w.times(y,C),interval:y,type:"value"},{max:w.times(x,k),min:w.times(x,C),interval:x,type:"value"}]}},"doubleY-label":dt,"doubleY-autoYAxis":{defaultChartProps:{option:{}},optionHandler:function(e){e.yAxis.forEach((function(e,t){e.scale=!0,delete e.max,delete e.min,delete e.interval,1===t&&u(e,{splitLine:{show:!1}})}))}},"doubleY-dataZoom":ft.dataZoom},qt={"scatter-basic":{defaultChartProps:{option:{}},optionHandler:function(e){var t=e.dataset,r=t.source.length-1;e.series=new Array(r).fill({}).map((function(e,r){t.source[r+1][0];return{type:"scatter"}}))}},"scatter-regression":vt,"scatter-dataZoom":at},Ut={"indicator-basic":{defaultChartProps:{option:{}}},"indicator-multi":{defaultChartProps:{option:{}}}},Vt={"card-basic":{defaultChartProps:{option:{}}},"card-average":{defaultChartProps:{option:{}}}},Zt={"funnel-basic":{defaultChartProps:{option:{xAxis:{show:!1}},datasetParams:{sort:"default",$tooltip:{valueKeys:["value","rate"]}}},optionHandler:function(e,t){var r=e.dataset,n=t.$renderLabel,o=void 0===n?{}:n,a=t.sort,i=r.source.length-1,l=r.source[0],c=(l[0],l.slice(1)),s=r.source[1],u=(s[0],s.slice(1)),d=st(o).formatter.series,p=c.map((function(e,t){return{name:e,value:u[t]}}));"none"!==a&&p.sort((function(e,t){return t.value-e.value})),e.series=new Array(i).fill({}).map((function(e,t){var r=p.map((function(e,t){var r=e.name,n=e.value,o=p[Math.max(t-1,0)].value;return{name:r,value:n,rate:"("+j.percent(n/o)+")"}}));return{type:"funnel",label:{show:!0,position:"inside",formatter:function(e){var t=e.data,r=(t=void 0===t?{}:t).name,n=void 0===r?"":r,o=t.value;return n+" "+d(void 0===o?"":o)}},top:30,bottom:25,sort:a,data:r}}))}},"funnel-contrast":{defaultChartProps:{option:{xAxis:{show:!1}},datasetParams:{sort:"default",$tooltip:{valueKeys:["value","rate"]}}},optionHandler:function(e,t){var r=e.dataset,n=t.$renderLabel,o=void 0===n?{}:n,a=t.sort;r.source.length;var i=st(o).formatter.series,l=r.source[0],c=(l[0],l.slice(1)),s=function(e){var t=r.source[1][e],n=c.map((function(e,r){return{name:e,value:t[r]}}));return"none"!==a&&n.sort((function(e,t){return t.value-e.value})),n.map((function(e,t){var r=e.name,o=e.value,a=n[Math.max(t-1,0)].value;return{name:r,value:o,rate:"("+j.percent(o/a)+")"}}))},u={show:!0,position:"inside",formatter:function(e){var t=e.data,r=(t=void 0===t?{}:t).name,n=void 0===r?"":r,o=t.value;return n+" "+i(void 0===o?"":o)}},d={type:"funnel",funnelAlign:"right",right:"50%",label:u,top:30,bottom:25,sort:a,data:s(1)},p={type:"funnel",funnelAlign:"left",left:"50%",label:u,top:30,bottom:25,sort:a,data:s(2)};e.series=[d,p]}},"funnel-column":{defaultChartProps:{option:{}}},"funnel-hideSymbol":it},Kt={"map-basic":{defaultChartProps:{option:{xAxis:{show:!1},yAxis:{show:!1},legend:{show:!1},tooltip:{trigger:"item"}}},optionHandler:function(e,t){void 0===t&&(t={});var r=e.dataset,n=t,o=n.mapType,a=void 0===o?"100000":o,i=n.areaColor,l=void 0===i?"#eee":i,c=n.borderColor,s=void 0===c?"#fff":c,u=0,d=0,p=r.source[1];if(p)for(var f=1;f<p.length;f++){var h=p[f];u=Math.max(u,h),d=Math.min(d,h)}e.visualMap={max:u,min:d,text:["多","少"],realtime:!1,inRange:{color:["#fff","#5f7af1"]}},e.series=[{type:"map",mapType:a,layoutCenter:["50%","60%"],layoutSize:"100%",itemStyle:{areaColor:l,borderColor:s},label:{formatter:"{b}"}}]}},"map-label":ft.label},Xt=E(E(E(E(E(E(E(E(E({},Nt),$t),Rt),Yt),qt),Ut),Vt),Zt),Kt),Jt=["line","bar","doubleY"],Qt=["basic","autoOther","autoSum","area","areaStack","maxTag","markLine","regression","peak","stack","contrast","reverse","ring","smooth","symbol","label","hideSymbol","autoYAxis"],er=function(e){var t=[],r=[],n=[];e.split("&").forEach((function(e){r.push(e.split("-")[0]),n.push(e)})),r=r.map((function(e){return e+"-basic"})),(t=t.concat(r,n).filter((function(e){return e.includes("-")}))).sort((function(e,t){return(-1===Qt.indexOf(e.split("-")[1])?1/0:Qt.indexOf(e.split("-")[1]))-(-1===Qt.indexOf(t.split("-")[1])?1/0:Qt.indexOf(t.split("-")[1]))})),t.sort((function(e,t){return Jt.indexOf(e.split("-")[0])-Jt.indexOf(t.split("-")[0])})),t=Array.from(new Set(t));var o={},a=[],i=[],l=void 0;t.forEach((function(e){if(Xt[e]){var t=Xt[e],r=t.defaultChartProps,n=t.optionHandler,c=t.onResize,s=t.render;u(o,r),n&&a.push(n),c&&i.push(c),s&&(l=s)}}));return{defaultChartProps:o,datasetHandler:function(e,r,n){void 0===r&&(r={}),void 0===n&&(n={});var o={dataset:e},i=t.length>2,l=y(r,Object.keys(r).filter((function(e){return e.startsWith("$")})));return a.forEach((function(e,a){var c=t[a].split("-")[1],s=E({},l);if(i)u.apply(void 0,[s].concat(r[c]));else{var d=r[c]?E({},r[c]):r;u(s,d)}e(o,s,n)})),o},resizeHandler:i,externalRender:l}},tr={},rr=null,nr=function(){var e=S(A.mark((function e(t){var r,n;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!tr[t]){e.next=2;break}return e.abrupt("return",tr[t]);case 2:if(!It){e.next=8;break}return e.next=5,It;case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,It=new Promise((function(e,t){rr&&e(rr);var r=document.createElement("script");r.type="text/javascript",document.head.append(r),r.onload=function(){window.AMapUI.loadUI(["geo/DistrictExplorer"],(function(t){rr=new t,e(rr)}))},r.onerror=function(){return t("加载失败")},r.src="//webapi.amap.com/ui/1.1/main.js"}));case 10:e.t0=e.sent;case 11:return r=e.t0,n=new Promise(function(){var e=S(A.mark((function e(n,o){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.loadAreaNode(t,(function(e,r){if(e)return o(e);if(!r)return o("查询结果空");!r&&o("查询结果空");var a={type:"FeatureCollection",features:r.getSubFeatures()};l.registerMap(t,a),n(a)}));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),tr[t]=n,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function or(e,t,r,n){var o={};return(null==e?void 0:e.length)?(e.forEach((function(e){var a=e||{},i=a.name,l=a.option,c=n[i];o[i]=c&&c.init(r,t,l)})),o):o}var ar=function(e){return l.format.formatTime("yyyy-M-d hh:mm:ss",e).split(/[\-\s\:]/)},ir=function(e,t,r){void 0===t&&(t="d"),void 0===r&&(r=!1);var n={y:1,M:2,d:3,h:5,m:5,s:6},o=[];if(r)return n[t]>3?e.slice(3,n[t]).join(":")+"\n"+e.slice(0,3).join("-"):e.slice(0,n[t]||2).join("-");switch(t){case"y":o=e[0]+"年";break;case"M":o=e[1]+"月";break;case"d":o=e.slice(1,3).join("-");break;case"h":o=e[3]+":00";break;case"m":o=e.slice(3,5).join(":");break;case"s":o=e.slice(3,6).join(":");break;default:o=e.slice(1,3).join("-")}return o},lr=function(e,t,r){var n,o=(t||{}).$timeAxis,a=(o=void 0===o?{}:o).show,i=void 0!==a&&a,l=o.grain,c=void 0===l?"d":l;if(r&&i){var s=u({},r._theme,e),d=s.xAxis,p=s.yAxis,f=Te(d,p),h=[];return(n={})[f?"yAxis":"xAxis"]={axisLabel:{formatter:function(e,t){var r=ar(e);(h.slice(-1)[0]||{}).index>t?h=[{index:t,value:e}]:h.push({index:t,value:e});var n=h.slice(-2,-1)[0]||{},o=n.index,a=n.value,i=ar(a);return!o&&0!==o||i[0]!==r[0]?ir(r,c,!0):["h","m","s"].includes(c)&&o>=0&&i[2]!==r[2]?ir(r,c)+"\n"+ir(r,"d"):ir(r,c)}}},n}};var cr={backgroundColor:"rgba(0,0,0,0)",grid:{top:30,left:"3%",right:"3%",bottom:30,containLabel:!0},tooltip:{confine:!0,show:!0,trigger:"axis",axisPointer:{type:"line",lineStyle:{color:"hsla(231, 51%, 78%, 0.5)"}},borderWidth:0,padding:10,extraCssText:"box-shadow: rgb(174, 174, 174) 0px 0px 10px; border-radius: 3px; line-height: 21px; padding: 10px 12px 8px",borderColor:"none",backgroundColor:"rgba(255, 255, 255, 0.95)",textStyle:{color:"#666",fontSize:12,fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontWeight:400},formatter:et.formatter()},legend:{top:"bottom",type:"scroll",itemWidth:12,itemHeight:3,padding:5,icon:"rect",selectedMode:!0,textStyle:{color:"black",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:12,lineHeight:18},formatter:function(e){void 0===e&&(e="");return e.length>20?e.substr(0,20)+"...":e}},categoryAxis:{splitLine:{show:!1},axisLine:{show:!0,lineStyle:{color:"#ccc"}},axisTick:{show:!0,lineStyle:{color:"#ccc"},alignWithLabel:!0},axisLabel:{color:"#7F7F7F",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:12,fontWeight:"300"},triggerEvent:!0},valueAxis:{splitLine:{show:!0,lineStyle:{type:"dotted",width:.8}},axisLine:{show:!1,lineStyle:{color:"#ccc"}},axisTick:{show:!1},axisLabel:{color:"#7F7F7F",fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:12,fontWeight:"300"},triggerEvent:!0},line:{seriesLayoutBy:"row",showSymbol:!0,showAllSymbol:!1,label:{show:!0}},pie:{seriesLayoutBy:"row",label:{show:!0},tooltip:{trigger:"item"},legend:!1},bar:{seriesLayoutBy:"row",barMaxWidth:"55%"},scatter:{seriesLayoutBy:"row"},funnel:{seriesLayoutBy:"row",tooltip:{trigger:"item"}},map:{seriesLayoutBy:"row"},wordCloud:{seriesLayoutBy:"row",tooltip:{trigger:"item"}}},sr=function(e,t){var r,n=void 0===t?{}:t,o=n.placement,a=void 0===o?"bottom":o,i=n.width,l=void 0===i?"auto":i;if("bottom"===a)return{};var c=null==e?void 0:e.legend;if(!1===c.show)return{};var s=(null==e?void 0:null===(r=e.dataset)||void 0===r?void 0:r.source)||[];if((null==s?void 0:s.length)<2||!s[1][0])return{};var u=l;if("auto"===l){var d,p=cr.legend,f=p.textStyle.fontSize,h=void 0===f?12:f,m=p.itemWidth,v=void 0===m?12:m,g=p.padding,y=void 0===g?5:g,b=(null==c?void 0:null===(d=c.textStyle)||void 0===d?void 0:d.fontSize)||h,x=(null==c?void 0:c.itemWidth)||v,w=(null==c?void 0:c.padding)||y,k=s.slice(1,s.length).map((function(e){return function(e,t){void 0===t&&(t=20);for(var r=e.length,n=0,o=0,a=0;a<r;a++){var i=e.charCodeAt(a);if(a>=t){o+=3;break}i>=0&&i<=128?o+=1:n+=1}return{length:2*n+o,chineseCharLen:n,enCharLen:o}}(e[0])})).sort((function(e,t){return t.length-e.length}))[0],C=k.length,E=k.chineseCharLen,A=k.enCharLen;u=Math.max(Math.floor(C*b*.55)+(x+(Array.isArray(w)?w[1]:w))+(A/E>1?30:0),80)}var P={};switch(a){case"top":case"topLeft":case"topRight":P={legend:{top:"top"},grid:{top:40,bottom:15}},"topLeft"===a&&(P.legend.left="3%"),"topRight"===a&&(P.legend.right="3%");break;case"right":case"rightTop":case"rightBottom":P={legend:{orient:"vertical",top:"middle",right:"right"},grid:{right:u,bottom:15}},"rightTop"===a&&(P.legend.top="top"),"rightBottom"===a&&(P.legend.top="bottom");break;case"left":case"leftTop":case"leftBottom":P={legend:{orient:"vertical",top:"middle",left:"left"},grid:{left:u,bottom:15}},"leftTop"===a&&(P.legend.top="top"),"leftBottom"===a&&(P.legend.top="bottom");break;case"bottomLeft":case"bottomRight":P={legend:{}},"bottomLeft"===a&&(P.legend.left="left"),"bottomRight"===a&&(P.legend.left="right")}return P},ur=i.render,dr=null,pr=function(e,t,r){var n,o=t.getOption().xAxis[0].type,a="value"===(void 0===o?"category":o),i=[e.zrX,e.zrY],l="hideTip"===r,c=t.containPixel({seriesIndex:0},i);if(e.zrX&&e.zrX&&c){var s=t.convertFromPixel({seriesIndex:0},i),u=s[0],d=s[1];"number"==typeof(n=u)&&!isNaN(n)&&setTimeout((function(){t.dispatchAction({type:r,seriesIndex:0,dataIndex:a?parseInt(d):u}),l&&t.dispatchAction({type:"updateAxisPointer",currTrigger:"leave"})}),l?500:0)}},fr={triggerCustomListener:function(e){e.getZr().on("click",(function(t){var r=t.target;dr=document.getElementsByClassName("custom_tooltip_"+e.id)[0],!r&&dr&&(dr.style.display="none")})),e.on("click",(function(t){!function(e,t){if("series"===t.componentType&&"custom"===t.componentSubType&&t.value&&t.value[2]){var r=e.convertToPixel("grid",[t.value[0],t.value[1]]);if(dr)dr.style.display="flex",dr.style.left=r[0]+20+"px",dr.style.top=r[1]-30+"px",ur(t.value[2],dr);else{var n=document.createElement("div");n.style.left=r[0]+20+"px",n.style.top=r[1]-30+"px",n.innerHTML=t.value[2],n.className="custom_tooltip_"+e.id;var o=document.querySelector("[_echarts_instance_="+e.id+"]");o&&(o.appendChild(n),ur(t.value[2],n))}}else dr&&(dr.style.display="none")}(e,t)}))},triggerLegendSelect:function(e,t){e.on("legendselectchanged",(function(r){var n=r.name,o=r.selected;!1===t&&function(e,t,r){var n=!0;for(var o in t)t.hasOwnProperty(o)&&(o===e?!0===t[o]&&(n=!1):!1===t[o]&&(n=!1));if(n)for(var a in t)t.hasOwnProperty(a)&&(a===e?r.dispatchAction({type:"legendSelect",name:a}):r.dispatchAction({type:"legendUnSelect",name:a}));else if(t[e])for(var i in t)t.hasOwnProperty(i)&&(i===e?r.dispatchAction({type:"legendSelect",name:i}):r.dispatchAction({type:"legendUnSelect",name:i}));else for(var l in t)t.hasOwnProperty(l)&&r.dispatchAction({type:"legendSelect",name:l})}(n,o,e)}))},triggerTooltipListener:function(e){var t=document.querySelector("[_echarts_instance_="+e.id+"]");t&&Me()&&(t.addEventListener("touchstart",(function(t){return pr(t,e,"showTip")})),t.addEventListener("touchmove",(function(t){return pr(t,e,"showTip")})),t.addEventListener("touchend",(function(t){return pr(t,e,"hideTip")})))},disposeTooltipListener:function(e){if(e&&e.id){var t=document.querySelector("[_echarts_instance_="+e.id+"]");t&&Me()&&(t.removeEventListener("touchstart",(function(t){return pr(t,e,"showTip")})),t.removeEventListener("touchmove",(function(t){return pr(t,e,"showTip")})),t.removeEventListener("touchend",(function(t){return pr(t,e,"hideTip")})))}}},hr={default:E(E({},cr),{},{color:["#5f78ef","#5AD8A6","#5D7092","#F6BD16","#E86452","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3","#7b68e3","#38ab30","#7b9ccc","#a3d714","#ca0255","#a09ae4","#c313c3","#e6a356","#19b9c8","#cbecc1","#CDDDFD","#CDF3E4","#CED4DE","#FCEBB9","#F8D0CB","#D3EEF9","#DECFEA","#FFE0C7","#BBDEDE","#FFE0ED"]}),light:E(E({},cr),{},{color:["#55ACEE","#4CDFC0","#FF9945","#FACF2A","#788CF0","#2DCA93","#FFC57F","#5F73F3","#F0938A","#68D9F0","#E1B13A","#AB9EDC","#71DB9E","#B99371","#57D4CF","#EE7A7A","#F7E16A","#409EFF","#E79734","#B2C9FF","#27D29C","#E0CD9E","#428CC1","#DCC510","#F2BCB5","#59ABFF","#7DC050","#A3E8E5"]}),retro:E(E({},cr),{},{color:["#5779a3","#e59244","#d1605d","#84b5b2","#6b9e58","#e8c960","#a77d9f","#f2a2a8","#967662","#b8b0ac","#9aafc8","#efbe8f","#e3a09e","#b5d3d1","#a6c59b","#f1dfa0","#cab1c5","#f7c7cb","#c0ada1","#d4d0cd"]}),dark:u({},cr,{color:["#55ACEE","#4CDFC0","#FF9945","#FACF2A","#788CF0","#2DCA93","#FFC57F","#5F73F3","#F0938A","#68D9F0","#E1B13A","#AB9EDC","#71DB9E","#B99371","#57D4CF","#EE7A7A","#F7E16A","#409EFF","#E79734","#B2C9FF","#27D29C","#E0CD9E","#428CC1","#DCC510","#F2BCB5","#59ABFF","#7DC050","#A3E8E5"],backgroundColor:"#222",legend:{inactiveColor:"#777",textStyle:{color:"#a8a8a8"}},categoryAxis:{axisLabel:{textStyle:{color:"#989898"}},axisLine:{lineStyle:{color:"#777"}},axisTick:{lineStyle:{color:"#777"}}},valueAxis:{splitLine:{lineStyle:{color:"#555"}},axisLabel:{textStyle:{color:"#989898"}}},tooltip:{extraCssText:"box-shadow: rgb(51, 51, 51) 0px 0px 10px; border-radius: 3px; line-height: 20px; padding: 10px 10px 6px",backgroundColor:"rgba(51, 51, 51, 0.95)",textStyle:{color:"#bbb"}}})},mr={grid:{top:15,left:"3%",right:"3%",bottom:28,containLabel:!0},categoryAxis:{axisLabel:{formatter:function(e){if(void 0===e&&(e=""),!e)return e;return e.length>20?e.substr(0,20)+"...":e}}}},vr={tooltip:{},legend:{type:"scroll"},xAxis:{type:"category"},yAxis:{type:"value"}};I('.rocketChart{position:relative;display:flex;flex-direction:column;font-weight:400;font-family:"PingFang SC, Arial, Helvetica, sans-serif"}.rocketChart *{box-sizing:border-box}.rocketChart .rocketChart-domInstance,.rocketChart .rocketChart-instance{flex:auto;width:100%;min-height:0}.rocketChart .rocketChart-domInstance div[class^=custom_tooltip],.rocketChart .rocketChart-instance div[class^=custom_tooltip]{position:absolute;font-size:12px;color:#666;display:flex;justify-content:center;align-items:center;overflow:hidden;text-align:center;padding:8px 12px 8px 17px;background-color:hsla(0,0%,100%,.95);border:1px solid #e8e8e8;border-radius:4px}.rocketChart .rocketChart-domInstance div[class^=custom_tooltip]:before,.rocketChart .rocketChart-instance div[class^=custom_tooltip]:before{content:"";display:block;position:absolute;left:0;top:0;width:5px;height:100%;background:#7389ef}.rocketChart .rocketChart-top{position:relative}.rocketChart .rocketChart-subTitle,.rocketChart .rocketChart-title{white-space:nowrap;width:100%;overflow:hidden;text-overflow:ellipsis}.rocketChart .rocketChart-subTitle{font-size:12px;color:#999}.rocketChart .rocketChart-toolBar{position:absolute;top:50%;right:10px;transform:translateY(-50%)}.rocketChart-dark{background:#222;color:#ccc}');var gr=i.unmountComponentAtNode,yr=i.render;for(var br in hr)l.registerTheme(br,hr[br]);var xr="_rocketchart-instance_",wr={},kr={},Cr=function(){function t(t){var r=this;this.disposed=!1,this.id="",this.chartPropsFromTypes={},this.datasetHandler=function(){return{}},this.plugins=[],this.resizeHandler=[],this.chartOptions={},this.onChangeType=function(e){var t=er(e),n=t.defaultChartProps,o=t.datasetHandler,a=t.resizeHandler,i=t.externalRender,l=r.chartProps.dom.querySelector(".rocketChart-instance"),c=r.chartProps.dom.querySelector(".rocketChart-domInstance");r.chartProps.type=e,r.isEChart?(gr(l),l.style.display="block",c.style.display="none",r.initEchart()):(r.disposeEchart(),c.style.display="block",l.style.display="none"),r.resizeHandler=a,r.chartPropsFromTypes=n,r.datasetHandler=o,r.externalRender=i},this.initEchart=function(){var e=r.chartProps,t=e.dom,n=e.opts,o=e.theme,a=void 0===o?"default":o,i=e.device,c=(e.plugins,a);"mobile"===i&&(c="string"==typeof a?u({},hr[a],mr):a),r.echart&&!r.echart.isDisposed()||(r.echart=l.init(t.getElementsByClassName("rocketChart-instance")[0],c,n),r.bindChartEvent(),r.plugins=or(r.chartProps.plugins,t,r,wr))},this.initPlugin=function(e){var t=r.chartProps.dom;r.plugins=or(e,t,r,wr)},this.bindChartEvent=function(){var e,t,n=null===(e=r.chartProps.datasetParams)||void 0===e?void 0:null===(t=e.$legend)||void 0===t?void 0:t.reverseSelect;fr.triggerCustomListener(r.echart),fr.triggerTooltipListener(r.echart),fr.triggerLegendSelect(r.echart,n)},this.renderComponent=function(){var t=S(A.mark((function t(n){var o;return A.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===n&&(n={}),o=Object.entries(n),t.next=4,o.forEach((function(t){var n=t[0],o=t[1],a=".rocketChart-"+n,i=r.chartProps.dom.querySelector(a),l=r.chartProps[n];if(!r.disposed&&i&&(l&&(e.isValidElement(l)?!e.isValidElement(o)&&gr(i):l._isVue&&l.$el?(l.$destroy(),l.$el.remove()):i.innerHTML=""),r.chartProps[n]=o,o)){if("string"==typeof o||o instanceof HTMLElement)return i.innerHTML="",void i.append(o);if(e.isValidElement(o))yr(o,i);else if(o._isVue){var c=document.createElement("div");return i.append(c),void o.$mount(c)}}}));case 4:r.resize();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getChartOptionsByData=function(e){void 0===e&&(e={target:[],source:[]});var t=W(e,r.chartProps.formatters),n=De(t);if(g(n.source,[]))return{dataset:{source:[]}};var o=r.chartProps.theme,a=void 0===o?"default":o,i={themeConfig:"string"==typeof a?hr[a]:a};return r.datasetHandler(n,u({},r.chartPropsFromTypes.datasetParams,r.chartProps.datasetParams),i)},this.getGlobalOption=function(e,t,n){if(!r.hasData(n))return{};r.chartProps.dom&&(r.chartProps.dom.style.backgroundColor=(null==t?void 0:t.$backgroundColor)||"");var o=ut(e,t,n,r.isDoubleY),a=[o.config];if(r.isEChart){var i=et.tooltipFormatter(e,u({},{$tooltip:o.$tooltip},t)),l=sr(e,null==t?void 0:t.$legend);a.push(i,l)}return u.apply(void 0,[{}].concat(a))},this.getLastOption=function(){var e=r.chartOptions,t=r.chartProps,n=t.data,o=t.datasetParams;if(!r.echart||!r.hasData(n))return{};var a=u({},lr(e,o,r.echart));u(r.chartOptions,a)},this.hasData=function(e){return!!(e&&e.source&&e.target&&e.source.length&&e.target.length)},this.getExternalRenderProps=function(){var e=r.chartProps,t=r.chartOptions,n=e.dom.querySelector(".rocketChart-domInstance");return{chartProps:e,chartOptions:t,container:n,context:r}},this.renderDomChart=function(){var t,n=r.externalRender,o=r.chartProps,a=o.dom,i=o.theme,l=o.type,c=o.datasetParams,s=o.data,u=o.device,d=o.option,p="string"==typeof i?null===(t=hr[i])||void 0===t?void 0:t.color:hr.default.color,f=a.querySelector(".rocketChart-domInstance"),h={theme:i,type:l,datasetParams:c,data:s,device:u,chartOptions:r.chartOptions,colors:p},m=null;switch(!0){case!!n:h=r.getExternalRenderProps(),m=n;break;case r.isTable:m=r.externalRender,h={tableProps:r.chartOptions.table,container:f,theme:i,device:u,type:r.chartProps.type};break;case r.isIndicator:m="indicator-basic"===l?qe:Xe;break;case r.isCard:m=$;break;case r.isFunnelColumn:m=nt;var v=r.chartProps.type.includes("funnel-hideSymbol");h.hideSymbol=v,h.option=E(E({},"mobile"===u?mr:{}),d)}var g=e.createElement(m,h);yr(g,f)},this.setOption=function(e){var t,n=e.option,o=e.notMerge,a=void 0!==o&&o,i=e.lazyUpdate,l=void 0!==i&&i,c=e.type,s=void 0===c?"":c,d=e.data,p=e.datasetParams,f=e.plugins,m=k(e,["option","notMerge","lazyUpdate","type","data","datasetParams","plugins"]);if(a?(r.chartProps.datasetParams=p,r.chartProps.option=n):r.chartProps=u({},r.chartProps,{datasetParams:p,option:n}),s&&r.onChangeType(s),Me()&&!(s.includes("pie")||s.includes("funnel")||s.includes("table")||s.includes("map"))&&(n=u(n,{tooltip:{triggerOn:"none"}})),d&&(r.chartProps.data=d),s||d||p){a=!0;var v=r.getChartOptionsByData(r.chartProps.data);r.chartOptions=u({},vr,r.chartPropsFromTypes.option,v,r.chartProps.option);var g=r.getGlobalOption(r.chartOptions,u({},r.chartPropsFromTypes.datasetParams,r.chartProps.datasetParams),r.chartProps.data);u(r.chartOptions,g,n)}else n&&(r.chartOptions=a?u({},vr,n):u(r.chartOptions,n));t=r.chartOptions,R.forEach((function(e){t.hasOwnProperty(e)&&delete t[e]})),s.includes("autoYAxis")&&r.chartOptions.yAxis&&(Array.isArray(r.chartOptions.yAxis)&&r.chartOptions.yAxis.find((function(e){return e.max}))&&r.chartOptions.yAxis.forEach((function(e){return delete e.scale})),h(r.chartOptions.yAxis)&&r.chartOptions.yAxis.max&&delete r.chartOptions.yAxis.scale),r.renderComponent(m),r.isEChart?(!function(e,t){void 0===t&&(t=400);var r=e.dataset,n=e.series;r&&n&&r.source&&r.source[0]&&(r.source.length-1)*(r.source[0].length-1)>=t&&(n.forEach((function(e){e.showSymbol=!1})),u(e,{tooltip:{trigger:"axis"}}))}(r.chartOptions,r.chartProps.maxSymbolCount),r.renderChart(a,l)):r.renderDomChart(),r.echart&&function(e,t){null!=e&&e.length||Object.entries(e).forEach((function(e){var r,n=e[0],o=e[1];o.setOption&&o.setOption(null==t?void 0:null===(r=t.find((function(e){return e.name===n})))||void 0===r?void 0:r.option)}))}(r.plugins,f)},this.renderChart=function(){var e=S(A.mark((function e(t,n){return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.chartOptions,r.getLastOption(),r.setCustomerColor(),!r.chartProps.type.includes("map-")){e.next=6;break}return e.next=6,r.loadMap();case 6:r.echart.setOption(r.chartOptions,t,n),r.echart.resize();case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),this.renderNoData=S(A.mark((function t(){var n,o,a,i,l,c;return A.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.chartProps,o=n.dom,a=n.datasetParams,i=null==a?void 0:a.empty,l=o.querySelector(".rocketChart-instance"),c=e.createElement(ot,{empty:i}),yr(c,l);case 5:case"end":return t.stop()}}),t)}))),this.setCustomerColor=function(){var e=r.chartOptions,t=e.customerColor,n=e.series;if(t&&n){var o=r.chartOptions.dataset.source.slice(1);Object.entries(t).forEach((function(e){var t=e[0],r=e[1],a=o.findIndex((function(e){return e[0]===t})),i=n[a];i&&(i.itemStyle=u({},i.itemStyle,{color:r}))}))}},this.loadMap=S(A.mark((function e(){var t,n,o,a,i,l,c,s,u;return A.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.chartProps.type.includes("map-")){e.next=2;break}return e.abrupt("return");case 2:return n=r.chartOptions.dataset,o=r.chartProps.datasetParams,i=(null==(a=void 0===o?{}:o)?void 0:null===(t=a.basic)||void 0===t?void 0:t.mapType)||a.mapType,l=n.source[0],r.echart.showLoading("default",{text:"地图加载中..."}),e.prev=7,e.next=10,nr(i);case 10:for(c=e.sent,s=function(e){var t=l[e],r=c.features.find((function(e){return e.properties.adcode===t}));r&&(l[e]=r.properties.name)},u=1;u<l.length;u++)s(u);case 13:return e.prev=13,r.echart.hideLoading(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[7,,13,16]])}))),this.createDataMaker=function(e){var t=e.position,n=void 0===t?[0,0]:t,o=e.text,a=void 0===o?"":o,i=e.point,l=void 0===i?{}:i,c=e.bottom,s=void 0!==c&&c,u=e.trigger,d=void 0===u?"always":u,p=r.chartOptions.series;if(p){var f=null==p?void 0:p.concat({type:"custom",name:"标注",zlevel:1,encode:{x:-1,y:1},renderItem:function(e,t){return G.renderDrawItem(t,a,l,s,d)},data:"click"===d?[[].concat(n,[a])]:[n]});r.setOption({option:{series:f}})}},this.updateData=function(e){void 0===e&&(e={target:[],source:[]}),r.setOption({data:e,option:{}})},this.mergePlugin=function(e){void 0===e&&(e={}),r.disposed||r.echart.setOption(e,!1)},this.disposeEchart=function(){r.echart&&(fr.disposeTooltipListener(r.echart),r.echart.dispose(),r.echart=null)},this.dispose=function(){if(!r.disposed){var e;(e=r.plugins)&&Object.values(e).forEach((function(e){e.dispose&&e.dispose()}));var t=r.chartProps.dom;gr(t.getElementsByClassName("rocketChart-domInstance")[0]),r.disposeEchart(),r.clearComponents(),t.removeAttribute(xr),t.classList.remove("rocketChart","rocketChart-dark"),r.disposed=!0,delete kr[r.id]}},this.clear=function(){var e;r.disposed||(r.clearComponents(),r.chartOptions.series=[],r.chartOptions.dataset=[],null===(e=r.echart)||void 0===e||e.clear())},this.getDataURL=function(){var e=r.chartProps.title;c(r.chartProps.dom).then((function(t){var r="string"==typeof e?e:+new Date,n=document.createElement("a");n.download=r+".jpeg",n.href=t.toDataURL(),n.click()}))},this.resize=function(t){var n=void 0===t?{}:t,o=n.width,a=n.height,i=r.externalRender;if(o&&(r.chartProps.dom.style.width=o+"px"),a&&(r.chartProps.dom.style.height=a+"px"),r.echart&&r.echart.resize(),i){var l=r.chartProps.dom.querySelector(".rocketChart-domInstance"),c=e.createElement(i,r.getExternalRenderProps());yr(c,l)}r.resizeHandler&&r.resizeHandler.forEach((function(e){e(r.echart,r.chartOptions,r.chartProps)}))},this.getOption=function(){var e=r.chartProps.type,t=r.chartOptions.table,n=r.echart&&r.echart.getOption();return d(E(E({type:e},n),{},{table:t}))},this.getDom=function(){return r.chartProps.dom},this.getWidth=function(){return r.chartProps.dom.offsetWidth},this.getHeight=function(){return r.chartProps.dom.offsetHeight},this.isDisposed=function(){return r.disposed};var n=t.device||(Me()?"mobile":"desktop");this.chartProps=E(E({},t),{},{device:n}),this.init()}var r=t.prototype;return r.init=function(){var e,t=this.chartProps,r=t.dom,n=t.type,o=t.option,a=void 0===o?{}:o,i=t.data,l=t.theme,c=void 0===l?"default":l,s=t.title,u=t.customComponent,d=t.footer,p=t.toolBar,f=t.plugins,h=t.subTitle,m=+new Date+"";r.setAttribute(xr,m);var v="dark"===c?["rocketChart","rocketChart-dark"]:["rocketChart"];(e=r.classList).add.apply(e,v),r.innerHTML='\n      <div class="rocketChart-top">\n        <div class="rocketChart-title"></div>\n        <div class="rocketChart-subTitle"></div>\n        <div class="rocketChart-toolBar"></div>\n      </div>\n      <div class="rocketChart-customComponent"></div>\n      <div class="rocketChart-instance"></div>\n      <div class="rocketChart-domInstance"></div>\n      <div class="rocketChart-footer"></div>\n    ',this.id=m,this.setOption({type:n,option:a,data:i,title:s,customComponent:u,footer:d,subTitle:h,toolBar:p,plugins:f}),kr[m]=this},r.clearComponents=function(){this.renderComponent({title:null,toolBar:null,customComponent:null,footer:null,subTitle:null})},O(t,[{key:"isDoubleY",get:function(){return this.chartProps.type.includes("doubleY")}},{key:"isTable",get:function(){return this.chartProps.type.includes("table")}},{key:"isIndicator",get:function(){return this.chartProps.type.startsWith("indicator")}},{key:"isFunnelColumn",get:function(){return this.chartProps.type.includes("funnel-column")}},{key:"isCard",get:function(){return this.chartProps.type.includes("card")}},{key:"isEChart",get:function(){return!(this.isTable||this.isIndicator||this.isFunnelColumn||this.isCard)}}]),t}();function Er(e){var t=e.getAttribute(xr);return t?kr[t]:null}var Ar={init:function(e){return Er(e.dom)||new Cr(e)},getInstanceByDom:Er,echarts:l,use:function(e){var t;"chart"===e.moduleType&&(t=e.types)&&Object.entries(t).forEach((function(e){var t=e[0],r=e[1];Xt[t]=r}))}};export default Ar;
//# sourceMappingURL=index.js.map
